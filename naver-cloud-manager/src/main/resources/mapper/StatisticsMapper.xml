<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.navercorp.pinpoint.manager.dao.SpanCountStatDao">

    <select id="selectOrganizationSpanCount" parameterType="SearchCondition" resultType="SpanCount">
        SELECT timestamp, count
        FROM span_stat_organization
        WHERE organization = #{organizationName} AND timestamp BETWEEN #{from} AND #{to}
    </select>

    <select id="selectApplicationSpanCount" parameterType="SearchCondition" resultType="SpanCount">
        SELECT timestamp, count
        FROM span_stat_application
        WHERE organization = #{organizationName} AND applicationId = #{applicationId} AND timestamp BETWEEN #{from} AND #{to}
    </select>

    <select id="selectAgentSpanCount" parameterType="SearchCondition" resultType="SpanCount">
        SELECT timestamp, count
        FROM span_stat_agent
        WHERE organization = #{organizationName} AND applicationId = #{applicationId} AND agentId = #{agentId} AND timestamp BETWEEN #{from} AND #{to}
    </select>
</mapper>
