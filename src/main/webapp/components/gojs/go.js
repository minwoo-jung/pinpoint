/*
 * GoJS™ v1.1.3 JavaScript Library for HTML Canvas Diagrams
 * Northwoods Software®, http://www.nwoods.com/
 *
 * Copyright © 1998-2013 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.1.3/doc/license.html.
 */
(function(window) { var f=void 0,h=!0,n=null,q=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}function ca(a){return function(){return a}}var da,ea={};
if(document.createElement("canvas").getContext===f)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.eF===h});
Object.freeze||(Object.freeze=function(a){a.eF=h});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
for(var fa=0,ga=["ms","moz","webkit","o"],ia=0;ia<ga.length&&!window.requestAnimationFrame;++ia)window.requestAnimationFrame=window[ga[ia]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ga[ia]+"CancelAnimationFrame"]||window[ga[ia]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(8,16-(b-fa)),d=window.setTimeout(function(){a(b+c)},c);fa=b+c;return d});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var u={gC:q,gK:q,MD:q,bD:q,jI:q,trace:aa(),YF:q,assert:q,HJ:n,XJ:aa(),ZJ:aa(),YJ:aa(),WJ:aa(),dK:aa(),$J:aa(),bK:aa(),aK:aa(),MJ:q,IL:q,DL:q,EL:q,sG:q,cK:aa()},u=n;ea.Debug=n;
var w={hx:{},QA:0,dF:{},yu:document.createElement("canvas").getContext("2d"),zu:"",py:[],pu:n,HA:[],ay:"ontouchstart"in window,CB:"ongesturestart"in window,CA:q,m:function(a){u&&u.YF&&alert(a);throw Error(a);},H:function(a,b){if(a.$a){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c+="  to value: "+b);w.m(c)}},i:function(a,b,c,d){a instanceof b||(c=w.Ah(c),d!==f&&(c+="."+d),w.ic(a,b,c))},k:function(a,b,c,d){typeof a!==b&&(c=w.Ah(c),d!==f&&(c+="."+d),w.ic(a,b,
c))},o:function(a,b,c){isFinite(a)||(b=w.Ah(b),c!==f&&(b+="."+c),w.m(b+" must be a real number and not NaN or Infinity: "+a))},jb:function(a,b,c,d){if(!(a instanceof ja)||a.me!==b)c=w.Ah(c),d!==f&&(c+="."+d),w.ic(a,"a constant of class "+w.Pk(b),c)},ic:function(a,b,c,d){b=w.Ah(b);c=w.Ah(c);d!==f&&(c+="."+d);w.m(c+" value is not an instance of "+b+": "+a)},ra:function(a,b,c,d){c=w.Ah(c);d!==f&&(c+="."+d);w.m(c+" is not in the range "+b+": "+a)},trace:function(a){window&&window.console&&window.console.log(a);
u&&u.jI&&w.m(a)},mb:function(a){return"object"===typeof a&&a!==n},isArray:function(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection},Hr:function(a,b,c){w.isArray(a)||w.ic(a,"Array or NodeList or HTMLCollection",b,c)},Sb:function(a){return a.length},Eb:function(a,b){return a[b]},bC:function(a,b,c){Array.isArray(a)?a[b]=c:w.m("Cannot replace an object in an HTMLCollection or NodeList at "+b)},Dy:function(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=
0;d<c;d++)if(a[d]===b)return d;return-1},ri:function(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):w.m("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},si:function(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):w.m("Cannot remove an object from an HTMLCollection or NodeList at "+b)},lA:1,jc:function(a){a.__gohashid=w.lA++},$r:function(a){var b=a.__gohashid;b===f&&(b=w.lA++,a.__gohashid=b);return b},ec:function(a){return a.__gohashid},g:function(a,
b,c){"name"!==b&&"length"!==b&&(a[b]=c)},P:function(a,b){b.tA=a;ea[a]=b},Da:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){w.k(a,"function","Util.defineProperty:classfunc");w.k(b,"object","Util.defineProperty:propobj");w.k(c,"function","Util.defineProperty:getter");w.k(d,"function","Util.defineProperty:setter");for(var g in b){b=b[g];c={get:c,set:d};if(e!==f)for(var i in e)c[i]=e[i];Object.defineProperty(a.prototype,
g,c);e=Object.getOwnPropertyDescriptor(a.prototype,g);b&&e&&Object.defineProperty(a.prototype,b,e);break}},u:function(a,b,c,d){w.k(a,"function","Util.defineReadOnlyProperty:classfunc");w.k(b,"object","Util.defineReadOnlyProperty:propobj");w.k(c,"function","Util.defineReadOnlyProperty:getter");for(var e in b){var g=b[e],b={get:c,set:function(a){w.m('The property "'+g+'" is read-only and cannot be set to '+a)}};if(d!==f)for(var i in d)b[i]=d[i];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,
e);g&&d&&Object.defineProperty(a.prototype,g,d);break}},Nd:function(a,b){for(var c in b)b[c]=h;a.prototype.gF=b},Ah:function(a){return a===f?"":"string"===typeof a?a:"function"===typeof a?w.Pk(a):a===n?"*":""},Pk:function(a){return"function"===typeof a?a.tA:"object"===typeof a&&a.constructor?a.constructor.tA:typeof a},s:function(a,b,c){w.k(a,"function","Util.defineEnumValue:classfunc");w.k(b,"string","Util.defineEnumValue:name");w.k(c,"number","Util.defineEnumValue:num");c=new ja(a,b,c);Object.freeze(c);
a[b]=c;var d=a.kA;d||(d=new la("string",ja),a.kA=d);d.add(b,c);return c},Vl:function(a,b){if(!b)return n;w.k(a,"function","Util.findEnumValueForName:classfunc");w.k(b,"string","Util.findEnumValueForName:name");var c=a.kA;return!c?n:c.qa(b)},gG:function(a,b,c,d){var e={},g;for(g in a){for(var i=q,j=1;j<arguments.length;j++)if(arguments[j]===g){i=h;break}i||(e[g]=a[g])}return e},Va:function(a,b){if(!a||!b)return n;var c=f;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),
c===n&&(c=f)):c=a[b]}catch(d){u&&w.trace("property get error: "+d.toString())}return c},Ka:function(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){u&&w.trace("property set error: "+d.toString())}},Qz:function(a,b){w.k(a,"object","Setting properties requires Objects as arguments");w.k(b,"object","Setting properties requires Objects as arguments");var c=u;c||(u=w);var d=a instanceof x,e;for(e in b){var g=a,i=e;if(d){var j=e.indexOf(".");
if(0<j){var k=e.substring(0,j),g=a.Je(k);g!==n?i=e.substr(j+1):w.m("Unable to find object named: "+k+" in panel "+a.toString()+" when trying to set property: "+e)}}"_"!==i[0]&&!w.hz(g,i)&&w.m('Trying to set undefined property "'+i+'" on object: '+g.toString());g[i]=b[e];"_"===i[0]&&(j=g.ll,j||(j=[],g.ll=j),j.push(i))}u=c;return a},hz:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;var d=c.gF;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return q},
hC:function(a,b){if(!w.mb(b)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=w.Va(b,d);e!==n&&("function"!==typeof e&&!w.hz(b,d))&&(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c},Zu:function(a,b){if(b&&!("number"===typeof b||"string"===typeof b||"boolean"===typeof b||"function"===typeof b))if(w.ec(b)!==
f){if(!w.vu.contains(b))if(w.vu.add(b),w.Wt.add(w.hC(a,b)),b instanceof z||b instanceof ma||b instanceof la)for(var c=b.l;c.next();)w.Zu(a+"["+c.key+"]",c.value);else for(c in b){var d=w.Va(b,c);if(!(d===f||d===n||!w.mb(d))&&"_ownProperties"!==c){if(b instanceof na){if("_lines"===c)continue}else if(b instanceof x){if("data"===c||"_data"===c)continue;if("itemArray"===c||"_itemArray"===c)continue}else if(!(b instanceof A))if(b instanceof pa){if("archetypeGroupData"===c||"_archetypeGroupData"===c)continue}else if(b instanceof
qa){if("archetypeLinkData"===c||"_archetypeLinkData"===c)continue;if("archetypeLabelNodeData"===c||"_archetypeLabelNodeData"===c)continue}else if(b instanceof ra){if("archetypeNodeData"===c||"_archetypeNodeData"===c)continue}else if(b instanceof B){if("nodeDataArray"===c||"_nodeDataArray"===c)continue;if("linkDataArray"===c||"_linkDataArray"===c||"_linkDataSet"===c)continue;if("_mapKeyNodeData"===c||"_delayedNodeReferences"===c)continue}w.Zu(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)w.Zu(a+
"["+c+"]",b[c]);else w.Wt.add(w.hC(a,b))},$F:function(a){w.vu===f?w.vu=new ma:w.vu.clear();w.Wt=new sa;w.Zu("",a);a=w.Wt.toString();w.Wt=n;return a},DH:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d=0,e,c=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,g="",i=0;i<a.length;i++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,g+=String.fromCharCode(a.charCodeAt(i)^b[(b[c]+b[d])%256]);return g},JG:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+
"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");return""===a?"0":a},Oa:function(a){return w.DH(w.JG(a))},Ms:n,Ay:"7da71ca0ad381e90",aG:"@COLOR1",bG:"@COLOR2"},ua=w,wa=document.createElement("canvas"),xa=wa.getContext("2d");xa[w.Oa("7ca11abfd022028846")]=w.Oa("398c3597c01238");
for(var Ca=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22472913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],Ea=1;5>Ea;Ea++)xa[w.Oa("7ca11abfd7330390")](w.Oa(Ca[Ea-1]),10,15*Ea+0);xa[w.Oa("7ca11abfd022028846")]=w.Oa("39f046ebb36e4b");for(Ea=1;5>Ea;Ea++)xa[w.Oa("7ca11abfd7330390")](w.Oa(Ca[Ea-1]),10,15*Ea+0);ua.Ms=wa;function ja(a,b,c){w.jc(this);this.sA=a;this.Bb=b;this.qF=c}
ja.prototype.toString=function(){return w.Pk(this.sA)+"."+this.Bb};w.u(ja,{me:"classType"},t("sA"));w.u(ja,{name:"name"},t("Bb"));w.u(ja,{value:"value"},t("qF"));function sa(){this.rA=[];this.pI=0;this.tI="  "}sa.prototype.toString=function(){return this.rA.join("")};sa.prototype.add=function(a){a&&this.rA.push(a)};function Ga(){}w.u(Ga,{l:"iterator"},function(){return this});Ga.prototype.reset=Ga.prototype.reset=aa();Ga.prototype.next=Ga.prototype.next=ca(q);Ga.prototype.first=Ga.prototype.zb=ca(n);
w.u(Ga,{count:"count"},ca(0));Ga.prototype.xg=aa();Ga.prototype.toString=ca("EmptyIterator");w.Ff=new Ga;function Ia(a){this.key=-1;this.value=a}w.Nd(Ia,{key:h,value:h});w.u(Ia,{l:"iterator"},function(){return this});Ia.prototype.reset=Ia.prototype.reset=function(){this.key=-1};Ia.prototype.next=Ia.prototype.next=function(){return-1===this.key?(this.key=0,h):q};Ia.prototype.first=Ia.prototype.zb=function(){this.key=0;return this.value};w.u(Ia,{count:"count"},ca(1));
Ia.prototype.xg=function(){this.value=n};Ia.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ja(a){this.cf=a;this.bn=n;this.reset()}w.Nd(Ja,{key:h,value:h});w.u(Ja,{l:"iterator"},function(){return this});w.g(Ja,"predicate",Ja.prototype.Pv);w.defineProperty(Ja,{Pv:"predicate"},t("bn"),ba("bn"));Ja.prototype.reset=Ja.prototype.reset=function(){var a=this.cf;a.fh=n;this.Ya=a.Jb;this.ea=-1};
Ja.prototype.next=Ja.prototype.next=function(){var a=this.cf;a.Jb!==this.Ya&&w.m("the List has been modified during iteration");var a=a.n,b=a.length,c=++this.ea,d=this.bn;if(d!==n)for(;c<b;){var e=a[c];if(d(e))return this.key=this.ea=c,this.value=e,h;c++}else{if(c<b)return this.key=c,this.value=a[c],h;this.xg()}return q};
Ja.prototype.first=Ja.prototype.zb=function(){var a=this.cf;this.Ya=a.Jb;this.ea=0;var a=a.n,b=a.length,c=this.bn;if(c!==n){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.ea=d,this.value=e;d++}return n}return 0<b?(e=a[0],this.key=0,this.value=e):n};w.u(Ja,{count:"count"},function(){var a=this.bn;if(a!==n){for(var b=0,c=this.cf.n,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.cf.n.length});Ja.prototype.xg=function(){this.key=-1;this.value=n;this.Ya=-1;this.bn=n;this.cf.fh=this};
Ja.prototype.toString=function(){return"ListIterator@"+this.ea+"/"+this.cf.count};function Ka(a){this.cf=a;this.reset()}w.Nd(Ka,{key:h,value:h});w.u(Ka,{l:"iterator"},function(){return this});Ka.prototype.reset=Ka.prototype.reset=function(){var a=this.cf;a.wx=n;this.Ya=a.Jb;this.ea=a.n.length};Ka.prototype.next=Ka.prototype.next=function(){var a=this.cf;a.Jb!==this.Ya&&w.m("the List has been modified during iteration");var b=--this.ea;if(0<=b)return this.key=b,this.value=a.n[b],h;this.xg();return q};
Ka.prototype.first=Ka.prototype.zb=function(){var a=this.cf;this.Ya=a.Jb;var b=a.n;this.ea=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):n};w.u(Ka,{count:"count"},function(){return this.cf.n.length});Ka.prototype.xg=function(){this.key=-1;this.value=n;this.Ya=-1;this.cf.wx=this};Ka.prototype.toString=function(){return"ListIteratorBackwards("+this.ea+"/"+this.cf.count+")"};
function z(a){w.jc(this);this.$a=q;this.n=[];this.Jb=0;this.wx=this.fh=n;a===f||a===n?this.S=n:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.S=a:w.ra(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.S=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:w.ra(a,"null, a primitive type name, or a class type","List constructor: type")}
w.P("List",z);z.prototype.sg=function(a){this.S!==n&&("string"===typeof this.S?(typeof a!==this.S||a===n)&&w.ic(a,this.S):a instanceof this.S||w.ic(a,this.S))};z.prototype.rd=function(){var a=this.Jb;a++;999999999<a&&(a=0);this.Jb=a};z.prototype.freeze=z.prototype.freeze=function(){this.$a=h;return this};z.prototype.thaw=z.prototype.Ia=function(){this.$a=q;return this};z.prototype.toString=function(){return"List("+w.Ah(this.S)+")#"+w.ec(this)};
z.prototype.add=z.prototype.add=function(a){a!==n&&(u&&this.sg(a),w.H(this,a),this.n.push(a),this.rd())};z.prototype.addAll=z.prototype.Wf=function(a){if(a===n)return this;w.H(this);var b=this.n;if(w.isArray(a))for(var c=w.Sb(a),d=0;d<c;d++){var e=w.Eb(a,d);u&&this.sg(e);b.push(e)}else for(a=a.l;a.next();)e=a.value,u&&this.sg(e),b.push(e);this.rd();return this};z.prototype.clear=z.prototype.clear=function(){w.H(this);this.n=[];this.rd()};
z.prototype.contains=z.prototype.contains=function(a){if(a===n)return q;u&&this.sg(a);return-1!==this.n.indexOf(a)};z.prototype.indexOf=z.prototype.indexOf=function(a){if(a===n)return-1;u&&this.sg(a);return this.n.indexOf(a)};z.prototype.elt=z.prototype.oa=function(a){u&&w.o(a,z,"elt:i");var b=this.n;(0>a||a>=b.length)&&w.ra(a,"0 <= i < length",z,"elt:i");return b[a]};
z.prototype.setElt=z.prototype.Xv=function(a,b){u&&(this.sg(b),w.o(a,z,"setElt:i"));var c=this.n;(0>a||a>=c.length)&&w.ra(a,"0 <= i < length",z,"setElt:i");w.H(this,a);c[a]=b};z.prototype.first=z.prototype.zb=function(){var a=this.n;return 0===a.length?n:a[0]};z.prototype.insertAt=z.prototype.yc=function(a,b){u&&(this.sg(b),w.o(a,z,"insertAt:i"));0>a&&w.ra(a,">= 0",z,"insertAt:i");w.H(this,a);var c=this.n;a>=c.length?c.push(b):c.splice(a,0,b);this.rd();return h};
z.prototype.remove=z.prototype.remove=function(a){if(a===n)return q;u&&this.sg(a);w.H(this,a);var b=this.n,a=b.indexOf(a);if(-1===a)return q;a===b.length-1?b.pop():b.splice(a,1);this.rd();return h};z.prototype.removeAt=z.prototype.Te=function(a){u&&w.o(a,z,"removeAt:i");var b=this.n;(0>a||a>=b.length)&&w.ra(a,"0 <= i < length",z,"removeAt:i");w.H(this,a);a===b.length-1?b.pop():b.splice(a,1);this.rd()};
z.prototype.removeRange=z.prototype.removeRange=function(a,b){u&&(w.o(a,z,"removeRange:from"),w.o(b,z,"removeRange:to"));var c=this.n;(0>a||a>=c.length)&&w.ra(a,"0 <= from < length",z,"elt:from");(0>b||b>=c.length)&&w.ra(b,"0 <= to < length",z,"elt:to");w.H(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.rd()};z.prototype.copy=z.prototype.copy=function(){for(var a=new z(this.S),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
z.prototype.toArray=z.prototype.qg=function(){for(var a=[],b=this.n,c=this.count,d=0;d<c;d++)a.push(b[d]);return a};z.prototype.toSet=z.prototype.hI=function(){for(var a=new ma(this.S),b=this.n,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};z.prototype.sort=z.prototype.sort=function(a){u&&w.k(a,"function",z,"sort:sortfunc");w.H(this);this.n.sort(a);this.rd();return this};
z.prototype.sortRange=z.prototype.Do=function(a,b,c){var d=this.n,e=d.length;b===f&&(b=0);c===f&&(c=e);u&&(w.k(a,"function",z,"sortRange:sortfunc"),w.o(b,z,"sortRange:from"),w.o(c,z,"sortRange:to"));w.H(this);var g=c-b;if(1>=g)return this;(0>b||b>=e-1)&&w.ra(b,"0 <= from < length",z,"sortRange:from");if(2===g)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.rd()),this;if(0===b)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.rd();return this};z.prototype.reverse=z.prototype.reverse=function(){w.H(this);this.n.reverse();this.rd();return this};w.u(z,{count:"count"},function(){return this.n.length});w.u(z,{length:"length"},function(){return this.n.length});w.u(z,{l:"iterator"},function(){if(0>=this.n.length)return w.Ff;var a=this.fh;return a!==n?(a.reset(),a):new Ja(this)});
w.u(z,{eo:"iteratorBackwards"},function(){if(0>=this.n.length)return w.Ff;var a=this.wx;return a!==n?(a.reset(),a):new Ka(this)});function La(a){this.V=a;this.reset()}w.Nd(La,{key:h,value:h});w.u(La,{l:"iterator"},function(){return this});La.prototype.reset=La.prototype.reset=function(){var a=this.V;a.fh=n;this.Ya=a.Jb;this.Gd=n};
La.prototype.next=La.prototype.next=function(){var a=this.V;a.Jb!==this.Ya&&w.m("the Set has been modified during iteration");var b=this.Gd,b=b===n?a.ge:b.fj;if(b!==n)return this.Gd=b,this.value=b.value,this.key=b.key,h;this.xg();return q};La.prototype.first=La.prototype.zb=function(){var a=this.V;this.Ya=a.Jb;a=a.ge;if(a!==n){this.Gd=a;var b=a.value;this.key=a.key;return this.value=b}return n};w.u(La,{count:"count"},function(){return this.V.ze});
La.prototype.xg=function(){this.value=n;this.Ya=-1;this.V.fh=this};La.prototype.toString=function(){return this.Gd!==n?"SetIterator@"+this.Gd.value:"SetIterator"};
function ma(a){w.jc(this);this.$a=q;a===f||a===n?this.S=n:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.S=a:w.ra(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.S=a===Object?"object":a===String?"string":a===Number?"number":a:w.ra(a,"null, a primitive type name, or a class type","Set constructor: type");this.Hc={};this.ze=0;this.fh=n;this.Jb=0;this.gh=this.ge=n}w.P("Set",ma);
ma.prototype.sg=function(a){this.S!==n&&("string"===typeof this.S?(typeof a!==this.S||a===n)&&w.ic(a,this.S):a instanceof this.S||w.ic(a,this.S))};ma.prototype.rd=function(){var a=this.Jb;a++;999999999<a&&(a=0);this.Jb=a};ma.prototype.freeze=ma.prototype.freeze=function(){this.$a=h;return this};ma.prototype.thaw=ma.prototype.Ia=function(){this.$a=q;return this};ma.prototype.toString=function(){return"Set("+w.Ah(this.S)+")#"+w.ec(this)};
ma.prototype.add=ma.prototype.add=function(a){if(a===n)return q;u&&this.sg(a);w.H(this,a);var b=a;w.mb(a)&&(b=w.$r(a));return this.Hc[b]===f?(this.ze++,a=new Ma(a,a),this.Hc[b]=a,b=this.gh,b===n?this.ge=a:(a.cn=b,b.fj=a),this.gh=a,this.rd(),h):q};ma.prototype.addAll=ma.prototype.Wf=function(a){if(a===n)return this;w.H(this);if(w.isArray(a))for(var b=w.Sb(a),c=0;c<b;c++)this.add(w.Eb(a,c));else for(a=a.l;a.next();)this.add(a.value);return this};
ma.prototype.contains=ma.prototype.contains=function(a){if(a===n)return q;u&&this.sg(a);var b=a;return w.mb(a)&&(b=w.ec(a),b===f)?q:this.Hc[b]!==f};ma.prototype.containsAll=ma.prototype.yJ=function(a){if(a===n)return h;for(a=a.l;a.next();)if(!this.contains(a.value))return q;return h};ma.prototype.containsAny=ma.prototype.zJ=function(a){if(a===n)return h;for(a=a.l;a.next();)if(this.contains(a.value))return h;return q};ma.prototype.first=ma.prototype.zb=function(){var a=this.ge;return a===n?n:a.value};
ma.prototype.remove=ma.prototype.remove=function(a){if(a===n)return q;u&&this.sg(a);w.H(this,a);var b=a;if(w.mb(a)&&(b=w.ec(a),b===f))return q;a=this.Hc[b];if(a===f)return q;var c=a.fj,d=a.cn;c!==n&&(c.cn=d);d!==n&&(d.fj=c);this.ge===a&&(this.ge=c);this.gh===a&&(this.gh=d);delete this.Hc[b];this.ze--;this.rd();return h};ma.prototype.removeAll=ma.prototype.OL=function(a){if(a===n)return this;w.H(this);for(a=a.l;a.next();)this.remove(a.value);return this};
ma.prototype.retainAll=ma.prototype.VL=function(a){if(a===n||0===this.count)return this;w.H(this);var b=new ma(this.S);b.Wf(a);for(var a=new z(this.S),c=this.l;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.l;b.next();)this.remove(b.value);return this};ma.prototype.clear=ma.prototype.clear=function(){w.H(this);this.Hc={};this.ze=0;this.gh=this.ge=n;this.rd()};ma.prototype.copy=ma.prototype.copy=function(){var a=new ma(this.S),b=this.Hc,c;for(c in b)a.add(b[c].value);return a};
ma.prototype.toArray=ma.prototype.qg=function(){var a=[],b=this.Hc,c;for(c in b)a.push(b[c].value);return a};ma.prototype.toList=ma.prototype.gI=function(){var a=new z(this.S),b=this.Hc,c;for(c in b)a.add(b[c]);return a};w.u(ma,{count:"count"},t("ze"));w.u(ma,{l:"iterator"},function(){if(0>=this.ze)return w.Ff;var a=this.fh;return a!==n?(a.reset(),a):new La(this)});function Oa(a){this.Sc=a;this.reset()}w.Nd(Oa,{key:h,value:h});w.u(Oa,{l:"iterator"},function(){return this});
Oa.prototype.reset=Oa.prototype.reset=function(){this.Ya=this.Sc.Jb;this.Gd=n};Oa.prototype.next=Oa.prototype.next=function(){var a=this.Sc;a.Jb!==this.Ya&&w.m("the Map has been modified during iteration");var b=this.Gd,b=b===n?a.ge:b.fj;if(b!==n)return this.Gd=b,this.value=b.key,h;this.xg();return q};Oa.prototype.first=Oa.prototype.zb=function(){var a=this.Sc;this.Ya=a.Jb;a=a.ge;if(a!==n){this.Gd=a;var b=a.value;this.key=a.key;return this.value=b}return n};w.u(Oa,{count:"count"},function(){return this.Sc.ze});
Oa.prototype.xg=function(){this.value=n;this.Ya=-1};Oa.prototype.toString=function(){return this.Gd!==n?"MapKeySetIterator@"+this.Gd.value:"MapKeySetIterator"};function Qa(a){w.jc(this);this.Sc=a}w.Da(Qa,ma);Qa.prototype.freeze=function(){return this};Qa.prototype.Ia=function(){return this};Qa.prototype.toString=function(){return"MapKeySet("+this.Sc.toString()+")"};Qa.prototype.add=Qa.prototype.add=function(){w.m("This Set is read-only: "+this.toString());return q};
Qa.prototype.contains=Qa.prototype.contains=function(a){return this.Sc.contains(a)};Qa.prototype.remove=Qa.prototype.remove=function(){w.m("This Set is read-only: "+this.toString());return q};Qa.prototype.clear=Qa.prototype.clear=function(){w.m("This Set is read-only: "+this.toString())};Qa.prototype.copy=Qa.prototype.copy=function(){return new Qa(this.Sc)};Qa.prototype.toSet=Qa.prototype.hI=function(){var a=new ma(this.Sc.S),b=this.Sc.Hc,c;for(c in b)a.add(b[c].key);return a};
Qa.prototype.toArray=Qa.prototype.qg=function(){var a=[],b=this.Sc.Hc,c;for(c in b)a.push(b[c].key);return a};Qa.prototype.toList=Qa.prototype.gI=function(){var a=new z(this.S),b=this.Sc.Hc,c;for(c in b)a.add(b[c].key);return a};w.u(Qa,{count:"count"},function(){return this.Sc.ze});w.u(Qa,{l:"iterator"},function(){return 0>=this.Sc.ze?w.Ff:new Oa(this.Sc)});function Ma(a,b){this.key=a;this.value=b;this.cn=this.fj=n}w.Nd(Ma,{key:h,value:h});
Ma.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Ra(a){this.Sc=a;this.reset()}w.Nd(Ra,{key:h,value:h});w.u(Ra,{l:"iterator"},function(){return this});Ra.prototype.reset=Ra.prototype.reset=function(){var a=this.Sc;a.fh=n;this.Ya=a.Jb;this.Gd=n};
Ra.prototype.next=Ra.prototype.next=function(){var a=this.Sc;a.Jb!==this.Ya&&w.m("the Map has been modified during iteration");var b=this.Gd,b=b===n?a.ge:b.fj;if(b!==n)return this.Gd=b,this.key=b.key,this.value=b.value,h;this.xg();return q};Ra.prototype.first=Ra.prototype.zb=function(){var a=this.Sc;this.Ya=a.Jb;a=a.ge;if(a!==n){this.Gd=a;var b=a.key;this.key=b;this.value=a.value;return b}return n};w.u(Ra,{count:"count"},function(){return this.Sc.ze});
Ra.prototype.xg=function(){this.value=this.key=n;this.Ya=-1;this.Sc.fh=this};Ra.prototype.toString=function(){return this.Gd!==n?"MapIterator@"+this.Gd:"MapIterator"};
function la(a,b){w.jc(this);this.$a=q;a===f||a===n?this.Yh=n:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.Yh=a:w.ra(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.Yh=a===Object?"object":a===String?"string":a===Number?"number":a:w.ra(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===n?this.qi=n:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||"function"===b?this.qi=
b:w.ra(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.qi=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:w.ra(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.Hc={};this.ze=0;this.fh=n;this.Jb=0;this.gh=this.ge=n}w.P("Map",la);
function Sa(a,b){a.Yh!==n&&("string"===typeof a.Yh?(typeof b!==a.Yh||b===n)&&w.ic(b,a.Yh):b instanceof a.Yh||w.ic(b,a.Yh))}la.prototype.rd=function(){var a=this.Jb;a++;999999999<a&&(a=0);this.Jb=a};la.prototype.freeze=la.prototype.freeze=function(){this.$a=h;return this};la.prototype.thaw=la.prototype.Ia=function(){this.$a=q;return this};la.prototype.toString=function(){return"Map("+w.Ah(this.Yh)+","+w.Ah(this.qi)+")#"+w.ec(this)};
la.prototype.add=la.prototype.add=function(a,b){u&&(Sa(this,a),this.qi!==n&&("string"===typeof this.qi?(typeof b!==this.qi||b===n)&&w.ic(b,this.qi):b instanceof this.qi||w.ic(b,this.qi)));w.H(this,a);var c=a;w.mb(a)&&(c=w.$r(a));var d=this.Hc[c];if(d===f)return this.ze++,d=new Ma(a,b),this.Hc[c]=d,c=this.gh,c===n?this.ge=d:(d.cn=c,c.fj=d),this.gh=d,this.rd(),h;d.value=b;return q};
la.prototype.addAll=la.prototype.Wf=function(a){if(a===n)return this;u&&w.i(a,la,la,"addAll:map");for(a=a.l;a.next();)this.add(a.key,a.value);return this};la.prototype.contains=la.prototype.contains=function(a){u&&Sa(this,a);var b=a;return w.mb(a)&&(b=w.ec(a),b===f)?q:this.Hc[b]!==f};la.prototype.getValue=la.prototype.qa=function(a){u&&Sa(this,a);var b=a;if(w.mb(a)&&(b=w.ec(a),b===f))return n;a=this.Hc[b];return a===f?n:a.value};
la.prototype.remove=la.prototype.remove=function(a){if(a===n)return q;u&&Sa(this,a);w.H(this,a);var b=a;if(w.mb(a)&&(b=w.ec(a),b===f))return q;a=this.Hc[b];if(a===f)return q;var c=a.fj,d=a.cn;c!==n&&(c.cn=d);d!==n&&(d.fj=c);this.ge===a&&(this.ge=c);this.gh===a&&(this.gh=d);delete this.Hc[b];this.ze--;this.rd();return h};la.prototype.clear=la.prototype.clear=function(){w.H(this);this.Hc={};this.ze=0;this.gh=this.ge=n;this.rd()};
la.prototype.copy=la.prototype.copy=function(){var a=new la(this.Yh,this.qi),b=this.Hc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};la.prototype.toArray=la.prototype.qg=function(){var a=[],b=this.Hc,c;for(c in b){var d=b[c];a.push(new Ma(d.key,d.value))}return a};la.prototype.toKeySet=la.prototype.Lj=function(){return new Qa(this)};w.u(la,{count:"count"},t("ze"));w.u(la,{l:"iterator"},function(){if(0>=this.count)return w.Ff;var a=this.fh;return a!==n?(a.reset(),a):new Ra(this)});
function F(a,b){a===f?this.y=this.x=0:"number"===typeof a&&"number"===typeof b?(this.x=a,this.y=b):w.m("Invalid arguments to Point constructor")}w.P("Point",F);w.Nd(F,{x:h,y:h});F.prototype.Xa=function(a){u&&w.i(a,F,F,"assign:p");this.x=a.x;this.y=a.y};F.prototype.V=function(a,b){this.x=a;this.y=b};F.prototype.setTo=F.prototype.Co=function(a,b){u&&(w.k(a,"number",F,"setTo:x"),w.k(b,"number",F,"setTo:y"));w.H(this);this.x=a;this.y=b;return this};
F.prototype.set=F.prototype.set=function(a){u&&w.i(a,F,F,"set:p");w.H(this);this.x=a.x;this.y=a.y;return this};F.prototype.copy=F.prototype.copy=function(){var a=new F;a.x=this.x;a.y=this.y;return a};F.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};F.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};F.prototype.freeze=function(){this.$a=h;return this};F.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};
F.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new F(c,e)}return new F};F.stringify=function(a){return a instanceof F?a.x.toString()+" "+a.y.toString():a.toString()};F.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};F.prototype.equals=F.prototype.I=function(a){return!(a instanceof F)?q:this.x===a.x&&this.y===a.y};
F.prototype.equalTo=F.prototype.az=function(a,b){return this.x===a&&this.y===b};F.prototype.Bj=function(a){return Ta(this.x,a.x)&&Ta(this.y,a.y)};F.prototype.zi=function(a){return Ua(this.x,a.x)&&Ua(this.y,a.y)};F.prototype.add=F.prototype.add=function(a){u&&w.i(a,F,F,"add:p");w.H(this);this.x+=a.x;this.y+=a.y;return this};F.prototype.subtract=F.prototype.Fs=function(a){u&&w.i(a,F,F,"subtract:p");w.H(this);this.x-=a.x;this.y-=a.y;return this};
F.prototype.offset=F.prototype.offset=function(a,b){u&&(w.o(a,F,"offset:dx"),w.o(b,F,"offset:dy"));w.H(this);this.x+=a;this.y+=b;return this};F.prototype.rotate=F.prototype.rotate=function(a){u&&w.o(a,F,"rotate:angle");w.H(this);if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d);this.x=a*b-d*c;this.y=d*b+a*c;return this};
F.prototype.scale=F.prototype.scale=function(a,b){u&&(w.o(a,F,"scale:sx"),w.o(b,F,"scale:sy"));this.x*=a;this.y*=b;return this};F.prototype.distanceSquaredPoint=F.prototype.Sl=function(a){u&&w.i(a,F,F,"distanceSquaredPoint:p");var b=a.x-this.x,a=a.y-this.y;return b*b+a*a};F.prototype.distanceSquared=F.prototype.NJ=function(a,b){u&&(w.o(a,F,"distanceSquared:px"),w.o(b,F,"distanceSquared:py"));var c=a-this.x,d=b-this.y;return c*c+d*d};
F.prototype.normalize=F.prototype.normalize=function(){w.H(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};F.prototype.directionPoint=F.prototype.vi=function(a){u&&w.i(a,F,F,"directionPoint:p");return Va(a.x-this.x,a.y-this.y)};F.prototype.direction=F.prototype.direction=function(a,b){u&&(w.o(a,F,"direction:px"),w.o(b,F,"direction:py"));return Va(a-this.x,b-this.y)};
function Va(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}F.prototype.setRectSpot=F.prototype.Bo=function(a,b){u&&(w.i(a,G,F,"setRectSpot:r"),w.i(b,H,F,"setRectSpot:spot"));w.H(this);this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};
F.prototype.setSpot=F.prototype.im=function(a,b,c,d,e){u&&(w.o(a,F,"setSpot:x"),w.o(b,F,"setSpot:y"),w.o(c,F,"setSpot:w"),w.o(d,F,"setSpot:h"),(0>c||0>d)&&w.m("Point.setSpot:Width and height cannot be negative"),w.i(e,H,F,"setSpot:spot"));w.H(this);this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};F.prototype.transform=function(a){u&&w.i(a,Wa,F,"transform:t");a.Ta(this);return this};function Za(a,b){u&&w.i(b,Wa,F,"transformInverted:t");b.Di(a);return a}var $a;
F.distanceLineSegmentSquared=$a=function(a,b,c,d,e,g){u&&(w.o(a,F,"distanceLineSegmentSquared:px"),w.o(b,F,"distanceLineSegmentSquared:py"),w.o(c,F,"distanceLineSegmentSquared:ax"),w.o(d,F,"distanceLineSegmentSquared:ay"),w.o(e,F,"distanceLineSegmentSquared:bx"),w.o(g,F,"distanceLineSegmentSquared:by"));var i=e-c,j=g-d,k=i*i+j*j,c=c-a,d=d-b,l=-c*i-d*j;if(0>=l||l>=k)return i=e-a,j=g-b,Math.min(c*c+d*d,i*i+j*j);a=i*d-j*c;return a*a/k};
F.distanceSquared=function(a,b,c,d){u&&(w.o(a,F,"distanceSquared:px"),w.o(b,F,"distanceSquared:py"),w.o(c,F,"distanceSquared:qx"),w.o(d,F,"distanceSquared:qy"));a=c-a;b=d-b;return a*a+b*b};var ab;
F.direction=ab=function(a,b,c,d){u&&(w.o(a,F,"direction:px"),w.o(b,F,"direction:py"),w.o(c,F,"direction:qx"),w.o(d,F,"direction:qy"));a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};F.prototype.isReal=F.prototype.T=function(){return isFinite(this.x)&&isFinite(this.y)};
function bb(a,b){a===f?this.height=this.width=0:"number"===typeof a&&(0<=a||isNaN(a))&&"number"===typeof b&&(0<=b||isNaN(b))?(this.width=a,this.height=b):w.m("Invalid arguments to Size constructor")}w.P("Size",bb);w.Nd(bb,{width:h,height:h});bb.prototype.Xa=function(a){u&&w.i(a,bb,bb,"assign:s");this.width=a.width;this.height=a.height};bb.prototype.V=function(a,b){this.width=a;this.height=b};
bb.prototype.setTo=bb.prototype.Co=function(a,b){u&&(w.k(a,"number",bb,"setTo:w"),w.k(b,"number",bb,"setTo:h"));0>a&&w.ra(a,">= 0",bb,"setTo:w");0>b&&w.ra(b,">= 0",bb,"setTo:h");w.H(this);this.width=a;this.height=b;return this};bb.prototype.set=bb.prototype.set=function(a){u&&w.i(a,bb,bb,"set:s");w.H(this);this.width=a.width;this.height=a.height;return this};bb.prototype.copy=bb.prototype.copy=function(){var a=new bb;a.width=this.width;a.height=this.height;return a};
bb.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};bb.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};bb.prototype.freeze=function(){this.$a=h;return this};bb.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};
bb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new bb(c,e)}return new bb};bb.stringify=function(a){return a instanceof bb?a.width.toString()+" "+a.height.toString():a.toString()};bb.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
bb.prototype.equals=bb.prototype.I=function(a){return!(a instanceof bb)?q:this.width===a.width&&this.height===a.height};bb.prototype.equalTo=bb.prototype.az=function(a,b){return this.width===a&&this.height===b};bb.prototype.Bj=function(a){return Ta(this.width,a.width)&&Ta(this.height,a.height)};bb.prototype.zi=function(a){return Ua(this.width,a.width)&&Ua(this.height,a.height)};bb.prototype.isReal=bb.prototype.T=function(){return isFinite(this.width)&&isFinite(this.height)};
function G(a,b,c,d){a===f?this.height=this.width=this.y=this.x=0:a instanceof F?b instanceof F?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof bb?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):w.m("Incorrect arguments supplied"):!u||"number"===typeof a&&"number"===typeof b&&"number"===typeof c&&(0<=c||isNaN(c))&&"number"===typeof d&&(0<=d||isNaN(d))?(this.x=a,this.y=b,this.width=c,this.height=d):w.m("Invalid arguments to Rect constructor")}
w.P("Rect",G);w.Nd(G,{x:h,y:h,width:h,height:h});G.prototype.Xa=function(a){u&&w.i(a,G,G,"assign:r");this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};G.prototype.V=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};function db(a,b,c){a.width=b;a.height=c}
G.prototype.setTo=G.prototype.Co=function(a,b,c,d){u&&(w.k(a,"number",G,"setTo:x"),w.k(b,"number",G,"setTo:y"),w.k(c,"number",G,"setTo:w"),w.k(d,"number",G,"setTo:h"));0>c&&w.ra(c,">= 0",G,"setTo:w");0>d&&w.ra(d,">= 0",G,"setTo:h");w.H(this);this.x=a;this.y=b;this.width=c;this.height=d;return this};G.prototype.set=G.prototype.set=function(a){u&&w.i(a,G,G,"set:r");w.H(this);this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};
G.prototype.setPoint=G.prototype.J=function(a){u&&w.i(a,F,G,"setPoint:p");w.H(this);this.x=a.x;this.y=a.y;return this};G.prototype.setSize=G.prototype.TH=function(a){u&&w.i(a,bb,G,"setSize:s");w.H(this);this.width=a.width;this.height=a.height;return this};G.prototype.copy=G.prototype.copy=function(){var a=new G;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};G.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};
G.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};G.prototype.freeze=function(){this.$a=h;return this};G.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};
G.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new G(c,e,g,i)}return new G};G.stringify=function(a){return a instanceof G?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
G.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};G.prototype.equals=G.prototype.I=function(a){return!(a instanceof G)?q:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};G.prototype.equalTo=G.prototype.az=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};G.prototype.Bj=function(a){return Ta(this.x,a.x)&&Ta(this.y,a.y)&&Ta(this.width,a.width)&&Ta(this.height,a.height)};
G.prototype.zi=function(a){return Ua(this.x,a.x)&&Ua(this.y,a.y)&&Ua(this.width,a.width)&&Ua(this.height,a.height)};G.prototype.containsPoint=G.prototype.ua=function(a){u&&w.i(a,F,G,"containsPoint:p");return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};G.prototype.containsRect=G.prototype.Ol=function(a){u&&w.i(a,G,G,"containsRect:r");return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
G.prototype.contains=G.prototype.contains=function(a,b,c,d){u?(w.o(a,G,"contains:x"),w.o(b,G,"contains:y"),c===f?c=0:w.o(c,G,"contains:w"),d===f?d=0:w.o(d,G,"contains:h"),(0>c||0>d)&&w.m("Rect.contains:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};G.prototype.reset=function(){w.H(this);this.height=this.width=this.y=this.x=0};
G.prototype.offset=G.prototype.offset=function(a,b){u&&(w.o(a,G,"offset:dx"),w.o(b,G,"offset:dy"));w.H(this);this.x+=a;this.y+=b;return this};G.prototype.inflate=G.prototype.Ng=function(a,b){u&&(w.o(a,G,"inflate:w"),w.o(b,G,"inflate:h"));return fb(this,b,a,b,a)};G.prototype.addMargin=G.prototype.zr=function(a){u&&w.i(a,hb,G,"addMargin:m");return fb(this,a.top,a.right,a.bottom,a.left)};
G.prototype.subtractMargin=G.prototype.bI=function(a){u&&w.i(a,hb,G,"subtractMargin:m");return fb(this,-a.top,-a.right,-a.bottom,-a.left)};G.prototype.grow=G.prototype.OK=function(a,b,c,d){u&&(w.o(a,G,"grow:t"),w.o(b,G,"grow:r"),w.o(c,G,"grow:b"),w.o(d,G,"grow:l"));return fb(this,a,b,c,d)};function fb(a,b,c,d,e){w.H(a);var g=a.width;c+e<=-g?(a.x+=g/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}
G.prototype.intersectRect=G.prototype.aL=function(a){u&&w.i(a,G,G,"intersectRect:r");return ib(this,a.x,a.y,a.width,a.height)};G.prototype.intersect=G.prototype.$K=function(a,b,c,d){u&&(w.o(a,G,"intersect:x"),w.o(b,G,"intersect:y"),w.o(c,G,"intersect:w"),w.o(d,G,"intersect:h"),(0>c||0>d)&&w.m("Rect.intersect:Width and height cannot be negative"));return ib(this,a,b,c,d)};
function ib(a,b,c,d,e){w.H(a);var g=Math.max(a.x,b),i=Math.max(a.y,c),b=Math.min(a.x+a.width,b+d),c=Math.min(a.y+a.height,c+e);a.x=g;a.y=i;a.width=Math.max(0,b-g);a.height=Math.max(0,c-i);return a}G.prototype.intersectsRect=G.prototype.Me=function(a){u&&w.i(a,G,G,"intersectsRect:r");return this.PG(a.x,a.y,a.width,a.height)};
G.prototype.intersects=G.prototype.PG=function(a,b,c,d){u&&(w.o(a,G,"intersects:x"),w.o(b,G,"intersects:y"),w.o(a,G,"intersects:w"),w.o(b,G,"intersects:h"),(0>c||0>d)&&w.m("Rect.intersects:Width and height cannot be negative"));var e=this.width,g=this.x;if(Infinity!==e&&Infinity!==c&&(e+=g,c+=a,isNaN(c)||isNaN(e)||g>c||a>e))return q;a=this.height;e=this.y;return Infinity!==a&&Infinity!==d&&(a+=e,d+=b,isNaN(d)||isNaN(a)||e>d||b>a)?q:h};
G.prototype.unionPoint=G.prototype.dw=function(a){u&&w.i(a,F,G,"unionPoint:p");return this.Xb(a.x,a.y,0,0)};G.prototype.unionRect=G.prototype.Ii=function(a){u&&w.i(a,G,G,"unionRect:r");return this.Xb(a.x,a.y,a.width,a.height)};
G.prototype.union=G.prototype.pM=function(a,b,c,d){w.H(this);u?(w.o(a,G,"union:x"),w.o(b,G,"union:y"),c===f?c=0:w.o(c,G,"union:w"),d===f?d=0:w.o(d,G,"union:h"),(0>c||0>d)&&w.m("Rect.union:Width and height cannot be negative")):(c===f&&(c=0),d===f&&(d=0));return this.Xb(a,b,c,d)};G.prototype.Xb=function(a,b,c,d){var e=Math.min(this.x,a),g=Math.min(this.y,b),a=Math.max(this.x+this.width,a+c),b=Math.max(this.y+this.height,b+d);this.x=e;this.y=g;this.width=a-e;this.height=b-g;return this};
G.prototype.setSpot=G.prototype.im=function(a,b,c){u&&(w.o(a,G,"setSpot:x"),w.o(b,G,"setSpot:y"),w.i(c,H,G,"setSpot:spot"));w.H(this);this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var jb;
G.contains=jb=function(a,b,c,d,e,g,i,j){u?(w.o(a,G,"contains:rx"),w.o(b,G,"contains:ry"),w.o(c,G,"contains:rw"),w.o(d,G,"contains:rh"),w.o(e,G,"contains:x"),w.o(g,G,"contains:y"),i===f?i=0:w.o(i,G,"contains:w"),j===f?j=0:w.o(j,G,"contains:h"),(0>c||0>d||0>i||0>j)&&w.m("Rect.contains:Width and height cannot be negative")):(i===f&&(i=0),j===f&&(j=0));return a<=e&&e+i<=a+c&&b<=g&&g+j<=b+d};
G.intersects=function(a,b,c,d,e,g,i,j){u&&(w.o(a,G,"intersects:rx"),w.o(b,G,"intersects:ry"),w.o(c,G,"intersects:rw"),w.o(d,G,"intersects:rh"),w.o(e,G,"intersects:x"),w.o(g,G,"intersects:y"),w.o(i,G,"intersects:w"),w.o(j,G,"intersects:h"),(0>c||0>d||0>i||0>j)&&w.m("Rect.intersects:Width and height cannot be negative"));c+=a;i+=e;if(a>i||e>c)return q;a=d+b;j+=g;return b>j||g>a?q:h};w.g(G,"left",G.prototype.left);
w.defineProperty(G,{left:"left"},t("x"),function(a){w.H(this,a);u&&w.k(a,"number",G,"left");this.x=a});w.g(G,"top",G.prototype.top);w.defineProperty(G,{top:"top"},t("y"),function(a){w.H(this,a);u&&w.k(a,"number",G,"top");this.y=a});w.g(G,"right",G.prototype.right);w.defineProperty(G,{right:"right"},function(){return this.x+this.width},function(a){w.H(this,a);u&&w.o(a,G,"right");this.x+=a-(this.x+this.width)});w.g(G,"bottom",G.prototype.bottom);
w.defineProperty(G,{bottom:"bottom"},function(){return this.y+this.height},function(a){w.H(this,a);u&&w.o(a,G,"top");this.y+=a-(this.y+this.height)});w.g(G,"position",G.prototype.position);w.defineProperty(G,{position:"position"},function(){return new F(this.x,this.y)},function(a){w.H(this,a);u&&w.i(a,F,G,"position");this.x=a.x;this.y=a.y});w.g(G,"size",G.prototype.size);
w.defineProperty(G,{size:"size"},function(){return new bb(this.width,this.height)},function(a){w.H(this,a);u&&w.i(a,bb,G,"size");this.width=a.width;this.height=a.height});w.g(G,"center",G.prototype.Yu);w.defineProperty(G,{Yu:"center"},function(){return new F(this.x+this.width/2,this.y+this.height/2)},function(a){w.H(this,a);u&&w.i(a,F,G,"center");this.x=a.x-this.width/2;this.y=a.y-this.height/2});w.g(G,"centerX",G.prototype.pa);
w.defineProperty(G,{pa:"centerX"},function(){return this.x+this.width/2},function(a){w.H(this,a);u&&w.o(a,G,"centerX");this.x=a-this.width/2});w.g(G,"centerY",G.prototype.ta);w.defineProperty(G,{ta:"centerY"},function(){return this.y+this.height/2},function(a){w.H(this,a);u&&w.o(a,G,"centerY");this.y=a-this.height/2});G.prototype.isReal=G.prototype.T=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};
G.prototype.isEmpty=G.prototype.cL=function(){return 0===this.width&&0===this.height};function hb(a,b,c,d){a===f?this.left=this.bottom=this.right=this.top=0:b===f?this.left=this.bottom=this.right=this.top=a:c===f?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):d!==f?(this.top=a,this.right=b,this.bottom=c,this.left=d):w.m("Invalid arguments to Margin constructor")}w.P("Margin",hb);w.Nd(hb,{top:h,right:h,bottom:h,left:h});
hb.prototype.Xa=function(a){u&&w.i(a,hb,hb,"assign:m");this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};hb.prototype.setTo=hb.prototype.Co=function(a,b,c,d){u&&(w.k(a,"number",hb,"setTo:t"),w.k(b,"number",hb,"setTo:r"),w.k(c,"number",hb,"setTo:b"),w.k(d,"number",hb,"setTo:l"));w.H(this);this.top=a;this.right=b;this.bottom=c;this.left=d;return this};
hb.prototype.set=hb.prototype.set=function(a){u&&w.i(a,hb,hb,"assign:m");w.H(this);this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};hb.prototype.copy=hb.prototype.copy=function(){var a=new hb;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};hb.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};hb.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};
hb.prototype.freeze=function(){this.$a=h;return this};hb.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};hb.parse=function(a){if("string"===typeof a){for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new hb(c,e,g,i)}return new hb};
hb.stringify=function(a){return a instanceof hb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};hb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};hb.prototype.equals=hb.prototype.I=function(a){return!(a instanceof hb)?q:this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left};
hb.prototype.equalTo=hb.prototype.az=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};hb.prototype.Bj=function(a){return Ta(this.top,a.top)&&Ta(this.right,a.right)&&Ta(this.bottom,a.bottom)&&Ta(this.left,a.left)};hb.prototype.zi=function(a){return Ua(this.top,a.top)&&Ua(this.right,a.right)&&Ua(this.bottom,a.bottom)&&Ua(this.left,a.left)};hb.prototype.isReal=hb.prototype.T=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};
function Wa(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}w.Nd(Wa,{m11:h,m12:h,m21:h,m22:h,dx:h,dy:h});Wa.prototype.set=Wa.prototype.set=function(a){u&&w.i(a,Wa,Wa,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};Wa.prototype.copy=Wa.prototype.copy=function(){var a=new Wa;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};
Wa.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};Wa.prototype.equals=Wa.prototype.I=function(a){return!(a instanceof Wa)?q:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy};Wa.prototype.reset=Wa.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0};
Wa.prototype.multiply=Wa.prototype.multiply=function(a){u&&w.i(a,Wa,Wa,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,g=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g;return this};
Wa.prototype.multiplyInverted=Wa.prototype.mH=function(a){u&&w.i(a,Wa,Wa,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,i=b*(a.m21*a.dy-a.m22*a.dx),j=b*(a.m12*a.dx-a.m11*a.dy),a=this.m12*c+this.m22*d,b=this.m11*e+this.m21*g,e=this.m12*e+this.m22*g,g=this.m11*i+this.m21*j+this.dx,i=this.m12*i+this.m22*j+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=g;this.dy=i;return this};
Wa.prototype.invert=Wa.prototype.kD=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),g=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=g};
Wa.prototype.rotate=Wa.prototype.rotate=function(a,b,c){u&&(w.o(a,Wa,"rotate:angle"),w.o(b,Wa,"rotate:rx"),w.o(c,Wa,"rotate:ry"));this.translate(b,c);var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,i=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=i;this.translate(-b,-c)};
Wa.prototype.translate=Wa.prototype.translate=function(a,b){u&&(w.o(a,Wa,"translate:x"),w.o(b,Wa,"translate:y"));this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b};Wa.prototype.scale=Wa.prototype.scale=function(a,b){b===f&&(b=a);u&&(w.o(a,Wa,"translate:sx"),w.o(b,Wa,"translate:sy"));this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b};
Wa.prototype.transformPoint=Wa.prototype.Ta=function(a){u&&w.i(a,F,Wa,"transformPoint:p");var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.dx;a.y=b*this.m12+c*this.m22+this.dy;return a};Wa.prototype.invertedTransformPoint=Wa.prototype.Di=function(a){u&&w.i(a,F,Wa,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),g=a.x,i=a.y;a.x=g*this.m22*b+i*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.y=g*c+i*d+e;return a};
Wa.prototype.transformRect=Wa.prototype.LE=function(a){u&&w.i(a,G,Wa,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,e=c+a.height,g=this.m11,i=this.m12,j=this.m21,k=this.m22,l=this.dx,m=this.dy,p=b*g+c*j+l,r=b*i+c*k+m,s=d*g+c*j+l,c=d*i+c*k+m,v=b*g+e*j+l,b=b*i+e*k+m,g=d*g+e*j+l,d=d*i+e*k+m,e=p,i=r,p=Math.min(p,s),e=Math.max(e,s),i=Math.min(i,c),r=Math.max(r,c),p=Math.min(p,v),e=Math.max(e,v),i=Math.min(i,b),r=Math.max(r,b),p=Math.min(p,g),e=Math.max(e,g),i=Math.min(i,d),r=Math.max(r,d);a.x=p;a.y=
i;a.width=e-p;a.height=r-i};function kb(a,b){return new F(b.x*a.m11+b.y*a.m21+a.dx,b.x*a.m12+b.y*a.m22+a.dy)}Wa.prototype.isIdentity=Wa.prototype.ds=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};function H(a,b,c,d){a===f?this.offsetY=this.offsetX=this.y=this.x=0:(b===f&&(b=0),c===f&&(c=0),d===f&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}w.P("Spot",H);w.Nd(H,{x:h,y:h,offsetX:h,offsetY:h});
H.prototype.Xa=function(a){u&&w.i(a,H,H,"assign:s");this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};H.prototype.setTo=H.prototype.Co=function(a,b,c,d){u&&(mb(a,"setTo:x"),mb(b,"setTo:y"),ob(c,"setTo:offx"),ob(d,"setTo:offy"));w.H(this);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};H.prototype.set=H.prototype.set=function(a){u&&w.i(a,H,H,"set:s");w.H(this);this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};
H.prototype.copy=H.prototype.copy=function(){var a=new H;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};H.prototype.Za=function(){this.$a=h;Object.freeze(this);return this};H.prototype.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};H.prototype.freeze=function(){this.$a=h;return this};H.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;return this};function pb(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}
function mb(a,b){(isNaN(a)||1<a||0>a)&&w.ra(a,"0 <= "+b+" <= 1",H,b)}function ob(a,b){(isNaN(a)||Infinity===a||-Infinity===a)&&w.ra(a,"real number, not NaN or Infinity",H,b)}var qb;
H.parse=qb=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return w.NONE;if("TopLeft"===a)return w.Aw;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return w.Ko;if("TopRight"===a)return w.Cw;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return w.Io;if("Center"===a)return w.qw;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return w.Jo;if("BottomLeft"===a)return w.lw;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return w.Ho;if("BottomRight"===a)return w.nw;if("TopSide"===
a)return w.Ew;if("LeftSide"===a)return w.tw;if("RightSide"===a)return w.yw;if("BottomSide"===a)return w.pw;if("TopBottomSides"===a)return w.zw;if("LeftRightSides"===a)return w.sw;if("TopLeftSides"===a)return w.Bw;if("TopRightSides"===a)return w.Dw;if("BottomLeftSides"===a)return w.mw;if("BottomRightSides"===a)return w.ow;if("NotTopSide"===a)return w.xw;if("NotLeftSide"===a)return w.vw;if("NotRightSide"===a)return w.ww;if("NotBottomSide"===a)return w.uw;if("AllSides"===a)return w.kw;if("Default"===
a)return w.rw;for(var a=a.split(" "),b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;""===a[b];)b++;(d=a[b++])&&(i=parseFloat(d));return new H(c,e,g,i)}return new H};H.stringify=function(a){return a instanceof H?sb(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
H.prototype.toString=function(){return sb(this)?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.I(w.NONE)?"None":this.I(w.Aw)?"TopLeft":this.I(w.Ko)?"Top":this.I(w.Cw)?"TopRight":this.I(w.Io)?"Left":this.I(w.qw)?"Center":this.I(w.Jo)?"Right":this.I(w.lw)?"BottomLeft":this.I(w.Ho)?"Bottom":this.I(w.nw)?"BottomRight":this.I(w.Ew)?"TopSide":this.I(w.tw)?"LeftSide":this.I(w.yw)?"RightSide":this.I(w.pw)?"BottomSide":
this.I(w.zw)?"TopBottomSides":this.I(w.sw)?"LeftRightSides":this.I(w.Bw)?"TopLeftSides":this.I(w.Dw)?"TopRightSides":this.I(w.mw)?"BottomLeftSides":this.I(w.ow)?"BottomRightSides":this.I(w.xw)?"NotTopSide":this.I(w.vw)?"NotLeftSide":this.I(w.ww)?"NotRightSide":this.I(w.uw)?"NotBottomSide":this.I(w.kw)?"AllSides":this.I(w.rw)?"Default":"None"};
H.prototype.equals=H.prototype.I=function(a){return!(a instanceof H)?q:(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY};H.prototype.opposite=H.prototype.CL=function(){return new H(0.5-(this.x-0.5),0.5-(this.y-0.5),-this.offsetX,-this.offsetY)};H.prototype.includesSide=H.prototype.TK=function(a){if(!tb(this)||!tb(a))return q;a=a.offsetY;return(this.offsetY&a)===a};
function sb(a){return!isNaN(a.x)&&!isNaN(a.y)}function yb(a){return isNaN(a.x)||isNaN(a.y)}function tb(a){return yb(a)&&1===a.offsetX&&0!==a.offsetY}function Cb(a){return isNaN(a.x)&&isNaN(a.y)&&-1===a.offsetX&&0===a.offsetY}w.ld=1;w.Qc=2;w.Zc=4;w.Yc=8;w.NONE=pb(new H(0,0,0,0),0).Za();w.rw=pb(new H(0,0,-1,0),-1).Za();w.Aw=(new H(0,0,0,0)).Za();w.Ko=(new H(0.5,0,0,0)).Za();w.Cw=(new H(1,0,0,0)).Za();w.Io=(new H(0,0.5,0,0)).Za();w.qw=(new H(0.5,0.5,0,0)).Za();w.Jo=(new H(1,0.5,0,0)).Za();
w.lw=(new H(0,1,0,0)).Za();w.Ho=(new H(0.5,1,0,0)).Za();w.nw=(new H(1,1,0,0)).Za();w.Ew=pb(new H(0,0,1,w.ld),1).Za();w.tw=pb(new H(0,0,1,w.Qc),1).Za();w.yw=pb(new H(0,0,1,w.Zc),1).Za();w.pw=pb(new H(0,0,1,w.Yc),1).Za();w.zw=pb(new H(0,0,1,w.ld|w.Yc),1).Za();w.sw=pb(new H(0,0,1,w.Qc|w.Zc),1).Za();w.Bw=pb(new H(0,0,1,w.ld|w.Qc),1).Za();w.Dw=pb(new H(0,0,1,w.ld|w.Zc),1).Za();w.mw=pb(new H(0,0,1,w.Yc|w.Qc),1).Za();w.ow=pb(new H(0,0,1,w.Yc|w.Zc),1).Za();w.xw=pb(new H(0,0,1,w.Qc|w.Zc|w.Yc),1).Za();
w.vw=pb(new H(0,0,1,w.ld|w.Zc|w.Yc),1).Za();w.ww=pb(new H(0,0,1,w.ld|w.Qc|w.Yc),1).Za();w.uw=pb(new H(0,0,1,w.ld|w.Qc|w.Zc),1).Za();w.kw=pb(new H(0,0,1,w.ld|w.Qc|w.Zc|w.Yc),1).Za();var Fb;H.None=Fb=w.NONE;var Ib;H.Default=Ib=w.rw;var Jb;H.TopLeft=Jb=w.Aw;var Kb;H.TopCenter=Kb=w.Ko;var Lb;H.TopRight=Lb=w.Cw;H.LeftCenter=w.Io;var Ob;H.Center=Ob=w.qw;H.RightCenter=w.Jo;var Pb;H.BottomLeft=Pb=w.lw;var Qb;H.BottomCenter=Qb=w.Ho;var Rb;H.BottomRight=Rb=w.nw;var Sb;H.MiddleTop=Sb=w.Ko;var Tb;
H.MiddleLeft=Tb=w.Io;var Zb;H.MiddleRight=Zb=w.Jo;var $b;H.MiddleBottom=$b=w.Ho;H.Top=w.Ko;var ac;H.Left=ac=w.Io;var bc;H.Right=bc=w.Jo;H.Bottom=w.Ho;var dc;H.TopSide=dc=w.Ew;var ec;H.LeftSide=ec=w.tw;var fc;H.RightSide=fc=w.yw;var gc;H.BottomSide=gc=w.pw;H.TopBottomSides=w.zw;H.LeftRightSides=w.sw;H.TopLeftSides=w.Bw;H.TopRightSides=w.Dw;H.BottomLeftSides=w.mw;H.BottomRightSides=w.ow;H.NotTopSide=w.xw;H.NotLeftSide=w.vw;H.NotRightSide=w.ww;H.NotBottomSide=w.uw;var hc;H.AllSides=hc=w.kw;
var ic=4*((Math.sqrt(2)-1)/3),jc=(new F(0,0)).Za(),kc=(new bb(Infinity,Infinity)).Za(),nc=(new F(-Infinity,-Infinity)).Za(),oc=(new F(Infinity,Infinity)).Za(),pc=(new bb(0,0)).Za(),qc=(new F(NaN,NaN)).Za(),rc=n;function sc(a){if(0>=a)return 0;var b=rc;if(b===n){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);rc=b}return 1>a?(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):2E3>=a?b[a|0]:Math.sqrt(a)}function Ua(a,b){var c=a-b;return 0.5>c&&-0.5<c}function Ta(a,b){var c=a-b;return 5E-8>c&&-5E-8<c}
function uc(a,b,c,d,e,g,i){0>=e&&(e=1E-6);var j,k,l,m;a<c?(k=a,j=c):(k=c,j=a);b<d?(m=b,l=d):(m=d,l=b);if(a===c)return m<=i&&i<=l&&a-e<=g&&g<=a+e;if(b===d)return k<=g&&g<=j&&b-e<=i&&i<=b+e;j+=e;k-=e;if(k<=g&&g<=j&&(l+=e,m-=e,m<=i&&i<=l))if(j-k>l-m)if(a-c>e||c-a>e){if(g=(d-b)/(c-a)*(g-a)+b,g-e<=i&&i<=g+e)return h}else return h;else if(b-d>e||d-b>e){if(i=(c-a)/(d-b)*(i-b)+a,i-e<=g&&g<=i+e)return h}else return h;return q}
function vc(a,b,c,d,e,g,i,j,k,l,m,p){if(!uc(a,b,i,j,p,c,d)||!uc(a,b,i,j,p,e,g)){var r=(a+c)/2,s=(b+d)/2,v=(c+e)/2,y=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(r+v)/2,c=(s+y)/2,v=(v+e)/2,y=(y+g)/2,C=(d+v)/2,E=(c+y)/2;return vc(a,b,r,s,d,c,C,E,k,l,m,p)||vc(C,E,v,y,e,g,i,j,k,l,m,p)}return uc(a,b,i,j,p,l,m)}
function wc(a,b,c,d,e,g,i,j,k,l){if(!uc(a,b,i,j,k,c,d)||!uc(a,b,i,j,k,e,g)){var m=(a+c)/2,p=(b+d)/2,r=(c+e)/2,s=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(m+r)/2,c=(p+s)/2,r=(r+e)/2,s=(s+g)/2,v=(d+r)/2,y=(c+s)/2;wc(a,b,m,p,d,c,v,y,k,l);wc(v,y,r,s,e,g,i,j,k,l)}else l.Xb(a,b,0,0),l.Xb(i,j,0,0)}
function Bc(a,b,c,d,e,g,i,j,k,l){if(!uc(a,b,i,j,k,c,d)||!uc(a,b,i,j,k,e,g)){var m=(a+c)/2,p=(b+d)/2,r=(c+e)/2,s=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(m+r)/2,c=(p+s)/2,r=(r+e)/2,s=(s+g)/2,v=(d+r)/2,y=(c+s)/2;Bc(a,b,m,p,d,c,v,y,k,l);Bc(v,y,r,s,e,g,i,j,k,l)}else 0===l.length&&l.push([a,b]),l.push([i,j])}function Cc(a,b,c,d,e,g,i,j,k,l){if(uc(a,b,e,g,l,c,d))return uc(a,b,e,g,l,j,k);var m=(a+c)/2,p=(b+d)/2,c=(c+e)/2,d=(d+g)/2,r=(m+c)/2,s=(p+d)/2;return Cc(a,b,m,p,r,s,i,j,k,l)||Cc(r,s,c,d,e,g,i,j,k,l)}
function Dc(a,b,c,d,e,g,i,j){if(uc(a,b,e,g,i,c,d))j.Xb(a,b,0,0),j.Xb(e,g,0,0);else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,m=(k+c)/2,p=(l+d)/2;Dc(a,b,k,l,m,p,i,j);Dc(m,p,c,d,e,g,i,j)}}function Hc(a,b,c,d,e,g,i,j){if(uc(a,b,e,g,i,c,d))0===j.length&&j.push([a,b]),j.push([e,g]);else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,m=(k+c)/2,p=(l+d)/2;Hc(a,b,k,l,m,p,i,j);Hc(m,p,c,d,e,g,i,j)}}
function Ic(a,b,c,d,e,g,i,j,k,l,m,p,r,s){0>=r&&(r=1E-6);if(!uc(a,b,i,j,r,c,d)||!uc(a,b,i,j,r,e,g)){var v=(a+c)/2,y=(b+d)/2,c=(c+e)/2,d=(d+g)/2,e=(e+i)/2,g=(g+j)/2,C=(v+c)/2,E=(y+d)/2,c=(c+e)/2,d=(d+g)/2,I=(C+c)/2,D=(E+d)/2,M=(m-k)*(m-k)+(p-l)*(p-l),N=q;Ic(a,b,v,y,C,E,I,D,k,l,m,p,r,s)&&(a=(s.x-k)*(s.x-k)+(s.y-l)*(s.y-l),a<M&&(M=a,N=h));b=s.x;v=s.y;Ic(I,D,c,d,e,g,i,j,k,l,m,p,r,s)&&(a=(s.x-k)*(s.x-k)+(s.y-l)*(s.y-l),a<M?N=h:(s.x=b,s.y=v));return N}v=(a-i)*(l-p)-(b-j)*(k-m);if(!v)return q;r=((a*j-b*i)*
(k-m)-(a-i)*(k*p-l*m))/v;v=((a*j-b*i)*(l-p)-(b-j)*(k*p-l*m))/v;if((k>m?k-m:m-k)<(l>p?l-p:p-l)){if(b<j?(k=b,i=j):(k=j,i=b),v<k||v>i)return q}else if(a<i?k=a:(k=i,i=a),r<k||r>i)return q;s.x=r;s.y=v;return h}
function Jc(a,b,c,d,e,g,i,j,k,l,m,p,r){var s=0;0>=r&&(r=1E-6);if(!uc(a,b,i,j,r,c,d)||!uc(a,b,i,j,r,e,g))var v=(a+c)/2,y=(b+d)/2,C=(c+e)/2,E=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(v+C)/2,c=(y+E)/2,C=(C+e)/2,E=(E+g)/2,I=(d+C)/2,D=(c+E)/2,s=s+Jc(a,b,v,y,d,c,I,D,k,l,m,p,r),s=s+Jc(I,D,C,E,e,g,i,j,k,l,m,p,r);else{r=(a-i)*(l-p)-(b-j)*(k-m);if(!r)return s;v=((a*j-b*i)*(k-m)-(a-i)*(k*p-l*m))/r;y=((a*j-b*i)*(l-p)-(b-j)*(k*p-l*m))/r;if(v>=m)return s;if((k>m?k-m:m-k)<(l>p?l-p:p-l)){if(b<j?(k=b,a=j):(k=j,a=b),y<k||y>
a)return s}else if(a<i?(k=a,a=i):k=i,v<k||v>a)return s;0<r?s++:0>r&&s--}return s}function Kc(a,b,c,d,e,g,i){if(Ta(a,c)){var j;b<d?(j=b,c=d):(j=d,c=b);d=g;if(d<j)return i.x=a,i.y=j,q;if(d>c)return i.x=a,i.y=c,q;i.x=a;i.y=d;return h}if(Ta(b,d)){a<c?j=a:(j=c,c=a);d=e;if(d<j)return i.x=j,i.y=b,q;if(d>c)return i.x=c,i.y=b,q;i.x=d;i.y=b;return h}j=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>j)return i.x=a,i.y=b,q;if(1.000005<j)return i.x=c,i.y=d,q;i.x=a+j*(c-a);i.y=b+j*(d-b);return h}
function Lc(a,b,c,d,e,g,i,j,k){if(Ua(a,c)&&Ua(b,d))return k.x=a,k.y=b,q;if(Ta(e,i)){if(Ta(a,c))return Kc(a,b,c,d,e,g,k),q;g=(d-b)/(c-a)*(e-a)+b;return Kc(a,b,c,d,e,g,k)}j=(j-g)/(i-e);if(Ta(a,c)){g=j*(a-e)+g;b<d?(i=b,c=d):(i=d,c=b);if(g<i)return k.x=a,k.y=i,q;if(g>c)return k.x=a,k.y=c,q;k.x=a;k.y=g;return h}i=(d-b)/(c-a);if(Ta(j,i))return Kc(a,b,c,d,e,g,k),q;e=(i*a-j*e+g-b)/(i-j);if(Ta(i,0)){a<c?i=a:(i=c,c=a);if(e<i)return k.x=i,k.y=b,q;if(e>c)return k.x=c,k.y=b,q;k.x=e;k.y=b;return h}g=i*(e-a)+b;
return Kc(a,b,c,d,e,g,k)}
function Rc(a,b,c,d,e,g,i,j,k){function l(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<m&&(m=e,k.x=c,k.y=d)}var m=Infinity;l(k.x,k.y);var p,r,s,v;e<i?(p=e,r=i):(p=i,r=e);g<j?(s=e,v=i):(s=i,v=e);p=(r-p)/2+0;s=(v-s)/2+0;e=(e+i)/2;g=(g+j)/2;0===p||0===s||(0.5>(c>a?c-a:a-c)?(p=1-(c-e)*(c-e)/(p*p),0>p||(p=Math.sqrt(p),d=-s*p+g,l(c,s*p+g),l(c,d))):(c=(d-b)/(c-a),d=1/(p*p)+c*c/(s*s),j=2*c*(b-c*a)/(s*s)-2*c*g/(s*s)-2*e/(p*p),s=j*j-4*d*(2*c*a*g/(s*s)-2*b*g/(s*s)+g*g/(s*s)+e*e/(p*p)-1+(b-c*a)*(b-c*a)/(s*s)),0>s||(p=
Math.sqrt(s),s=(-j+p)/(2*d),l(s,c*s-c*a+b),s=(-j-p)/(2*d),l(s,c*s-c*a+b))))}function Sc(a,b,c,d,e,g,i,j,k){var l=1E21,m=a,p=b;if(Lc(a,b,a,d,e,g,i,j,k)){var r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g);r<l&&(l=r,m=k.x,p=k.y)}Lc(c,b,c,d,e,g,i,j,k)&&(r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g),r<l&&(l=r,m=k.x,p=k.y));Lc(a,b,c,b,e,g,i,j,k)&&(r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g),r<l&&(l=r,m=k.x,p=k.y));Lc(a,d,c,d,e,g,i,j,k)&&(r=(k.x-e)*(k.x-e)+(k.y-g)*(k.y-g),r<l&&(l=r,m=k.x,p=k.y));k.x=m;k.y=p;return 1E21>l}
function Tc(a,b,c){var d=b.x,e=b.y,g=c.x,i=c.y,j=a.left,k=a.right,l=a.top,m=a.bottom;return d===g?(e<i?(a=e,g=i):(a=i,g=e),j<=d&&d<=k&&a<=m&&g>=l):e===i?(d<g?a=d:(a=g,g=d),l<=e&&e<=m&&a<=k&&g>=j):a.ua(b)||a.ua(c)||Uc(j,l,k,l,d,e,g,i)||Uc(k,l,k,m,d,e,g,i)||Uc(k,m,j,m,d,e,g,i)||Uc(j,m,j,l,d,e,g,i)?h:q}function Uc(a,b,c,d,e,g,i,j){return 0>=cd(a,b,c,d,e,g)*cd(a,b,c,d,i,j)&&0>=cd(e,g,i,j,a,b)*cd(e,g,i,j,c,d)}
function cd(a,b,c,d,e,g){c-=a;d-=b;a=e-a;b=g-b;g=a*d-b*c;0===g&&(g=a*c+b*d,0<g&&(g=(a-c)*c+(b-d)*d,0>g&&(g=0)));return 0>g?-1:0<g?1:0}function dd(a){0>a&&(a+=360);360<=a&&(a-=360);return a}
function ed(a,b,c,d,e,g){var i=Math.PI;g||(d*=i/180,e*=i/180);for(var g=d<e?1:-1,j=[],k=i/2,l=d,d=Math.min(2*i+1E-5,Math.abs(e-d));1E-5<d;){var e=l+g*Math.min(d,k),m=(e-l)/2,p=c*Math.cos(m),r=c*Math.sin(m),s=0.5522847498*Math.tan(m),i=p+s*r,p=-r+s*p,r=-p,s=m+l,m=Math.cos(s),s=Math.sin(s);j.push({x1:a+c*Math.cos(l),y1:b+c*Math.sin(l),x2:a+i*m-p*s,y2:b+i*s+p*m,Df:a+i*m-r*s,Ef:b+i*s+r*m,Wc:a+c*Math.cos(e),Xc:b+c*Math.sin(e)});d-=Math.abs(e-l);l=e}return j}
function fd(a,b,c,d,e,g){var c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/g)*g+d,i=c;c+e-a<e/2&&(i=c+e);a=d;d+g-b<g/2&&(a=d+g);return new F(i,a)}function gd(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do e=c%d,c=g=d,d=e;while(0<e);return g}
function hd(a){w.jc(this);a===f?a=id:u&&w.jb(a,hd,hd,"constructor:type");this.S=a;this.Ic=this.Bc=this.Ob=this.Cb=0;this.ik=new z(jd);this.st=this.ik.Jb;this.et=(new G).freeze();this.Na=h;this.nF=new F;this.li=Jb;this.mi=Rb;this.Dt=this.Et=NaN;this.Td=pc;this.$b=kd}w.P("Geometry",hd);
hd.prototype.copy=hd.prototype.copy=function(){var a=new hd;a.S=this.S;a.Cb=this.Cb;a.Ob=this.Ob;a.Bc=this.Bc;a.Ic=this.Ic;for(var b=this.ik,c=b.length,d=a.ik,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.st=this.st;a.et.Xa(this.et);a.Na=this.Na;a.li=this.li.O();a.mi=this.mi.O();a.Et=this.Et;a.Dt=this.Dt;a.Td=this.Td.O();a.$b=this.$b;return a};var pd;hd.Line=pd=w.s(hd,"Line",0);var qd;hd.Rectangle=qd=w.s(hd,"Rectangle",1);var rd;hd.Ellipse=rd=w.s(hd,"Ellipse",2);var id;hd.Path=id=w.s(hd,"Path",3);
hd.prototype.Za=function(){this.freeze();Object.freeze(this);return this};hd.prototype.freeze=function(){this.$a=h;var a=this.sb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};hd.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;var a=this.sb;a.Ia();for(var b=a.length,c=0;c<b;c++)a.n[c].Ia();return this};
hd.prototype.equalsApprox=hd.prototype.Bj=function(a){if(!(a instanceof hd))return q;if(this.type!==a.type)return this.type===pd&&a.type===id?sd(this,a):a.type===pd&&this.type===id?sd(a,this):q;if(this.type===id){var b=this.sb,a=a.sb,c=b.length;if(c!==a.length)return q;for(var d=0;d<c;d++)if(!b.n[d].Bj(a.n[d]))return q;return h}return Ua(this.ma,a.ma)&&Ua(this.na,a.na)&&Ua(this.C,a.C)&&Ua(this.D,a.D)};
function sd(a,b){if(a.type!==pd||b.type!==id)return q;if(1===b.sb.count){var c=b.sb.oa(0);if(1===c.za.count&&(Ua(a.ma,c.ma)&&Ua(a.na,c.na))&&(c=c.za.oa(0),c.type===td&&Ua(a.C,c.C)&&Ua(a.D,c.D)))return h}return q}var vd;hd.stringify=vd=function(a){return a.toString()};
hd.prototype.toString=function(a){switch(this.type){case pd:return a===f?"M"+this.ma.toString()+" "+this.na.toString()+"L"+this.C.toString()+" "+this.D.toString():"M"+this.ma.toFixed(a)+" "+this.na.toFixed(a)+"L"+this.C.toFixed(a)+" "+this.D.toFixed(a);case qd:var b=new G(this.ma,this.na,0,0);b.Xb(this.C,this.D,0,0);return a===f?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case rd:b=new G(this.ma,this.na,0,0);b.Xb(this.C,this.D,0,0);if(a===f){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case id:for(var b="",c=this.sb,d=c.length,e=0;e<d;e++){var g=c.n[e];0<e&&(b+=" x ");g.ao&&(b+="F ");b+=g.toString(a)}return b;default:return this.type.toString()}};var Bd;
hd.fillPath=Bd=function(a){"string"!==typeof a&&w.ic(a,"string",hd,"fillPath:str");for(var a=a.split(/[Xx]/),b=a.length,c="",d=0;d<b;d++)var e=a[d],c=e.match(/[Ff]/)!==n?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var Cd;
hd.parse=Cd=function(a,b){function c(){return l>=y-1?h:k[l+1].match(/[A-Za-z]/)!==n}function d(){l++;return k[l]}function e(){var a=new F(parseFloat(d()),parseFloat(d()));m===m.toLowerCase()&&(a.x=v.x+a.x,a.y=v.y+a.y);return a}function g(){return v=e()}function i(){return s=e()}function j(){return"c"!==p.toLowerCase()&&"s"!==p.toLowerCase()?v:new F(2*v.x-s.x,2*v.y-s.y)}b===f&&(b=q);"string"!==typeof a&&w.ic(a,"string",hd,"parse:str");for(var a=a.replace(/,/gm," "),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),k=a.split(" "),l=-1,m="",p="",r=new F(0,0),s=new F(0,0),v=new F(0,0),y=
k.length,C=new J,E,I=q,D=q,M=h;!(l>=y-1);)if(p=m,m=d(),""!==m)switch(m.toUpperCase()){case "X":M=h;D=I=q;break;case "M":E=g();C.Mb===n||M===h?(K(C,E.x,E.y,I,q,!D),M=q):C.moveTo(E.x,E.y);for(r=v;!c();)E=g(),C.lineTo(E.x,E.y);break;case "L":for(;!c();)E=g(),C.lineTo(E.x,E.y);break;case "H":for(;!c();)v=E=new F((m===m.toLowerCase()?v.x:0)+parseFloat(d()),v.y),C.lineTo(v.x,v.y);break;case "V":for(;!c();)v=E=new F(v.x,(m===m.toLowerCase()?v.y:0)+parseFloat(d())),C.lineTo(v.x,v.y);break;case "C":for(;!c();){var N=
e(),Z=i();E=g();L(C,N.x,N.y,Z.x,Z.y,E.x,E.y)}break;case "S":for(;!c();)N=j(),Z=i(),E=g(),L(C,N.x,N.y,Z.x,Z.y,E.x,E.y);break;case "Q":for(;!c();)Z=i(),E=g(),Dd(C,Z.x,Z.y,E.x,E.y);break;case "T":for(;!c();)s=Z=j(),E=g(),Dd(C,Z.x,Z.y,E.x,E.y);break;case "B":for(;!c();)E=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())],c()||(E.push(parseFloat(d())),c()||E.push(parseFloat(d()))),m===m.toLowerCase()&&(E[2]+=v.x,E[3]+=v.y),C.arcTo(E[0],E[1],E[2],E[3],E[4],E[5],E[6]);break;
case "A":for(;!c();){var Z=parseFloat(d()),va=parseFloat(d()),ka=parseFloat(d()),ta=!!parseFloat(d()),Da=!!parseFloat(d());E=g();var N=C,Ha=E.x;E=E.y;N.q===n&&w.m("StreamGeometryContext has been closed");N.Mb===n&&w.m("Need to call beginFigure first");E=new Ed(Fd,Ha,E,Z,va,ka,ta,Da);N.Mb.za.add(E)}break;case "Z":Gd(C);v=r;break;case "F":E=n;for(N=1;k[l+N];)if(k[l+N].match(/[Uu]/)!==n)N++;else if(k[l+N].match(/[A-Za-z]/)===n)N++;else{E=k[l+N];break}E.match(/[Mm]/)?I=h:(E=C,E.q===n&&w.m("StreamGeometryContext has been closed"),
E.Mb===n&&w.m("Need to call beginFigure first"),0<E.Mb.za.length&&(E.Mb.ao=h));break;case "U":E=n;for(N=1;k[l+N];)if(k[l+N].match(/[Ff]/)!==n)N++;else if(k[l+N].match(/[A-Za-z]/)===n)N++;else{E=k[l+N];break}E.match(/[Mm]/)?D=h:Hd(C)}r=C.q;if(b)for(C=r.sb.l;C.next();)C.value.ao=h;return r};hd.prototype.lz=function(){if(this.Na)return h;var a=this.sb;if(this.st!==a.Jb)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].lz())return h;return q};
hd.prototype.dA=function(){this.Na=q;var a=this.sb;this.st=a.Jb;for(var b=a.length,c=0;c<b;c++)a.n[c].dA()};hd.prototype.oe=function(){var a=this.et;a.Ia();a.reset();a.TH(this.Td);Id(this,a,q);a.Xb(0,0,0,0);a.freeze()};hd.prototype.computeBoundsWithoutOrigin=hd.prototype.eG=function(){var a=new G;Id(this,a,h);return a};
function Id(a,b,c){switch(a.type){case pd:case qd:case rd:c?b.V(a.Cb,a.Ob,0,0):b.Xb(a.Cb,a.Ob,0,0);b.Xb(a.Bc,a.Ic,0,0);break;case id:for(var a=a.sb,d=a.length,e=0;e<d;e++){var g=a.n[e];c&&0===e?b.V(g.ma,g.na,0,0):b.Xb(g.ma,g.na,0,0);for(var i=g.za,j=i.length,k=g.ma,l=g.na,m=0;m<j;m++){var p=i.n[m];switch(p.type){case td:case Jd:k=p.C;l=p.D;b.Xb(k,l,0,0);break;case Ld:wc(k,l,p.Ub,p.Ac,p.jg,p.kg,p.C,p.D,0.5,b);k=p.C;l=p.D;break;case Md:Dc(k,l,p.Ub,p.Ac,p.C,p.D,0.5,b);k=p.C;l=p.D;break;case Nd:case Fd:for(var p=
p.type===Nd?Td(p,g):Wd(p,g,k,l),r=p.length,s=n,v=0;v<r;v++)s=p[v],wc(s.x1,s.y1,s.x2,s.y2,s.Df,s.Ef,s.Wc,s.Xc,0.5,b);s!==n&&(k=s.Wc,l=s.Xc);break;default:w.m("Unknown Segment type: "+p.type)}}}break;default:w.m("Unknown Geometry type: "+a.type)}}hd.prototype.normalize=hd.prototype.normalize=function(){w.H(this);var a=this.eG();this.offset(-a.x,-a.y);return new F(-a.x,-a.y)};
hd.prototype.offset=hd.prototype.offset=function(a,b){w.H(this);u&&(w.o(a,hd,"offset"),w.o(b,hd,"offset"));var c=new Wa;c.translate(a,b);this.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy)};hd.prototype.scale=hd.prototype.scale=function(a,b){w.H(this);u&&(w.o(a,hd,"scale:x"),w.o(b,hd,"scale:y"),0>=a&&w.ra(a,"scale must be greater than zero",hd,"scale:x"),0>=b&&w.ra(b,"scale must be greater than zero",hd,"scale:y"));var c=new Wa;c.scale(a,b);this.transform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy)};
hd.prototype.rotate=hd.prototype.rotate=function(a,b,c){w.H(this);b===f&&(b=0);c===f&&(c=0);u&&(w.o(a,hd,"rotate:angle"),w.o(b,hd,"rotate:x"),w.o(c,hd,"rotate:y"));var d=new Wa;d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy)};
hd.prototype.transform=hd.prototype.transform=function(a,b,c,d,e,g){var i,j;switch(this.type){case pd:case qd:case rd:i=this.Cb;j=this.Ob;this.Cb=i*a+j*c+e;this.Ob=i*b+j*d+g;i=this.Bc;j=this.Ic;this.Bc=i*a+j*c+e;this.Ic=i*b+j*d+g;break;case id:for(var k=this.sb,l=k.length,m=0;m<l;m++){var p=k.n[m];i=p.ma;j=p.na;p.ma=i*a+j*c+e;p.na=i*b+j*d+g;for(var p=p.za,r=p.length,s=0;s<r;s++){var v=p.n[s];switch(v.type){case td:case Jd:i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;break;case Ld:i=v.gf;j=v.hf;v.gf=i*
a+j*c+e;v.hf=i*b+j*d+g;i=v.ii;j=v.ji;v.ii=i*a+j*c+e;v.ji=i*b+j*d+g;i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;break;case Md:i=v.gf;j=v.hf;v.gf=i*a+j*c+e;v.hf=i*b+j*d+g;i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;break;case Nd:i=v.pa;j=v.ta;v.pa=i*a+j*c+e;v.ta=i*b+j*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY!==f&&(v.radiusY*=Math.sqrt(b*b+d*d));break;case Fd:i=v.C;j=v.D;v.C=i*a+j*c+e;v.D=i*b+j*d+g;v.radiusX*=Math.sqrt(a*a+c*c);v.radiusY*=Math.sqrt(b*b+d*d);break;default:w.m("Unknown Segment type: "+v.type)}}}}this.Na=
h};hd.prototype.rr=function(a,b){var c=this.Cb,d=this.Ob,e=this.Bc,g=this.Ic,i=Math.min(c,e),j=Math.min(d,g),c=Math.abs(e-c),d=Math.abs(g-d),g=this.nF;g.x=i;g.y=j;b.Ta(g);e=new jd(g.x,g.y);g.x=i+c;g.y=j;b.Ta(g);e.za.add(new Ed(td,g.x,g.y));g.x=i+c;g.y=j+d;b.Ta(g);e.za.add(new Ed(td,g.x,g.y));g.x=i;g.y=j+d;b.Ta(g);e.za.add((new Ed(td,g.x,g.y)).close());a.type=id;a.sb.add(e);return a};
hd.prototype.ua=function(a,b,c,d){for(var e=a.x,g=a.y,i=this.Fb.x-20,a=a.y,j=0,k,l,m,p,r,s,v,y=this.sb.n,C=y.length,E=0;E<C;E++){var I=y[E];if(I.ao){if(c&&I.ua(e,g,b))return h;var D=I.za;k=I.ma;l=I.na;for(var M=k,N=l,Z=0;Z<=D.length;Z++){Z!==D.length?(m=D.n[Z],p=m.type,s=m.C,v=m.D):(p=td,s=M,v=N);switch(p){case Jd:r=Xd(e,g,i,a,k,l,M,N);if(r===h)return h;j+=r;M=s;N=v;break;case td:r=Xd(e,g,i,a,k,l,s,v);if(r===h)return h;j+=r;break;case Ld:r=Jc(k,l,m.Ub,m.Ac,m.jg,m.kg,s,v,i,a,e,g,0.5);j+=r;break;case Md:r=
Jc(k,l,(k+2*m.Ub)/3,(l+2*m.Ac)/3,(m.Ub+2*s)/3,(m.Ub+2*s)/3,s,v,i,a,e,g,0.5);j+=r;break;case Nd:case Fd:p=m.type===Nd?Td(m,I):Wd(m,I,k,l);for(var va=p.length,ka=n,ta=0;ta<va;ta++){ka=p[ta];if(0===ta){r=Xd(e,g,i,a,k,l,ka.x1,ka.y1);if(r===h)return h;j+=r}r=Jc(ka.x1,ka.y1,ka.x2,ka.y2,ka.Df,ka.Ef,ka.Wc,ka.Xc,i,a,e,g,0.5);j+=r}ka!==n&&(s=ka.Wc,v=ka.Xc);break;default:w.m("Unknown Segment type: "+m.type)}k=s;l=v}if(0!==j)return h;j=0}else if(I.ua(e,g,d?b:b+2))return h}return 0!==j};
function Xd(a,b,c,d,e,g,i,j){if(uc(e,g,i,j,0.05,a,b))return h;var k=(a-c)*(g-j);if(0===k)return 0;var l=((a*d-b*c)*(e-i)-(a-c)*(e*j-g*i))/k,b=(a*d-b*c)*(g-j)/k;if(l>=a)return 0;if((e>i?e-i:i-e)<(g>j?g-j:j-g)){if(g<j?(a=g,e=j):(a=j,e=g),b<a||b>e)return 0}else if(e<i?(a=e,e=i):a=i,l<a||l>e)return 0;return 0<k?1:-1}function Yd(a,b,c,d){for(var e=a.sb.length,g=0;g<e;g++)if(a.sb.n[g].ua(b,c,d))return h;return q}w.g(hd,"type",hd.prototype.type);
w.defineProperty(hd,{type:"type"},t("S"),function(a){this.S!==a&&(u&&w.jb(a,hd,hd,"type"),w.H(this,a),this.S=a,this.Na=h)});w.g(hd,"startX",hd.prototype.ma);w.defineProperty(hd,{ma:"startX"},t("Cb"),function(a){this.Cb!==a&&(u&&w.o(a,hd,"startX"),w.H(this,a),this.Cb=a,this.Na=h)});w.g(hd,"startY",hd.prototype.na);w.defineProperty(hd,{na:"startY"},t("Ob"),function(a){this.Ob!==a&&(u&&w.o(a,hd,"startY"),w.H(this,a),this.Ob=a,this.Na=h)});w.g(hd,"endX",hd.prototype.C);
w.defineProperty(hd,{C:"endX"},t("Bc"),function(a){this.Bc!==a&&(u&&w.o(a,hd,"endX"),w.H(this,a),this.Bc=a,this.Na=h)});w.g(hd,"endY",hd.prototype.D);w.defineProperty(hd,{D:"endY"},t("Ic"),function(a){this.Ic!==a&&(u&&w.o(a,hd,"endY"),w.H(this,a),this.Ic=a,this.Na=h)});w.g(hd,"figures",hd.prototype.sb);w.defineProperty(hd,{sb:"figures"},t("ik"),function(a){this.ik!==a&&(u&&w.i(a,z,hd,"figures"),w.H(this,a),this.ik=a,this.Na=h)});
w.defineProperty(hd,{v:"spot1"},t("li"),function(a){u&&w.i(a,H,hd,"spot1");w.H(this,a);this.li=a.O()});w.defineProperty(hd,{w:"spot2"},t("mi"),function(a){u&&w.i(a,H,hd,"spot2");w.H(this,a);this.mi=a.O()});w.u(hd,{Fb:"bounds"},function(){this.lz()&&(this.dA(),this.oe());return this.et});w.g(hd,"minSize",hd.prototype.ve);
w.defineProperty(hd,{ve:"minSize"},t("Td"),function(a){this.Td.I(a)||(u&&w.i(a,bb,hd,"minSize"),a=a.O(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Td=a)});function jd(a,b,c){w.jc(this);c===f&&(c=h);this.ql=c;this.If=h;a!==f?(u&&w.o(a,jd,"sx"),this.Cb=a):this.Cb=0;b!==f?(u&&w.o(b,jd,"sy"),this.Ob=b):this.Ob=0;this.Wq=new z(Ed);this.wu=this.Wq.Jb;this.Na=h}w.P("PathFigure",jd);
jd.prototype.copy=jd.prototype.copy=function(){var a=new jd;a.ql=this.ql;a.If=this.If;a.Cb=this.Cb;a.Ob=this.Ob;for(var b=this.Wq,c=b.length,d=a.Wq,e=0;e<c;e++){var g=b.n[e].copy();d.add(g)}a.wu=this.wu;a.Na=this.Na;return a};jd.prototype.equalsApprox=jd.prototype.Bj=function(a){if(!(a instanceof jd)||!Ua(this.ma,a.ma)||!Ua(this.na,a.na))return q;var b=this.za,a=a.za,c=b.length;if(c!==a.length)return q;for(var d=0;d<c;d++)if(!b.n[d].Bj(a.n[d]))return q;return h};da=jd.prototype;
da.toString=function(a){for(var b=a===f?"M"+this.ma.toString()+" "+this.na.toString():"M"+this.ma.toFixed(a)+" "+this.na.toFixed(a),c=this.za,d=c.length,e=0;e<d;e++)b+=" "+c.n[e].toString(a);return b};da.freeze=function(){this.$a=h;var a=this.za;a.freeze();for(var b=a.length,c=0;c<b;c++)a.n[c].freeze();return this};da.Ia=function(){this.$a=q;var a=this.za;a.Ia();for(var b=a.length,c=0;c<b;c++)a.n[c].Ia();return this};
da.lz=function(){if(this.Na)return h;var a=this.za;if(this.wu!==a.Jb)return h;for(var b=a.length,c=0;c<b;c++)if(a.n[c].Na)return h;return q};da.dA=function(){this.Na=q;var a=this.za;this.wu=a.Jb;for(var b=a.length,c=0;c<b;c++){var d=a.n[c];d.Na=q;d.Mi&&(d.Mi=n)}};w.g(jd,"isFilled",jd.prototype.ao);w.defineProperty(jd,{ao:"isFilled"},t("ql"),function(a){u&&w.k(a,"boolean",jd,"isFilled");w.H(this,a);this.ql=a});w.g(jd,"isShadowed",jd.prototype.co);
w.defineProperty(jd,{co:"isShadowed"},t("If"),function(a){u&&w.k(a,"boolean",jd,"isShadowed");w.H(this,a);this.If=a});w.g(jd,"startX",jd.prototype.ma);w.defineProperty(jd,{ma:"startX"},t("Cb"),function(a){u&&w.o(a,jd,"startX");w.H(this,a);this.Cb=a;this.Na=h});w.g(jd,"startY",jd.prototype.na);w.defineProperty(jd,{na:"startY"},t("Ob"),function(a){u&&w.o(a,jd,"startY");w.H(this,a);this.Ob=a;this.Na=h});w.g(jd,"segments",jd.prototype.za);
w.defineProperty(jd,{za:"segments"},t("Wq"),function(a){u&&w.i(a,z,jd,"segments");w.H(this,a);this.Wq=a;this.Na=h});
jd.prototype.ua=function(a,b,c){for(var d=this.ma,e=this.na,g=d,i=e,j=this.za.n,k=j.length,l=0;l<k;l++){var m=j[l];switch(m.type){case Jd:g=m.C;i=m.D;d=m.C;e=m.D;break;case td:if(uc(d,e,m.C,m.D,c,a,b))return h;d=m.C;e=m.D;break;case Ld:if(vc(d,e,m.Ub,m.Ac,m.jg,m.kg,m.C,m.D,0.5,a,b,c))return h;d=m.C;e=m.D;break;case Md:if(Cc(d,e,m.Ub,m.Ac,m.C,m.D,0.5,a,b,c))return h;d=m.C;e=m.D;break;case Nd:case Fd:for(var p=m.type===Nd?Td(m,this):Wd(m,this,d,e),r=p.length,s=n,v=0;v<r;v++)if(s=p[v],0===v&&uc(d,e,
s.x1,s.y1,c,a,b)||vc(s.x1,s.y1,s.x2,s.y2,s.Df,s.Ef,s.Wc,s.Xc,0.5,a,b,c))return h;s!==n&&(d=s.Wc,e=s.Xc);break;default:w.m("Unknown Segment type: "+m.type)}if(m.Vh&&(d!==g||e!==i)&&uc(d,e,g,i,c,a,b))return h}return q};
function Ed(a,b,c,d,e,g,i,j){w.jc(this);a===f?a=td:u&&w.jb(a,Ed,Ed,"constructor:type");this.S=a;a===Nd?(b!==f?(u&&w.o(b,Ed,"ex"),this.Vd=b):this.Vd=0,c!==f?(u&&w.o(c,Ed,"ey"),this.Wd=c):this.Wd=0,d!==f&&(u&&w.o(d,Ed,"x1"),this.vm=d),e!==f&&(u&&w.o(e,Ed,"y1"),this.wm=e),g!==f&&(u&&w.o(g,Ed,"x2"),this.jj=Math.max(g||0,0)),i!==f&&"number"===typeof i?(u&&w.o(i,Ed,"y2"),this.kj=Math.max(i||0,0)):this.kj=this.jj):a===Fd?(b!==f&&u&&w.o(b,Ed,"ex"),c!==f&&u&&w.o(c,Ed,"ey"),d!==f&&u&&w.o(d,Ed,"x1"),e!==f&&
u&&w.o(e,Ed,"y1"),this.Of=b||0,this.Pf=c||0,this.jj=Math.max(d||0,0),this.kj=Math.max(e||0,0),this.Vd=i?1:0,this.Wd=j?1:0,a=(g||0)%360,0>a&&(a+=360),this.wn=a):(b!==f?(u&&w.o(b,Ed,"ex"),this.Of=b):this.Of=0,c!==f?(u&&w.o(c,Ed,"ey"),this.Pf=c):this.Pf=0,d!==f&&(u&&w.o(d,Ed,"x1"),this.gf=d),e!==f&&(u&&w.o(e,Ed,"y1"),this.hf=e),g!==f&&(u&&w.o(g,Ed,"x2"),this.ii=g),i!==f&&"number"===typeof i&&(u&&w.o(i,Ed,"y2"),this.ji=i));this.Na=h;this.Vh=q}w.P("PathSegment",Ed);
Ed.prototype.copy=Ed.prototype.copy=function(){var a=new Ed;a.S=this.S;this.S===Nd?(a.Vd=this.Vd,a.Wd=this.Wd,a.vm=this.vm,a.wm=this.wm,a.jj=this.jj,a.kj=this.kj):this.S===Fd?(a.Vd=this.Vd,a.Wd=this.Wd,a.Of=this.Of,a.Pf=this.Pf,a.jj=this.jj,a.kj=this.kj,a.wn=this.wn):(a.Of=this.Of,a.Pf=this.Pf,a.gf=this.gf,a.hf=this.hf,a.ii=this.ii,a.ji=this.ji);a.Na=this.Na;a.Vh=this.Vh;return a};
Ed.prototype.equalsApprox=Ed.prototype.Bj=function(a){if(!(a instanceof Ed)||this.type!==a.type||this.Bv!==a.Bv)return q;switch(this.type){case Jd:case td:return Ua(this.C,a.C)&&Ua(this.D,a.D);case Ld:return Ua(this.C,a.C)&&Ua(this.D,a.D)&&Ua(this.Ub,a.Ub)&&Ua(this.Ac,a.Ac)&&Ua(this.jg,a.jg)&&Ua(this.kg,a.kg);case Md:return Ua(this.C,a.C)&&Ua(this.D,a.D)&&Ua(this.Ub,a.Ub)&&Ua(this.Ac,a.Ac);case Nd:return Ua(this.mg,a.mg)&&Ua(this.Hh,a.Hh)&&Ua(this.pa,a.pa)&&Ua(this.ta,a.ta)&&Ua(this.radiusX,a.radiusX)&&
Ua(this.radiusY,a.radiusY);case Fd:return this.Av===a.Av&&this.Dv===a.Dv&&Ua(this.jw,a.jw)&&Ua(this.C,a.C)&&Ua(this.D,a.D)&&Ua(this.radiusX,a.radiusX)&&Ua(this.radiusY,a.radiusY);default:return q}};
Ed.prototype.toString=function(a){switch(this.type){case Jd:a=a===f?"M"+this.C.toString()+" "+this.D.toString():"M"+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case td:a=a===f?"L"+this.C.toString()+" "+this.D.toString():"L"+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case Ld:a=a===f?"C"+this.Ub.toString()+" "+this.Ac.toString()+" "+this.jg.toString()+" "+this.kg.toString()+" "+this.C.toString()+" "+this.D.toString():"C"+this.Ub.toFixed(a)+" "+this.Ac.toFixed(a)+" "+this.jg.toFixed(a)+" "+this.kg.toFixed(a)+
" "+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case Md:a=a===f?"Q"+this.Ub.toString()+" "+this.Ac.toString()+" "+this.C.toString()+" "+this.D.toString():"Q"+this.Ub.toFixed(a)+" "+this.Ac.toFixed(a)+" "+this.C.toFixed(a)+" "+this.D.toFixed(a);break;case Nd:a=a===f?"B"+this.mg.toString()+" "+this.Hh.toString()+" "+this.pa.toString()+" "+this.ta.toString()+" "+this.radiusX:"B"+this.mg.toFixed(a)+" "+this.Hh.toFixed(a)+" "+this.pa.toFixed(a)+" "+this.ta.toFixed(a)+" "+this.radiusX;break;case Fd:a=
a===f?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.jw.toString()+" "+(this.Dv?1:0)+" "+(this.Av?1:0)+" "+this.C.toString()+" "+this.D.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.jw.toFixed(a)+" "+(this.Dv?1:0)+" "+(this.Av?1:0)+" "+this.C.toFixed(a)+" "+this.D.toFixed(a);break;default:a=this.type.toString()}return a+(this.Vh?"z":"")};var Jd;Ed.Move=Jd=w.s(Ed,"Move",0);var td;Ed.Line=td=w.s(Ed,"Line",1);var Ld;Ed.Bezier=Ld=w.s(Ed,"Bezier",2);var Md;
Ed.QuadraticBezier=Md=w.s(Ed,"QuadraticBezier",3);var Nd;Ed.Arc=Nd=w.s(Ed,"Arc",4);var Fd;Ed.SvgArc=Fd=w.s(Ed,"SvgArc",4);Ed.prototype.freeze=function(){this.$a=h;return this};Ed.prototype.Ia=function(){this.$a=q;return this};Ed.prototype.close=Ed.prototype.close=function(){this.Vh=h;return this};
function Td(a,b){if(a.Mi&&b.Na===q)return a.Mi;var c=a.radiusX,d=a.radiusY;d===f&&(d=c);var e=ed(a.vm,a.wm,c<d?c:d,a.mg,a.mg+a.Hh);if(c!==d){var g=new Wa;c<d?g.scale(1,d/c):g.scale(c/d,1);for(var c=e.length,d=new F,i=0,j=0,k=0;k<c;k++){var l=e[k];0===k&&(i=l.x1,j=l.y1);l.x1-=i;l.y1-=j;l.x2-=i;l.y2-=j;l.Df-=i;l.Ef-=j;l.Wc-=i;l.Xc-=j}for(k=0;k<c;k++)l=e[k],d.x=l.x1,d.y=l.y1,g.Ta(d),l.x1=d.x+i,l.y1=d.y+j,d.x=l.x2,d.y=l.y2,g.Ta(d),l.x2=d.x+i,l.y2=d.y+j,d.x=l.Df,d.y=l.Ef,g.Ta(d),l.Df=d.x+i,l.Ef=d.y+j,
d.x=l.Wc,d.y=l.Xc,g.Ta(d),l.Wc=d.x+i,l.Xc=d.y+j}a.Mi=e;return a.Mi}
function Wd(a,b,c,d){function e(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(g(a,b))}function g(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)))}if(a.Mi&&b.Na===q)return a.Mi;var b=a.jj,i=a.kj,j=a.wn*(Math.PI/180),k=a.mg,l=a.Wd,m=a.Of,p=a.Pf,r=new F(Math.cos(j)*(c-m)/2+Math.sin(j)*(d-p)/2,-Math.sin(j)*(c-m)/2+Math.cos(j)*(d-p)/2),s=Math.pow(r.x,2)/Math.pow(b,2)+Math.pow(r.y,2)/Math.pow(i,2);1<s&&(b*=Math.sqrt(s),i*=Math.sqrt(s));
k=(k==l?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(i,2)-Math.pow(b,2)*Math.pow(r.y,2)-Math.pow(i,2)*Math.pow(r.x,2))/(Math.pow(b,2)*Math.pow(r.y,2)+Math.pow(i,2)*Math.pow(r.x,2)));isNaN(k)&&(k=0);k=new F(k*b*r.y/i,k*-i*r.x/b);c=new F((c+m)/2+Math.cos(j)*k.x-Math.sin(j)*k.y,(d+p)/2+Math.sin(j)*k.x+Math.cos(j)*k.y);d=e([1,0],[(r.x-k.x)/b,(r.y-k.y)/i]);j=[(r.x-k.x)/b,(r.y-k.y)/i];m=[(-r.x-k.x)/b,(-r.y-k.y)/i];r=e(j,m);-1>=g(j,m)&&(r=Math.PI);1<=g(j,m)&&(r=0);0==l&&0<r&&(r-=2*Math.PI);1==l&&0>r&&(r+=2*Math.PI);
l=b>i?1:b/i;j=b>i?i/b:1;b=ed(0,0,b>i?b:i,d,d+r,h);i=new Wa;i.translate(c.x,c.y);i.rotate(a.wn,0,0);i.scale(l,j);l=b.length;r=new F;for(c=0;c<l;c++)d=b[c],r.x=d.x1,r.y=d.y1,i.Ta(r),d.x1=r.x,d.y1=r.y,r.x=d.x2,r.y=d.y2,i.Ta(r),d.x2=r.x,d.y2=r.y,r.x=d.Df,r.y=d.Ef,i.Ta(r),d.Df=r.x,d.Ef=r.y,r.x=d.Wc,r.y=d.Xc,i.Ta(r),d.Wc=r.x,d.Xc=r.y;a.Mi=b;return a.Mi}w.g(Ed,"isClosed",Ed.prototype.Bv);w.defineProperty(Ed,{Bv:"isClosed"},t("Vh"),function(a){this.Vh!==a&&(this.Vh=a,this.Na=h)});w.g(Ed,"type",Ed.prototype.type);
w.defineProperty(Ed,{type:"type"},t("S"),function(a){u&&w.jb(a,Ed,Ed,"type");w.H(this,a);this.S=a;this.Na=h});w.g(Ed,"endX",Ed.prototype.C);w.defineProperty(Ed,{C:"endX"},t("Of"),function(a){u&&w.o(a,Ed,"endX");w.H(this,a);this.Of=a;this.Na=h});w.g(Ed,"endY",Ed.prototype.D);w.defineProperty(Ed,{D:"endY"},t("Pf"),function(a){u&&w.o(a,Ed,"endY");w.H(this,a);this.Pf=a;this.Na=h});w.defineProperty(Ed,{Ub:"point1X"},t("gf"),function(a){u&&w.o(a,Ed,"point1X");w.H(this,a);this.gf=a;this.Na=h});
w.defineProperty(Ed,{Ac:"point1Y"},t("hf"),function(a){u&&w.o(a,Ed,"point1Y");w.H(this,a);this.hf=a;this.Na=h});w.defineProperty(Ed,{jg:"point2X"},t("ii"),function(a){u&&w.o(a,Ed,"point2X");w.H(this,a);this.ii=a;this.Na=h});w.defineProperty(Ed,{kg:"point2Y"},t("ji"),function(a){u&&w.o(a,Ed,"point2Y");w.H(this,a);this.ji=a;this.Na=h});w.defineProperty(Ed,{pa:"centerX"},t("vm"),function(a){u&&w.o(a,Ed,"centerX");w.H(this,a);this.vm=a;this.Na=h});
w.defineProperty(Ed,{ta:"centerY"},t("wm"),function(a){u&&w.o(a,Ed,"centerY");w.H(this,a);this.wm=a;this.Na=h});w.defineProperty(Ed,{radiusX:"radiusX"},t("jj"),function(a){u&&w.o(a,Ed,"radiusX");0>a&&w.ra(a,">= zero",Ed,"radiusX");w.H(this,a);this.jj=a;this.Na=h});w.defineProperty(Ed,{radiusY:"radiusY"},t("kj"),function(a){u&&w.o(a,Ed,"radiusY");0>a&&w.ra(a,">= zero",Ed,"radiusY");w.H(this,a);this.kj=a;this.Na=h});
w.defineProperty(Ed,{mg:"startAngle"},t("Vd"),function(a){this.Vd!==a&&(w.H(this,a),u&&w.o(a,Ed,"startAngle"),a%=360,0>a&&(a+=360),this.Vd=a,this.Na=h)});w.defineProperty(Ed,{Hh:"sweepAngle"},t("Wd"),function(a){u&&w.o(a,Ed,"sweepAngle");w.H(this,a);360<a&&(a=360);-360>a&&(a=-360);this.Wd=a;this.Na=h});w.defineProperty(Ed,{Av:"isClockwiseArc"},function(){return!!this.Wd},function(a){w.H(this,a);this.Wd=a?1:0;this.Na=h});
w.defineProperty(Ed,{Dv:"isLargeArc"},function(){return!!this.Vd},function(a){w.H(this,a);this.Vd=a?1:0;this.Na=h});w.defineProperty(Ed,{jw:"xAxisRotation"},t("wn"),function(a){u&&w.o(a,Ed,"xAxisRotation");a%=360;0>a&&(a+=360);w.H(this,a);this.wn=a;this.Na=h});function $d(){this.aa=n;this.ty=(new F(0,0)).freeze();this.Yw=(new F(0,0)).freeze();this.Zs=this.Zt=0;this.Kt="";this.Nu=this.pt=q;this.mt=this.bt=0;this.Oi=this.vt=q;this.Vi=n;this.Lu=0;this.Sf=this.Iu=n}w.P("InputEvent",$d);
$d.prototype.copy=$d.prototype.copy=function(){var a=new $d;a.aa=this.aa;a.ty=this.kd.copy().freeze();a.Yw=this.M.copy().freeze();a.Zt=this.Zt;a.Zs=this.Zs;a.Kt=this.Kt;a.pt=this.pt;a.Nu=this.Nu;a.bt=this.bt;a.mt=this.mt;a.vt=this.vt;a.Oi=this.Oi;a.Vi=this.Vi;a.Lu=this.Lu;a.Iu=this.Iu;a.Sf=this.Sf;return a};
$d.prototype.toString=function(){var a="^";this.Ch&&(a+="M:"+this.Ch);this.button&&(a+="B:"+this.button);this.key&&(a+="K:"+this.key);this.Xd&&(a+="C:"+this.Xd);this.yj&&(a+="D:"+this.yj);this.ae&&(a+="h");this.bubbles&&(a+="b");this.M!==n&&(a+="@"+this.M.toString());return a};w.g($d,"diagram",$d.prototype.h);w.defineProperty($d,{h:"diagram"},t("aa"),ba("aa"));w.g($d,"viewPoint",$d.prototype.kd);w.defineProperty($d,{kd:"viewPoint"},t("ty"),function(a){w.i(a,F,$d,"viewPoint");this.ty.Xa(a)});
w.g($d,"documentPoint",$d.prototype.M);w.defineProperty($d,{M:"documentPoint"},t("Yw"),function(a){w.i(a,F,$d,"documentPoint");this.Yw.Xa(a)});w.g($d,"modifiers",$d.prototype.Ch);w.defineProperty($d,{Ch:"modifiers"},t("Zt"),ba("Zt"));w.g($d,"button",$d.prototype.button);w.defineProperty($d,{button:"button"},t("Zs"),ba("Zs"));w.g($d,"key",$d.prototype.key);w.defineProperty($d,{key:"key"},t("Kt"),ba("Kt"));w.g($d,"down",$d.prototype.Aj);w.defineProperty($d,{Aj:"down"},t("pt"),ba("pt"));
w.g($d,"up",$d.prototype.Ji);w.defineProperty($d,{Ji:"up"},t("Nu"),ba("Nu"));w.g($d,"clickCount",$d.prototype.Xd);w.defineProperty($d,{Xd:"clickCount"},t("bt"),ba("bt"));w.g($d,"delta",$d.prototype.yj);w.defineProperty($d,{yj:"delta"},t("mt"),ba("mt"));w.g($d,"handled",$d.prototype.ae);w.defineProperty($d,{ae:"handled"},t("vt"),ba("vt"));w.g($d,"bubbles",$d.prototype.bubbles);w.defineProperty($d,{bubbles:"bubbles"},t("Oi"),ba("Oi"));w.g($d,"event",$d.prototype.event);
w.defineProperty($d,{event:"event"},t("Vi"),ba("Vi"));w.g($d,"timestamp",$d.prototype.timestamp);w.defineProperty($d,{timestamp:"timestamp"},t("Lu"),ba("Lu"));w.g($d,"targetDiagram",$d.prototype.ng);w.defineProperty($d,{ng:"targetDiagram"},t("Iu"),ba("Iu"));w.g($d,"targetObject",$d.prototype.Ad);w.defineProperty($d,{Ad:"targetObject"},t("Sf"),ba("Sf"));w.u($d,{Lk:"control"},function(){return 0!==(this.Ch&1)});w.u($d,{shift:"shift"},function(){return 0!==(this.Ch&4)});
w.u($d,{alt:"alt"},function(){return 0!==(this.Ch&2)});w.u($d,{yL:"meta"},function(){return 0!==(this.Ch&8)});w.u($d,{left:"left"},function(){return 0===this.button});w.u($d,{zL:"middle"},function(){return 1===this.button});w.u($d,{right:"right"},function(){return 2===this.button});function fe(){this.aa=n;this.Bb="";this.nu=this.Du=n;this.$s=q}w.P("DiagramEvent",fe);fe.prototype.copy=fe.prototype.copy=function(){var a=new fe;a.aa=this.aa;a.Bb=this.Bb;a.Du=this.Du;a.nu=this.nu;a.$s=this.$s;return a};
fe.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");this.bw!==n&&(a+=":"+this.bw.toString());this.Ov!==n&&(a+="("+this.Ov.toString()+")");return a};w.g(fe,"diagram",fe.prototype.h);w.defineProperty(fe,{h:"diagram"},t("aa"),ba("aa"));w.g(fe,"name",fe.prototype.name);w.defineProperty(fe,{name:"name"},t("Bb"),ba("Bb"));w.g(fe,"subject",fe.prototype.bw);w.defineProperty(fe,{bw:"subject"},t("Du"),ba("Du"));w.g(fe,"parameter",fe.prototype.Ov);
w.defineProperty(fe,{Ov:"parameter"},t("nu"),ba("nu"));w.g(fe,"cancel",fe.prototype.cancel);w.defineProperty(fe,{cancel:"cancel"},t("$s"),ba("$s"));function ge(){this.clear()}w.P("ChangedEvent",ge);var he;ge.Transaction=he=w.s(ge,"Transaction",-1);var ie;ge.Property=ie=w.s(ge,"Property",0);var je;ge.Insert=je=w.s(ge,"Insert",1);var ke;ge.Remove=ke=w.s(ge,"Remove",2);
ge.prototype.clear=ge.prototype.clear=function(){this.at=ie;this.ru=this.Yt="";this.bu=this.cu=this.ju=this.ku=this.iu=this.aa=this.Jd=n};
ge.prototype.copy=ge.prototype.copy=function(){var a=new ge;a.Jd=this.Jd;a.aa=this.aa;a.at=this.at;a.Yt=this.Yt;a.ru=this.ru;a.iu=this.iu;var b=this.ku;a.ku=w.mb(b)&&"function"===typeof b.O?b.O():b;b=this.ju;a.ju=w.mb(b)&&"function"===typeof b.O?b.O():b;b=this.cu;a.cu=w.mb(b)&&"function"===typeof b.O?b.O():b;b=this.bu;a.bu=w.mb(b)&&"function"===typeof b.O?b.O():b;return a};
ge.prototype.toString=function(){var a="",a=this.hd===he?a+"* ":this.hd===ie?a+(this.ba!==n?"!m":"!d"):a+((this.ba!==n?"!m":"!d")+this.hd);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.Qe&&this.Qe!==this.propertyName&&(a+=" "+this.Qe);a+=": ";this.hd===he?this.oldValue!==n&&(a+=" "+this.oldValue):(this.object!==n&&(a+=le(this.object)),this.oldValue!==n&&(a+="  old: "+le(this.oldValue)),this.Bf!==n&&(a+=" "+this.Bf),this.newValue!==n&&(a+="  new: "+le(this.newValue)),
this.Af!==n&&(a+=" "+this.Af));return a};ge.prototype.getValue=ge.prototype.qa=function(a){return a?this.oldValue:this.newValue};ge.prototype.getParam=ge.prototype.JK=function(a){return a?this.Bf:this.Af};ge.prototype.canUndo=ge.prototype.Jk=function(){return this.ba!==n||this.h!==n?h:q};ge.prototype.undo=ge.prototype.cl=function(){this.Jk()&&(this.ba!==n?this.ba.Gr(this,h):this.h!==n&&this.h.Gr(this,h))};ge.prototype.canRedo=ge.prototype.Hk=function(){return this.ba!==n||this.h!==n?h:q};
ge.prototype.redo=ge.prototype.xo=function(){this.Hk()&&(this.ba!==n?this.ba.Gr(this,q):this.h!==n&&this.h.Gr(this,q))};w.g(ge,"model",ge.prototype.ba);w.defineProperty(ge,{ba:"model"},t("Jd"),ba("Jd"));w.g(ge,"diagram",ge.prototype.h);w.defineProperty(ge,{h:"diagram"},t("aa"),ba("aa"));w.g(ge,"change",ge.prototype.hd);w.defineProperty(ge,{hd:"change"},t("at"),function(a){u&&w.jb(a,ge,ge,"change");this.at=a});w.g(ge,"modelChange",ge.prototype.Qe);
w.defineProperty(ge,{Qe:"modelChange"},t("Yt"),function(a){u&&w.k(a,"string",ge,"modelChange");this.Yt=a});w.g(ge,"propertyName",ge.prototype.propertyName);w.defineProperty(ge,{propertyName:"propertyName"},t("ru"),function(a){u&&"string"!==typeof a&&w.i(a,Function,ge,"propertyName");this.ru=a});w.g(ge,"object",ge.prototype.object);w.defineProperty(ge,{object:"object"},t("iu"),ba("iu"));w.g(ge,"oldValue",ge.prototype.oldValue);w.defineProperty(ge,{oldValue:"oldValue"},t("ku"),ba("ku"));
w.g(ge,"oldParam",ge.prototype.Bf);w.defineProperty(ge,{Bf:"oldParam"},t("ju"),ba("ju"));w.g(ge,"newValue",ge.prototype.newValue);w.defineProperty(ge,{newValue:"newValue"},t("cu"),ba("cu"));w.g(ge,"newParam",ge.prototype.Af);w.defineProperty(ge,{Af:"newParam"},t("bu"),ba("bu"));
function B(a){w.jc(this);this.Sw=this.Bb="";this.rk=q;this.ef=[];this.kc=new la(n,Object);this.Bl="key";this.ht=this.Qt=n;this.wq="category";this.wg=new la(n,ma);this.aj=n;this.pl=this.ki=q;this.oy=n;this.sa=new ne;a!==f&&(this.eg=a)}w.P("Model",B);B.prototype.clear=B.prototype.clear=function(){this.ef=[];this.kc.clear();this.wg.clear();this.sa.clear()};
B.prototype.writeJsonProtected=B.prototype.hw=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.Ql&&(a+=',\n  "dataFormat": '+this.quote(this.Ql));this.cb&&(a+=',\n  "isReadOnly": '+this.cb);"key"!==this.Wk&&"string"===typeof this.Wk&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.Wk));"category"!==this.Vk&&"string"===typeof this.Vk&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Vk));return a};
B.prototype.gA=function(){return',\n  "nodeDataArray": '+Be(this,this.eg,h)};B.prototype.readJsonProtected=B.prototype.Qv=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.Ql=a.dataFormat);a.isReadOnly&&(this.cb=a.isReadOnly);a.nodeKeyProperty&&(this.Wk=a.nodeKeyProperty);a.nodeCategoryProperty&&(this.Vk=a.nodeCategoryProperty)};B.prototype.Hz=function(a){a.nodeDataArray&&(a=a.nodeDataArray,Ce(this,a),this.eg=a)};
B.prototype.toString=function(a){a===f&&(a=0);if(1<a)return this.Yz();var b=(""!==this.name?this.name:"")+" Model";if(0<a){var b=b+"\n node data:",a=this.eg,c=w.Sb(a),d;for(d=0;d<c;d++)var e=w.Eb(a,d),b=b+(" "+this.lb(e)+":"+le(e))}return b};B.prototype.toJson=B.prototype.Yz=function(a){a===f&&(a=this.constructor===B?"go.Model":this.constructor===O?"go.GraphLinksModel":this.constructor===De?"go.TreeModel":w.Pk(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.gA()+"}"};
B.fromJson=function(a,b){b===f&&(b=n);b&&w.i(b,B,B,"fromJson:model");var c=n;if("string"===typeof a)if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){u&&w.trace("JSON.parse error: "+d.toString())}else w.trace("WARNING: no JSON.parse available");else"object"==typeof a?c=a:w.m("Unable to construct a Model from: "+a);if(b===n){var e;e=n;var g=c["class"];if("string"===typeof g)try{var i=n;0===g.indexOf("go.")?(g=g.substr(3),i=ea[g]):(i=ea[g])||(i=window[g]);"function"===typeof i&&
(e=new i)}catch(j){}e===n||e instanceof B?b=e:w.m("Unable to construct a Model of declared class: "+c["class"])}b===n&&(b=new O);b.readJsonProtected(c);b.Hz(c);return b};
function Ce(a,b){if(w.isArray(b))for(var c=w.Sb(b),d=0;d<c;d++){var e=w.Eb(b,d);w.mb(e)&&w.bC(b,d,Ce(a,e))}else if(w.mb(b)){for(d in b)if(e=b[d],w.mb(e)&&(e=Ce(a,e),b[d]=e,"points"===d&&Array.isArray(e))){for(var g=h,i=0;i<e.length;i++)if("number"!==typeof e[i]){g=q;break}if(g){g=new z(F);for(i=0;i<e.length/2;i++){var j=new F(e[2*i],e[2*i+1]);g.add(j)}g.freeze();b[d]=g}}if("object"!==typeof b)c=b;else{d=b;e=b["class"];if("NaN"===e)d=NaN;else if("go.Point"===e)d=new F(Ee(b.x),Ee(b.y));else if("go.Size"===
e)d=new bb(Ee(b.width),Ee(b.height));else if("go.Rect"===e)d=new G(Ee(b.x),Ee(b.y),Ee(b.width),Ee(b.height));else if("go.Margin"===e)d=new hb(Ee(b.top),Ee(b.right),Ee(b.bottom),Ee(b.left));else if("go.Spot"===e)d="string"===typeof b["enum"]?qb(b["enum"]):new H(Ee(b.x),Ee(b.y),Ee(b.offsetX),Ee(b.offsetY));else if("go.Brush"===e){if(d=new Fe,d.type=w.Vl(Fe,b.type),b.start instanceof H&&(d.start=b.start),b.end instanceof H&&(d.end=b.end),"number"===typeof b.startRadius&&(d.Fo=Ee(b.startRadius)),"number"===
typeof b.endRadius&&(d.Tn=Ee(b.endRadius)),e=b.colorStops)for(c in e)d.addColorStop(parseFloat(c),e[c])}else"go.Geometry"===e&&(d="string"===typeof b.path?Cd(b.path):new hd,d.type=w.Vl(hd,b.type),"number"===typeof b.startX&&(d.ma=Ee(b.startX)),"number"===typeof b.startY&&(d.na=Ee(b.startY)),"number"===typeof b.endX&&(d.C=Ee(b.endX)),"number"===typeof b.endY&&(d.D=Ee(b.endY)),b.spot1 instanceof H&&(d.v=b.spot1),b.spot2 instanceof H&&(d.w=b.spot2));c=d}return c}return b}
B.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
B.prototype.writeJsonValue=B.prototype.iw=function(a){var b;if(a===f)b="undefined";else if(a===n)b="null";else if(a===h)b="true";else if(a===q)b="false";else if("string"===typeof a)b=this.quote(a);else if("number"===typeof a)b=Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(w.isArray(a))b=Be(this,a);else if(w.mb(a)){var c=a;if(c instanceof F)a={"class":"go.Point",x:Ge(c.x),y:Ge(c.y)};else if(c instanceof bb)a={"class":"go.Size",width:Ge(c.width),height:Ge(c.height)};
else if(c instanceof G)a={"class":"go.Rect",x:Ge(c.x),y:Ge(c.y),width:Ge(c.width),height:Ge(c.height)};else if(c instanceof hb)a={"class":"go.Margin",top:Ge(c.top),right:Ge(c.right),bottom:Ge(c.bottom),left:Ge(c.left)};else if(c instanceof H)a=sb(c)?{"class":"go.Spot",x:Ge(c.x),y:Ge(c.y),offsetX:Ge(c.offsetX),offsetY:Ge(c.offsetY)}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Fe){a={"class":"go.Brush",type:c.type.name};if(c.type===He)a.color=c.color;else if(c.type===Ie||c.type===Je)a.start=
c.start,a.end=c.end,c.type===Je&&(0!==c.Fo&&(a.startRadius=Ge(c.Fo)),isNaN(c.Tn)||(a.endRadius=Ge(c.Tn)));if(c.Nn!==n){for(var d={},c=c.Nn.l;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else c instanceof hd&&(a={"class":"go.Geometry",type:c.type.name},0!==c.ma&&(a.startX=Ge(c.ma)),0!==c.na&&(a.startY=Ge(c.na)),0!==c.C&&(a.endX=Ge(c.C)),0!==c.D&&(a.endY=Ge(c.D)),c.v.I(Jb)||(a.spot1=c.v),c.w.I(Rb)||(a.spot2=c.w),c.type===id&&(a.path=vd(c)));var d="{",e=h;for(b in a)if(c=w.Va(a,b),!(c===f||
"__gohashid"===b||"_"===b[0]||"function"===typeof c))if(e?e=q:d+=", ",d+='"'+b+'":',"points"===b&&c instanceof z&&c.S===F){for(var g="[",c=c.l;c.next();){var i=c.value;1<g.length&&(g+=",");g+=this.iw(i.x);g+=",";g+=this.iw(i.y)}g+="]";d+=g}else d+=this.iw(c);b=d+"}"}else b="function"===typeof a?"null":a.toString();return b};function Be(a,b,c){var d=w.Sb(b),e="[ ";c&&1<d&&(e+="\n");for(var g=0;g<d;g++){var i=w.Eb(b,g);i!==f&&(0<g&&(e+=",",c&&(e+="\n")),e+=a.iw(i))}c&&1<d&&(e+="\n");return e+" ]"}
function Ge(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}function Ee(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}w.g(B,"name",B.prototype.name);w.defineProperty(B,{name:"name"},t("Bb"),function(a){var b=this.Bb;b!==a&&(w.k(a,"string",B,"name"),this.Bb=a,this.j("name",b,a))});w.g(B,"dataFormat",B.prototype.Ql);
w.defineProperty(B,{Ql:"dataFormat"},t("Sw"),function(a){var b=this.Sw;b!==a&&(w.k(a,"string",B,"dataFormat"),this.Sw=a,this.j("dataFormat",b,a))});w.g(B,"isReadOnly",B.prototype.cb);w.defineProperty(B,{cb:"isReadOnly"},t("rk"),function(a){var b=this.rk;b!==a&&(w.k(a,"boolean",B,"isReadOnly"),this.rk=a,this.j("isReadOnly",b,a))});B.prototype.addChangedListener=B.prototype.zy=function(a){w.k(a,"function",B,"addChangedListener:listener");this.aj===n&&(this.aj=new z("function"));this.aj.add(a)};
B.prototype.removeChangedListener=B.prototype.Jz=function(a){w.k(a,"function",B,"removeChangedListener:listener");this.aj!==n&&(this.aj.remove(a),0===this.aj.count&&(this.aj=n))};B.prototype.Xu=function(a){this.ub||this.sa.aD(a);if(this.aj!==n)for(var b=this.aj.l;b.next();){var c=b.value;c(a)}};B.prototype.raiseChangedEvent=B.prototype.Pc=function(a,b,c,d,e,g,i){Ke(this,"",a,b,c,d,e,g,i)};B.prototype.raiseChanged=B.prototype.j=function(a,b,c,d,e){Ke(this,"",ie,a,this,b,c,d,e)};
B.prototype.raiseDataChanged=B.prototype.Gz=function(a,b,c,d,e,g){Ke(this,"",ie,b,a,c,d,e,g)};function Ke(a,b,c,d,e,g,i,j,k){j===f&&(j=n);k===f&&(k=n);var l=new ge;l.ba=a;l.hd=c;l.Qe=b;l.propertyName=d;l.object=e;l.oldValue=g;l.Bf=j;l.newValue=i;l.Af=k;a.Xu(l)}w.g(B,"undoManager",B.prototype.sa);w.defineProperty(B,{sa:"undoManager"},t("oy"),function(a){var b=this.oy;b!==a&&(w.i(a,ne,B,"undoManager"),b!==n&&b.IH(this),this.oy=a,a!==n&&a.BF(this))});w.g(B,"skipsUndoManager",B.prototype.ub);
w.defineProperty(B,{ub:"skipsUndoManager"},t("ki"),function(a){w.k(a,"boolean",B,"skipsUndoManager");this.ki=a});B.prototype.Gr=function(a,b){if(a!==n&&a.ba===this){var c=this.pl;try{this.pl=h,this.Hy(a,b)}finally{this.pl=c}}};
B.prototype.Hy=function(a,b){if(a.hd===ie){var c=a.object,d=a.propertyName,e=a.qa(b);w.Ka(c,d,e)}else a.hd===je?"nodeDataArray"===a.Qe?(c=a.newValue,w.mb(c)&&(d=this.lb(c),d!==f&&(b?(w.si(this.ef,a.Af),this.kc.remove(d)):(w.ri(this.ef,a.Af,c),this.kc.add(d,c))))):""===a.Qe?(c=a.object,!w.isArray(c)&&a.propertyName&&(c=w.Va(a.object,a.propertyName)),w.isArray(c)&&(d=a.newValue,e=a.Af,b?w.si(c,e):w.ri(c,e,d))):w.m("unknown ChangedEvent.Insert object: "+a.toString()):a.hd===ke?"nodeDataArray"===a.Qe?
(c=a.oldValue,w.mb(c)&&(d=this.lb(c),d!==f&&(b?(w.ri(this.ef,a.Bf,c),this.kc.add(d,c)):(w.si(this.ef,a.Bf),this.kc.remove(d))))):""===a.Qe?(c=a.object,!w.isArray(c)&&a.propertyName&&(c=w.Va(a.object,a.propertyName)),w.isArray(c)&&(d=a.oldValue,e=a.Bf,b?w.ri(c,e,d):w.si(c,e))):w.m("unknown ChangedEvent.Remove object: "+a.toString()):a.hd!==he&&w.m("unknown ChangedEvent: "+a.toString())};B.prototype.startTransaction=B.prototype.hc=function(a){return this.sa.hc(a)};
B.prototype.commitTransaction=B.prototype.ne=function(a){return this.sa.ne(a)};B.prototype.rollbackTransaction=B.prototype.ws=function(){return this.sa.ws()};B.prototype.updateTargetBindings=B.prototype.vb=function(a,b){b===f&&(b="");Ke(this,"SourceChanged",he,b,a,n,n)};w.g(B,"nodeKeyProperty",B.prototype.Wk);
w.defineProperty(B,{Wk:"nodeKeyProperty"},t("Bl"),function(a){var b=this.Bl;b!==a&&(Le(a,B,"nodeKeyProperty"),0<this.kc.count&&w.m("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Bl=a,this.j("nodeKeyProperty",b,a))});function Le(a,b,c){"string"!==typeof a&&"function"!==typeof a&&w.ic(a,"string or function",b,c)}
B.prototype.getKeyForNodeData=B.prototype.lb=function(a){if(a!==n){var b=this.Bl;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("Key value for node data "+a+" is not a number or a string: "+b)}}};
B.prototype.setKeyForNodeData=B.prototype.Sz=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",B,"setKeyForNodeData:key");if(a!==n){var c=this.Bl;if(""!==c)if(this.pe(a)){var d=w.Va(a,c);d!==b&&this.Ie(b)===n&&(w.Ka(a,c,b),this.kc.remove(d),this.kc.add(b,a),Ke(this,"nodeKey",ie,c,a,d,b),"string"===typeof c&&this.vb(a,c),this.vs(d,b))}else w.Ka(a,c,b)}};w.g(B,"makeUniqueKeyFunction",B.prototype.gH);
w.defineProperty(B,{gH:"makeUniqueKeyFunction"},t("Qt"),function(a){var b=this.Qt;b!==a&&(a!==n&&w.k(a,"function",B,"makeUniqueKeyFunction"),this.Qt=a,this.j("makeUniqueKeyFunction",b,a))});function Me(a){return"number"===typeof a||"string"===typeof a}B.prototype.containsNodeData=B.prototype.pe=function(a){a=this.lb(a);return a===f?q:this.kc.contains(a)};B.prototype.findNodeDataForKey=B.prototype.Ie=function(a){a===n&&w.m("Model.findNodeDataForKey:key must not be null");return a===f||!Me(a)?n:this.kc.qa(a)};
w.g(B,"nodeDataArray",B.prototype.eg);
w.defineProperty(B,{eg:"nodeDataArray"},t("ef"),function(a){var b=this.ef;if(b!==a){w.Hr(a,B,"nodeDataArray");this.kc.clear();this.bA();for(var c=w.Sb(a),d=0;d<c;d++){var e=w.Eb(a,d);if(!w.mb(e)){w.m("Model.nodeDataArray must only contain Objects, not: "+e);return}w.$r(e)}this.ef=a;for(var g=new z(Object),d=0;d<c;d++){var e=w.Eb(a,d),i=this.lb(e);i===f?g.add(e):this.kc.qa(i)!==n?g.add(e):this.kc.add(i,e)}for(d=g.l;d.next();)e=d.value,this.zD(e),g=this.lb(e),this.kc.add(g,e);Ke(this,"nodeDataArray",
ie,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=w.Eb(a,d),this.Ao(e),this.zo(e);this.wg.clear();Array.isArray(a)||(this.cb=h)}});
B.prototype.makeNodeDataKeyUnique=B.prototype.zD=function(a){if(a!==n){var b=this.Bl;if(""!==b){var c=this.lb(a);if(c===f||this.kc.contains(c)){var d=this.Qt;if(d!==n&&(c=d(this,a),c!==f&&c!==n&&!this.kc.contains(c))){w.Ka(a,b,c);return}if("string"===typeof c){for(d=2;this.kc.contains(c+d);)d++;w.Ka(a,b,c+d)}else if(c===f||"number"===typeof c){for(d=-this.kc.count-1;this.kc.contains(d);)d--;w.Ka(a,b,d)}else w.m("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
B.prototype.addNodeData=B.prototype.Ar=function(a){if(a!==n){w.$r(a);var b=this.lb(a);b!==f&&this.kc.qa(b)===a||(this.zD(a),b=this.lb(a),this.kc.add(b,a),b=w.Sb(this.ef),w.ri(this.ef,b,a),Ke(this,"nodeDataArray",je,"nodeDataArray",this,n,a,n,b),this.Ao(a),this.zo(a))}};B.prototype.removeNodeData=B.prototype.$D=function(a){if(a!==n){var b=this.lb(a);b!==f&&this.kc.contains(b)&&(this.kc.remove(b),b=w.Dy(this.ef,a),0>b||(w.si(this.ef,b),Ke(this,"nodeDataArray",ke,"nodeDataArray",this,a,n,b,n),this.Ls(a)))}};
da=B.prototype;da.vs=function(a,b){var c=Ne(this,a);c instanceof ma&&this.wg.add(b,c)};da.bA=aa();da.Ao=aa();da.zo=aa();da.Ls=aa();function af(a,b,c){if(b!==f){var d=a.wg.qa(b);d===n&&(d=new ma,a.wg.add(b,d));d.add(c)}}function bf(a,b,c){if(b!==f){var d=a.wg.qa(b);d instanceof ma&&(c===f||c===n?a.wg.remove(b):(d.remove(c),0===d.count&&a.wg.remove(b)))}}
B.prototype.dumpDelayedReferences=B.prototype.hK=function(){w.trace("DelayedReferences ("+this.wg.count+")");for(var a=this.wg.l;a.next();){for(var b="",c=a.value.l;c.next();)b+=le(c.value)+", ";w.trace("  "+a.key+": "+b)}};function Ne(a,b){if(b===f)return n;var c=a.wg.qa(b);return c instanceof ma?c:n}w.g(B,"copyNodeDataFunction",B.prototype.iG);
w.defineProperty(B,{iG:"copyNodeDataFunction"},t("ht"),function(a){var b=this.ht;b!==a&&(a!==n&&w.k(a,"function",B,"copyNodeDataFunction"),this.ht=a,this.j("copyNodeDataFunction",b,a))});B.prototype.copyNodeData=B.prototype.vj=function(a){if(a===n)return n;var b=n,b=this.ht;if(b!==n)b=b(a,this);else{var b=new a.constructor,c;for(c in a)w.Ka(b,c,w.Va(a,c))}b&&w.jc(b);return b};
B.prototype.setDataProperty=B.prototype.sE=function(a,b,c){u&&(w.k(a,"object",B,"setDataProperty:data"),w.k(b,"string",B,"setDataProperty:propname"),""===b&&w.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.pe(a))if(b===this.Wk)this.Sz(a,c);else if(b===this.Vk){this.Wv(a,c);return}var d=w.Va(a,b);d!==c&&(w.Ka(a,b,c),this.Gz(a,b,d,c))};B.prototype.addArrayItem=B.prototype.wI=function(a,b){this.OG(a,-1,b)};
B.prototype.insertArrayItem=B.prototype.OG=function(a,b,c){u&&(w.Hr(a,B,"insertArrayItem:arr"),w.o(b,B,"insertArrayItem:idx"));a===this.ef&&w.m("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=w.Sb(a));w.ri(a,b,c);Ke(this,"",je,"",a,n,c,n,b)};
B.prototype.removeArrayItem=B.prototype.PL=function(a,b){b===f&&(b=-1);u&&(w.Hr(a,B,"removeArrayItem:arr"),w.o(b,B,"removeArrayItem:idx"));a===this.ef&&w.m("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=w.Sb(a)-1);var c=w.Eb(a,b);w.si(a,b);Ke(this,"",ke,"",a,c,n,b,n)};w.g(B,"nodeCategoryProperty",B.prototype.Vk);
w.defineProperty(B,{Vk:"nodeCategoryProperty"},t("wq"),function(a){var b=this.wq;b!==a&&(Le(a,B,"nodeCategoryProperty"),this.wq=a,this.j("nodeCategoryProperty",b,a))});B.prototype.getCategoryForNodeData=B.prototype.TC=function(a){if(a===n)return"";var b=this.wq;if(""===b)return"";b=w.Va(a,b);if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
B.prototype.setCategoryForNodeData=B.prototype.Wv=function(a,b){w.k(b,"string",B,"setCategoryForNodeData:cat");if(a!==n){var c=this.wq;if(""!==c)if(this.pe(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"nodeCategory",ie,c,a,d,b))}else w.Ka(a,c,b)}};
function O(a,b){B.call(this);this.tk=[];this.Wm=new ma(Object);this.$j=this.gt=n;this.Yi="from";this.$i="to";this.dq=this.cq="";this.$p="category";this.ih=this.eu="";this.du="isGroup";this.gj="group";a!==f&&(this.eg=a);b!==f&&(this.Pg=b)}w.P("GraphLinksModel",O);w.Da(O,B);O.prototype.clear=O.prototype.clear=function(){B.prototype.clear.call(this);this.tk=[];this.Wm.clear()};
O.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.Yz();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){var b=b+"\n node data:",a=this.eg,c=w.Sb(a),d;for(d=0;d<c;d++)var e=w.Eb(a,d),b=b+(" "+this.lb(e)+":"+le(e));b+="\n link data:";a=this.Pg;c=w.Sb(a);for(d=0;d<c;d++)e=w.Eb(a,d),b+=" "+this.Zl(e)+"--\>"+this.$l(e)}return b};
O.prototype.writeJsonProtected=O.prototype.hw=function(){var a=B.prototype.hw.call(this),b="";"category"!==this.ho&&"string"===typeof this.ho&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.ho));"from"!==this.io&&"string"===typeof this.io&&(b+=',\n "linkFromKeyProperty": '+this.quote(this.io));"to"!==this.mo&&"string"===typeof this.mo&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.mo));""!==this.jo&&"string"===typeof this.jo&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.jo));""!==
this.no&&"string"===typeof this.no&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.no));""!==this.vo&&"string"===typeof this.vo&&(b+=',\n "nodeIsLinkLabelProperty": '+this.quote(this.vo));""!==this.ko&&"string"===typeof this.ko&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.ko));"isGroup"!==this.uo&&"string"===typeof this.uo&&(b+=',\n "nodeIsGroupProperty": '+this.quote(this.uo));"group"!==this.to&&"string"===typeof this.to&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.to));return a+
b};O.prototype.gA=function(){var a=B.prototype.gA.call(this),b=',\n  "linkDataArray": '+Be(this,this.Pg,h);return a+b};
O.prototype.readJsonProtected=O.prototype.Qv=function(a){B.prototype.Qv.call(this,a);a.linkFromKeyProperty&&(this.io=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.mo=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.jo=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.no=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.ho=a.linkCategoryProperty);a.nodeIsLinkLabelProperty&&(this.vo=a.nodeIsLinkLabelProperty);a.linkLabelKeysProperty&&(this.ko=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&
(this.uo=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&(this.to=a.nodeGroupKeyProperty)};O.prototype.Hz=function(a){B.prototype.Hz.call(this,a);a.linkDataArray&&(a=a.linkDataArray,Ce(this,a),this.Pg=a)};
O.prototype.Hy=function(a,b){if(a.hd===je){var c=n;"linkDataArray"===a.Qe?c=this.Pg:"linkLabelKeys"===a.Qe&&(c=this.Qk(a.object));if(w.isArray(c)){b?w.si(c,a.Af):w.ri(c,a.Af,a.newValue);return}}else if(a.hd===ke&&(c=n,"linkDataArray"===a.Qe?c=this.Pg:"linkLabelKeys"===a.Qe&&(c=this.Qk(a.object)),w.isArray(c))){b?w.ri(c,a.Bf,a.oldValue):w.si(c,a.Bf);return}B.prototype.Hy.call(this,a,b)};w.g(O,"archetypeNodeData",O.prototype.Er);
w.defineProperty(O,{Er:"archetypeNodeData"},t("$j"),function(a){var b=this.$j;b!==a&&(a!==n&&w.i(a,Object,O,"archetypeNodeData"),this.$j=a,this.j("archetypeNodeData",b,a))});O.prototype.dm=function(a){if(a!==f){var b=this.$j;if(b!==n){var c=this.Ie(a);c===n&&(c=this.vj(b),w.Ka(c,this.Bl,a),this.Ar(c))}return a}};w.g(O,"linkFromKeyProperty",O.prototype.io);
w.defineProperty(O,{io:"linkFromKeyProperty"},t("Yi"),function(a){var b=this.Yi;b!==a&&(Le(a,O,"linkFromKeyProperty"),this.Yi=a,this.j("linkFromKeyProperty",b,a))});O.prototype.getFromKeyForLinkData=O.prototype.Zl=function(a){if(a!==n){var b=this.Yi;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setFromKeyForLinkData=O.prototype.Yv=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",O,"setFromKeyForLinkData:key");if(a!==n){var c=this.Yi;if(""!==c)if(b=this.dm(b),this.ui(a)){var d=w.Va(a,c);d!==b&&(bf(this,d,a),w.Ka(a,c,b),this.Ie(b)===n&&af(this,b,a),Ke(this,"linkFromKey",ie,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"linkToKeyProperty",O.prototype.mo);
w.defineProperty(O,{mo:"linkToKeyProperty"},t("$i"),function(a){var b=this.$i;b!==a&&(Le(a,O,"linkToKeyProperty"),this.$i=a,this.j("linkToKeyProperty",b,a))});O.prototype.getToKeyForLinkData=O.prototype.$l=function(a){if(a!==n){var b=this.$i;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
O.prototype.setToKeyForLinkData=O.prototype.Zv=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",O,"setToKeyForLinkData:key");if(a!==n){var c=this.$i;if(""!==c)if(b=this.dm(b),this.ui(a)){var d=w.Va(a,c);d!==b&&(bf(this,d,a),w.Ka(a,c,b),this.Ie(b)===n&&af(this,b,a),Ke(this,"linkToKey",ie,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"linkFromPortIdProperty",O.prototype.jo);
w.defineProperty(O,{jo:"linkFromPortIdProperty"},t("cq"),function(a){var b=this.cq;b!==a&&(Le(a,O,"linkFromPortIdProperty"),this.cq=a,this.j("linkFromPortIdProperty",b,a))});O.prototype.getFromPortIdForLinkData=O.prototype.CG=function(a){if(a===n)return"";var b=this.cq;if(""===b)return"";a=w.Va(a,b);return a===f?"":a};
O.prototype.setFromPortIdForLinkData=O.prototype.Bs=function(a,b){w.k(b,"string",O,"setFromPortIdForLinkData:portname");if(a!==n){var c=this.cq;if(""!==c)if(this.ui(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"linkFromPortId",ie,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"linkToPortIdProperty",O.prototype.no);
w.defineProperty(O,{no:"linkToPortIdProperty"},t("dq"),function(a){var b=this.dq;b!==a&&(Le(a,O,"linkToPortIdProperty"),this.dq=a,this.j("linkToPortIdProperty",b,a))});O.prototype.getToPortIdForLinkData=O.prototype.FG=function(a){if(a===n)return"";var b=this.dq;if(""===b)return"";a=w.Va(a,b);return a===f?"":a};
O.prototype.setToPortIdForLinkData=O.prototype.Cs=function(a,b){w.k(b,"string",O,"setToPortIdForLinkData:portname");if(a!==n){var c=this.dq;if(""!==c)if(this.ui(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"linkToPortId",ie,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(O,"nodeIsLinkLabelProperty",O.prototype.vo);
w.defineProperty(O,{vo:"nodeIsLinkLabelProperty"},t("eu"),function(a){var b=this.eu;b!==a&&(Le(a,O,"nodeIsLinkLabelProperty"),this.eu=a,this.j("nodeIsLinkLabelProperty",b,a))});O.prototype.isLinkLabelForNodeData=O.prototype.nz=function(a){if(a===n)return q;var b=this.eu;return""===b?q:w.Va(a,b)?h:q};w.g(O,"linkLabelKeysProperty",O.prototype.ko);
w.defineProperty(O,{ko:"linkLabelKeysProperty"},t("ih"),function(a){var b=this.ih;b!==a&&(Le(a,O,"linkLabelKeysProperty"),this.ih=a,this.j("linkLabelKeysProperty",b,a))});O.prototype.getLabelKeysForLinkData=O.prototype.Qk=function(a){if(a===n)return[];var b=this.ih;if(""===b)return[];a=w.Va(a,b);return a===f?[]:a};
O.prototype.setLabelKeysForLinkData=O.prototype.tE=function(a,b){w.Hr(b,O,"setLabelKeysForLinkData:arr");if(a!==n){var c=this.ih;if(""!==c)if(this.ui(a)){var d=w.Va(a,c);d===f&&(d=[]);if(d!==b){for(var e=w.Sb(d),g=0;g<e;g++){var i=w.Eb(d,g);bf(this,i,a)}w.Ka(a,c,b);e=w.Sb(b);for(g=0;g<e;g++)i=w.Eb(b,g),this.Ie(i)===n&&af(this,i,a);Ke(this,"linkLabelKeys",ie,c,a,d,b);"string"===typeof c&&this.vb(a,c)}}else w.Ka(a,c,b)}};
O.prototype.addLabelKeyForLinkData=O.prototype.UB=function(a,b){if(!(b===n||b===f))if(Me(b)||w.ic(b,"number or string",O,"addLabelKeyForLinkData:key"),a!==n){var c=this.ih;if(""!==c){var d=w.Va(a,c);d===f?this.tE(a,[b]):w.isArray(d)?0<=w.Dy(d,b)||(w.ri(d,Infinity,b),this.ui(a)&&(this.Ie(b)===n&&af(this,b,a),Ke(this,"linkLabelKeys",je,c,a,n,b))):w.m(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
O.prototype.removeLabelKeyForLinkData=O.prototype.GH=function(a,b){if(!(b===n||b===f))if(Me(b)||w.ic(b,"number or string",O,"removeLabelKeyForLinkData:key"),a!==n){var c=this.ih;if(""!==c){var d=w.Va(a,c);if(w.isArray(d)){var e=w.Dy(d,b);0>e||(w.si(d,e),this.ui(a)&&(bf(this,b,a),Ke(this,"linkLabelKeys",ke,c,a,b,n)))}else d!==f&&w.m(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};w.g(O,"linkDataArray",O.prototype.Pg);
w.defineProperty(O,{Pg:"linkDataArray"},t("tk"),function(a){var b=this.tk;if(b!==a){w.Hr(a,O,"linkDataArray");for(var c=w.Sb(a),d=0;d<c;d++){var e=w.Eb(a,d);if(!w.mb(e)){w.m("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}w.$r(e)}this.tk=a;for(var g=new ma(Object),d=0;d<c;d++)e=w.Eb(a,d),g.add(e);this.Wm=g;Ke(this,"linkDataArray",ie,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=w.Eb(a,d),cf(this,e)}});
O.prototype.containsLinkData=O.prototype.ui=function(a){return a===n?q:this.Wm.contains(a)};O.prototype.addLinkData=O.prototype.VB=function(a){if(a!==n){if(w.ec(a)===f)w.jc(a);else if(this.ui(a))return;this.Wm.add(a);var b=w.Sb(this.tk);w.ri(this.tk,b,a);Ke(this,"linkDataArray",je,"linkDataArray",this,n,a,n,b);cf(this,a)}};
O.prototype.removeLinkData=O.prototype.HH=function(a){if(a!==n){this.Wm.remove(a);var b=this.tk.indexOf(a);if(!(0>b)){w.si(this.tk,b);Ke(this,"linkDataArray",ke,"linkDataArray",this,a,n,b,n);b=this.Zl(a);bf(this,b,a);b=this.$l(a);bf(this,b,a);for(var c=this.Qk(a),d=w.Sb(c),e=0;e<d;e++)b=w.Eb(c,e),bf(this,b,a)}}};function cf(a,b){var c=a.Zl(b),c=a.dm(c);a.Ie(c)===n&&af(a,c,b);c=a.$l(b);c=a.dm(c);a.Ie(c)===n&&af(a,c,b);for(var d=a.Qk(b),e=w.Sb(d),g=0;g<e;g++)c=w.Eb(d,g),a.Ie(c)===n&&af(a,c,b)}
w.g(O,"copyLinkDataFunction",O.prototype.hG);w.defineProperty(O,{hG:"copyLinkDataFunction"},t("gt"),function(a){var b=this.gt;b!==a&&(a!==n&&w.k(a,"function",O,"copyLinkDataFunction"),this.gt=a,this.j("copyLinkDataFunction",b,a))});
O.prototype.copyLinkData=O.prototype.rC=function(a){if(a===n)return n;var b=n,b=this.gt;if(b!==n)b=b(a,this);else{var b=new a.constructor,c;for(c in a)w.Ka(b,c,w.Va(a,c))}b&&(w.jc(b),""!==this.Yi&&w.Ka(b,this.Yi,f),""!==this.$i&&w.Ka(b,this.$i,f),""!==this.ih&&w.Ka(b,this.ih,[]));return b};w.g(O,"nodeIsGroupProperty",O.prototype.uo);w.defineProperty(O,{uo:"nodeIsGroupProperty"},t("du"),function(a){var b=this.du;b!==a&&(Le(a,O,"nodeIsGroupProperty"),this.du=a,this.j("nodeIsGroupProperty",b,a))});
O.prototype.isGroupForNodeData=O.prototype.kz=function(a){if(a===n)return q;var b=this.du;return""===b?q:w.Va(a,b)?h:q};w.g(O,"nodeGroupKeyProperty",O.prototype.to);w.defineProperty(O,{to:"nodeGroupKeyProperty"},t("gj"),function(a){var b=this.gj;b!==a&&(Le(a,O,"nodeGroupKeyProperty"),this.gj=a,this.j("nodeGroupKeyProperty",b,a))});
O.prototype.getGroupKeyForNodeData=O.prototype.Yn=function(a){if(a!==n){var b=this.gj;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
O.prototype.setGroupKeyForNodeData=O.prototype.Rz=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",O,"setGroupKeyForNodeData:key");if(a!==n){var c=this.gj;if(""!==c)if(this.pe(a)){var d=w.Va(a,c);d!==b&&(bf(this,d,a),w.Ka(a,c,b),this.Ie(b)===n&&af(this,b,a),Ke(this,"nodeGroupKey",ie,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};O.prototype.copyNodeData=O.prototype.vj=function(a){if(a===n)return n;a=B.prototype.vj.call(this,a);""!==this.gj&&w.Ka(a,this.gj,f);return a};
O.prototype.setDataProperty=O.prototype.sE=function(a,b,c){u&&(w.k(a,"object",O,"setDataProperty:data"),w.k(b,"string",O,"setDataProperty:propname"),""===b&&w.m("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.pe(a))if(b===this.Wk)this.Sz(a,c);else{if(b===this.Vk){this.Wv(a,c);return}if(b===this.to){this.Rz(a,c);return}b===this.uo?w.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.vo&&
w.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.ui(a)){if(b===this.io){this.Yv(a,c);return}if(b===this.mo){this.Zv(a,c);return}if(b===this.jo){this.Bs(a,c);return}if(b===this.no){this.Cs(a,c);return}if(b===this.ho){this.rE(a,c);return}if(b===this.ko){this.tE(a,c);return}}var d=w.Va(a,b);d!==c&&(w.Ka(a,b,c),this.Gz(a,b,d,c))};da=O.prototype;
da.vs=function(a,b){B.prototype.vs.call(this,a,b);for(var c=this.kc.l;c.next();)this.Lz(c.value,a,b);for(c=this.Wm.l;c.next();){var d=c.value,e=a,g=b;if(this.Zl(d)===e){var i=this.Yi;w.Ka(d,i,g);Ke(this,"linkFromKey",ie,i,d,e,g);"string"===typeof i&&this.vb(d,i)}this.$l(d)===e&&(i=this.$i,w.Ka(d,i,g),Ke(this,"linkToKey",ie,i,d,e,g),"string"===typeof i&&this.vb(d,i));for(var j=this.Qk(d),k=w.Sb(j),i=this.ih,l=0;l<k;l++)w.Eb(j,l)===e&&(w.bC(j,l,g),Ke(this,"linkLabelKeys",je,i,d,e,g))}};
da.Lz=function(a,b,c){if(this.Yn(a)===b){var d=this.gj;w.Ka(a,d,c);Ke(this,"nodeGroupKey",ie,d,a,b,c);"string"===typeof d&&this.vb(a,d)}};da.bA=function(){B.prototype.bA.call(this);for(var a=this.Pg,b=w.Sb(a),c=0;c<b;c++)cf(this,w.Eb(a,c))};
da.Ao=function(a){B.prototype.Ao.call(this,a);var a=this.lb(a),b=Ne(this,a);if(b!==n){for(var c=new z(Object),b=b.l;b.next();){var d=b.value;if(this.pe(d)){if(this.Yn(d)===a){var e=this.gj;Ke(this,"nodeGroupKey",ie,e,d,a,a);"string"===typeof e&&this.vb(d,e);c.add(d)}}else{this.Zl(d)===a&&(e=this.Yi,Ke(this,"linkFromKey",ie,e,d,a,a),"string"===typeof e&&this.vb(d,e),c.add(d));this.$l(d)===a&&(e=this.$i,Ke(this,"linkToKey",ie,e,d,a,a),"string"===typeof e&&this.vb(d,e),c.add(d));for(var g=this.Qk(d),
i=w.Sb(g),e=this.ih,j=0;j<i;j++)w.Eb(g,j)===a&&(Ke(this,"linkLabelKeys",je,e,d,a,a),c.add(d))}}for(c=c.l;c.next();)bf(this,a,c.value)}};da.zo=function(a){B.prototype.zo.call(this,a);var b=this.Yn(a);this.Ie(b)===n&&af(this,b,a)};da.Ls=function(a){B.prototype.Ls.call(this,a);var b=this.Yn(a);bf(this,b,a)};w.g(O,"linkCategoryProperty",O.prototype.ho);
w.defineProperty(O,{ho:"linkCategoryProperty"},t("$p"),function(a){var b=this.$p;b!==a&&(Le(a,O,"linkCategoryProperty"),this.$p=a,this.j("linkCategoryProperty",b,a))});O.prototype.getCategoryForLinkData=O.prototype.SC=function(a){if(a===n)return"";var b=this.$p;if(""===b)return"";b=w.Va(a,b);if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return b};
O.prototype.setCategoryForLinkData=O.prototype.rE=function(a,b){w.k(b,"string",O,"setCategoryForLinkData:cat");if(a!==n){var c=this.$p;if(""===c)return"";if(this.ui(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"linkCategory",ie,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};function De(a){B.call(this);this.hj="parent";this.Aq="parentLinkCategory";a!==f&&(this.eg=a)}w.P("TreeModel",De);w.Da(De,B);
De.prototype.toString=function(a){a===f&&(a=0);if(2<=a)return this.Yz();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){var b=b+"\n node data:",a=this.eg,c=w.Sb(a),d;for(d=0;d<c;d++)var e=w.Eb(a,d),b=b+(" "+this.lb(e)+":"+le(e))}return b};De.prototype.writeJsonProtected=De.prototype.hw=function(){var a=B.prototype.hw.call(this),b="";"parent"!==this.wo&&"string"===typeof this.wo&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.wo));return a+b};
De.prototype.readJsonProtected=De.prototype.Qv=function(a){B.prototype.Qv.call(this,a);a.nodeParentKeyProperty&&(this.wo=a.nodeParentKeyProperty)};De.prototype.dm=function(a){return a};w.g(De,"nodeParentKeyProperty",De.prototype.wo);w.defineProperty(De,{wo:"nodeParentKeyProperty"},t("hj"),function(a){var b=this.hj;b!==a&&(Le(a,De,"nodeParentKeyProperty"),this.hj=a,this.j("nodeParentKeyProperty",b,a))});
De.prototype.getParentKeyForNodeData=De.prototype.Zn=function(a){if(a!==n){var b=this.hj;if(""!==b&&(b=w.Va(a,b),b!==f)){if(Me(b))return b;u&&w.trace("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
De.prototype.setParentKeyForNodeData=De.prototype.Cf=function(a,b){b===n&&(b=f);b!==f&&!Me(b)&&w.ic(b,"number or string",De,"setParentKeyForNodeData:key");if(a!==n){var c=this.hj;if(""!==c)if(b=this.dm(b),this.pe(a)){var d=w.Va(a,c);d!==b&&(bf(this,d,a),w.Ka(a,c,b),this.Ie(b)===n&&af(this,b,a),Ke(this,"nodeParentKey",ie,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};w.g(De,"parentLinkCategoryProperty",De.prototype.yH);
w.defineProperty(De,{yH:"parentLinkCategoryProperty"},t("Aq"),function(a){var b=this.Aq;b!==a&&(Le(a,De,"parentLinkCategoryProperty"),this.Aq=a,this.j("parentLinkCategoryProperty",b,a))});De.prototype.getParentLinkCategoryForNodeData=De.prototype.EG=function(a){if(a===n)return"";var b=this.Aq;if(""===b)return"";b=w.Va(a,b);if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return b};
De.prototype.setParentLinkCategoryForNodeData=De.prototype.SH=function(a,b){w.k(b,"string",De,"setParentLinkCategoryForNodeData:cat");if(a!==n){var c=this.Aq;if(""===c)return"";if(this.pe(a)){var d=w.Va(a,c);d===f&&(d="");d!==b&&(w.Ka(a,c,b),Ke(this,"parentLinkCategory",ie,c,a,d,b),"string"===typeof c&&this.vb(a,c))}else w.Ka(a,c,b)}};De.prototype.copyNodeData=De.prototype.vj=function(a){if(a===n)return n;a=B.prototype.vj.call(this,a);""!==this.hj&&w.Ka(a,this.hj,f);return a};
De.prototype.setDataProperty=De.prototype.sE=function(a,b,c){u&&(w.k(a,"object",B,"setDataProperty:data"),w.k(b,"string",B,"setDataProperty:propname"),""===b&&w.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c));if(this.pe(a))if(b===this.Wk)this.Sz(a,c);else{if(b===this.Vk){this.Wv(a,c);return}if(b===this.wo){this.Cf(a,c);return}}var d=w.Va(a,b);d!==c&&(w.Ka(a,b,c),this.Gz(a,b,d,c))};da=De.prototype;
da.vs=function(a,b){B.prototype.vs.call(this,a,b);for(var c=this.kc.l;c.next();)this.Lz(c.value,a,b)};da.Lz=function(a,b,c){if(this.Zn(a)===b){var d=this.hj;w.Ka(a,d,c);Ke(this,"nodeParentKey",ie,d,a,b,c);"string"===typeof d&&this.vb(a,d)}};
da.Ao=function(a){B.prototype.Ao.call(this,a);var a=this.lb(a),b=Ne(this,a);if(b!==n){for(var c=new z(Object),b=b.l;b.next();){var d=b.value;if(this.pe(d)&&this.Zn(d)===a){var e=this.hj;Ke(this,"nodeParentKey",ie,e,d,a,a);"string"===typeof e&&this.vb(d,e);c.add(d)}}for(c=c.l;c.next();)bf(this,a,c.value)}};da.zo=function(a){B.prototype.zo.call(this,a);var b=this.Zn(a),b=this.dm(b);this.Ie(b)===n&&af(this,b,a)};da.Ls=function(a){B.prototype.Ls.call(this,a);var b=this.Zn(a);bf(this,b,a)};
function df(a,b,c){w.jc(this);a===f?a="":w.k(a,"string",df,"constructor:targetprop");b===f?b=a:w.k(b,"string",df,"constructor:sourceprop");c===f?c=n:c!==n&&w.k(c,"function",df,"constructor:conv");this.EB="";this.Sf=n;this.Ju=a;this.Hu=this.ey=0;this.wB=n;this.Bu=b;this.Pw=c;this.Bx=ef;this.Lw=n}w.P("Binding",df);var ef;df.OneWay=ef=w.s(df,"OneWay",1);var ff;df.TwoWay=ff=w.s(df,"TwoWay",2);
df.parseEnum=function(a,b){w.k(a,"function",df,"parseEnum:ctor");w.jb(b,a,df,"parseEnum:defval");return function(c){return w.Vl(a,c)||b}};var le;df.toString=le=function(a){var b=a;w.mb(a)&&(a.text?b=a.text:a.Text?b=a.Text:a.name?b=a.name:a.Name?b=a.Name:a.key!==f?b=a.key:a.Key!==f?b=a.Key:a.id!==f?b=a.id:a.Id!==f?b=a.Id:a.ID!==f&&(b=a.ID));return b===f?"undefined":b===n?"null":b.toString()};df.prototype.toString=function(){return"Binding("+this.km+" "+this.Wz+":"+this.Uz+")"};
df.prototype.freeze=function(){this.$a=h;return this};df.prototype.Ia=function(){this.$a=q;return this};w.g(df,"targetId",df.prototype.km);w.defineProperty(df,{km:n},t("EB"),function(a){w.H(this);w.k(a,"string",df,"targetId");this.EB=a});w.g(df,"targetProperty",df.prototype.Wz);w.defineProperty(df,{Wz:"targetProperty"},t("Ju"),function(a){w.H(this);w.k(a,"string",df,"targetProperty");this.Ju=a});w.g(df,"sourceName",df.prototype.Eo);
w.defineProperty(df,{Eo:"sourceName"},t("wB"),function(a){w.H(this);w.k(a,"string",df,"sourceName");this.wB=a});w.g(df,"sourceProperty",df.prototype.Uz);w.defineProperty(df,{Uz:"sourceProperty"},t("Bu"),function(a){w.H(this);w.k(a,"string",df,"sourceProperty");this.Bu=a});w.g(df,"converter",df.prototype.oC);w.defineProperty(df,{oC:"converter"},t("Pw"),function(a){w.H(this);a!==n&&w.k(a,"function",df,"converter");this.Pw=a});w.g(df,"backConverter",df.prototype.fC);
w.defineProperty(df,{fC:"backConverter"},t("Lw"),function(a){w.H(this);a!==n&&w.k(a,"function",df,"backConverter");this.Lw=a});w.g(df,"mode",df.prototype.mode);w.defineProperty(df,{mode:"mode"},t("Bx"),function(a){w.H(this);w.jb(a,df,df,"mode");this.Bx=a});df.prototype.makeTwoWay=df.prototype.qL=function(a){a===f&&(a=n);this.mode=ff;this.fC=a;return this};df.prototype.ofObject=df.prototype.Ez=function(a){a===f&&(a="");u&&w.k(a,"string",df,"ofObject:srcname");this.Eo=a;return this};
df.prototype.updateTarget=df.prototype.QE=function(a,b,c){var d=this.Bu;if(!(c&&d!==c)){var c=this.Ju,e=this.Pw;if(!(e===n&&""===c)){u&&("string"===typeof c&&"function"!==typeof a.setAttribute&&!w.hz(a,c))&&w.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;""!==d&&(g=w.Va(b,d));if(g!==f)if(e===n)""!==c&&w.Ka(a,c,g);else try{if(""!==c){var i=e(g,a);w.Ka(a,c,i)}else e(g,a)}catch(j){u&&w.trace("Binding error: "+j.toString())}}}};
df.prototype.updateSource=df.prototype.PE=function(a,b,c){if(this.Bx===ff){var d=this.Ju;if(!(c&&d!==c)){var c=this.Bu,e=this.Lw;if(!(e===n&&""===c)){var g=a;""!==d&&(g=w.Va(a,d));if(g!==f)if(e===n)w.Ka(b,c,g);else try{if(""!==c){var i=e(g,b);w.Ka(b,c,i)}else e(g,b)}catch(j){u&&w.trace("Binding error: "+j.toString())}}}}};function gf(){this.$E=(new z(ge)).freeze();this.Bb="";this.WA=q}w.P("Transaction",gf);
gf.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.vh.count.toString()+(this.$n?"":", incomplete");if(a!==f&&0<a)for(var c=this.vh.count,d=0;d<c;d++){var e=this.vh.oa(d);e!==n&&(b+="\n  "+e.toString(a-1))}return b};gf.prototype.clear=gf.prototype.clear=function(){var a=this.vh;a.Ia();for(var b=a.count-1;0<=b;b--){var c=a.oa(b);c!==n&&c.clear()}a.clear();a.freeze()};gf.prototype.canUndo=gf.prototype.Jk=t("$n");
gf.prototype.undo=gf.prototype.cl=function(){if(this.Jk())for(var a=this.vh.count-1;0<=a;a--){var b=this.vh.oa(a);b!==n&&b.cl()}};gf.prototype.canRedo=gf.prototype.Hk=t("$n");gf.prototype.redo=gf.prototype.xo=function(){if(this.Hk())for(var a=this.vh.count,b=0;b<a;b++){var c=this.vh.oa(b);c!==n&&c.xo()}};w.u(gf,{vh:"changes"},t("$E"));w.g(gf,"name",gf.prototype.name);w.defineProperty(gf,{name:"name"},t("Bb"),ba("Bb"));w.g(gf,"isComplete",gf.prototype.$n);
w.defineProperty(gf,{$n:"isComplete"},t("WA"),ba("WA"));function ne(){this.Cx=new ma(B);this.Wh=q;this.cF=(new z(gf)).freeze();this.mk=-1;this.cB=999;this.Xh=q;this.lt=n;this.Ck=0;this.Mw=q;u&&(this.Mw=h);this.Eg=(new z("string")).freeze();this.$m=new z("number");this.gx=h}w.P("UndoManager",ne);
ne.prototype.toString=function(a){for(var b="UndoManager "+this.Dj+"<"+this.history.count+"<="+this.vz,b=b+"[",c=this.LD.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.LD.oa(d);b+="]";if(a!==f&&0<a){c=this.history.count;for(d=0;d<c;d++)b+="\n "+this.history.oa(d).toString(a-1)}return b};
ne.prototype.clear=ne.prototype.clear=function(){var a=this.history;a.Ia();for(var b=a.count-1;0<=b;b--){var c=a.oa(b);c!==n&&c.clear()}a.clear();this.mk=-1;a.freeze();this.Xh=q;this.lt=n;this.Ck=0;this.Eg.Ia();this.Eg.clear();this.Eg.freeze();this.$m.clear()};ne.prototype.addModel=ne.prototype.BF=function(a){this.Cx.add(a)};ne.prototype.removeModel=ne.prototype.IH=function(a){this.Cx.remove(a)};
ne.prototype.startTransaction=ne.prototype.hc=function(a){a===n&&(a="");if(this.tb)return q;this.gx===h&&(this.gx=q,this.Ck++,this.Ud("StartingFirstTransaction",a,this.Pl),0<this.Ck&&this.Ck--);this.isEnabled&&(this.Eg.Ia(),this.Eg.add(a),this.Eg.freeze(),this.Pl===n?this.$m.add(0):this.$m.add(this.Pl.vh.count));this.Ck++;var b=1===this.bl;b&&this.Ud("StartedTransaction",a);return b};ne.prototype.commitTransaction=ne.prototype.ne=function(a){return hf(this,h,a)};
ne.prototype.rollbackTransaction=ne.prototype.ws=function(){return hf(this,q,"")};
function hf(a,b,c){if(a.tb)return q;a.Iy&&1>a.bl&&w.trace("Ending transaction without having started a transaction: "+c);var d=1===a.bl;d&&(b&&a.isEnabled)&&a.Ud("CommittingTransaction",c,a.Pl);var e=0;if(0<a.bl&&(a.Ck--,a.isEnabled)){var g=a.Eg.count;0<g&&(""===c&&(c=a.Eg.oa(0)),a.Eg.Ia(),a.Eg.Te(g-1),a.Eg.freeze());g=a.$m.count;0<g&&(e=a.$m.oa(g-1),a.$m.Te(g-1))}g=a.Pl;if(d){if(b){if(a.isEnabled&&g!==n){b=g;b.$n=h;b.name=c;d=a.history;d.Ia();for(e=d.count-1;e>a.Dj;e--)g=d.oa(e),g!==n&&g.clear(),
d.Te(e);e=a.vz;0===e&&(e=1);0<e&&d.count>=e&&(g=d.oa(0),g!==n&&g.clear(),d.Te(0),a.mk--);d.add(b);a.mk++;d.freeze();g=b}a.Ud("CommittedTransaction",c,g)}else{a.Xh=h;try{a.isEnabled&&g!==n&&(g.$n=h,g.cl())}finally{a.Ud("RolledBackTransaction",c,g),a.Xh=q}g!==n&&g.clear()}a.lt=n;return h}if(a.isEnabled&&!b&&g!==n){a=e;c=g.vh;for(b=c.count-1;b>=a;b--)d=c.oa(b),d!==n&&d.cl(),c.Ia(),c.Te(b);c.freeze()}return q}
ne.prototype.canUndo=ne.prototype.Jk=function(){if(!this.isEnabled||0<this.bl||this.tb)return q;var a=this.KE;return a!==n&&a.Jk()?h:q};ne.prototype.undo=ne.prototype.cl=function(){if(this.Jk()){var a=this.KE;try{this.Ud("StartingUndo","Undo",a),this.Xh=h,this.mk--,a.cl()}catch(b){w.trace("undo error: "+b.toString())}finally{this.Xh=q,this.Ud("FinishedUndo","Undo",a)}}};
ne.prototype.canRedo=ne.prototype.Hk=function(){if(!this.isEnabled||0<this.bl||this.tb)return q;var a=this.JE;return a!==n&&a.Hk()?h:q};ne.prototype.redo=ne.prototype.xo=function(){if(this.Hk()){var a=this.JE;try{this.Ud("StartingRedo","Redo",a),this.Xh=h,this.mk++,a.xo()}catch(b){w.trace("redo error: "+b.toString())}finally{this.Xh=q,this.Ud("FinishedRedo","Redo",a)}}};
ne.prototype.Ud=function(a,b,c){c===f&&(c=n);var d=new ge;d.hd=he;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.kH;a.next();)b=a.value,d.ba=b,b.Xu(d)};ne.prototype.handleChanged=ne.prototype.aD=function(a){if(this.isEnabled&&!this.tb&&!this.skipsEvent(a)){var b=this.Pl;b===n&&(this.lt=b=new gf);var c=a.copy(),b=b.vh;b.Ia();b.add(c);b.freeze();this.Iy&&(0>=this.bl&&!this.gx)&&(a=a.h,a!==n&&a.zg===q||w.trace("Change not within a transaction: "+c.toString()))}};
ne.prototype.skipsEvent=ne.prototype.cM=function(a){if(a===n||0>a.hd.value)return h;a=a.object;if(a instanceof P){if(a=a.Ja,a!==n&&a.zc)return h}else if(a instanceof jf&&a.zc)return h;return q};w.u(ne,{kH:"models"},function(){return this.Cx.l});w.g(ne,"isEnabled",ne.prototype.isEnabled);w.defineProperty(ne,{isEnabled:"isEnabled"},t("Wh"),ba("Wh"));w.u(ne,{KE:"transactionToUndo"},function(){return 0<=this.Dj&&this.Dj<=this.history.count-1?this.history.oa(this.Dj):n});
w.u(ne,{JE:"transactionToRedo"},function(){return this.Dj<this.history.count-1?this.history.oa(this.Dj+1):n});w.u(ne,{tb:"isUndoingRedoing"},t("Xh"));w.u(ne,{history:"history"},t("cF"));w.g(ne,"maxHistoryLength",ne.prototype.vz);w.defineProperty(ne,{vz:"maxHistoryLength"},t("cB"),ba("cB"));w.u(ne,{Dj:"historyIndex"},t("mk"));w.u(ne,{Pl:"currentTransaction"},t("lt"));w.u(ne,{bl:"transactionLevel"},t("Ck"));w.u(ne,{RG:"isInTransaction"},function(){return 0<this.Ck});
w.defineProperty(ne,{Iy:"checksTransactionLevel"},t("Mw"),ba("Mw"));w.u(ne,{LD:"nestedTransactionNames"},t("Eg"));function pa(){this.aa=n;this.GA=this.yA=q;this.vk=this.qA=n;this.OB=1.05;this.xx=NaN;this.$A=n;this.PB=NaN;this.vF=n}w.P("CommandHandler",pa);var kf=n,lf="";pa.prototype.toString=ca("CommandHandler");w.u(pa,{h:"diagram"},t("aa"));pa.prototype.ee=function(a){u&&a!==n&&w.i(a,A,pa,"setDiagram");this.aa=a};
pa.prototype.doKeyDown=pa.prototype.Vy=function(){var a=this.h;if(a!==n){var b=a.N,c=b.Lk,d=b.shift,e=b.alt,g=b.key;c&&("C"===g||"Insert"===g)?this.canCopySelection()&&this.copySelection():c&&"X"===g||d&&"Del"===g?this.canCutSelection()&&this.cutSelection():"Del"===g?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===g||d&&"Insert"===g?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===g||e&&d&&"Backspace"===g?this.canRedo()&&this.redo():c&&"Z"===g||e&&"Backspace"===g?this.canUndo()&&
this.undo():c&&"A"===g?this.canSelectAll()&&this.selectAll():"Esc"===g?this.canStopCommand()&&this.stopCommand():"Up"===g?a.tf&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===g?a.tf&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===g?a.sf&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===g?a.sf&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===g?d&&a.sf?a.scroll("page","left"):a.tf&&a.scroll("page","up"):"PageDown"===g?d&&a.sf?a.scroll("page",
"right"):a.tf&&a.scroll("page","down"):"Home"===g?(b=a.wc,c&&a.tf?a.position=new F(a.position.x,b.y):!c&&a.sf&&(a.position=new F(b.x,a.position.y))):"End"===g?(b=a.wc,d=a.Ua,c&&a.tf?a.position=new F(d.x,b.bottom-d.height):!c&&a.sf&&(a.position=new F(b.right-d.width,d.y))):"Subtract"===g?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===g?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===g?this.canResetZoom()&&this.resetZoom():d&&"Z"===g?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===g?this.canGroupSelection()&&
this.groupSelection():c&&d&&"G"===g?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.bubbles=h}};pa.prototype.doKeyUp=pa.prototype.Wy=function(){var a=this.h;a!==n&&(a.N.bubbles=h)};pa.prototype.stopCommand=pa.prototype.jM=function(){var a=this.h;if(a!==n){var b=a.Ha;b instanceof mf&&a.ke&&a.Ky();b!==n&&b.doCancel()}};pa.prototype.canStopCommand=pa.prototype.fJ=ca(h);
pa.prototype.selectAll=pa.prototype.XL=function(){var a=this.h;if(a!==n)try{a.vc="wait";a.ya("ChangingSelection");for(var b=a.Yk;b.next();)b.value.Qa=h;for(b=a.Xk;b.next();)b.value.Qa=h;for(b=a.links;b.next();)b.value.Qa=h}finally{a.ya("ChangedSelection"),a.vc=""}};pa.prototype.canSelectAll=pa.prototype.eJ=function(){var a=this.h;return a!==n&&a.ke};
pa.prototype.deleteSelection=pa.prototype.LJ=function(){var a=this.h;if(a!==n&&!a.ya("SelectionDeleting",a.selection))try{a.vc="wait";a.hc("Delete");a.ya("ChangingSelection");for(var b=new ma(S),c=a.selection.l;c.next();)nf(b,c.value,h,this.GC,function(a){return a.canDelete()});a.Kz(b,h);a.ya("SelectionDeleted",b)}finally{a.ya("ChangedSelection"),a.ne("Delete"),a.vc=""}};
pa.prototype.canDeleteSelection=pa.prototype.NI=function(){var a=this.h;return a===n||(a.cb||a.te)||!a.Ek||0===a.selection.count?q:h};
function nf(a,b,c,d,e){if(!a.contains(b)&&(e===f&&(e=n),(e===n||e(b))&&!(b instanceof of)))if(a.add(b),b instanceof T){if(c&&b instanceof xf)for(var g=b.Gc;g.next();){var i=g.value;nf(a,i,c,d,e)}for(i=b.ue;i.next();)if(g=i.value,!a.contains(g)){var j=g.ga,k=g.la;j!==n&&a.contains(j)&&k!==n&&a.contains(k)?nf(a,g,c,d,e):(j===n||k===n)&&nf(a,g,c,d,e)}if(d){i=h;g=b.h;g!==n&&(i=g.jd);for(b=i?b.LC():b.KC();b.next();)i=b.value,nf(a,i,c,d,e)}}else if(b instanceof U)for(i=b.Fj;i.next();)nf(a,i.value,c,d,e)}
pa.prototype.copyParts=pa.prototype.On=function(a,b,c){for(var d=new la(S,S),a=a.l;a.next();){var e=a.value;yf(this,e,b,d,c)}if(b!==n){for(var c=b.ba,a=new ma(U),g=new la(U,U),i=d.l;i.next();)if(e=i.value,e instanceof U)(e.ga===n||e.la===n)&&a.add(e);else if(c instanceof De&&e instanceof T&&e.data!==n){var j=e,e=i.key,k=e.NC();k!==n&&((k=d.qa(k))?(c.Cf(j.data,c.lb(k.data)),j=b.yf(j.data),e=e.uv(),e!==n&&j!==n&&g.add(e,j)):c.Cf(j.data,f))}0<a.count&&b.Kz(a,q);if(0<g.count)for(b=g.l;b.next();)d.add(b.key,
b.value)}for(b=d.l;b.next();)b.value.vb();return d};
function yf(a,b,c,d,e){if(b===n||e&&!b.canCopy())return n;if(d.contains(b))return a=d.qa(b),a instanceof S?a:n;var g=n,i=b.data;if(i!==n&&c!==n){var j=c.ba;b instanceof U?j instanceof O&&(i=j.rC(i),w.mb(i)&&(j.VB(i),g=c.yf(i))):(i=j.vj(i),w.mb(i)&&(j.Ar(i),g=c.Cj(i)))}else zf(b),g=b.copy(),c!==n&&g instanceof S&&c.add(g);if(!(g instanceof S))return n;g.Qa=q;d.add(b,g);if(b instanceof T){for(j=b.ue;j.next();){i=j.value;if(i.ga===b){var k=d.qa(i);k!==n&&(k.ga=g)}i.la===b&&(k=d.qa(i),k!==n&&(k.la=g))}if(b instanceof
xf&&g instanceof xf)for(b=b.Gc;b.next();)j=yf(a,b.value,c,d,e),!(j instanceof U)&&j!==n&&(j.bb=g)}else if(b instanceof U){j=b.ga;j!==n&&(j=d.qa(j),j!==n&&(g.ga=j));j=b.la;j!==n&&(j=d.qa(j),j!==n&&(g.la=j));for(b=b.Fj;b.next();)j=yf(a,b.value,c,d,e),j!==n&&(j.yd=g)}return g}pa.prototype.copySelection=pa.prototype.BJ=function(){var a=this.h;if(a!==n){for(var b=new ma(S),a=a.selection.l;a.next();)nf(b,a.value,h,this.qC,function(a){return a.canCopy()});this.copyToClipboard(b)}};
pa.prototype.canCopySelection=pa.prototype.JI=function(){var a=this.h;return a===n||(!a.qj||!a.Uu)||0===a.selection.count?q:h};pa.prototype.cutSelection=pa.prototype.FJ=function(){this.copySelection();this.deleteSelection()};pa.prototype.canCutSelection=pa.prototype.KI=function(){var a=this.h;return a===n||(a.cb||a.te)||(!a.qj||!a.Ek||!a.Uu)||0===a.selection.count?q:h};
pa.prototype.copyToClipboard=pa.prototype.CJ=function(a){var b=this.h;if(b!==n){var c=n;a===n?(kf=n,lf=""):(a=b.On(a,n,h),c=new z(S),c.Wf(a),kf=c,lf=b.ba.Ql);b.ya("ClipboardChanged",c)}};pa.prototype.pasteFromClipboard=pa.prototype.GL=function(){var a=kf;if(a===n)return w.Ff;var b=this.h;if(b===n||lf!==b.ba.Ql)return w.Ff;b=b.On(a,b,q);a=new ma(S);for(b=b.l;b.next();){var c=b.value;c.location.T()||(c.location=b.key.location.copy());c.position.T()||(c.position=b.key.position.copy());a.add(c)}return a};
pa.prototype.pasteSelection=pa.prototype.HL=function(a){var b=this.h;if(b!==n)try{b.vc="wait";b.hc("Paste");b.ya("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&Af(b);for(var d=c.l;d.next();)d.value.Qa=h;b.ya("ChangedSelection");if(a instanceof F){var e=b.computePartsBounds(b.selection);if(e){var g=b.Rb.re,i=g.computeEffectiveCollection(b.selection);g.moveParts(i,new F(a.x-e.pa,a.y-e.ta),q)}}b.ya("ClipboardPasted",c)}finally{b.ne("Paste"),b.vc=""}};
pa.prototype.canPasteSelection=pa.prototype.XI=function(){var a=this.h;return a===n||(a.cb||a.te)||(!a.En||!a.Uu)||kf===n||lf!==a.ba.Ql?q:h};pa.prototype.undo=pa.prototype.cl=function(){var a=this.h;a!==n&&a.sa.cl()};pa.prototype.canUndo=pa.prototype.Jk=function(){var a=this.h;return a===n||a.cb||a.te?q:a.By&&a.sa.Jk()};pa.prototype.redo=pa.prototype.xo=function(){var a=this.h;a!==n&&a.sa.xo()};pa.prototype.canRedo=pa.prototype.Hk=function(){var a=this.h;return a===n||a.cb||a.te?q:a.By&&a.sa.Hk()};
pa.prototype.decreaseZoom=pa.prototype.GJ=function(a){a===f&&(a=1/this.Ns);var b=this.h;b!==n&&(a*=b.scale,a<b.Gj||a>b.Bh||(b.scale=a,b.yb()))};pa.prototype.canDecreaseZoom=pa.prototype.LI=function(a){a===f&&(a=1/this.Ns);var b=this.h;if(b===n)return q;a*=b.scale;return a<b.Gj||a>b.Bh?q:b.Kn};pa.prototype.increaseZoom=pa.prototype.UK=function(a){a===f&&(a=this.Ns);var b=this.h;b!==n&&(a*=b.scale,a<b.Gj||a>b.Bh||(b.scale=a,b.yb()))};
pa.prototype.canIncreaseZoom=pa.prototype.VI=function(a){a===f&&(a=this.Ns);var b=this.h;if(b===n)return q;a*=b.scale;return a<b.Gj||a>b.Bh?q:b.Kn};pa.prototype.resetZoom=pa.prototype.SL=function(a){a===f&&(a=1);var b=this.h;if(b!==n&&!(a<b.Gj||a>b.Bh))b.scale=a,b.yb()};pa.prototype.canResetZoom=pa.prototype.aJ=function(a){a===f&&(a=1);var b=this.h;return b===n||a<b.Gj||a>b.Bh?q:b.Kn};
pa.prototype.zoomToFit=pa.prototype.UE=function(){var a=this.h;if(a!==n){var b=a.scale,c=a.position;b===this.PB&&!isNaN(this.xx)?(a.scale=this.xx,a.position=this.$A,a.yb()):(this.xx=b,this.$A=c.copy(),a.UE(),a.Qg(),this.PB=a.scale,this.vF=a.position.copy())}};pa.prototype.canZoomToFit=pa.prototype.iJ=function(){var a=this.h;return a===n?q:a.Kn};
pa.prototype.collapseTree=pa.prototype.av=function(a){a===f&&(a=n);var b=this.h;if(b===n)return q;b.hc("Collapse Tree");var c=new z(T);if(a instanceof T&&a.Oe)a.av(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof T&&d.Oe&&(d.av(),c.add(d))}b.ya("TreeCollapsed",c);b.ne("Collapse Tree")};
pa.prototype.canCollapseTree=pa.prototype.HI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb)return q;if(a instanceof T){if(!a.Oe)return q;if(0<a.tv().count)return h}else for(a=b.selection.l;a.next();)if(b=a.value,b instanceof T&&b.Oe&&0<b.tv().count)return h;return q};
pa.prototype.expandTree=pa.prototype.pv=function(a){a===f&&(a=n);var b=this.h;if(b===n)return q;b.hc("Expand Tree");var c=new z(T);if(a instanceof T&&!a.Oe)a.pv(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof T&&!d.Oe&&(d.pv(),c.add(d))}b.ya("TreeExpanded",c);b.ne("Expand Tree")};
pa.prototype.canExpandTree=pa.prototype.SI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb)return q;if(a instanceof T){if(a.Oe)return q;if(0<a.tv().count)return h}else for(a=b.selection.l;a.next();)if(b=a.value,b instanceof T&&!b.Oe&&0<b.tv().count)return h;return q};
pa.prototype.groupSelection=pa.prototype.NK=function(){var a=this.h;if(a!==n){var b=a.ba;if(b!==n&&b instanceof O){var c=this.Cy;if(c!==n)try{a.vc="wait";a.hc("Group");a.ya("ChangingSelection");for(var d=new z(S),e=a.selection.l;e.next();){var g=e.value;g.be()&&g.canGroup()&&d.add(g)}for(var i=new z(S),j=d.l;j.next();){for(var k=j.value,g=q,e=d.l;e.next();)if(k.es(e.value)){g=h;break}g||i.add(k)}if(0<i.count){e=i.l;e.next();var l=e.value.bb;if(l!==n)for(;l!==n;){e=i.l;e.next();for(d=q;e.next();)if(k=
e.value,!k.es(l)){d=h;break}if(d)l=l.bb;else break}var m=n;if(c instanceof xf)zf(c),m=c.copy(),m instanceof xf&&a.add(m);else if(b.kz(c)){var p=b.vj(c);w.mb(p)&&(b.Ar(p),m=a.Qr(p))}if(m instanceof xf){l!==n&&this.isValidMember(l,m)&&(m.bb=l);for(e=i.l;e.next();)k=e.value,this.isValidMember(m,k)&&(k.bb=m);a.select(m)}}a.ya("ChangedSelection");a.ya("SelectionGrouped",m)}finally{a.ne("Group"),a.vc=""}}}};
pa.prototype.canGroupSelection=pa.prototype.UI=function(){var a=this.h;if(a===n||a.cb||a.te||!a.En||!a.Dn)return q;var b=a.ba;if(b===n||!(b instanceof O)||this.Cy===n)return q;for(a=a.selection.l;a.next();)if(b=a.value,b.be()&&b.canGroup())return h;return q};pa.prototype.findUnnestedNodes=pa.prototype.AK=function(a){for(var b=[],a=a.l;a.next();){var c=a.value;c instanceof U||b.push(c)}for(var a=new ma(S),c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,i=0;i<c;i++)if(e.es(b[i])){g=q;break}g&&a.add(e)}return a};
pa.prototype.isValidMember=pa.prototype.VG=function(a,b){if(b===n||a===b||b instanceof U)return q;if(a!==n){if(a===b||a.es(b))return q;var c=a.ks;if(c!==n&&!c(a,b)||a.data===n&&b.data!==n||a.data!==n&&b.data===n)return q}c=this.ks;return c!==n?c(a,b):h};
pa.prototype.ungroupSelection=pa.prototype.oM=function(a){a===f&&(a=n);var b=this.h;if(b!==n){var c=b.ba;if(c!==n&&c instanceof O)try{b.vc="wait";b.hc("Ungroup");b.ya("ChangingSelection");var d=new z(xf);if(a instanceof xf)d.add(a);else for(var e=b.selection.l;e.next();){var g=e.value;g instanceof xf&&g.canUngroup()&&d.add(g)}if(0<d.count){b.Ky();for(e=d.l;e.next();){var i=e.value,j=i.data,k=i.bb,l=k!==n&&k.data!==n?c.lb(k.data):f,m=new z(S);m.Wf(i.Gc);for(var p=m.l;p.next();){var r=p.value;if(!(r instanceof
U)){var s=r.data;s!==n?c.Rz(s,l):r.bb=k;r.Qa=h}}j!==n?c.$D(j):b.remove(i)}}b.ya("ChangedSelection");b.ya("SelectionUngrouped",d)}finally{b.ne("Ungroup"),b.vc=""}}};pa.prototype.canUngroupSelection=pa.prototype.hJ=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb||b.te||!b.Ek||!b.Jn)return q;var c=b.ba;if(c===n||!(c instanceof O))return q;if(a instanceof xf){if(a.canUngroup())return h}else for(a=b.selection.l;a.next();)if(b=a.value,b instanceof xf&&b.canUngroup())return h;return q};
pa.prototype.addTopLevelParts=pa.prototype.AI=function(a,b){for(var c=h,d=this.findUnnestedNodes(a).l;d.next();){var e=d.value;e.bb!==n&&(!b||this.isValidMember(n,e)?e.bb=n:c=q)}return c};pa.prototype.collapseSubGraph=pa.prototype.$u=function(a){a===f&&(a=n);var b=this.h;if(b===n)return q;b.hc("Collapse SubGraph");var c=new z(xf);if(a instanceof xf&&a.Ne)a.$u(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof xf&&d.Ne&&(d.$u(),c.add(d))}b.ya("SubGraphCollapsed",c);b.ne("Collapse SubGraph")};
pa.prototype.canCollapseSubGraph=pa.prototype.GI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb)return q;if(a instanceof xf)return!a.Ne?q:h;for(a=b.selection.l;a.next();)if(b=a.value,b instanceof xf&&b.Ne)return h;return q};
pa.prototype.expandSubGraph=pa.prototype.ov=function(a){a===f&&(a=n);var b=this.h;if(b===n)return q;b.hc("Expand SubGraph");var c=new z(xf);if(a instanceof xf&&!a.Ne)a.ov(),c.add(a);else for(a=b.selection.l;a.next();){var d=a.value;d instanceof xf&&!d.Ne&&(d.ov(),c.add(d))}b.ya("SubGraphExpanded",c);b.ne("Expand SubGraph")};
pa.prototype.canExpandSubGraph=pa.prototype.RI=function(a){a===f&&(a=n);var b=this.h;if(b===n||b.cb)return q;if(a instanceof xf)return a.Ne?q:h;for(a=b.selection.l;a.next();)if(b=a.value,b instanceof xf&&!b.Ne)return h;return q};
pa.prototype.editTextBlock=pa.prototype.iK=function(a){a===f&&(a=n);var b=this.h;if(b!==n&&b.Rb!==n){var c=b.Rb.cw;if(c!==n){if(a===n){for(var a=b.selection.l,d=n;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===n)return;a=d;d=function(a){return a instanceof na&&a.mv};a=d(a)?a:Bf(a,d)}a!==n&&a instanceof na&&(c.pg=a,b.Ha=c)}}};
pa.prototype.canEditTextBlock=pa.prototype.QI=function(a){a===f&&(a=n);var b=this.h;if(b===n||(b.cb||b.te)||!b.In||b.Rb===n||b.Rb.cw===n)return q;if(a instanceof na){if(a=a.ca,a!==n&&a.canEdit())return h}else for(b=b.selection.l;b.next();)if(a=b.value,a.canEdit()){var c=function(a){return a instanceof na&&a.mv},a=c(a)?a:Bf(a,c);if(a!==n)return h}return q};w.g(pa,"copiesTree",pa.prototype.qC);w.defineProperty(pa,{qC:"copiesTree"},t("yA"),ba("yA"));w.g(pa,"deletesTree",pa.prototype.GC);
w.defineProperty(pa,{GC:"deletesTree"},t("GA"),ba("GA"));w.g(pa,"archetypeGroupData",pa.prototype.Cy);w.defineProperty(pa,{Cy:"archetypeGroupData"},t("qA"),function(a){a!==n&&w.i(a,Object,pa,"archetypeGroupData");var b=this.h;b!==n&&(b=b.ba,b instanceof O&&!(a instanceof xf)&&!b.kz(a)&&w.m("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a));this.qA=a});w.g(pa,"memberValidation",pa.prototype.ks);
w.defineProperty(pa,{ks:"memberValidation"},t("vk"),function(a){a!==n&&w.k(a,"function",pa,"memberValidation");this.vk=a});w.g(pa,"zoomFactor",pa.prototype.Ns);w.defineProperty(pa,{Ns:"zoomFactor"},t("OB"),function(a){w.k(a,"number",pa,"zoomFactor");1<a||w.m("zoomFactor must be larger than 1.0, not: "+a);this.OB=a});function Cf(){w.jc(this);this.aa=n;this.Bb="";this.Wh=h;this.UA=q;this.MB=n;this.Qu=-1}w.P("Tool",Cf);Cf.prototype.ee=function(a){u&&a!==n&&w.i(a,A,Cf,"setDiagram");this.aa=a};
Cf.prototype.toString=function(){return""!==this.name?this.name+" Tool":w.Pk(Object.getPrototypeOf(this))};Cf.prototype.updateAdornments=Cf.prototype.Ki=aa();Cf.prototype.canStart=Cf.prototype.uf=t("isEnabled");Cf.prototype.doStart=Cf.prototype.Xy=aa();Cf.prototype.doActivate=Cf.prototype.zh=function(){this.W=h};Cf.prototype.doDeactivate=Cf.prototype.xi=function(){this.W=q};Cf.prototype.doStop=Cf.prototype.Nk=aa();Cf.prototype.doCancel=Cf.prototype.zj=function(){this.stopTool()};
Cf.prototype.stopTool=Cf.prototype.kM=function(){var a=this.h;a!==n&&a.Ha===this&&(a.Ha=n,a.vc="")};Cf.prototype.doMouseDown=Cf.prototype.Lr=function(){!this.W&&this.canStart()&&this.doActivate()};Cf.prototype.doMouseMove=Cf.prototype.Mg=aa();Cf.prototype.doMouseUp=Cf.prototype.qe=function(){this.stopTool()};Cf.prototype.doMouseWheel=Cf.prototype.qG=aa();Cf.prototype.doKeyDown=Cf.prototype.Vy=function(){var a=this.h;a!==n&&"Esc"===a.N.key&&this.doCancel()};Cf.prototype.doKeyUp=Cf.prototype.Wy=aa();
Cf.prototype.startTransaction=Cf.prototype.hc=function(a){this.Xe=n;var b=this.h;return b===n?q:b.hc(a)};Cf.prototype.stopTransaction=Cf.prototype.Kj=function(){var a=this.h;return a===n?q:this.Xe===n?a.ws():a.ne(this.Xe)};
Cf.prototype.standardMouseSelect=Cf.prototype.XH=function(){var a=this.h;if(a!==n&&a.ke){var b=a.N,c=a.Rr(b.M,q);if(c!==n)if(b.Lk){a.ya("ChangingSelection");for(b=c;b!==n&&!b.Ik();)b=b.bb;b.Qa=!b.Qa;a.ya("ChangedSelection")}else if(b.shift){if(!c.Qa){a.ya("ChangingSelection");for(b=c;b!==n&&!b.Ik();)b=b.bb;b.Qa=h;a.ya("ChangedSelection")}}else{if(!c.Qa){for(b=c;b!==n&&!b.Ik();)b=b.bb;a.select(b)}}else b.left&&(!b.Lk&&!b.shift)&&a.Ky()}};
Cf.prototype.standardMouseClick=Cf.prototype.fM=function(a,b){a===f&&(a=n);b===f&&(b=function(a){return!a.Ja.zc});var c=this.h;if(c!==n){var d=c.N,e=c.xd(d.M,a,b);d.Ad=e;Df(e,d,c)}};
function Df(a,b,c){var d=0;b.left?d=1===b.Xd?1:2===b.Xd?2:1:b.right&&1===b.Xd&&(d=3);var e="";if(a!==n){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.ya(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.ya(e)}if(a!==n)for(;a!==n;){e=n;switch(d){case 1:e=a.click;break;case 2:e=a.Tl?a.Tl:a.click;break;case 3:e=a.Ir}if(e!==n&&
(e(b,a),b.ae))break;a=a.fa}else{e=n;switch(d){case 1:e=c.click;break;case 2:e=c.Tl?c.Tl:c.click;break;case 3:e=c.Ir}e!==n&&e(b)}}
Cf.prototype.standardMouseOver=Cf.prototype.gM=function(){var a=this.h;if(a!==n){var b=a.N,c=a.xd(b.M,n,n);b.Ad=c;var d=a.ub;a.ub=h;var e=q;if(c!==a.ym){var g=a.ym;a.Qx=g;a.ym=c;for(this.doCurrentObjectChanged(g,c);g!==n;){var i=g.zz;if(i!==n){if(c===g)break;if(c!==n&&c.Ei(g))break;i(b,g,c);e=h;if(b.ae)break}g=g.fa}for(g=a.Qx;c!==n;){i=c.yz;if(i!==n){if(g===c)break;if(g!==n&&g.Ei(c))break;i(b,c,g);e=h;if(b.ae)break}c=c.fa}c=a.ym}if(c!==n){g=c;for(i="";g!==n;){i=g.cursor;if(""!==i)break;g=g.fa}a.vc=
i;for(g=c;g!==n;){i=g.os;if(i!==n&&(i(b,g),e=h,b.ae))break;g=g.fa}}else a.vc="",i=a.os,i!==n&&(i(b),e=h);e&&a.Qg();a.ub=d}};Cf.prototype.doCurrentObjectChanged=Cf.prototype.pG=aa();
Cf.prototype.standardMouseWheel=Cf.prototype.hM=function(){var a=this.h;if(a!==n){var b=a.N,c=b.yj;if(0!==c){var d=a.Rb.em;if(a.Kn&&(d===Ef&&!b.shift||d===Ff&&b.Lk)){d=a.dl;a.dl=b.kd;var e=a.Xf;e!==n?0<c?e.increaseZoom():e.decreaseZoom():a.scale=0<c?1.05*a.scale:a.scale/1.05;a.dl=d;b.bubbles=q}else if(d===Ef&&b.shift||d===Ff&&!b.Lk)d=a.position.copy(),!b.shift&&a.tf?0<c?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.sf&&(0<c?a.scroll("line","left",3):a.scroll("line","right",3)),a.position.I(d)||
(b.bubbles=q)}}};Cf.prototype.standardWaitAfter=Cf.prototype.iM=function(a){w.k(a,"number",Cf,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.Qu=window.setTimeout(function(){b.doWaitAfter()},a)};Cf.prototype.cancelWaitAfter=Cf.prototype.jJ=function(){-1!==this.Qu&&window.clearTimeout(this.Qu);this.Qu=-1};Cf.prototype.doWaitAfter=Cf.prototype.rG=aa();
Cf.prototype.findToolHandleAt=Cf.prototype.wK=function(a,b){var c=this.h;if(c===n)return n;c=c.xd(a,n,function(a){a=a.ca;return a===n?q:a.Cc!==n});if(c===n)return n;var d=c.ca;return d===n||d.vd!==b?n:c};Cf.prototype.isBeyondDragSize=Cf.prototype.bL=function(a,b){var c=this.h;if(c===n)return q;a===f&&(a=c.xc.kd);b===f&&(b=c.N.kd);c=2;w.ay&&(c+=4);return Math.abs(b.x-a.x)>c||Math.abs(b.y-a.y)>c};w.u(Cf,{h:"diagram"},t("aa"));w.g(Cf,"name",Cf.prototype.name);
w.defineProperty(Cf,{name:"name"},t("Bb"),ba("Bb"));w.g(Cf,"isEnabled",Cf.prototype.isEnabled);w.defineProperty(Cf,{isEnabled:"isEnabled"},t("Wh"),ba("Wh"));w.g(Cf,"isActive",Cf.prototype.W);w.defineProperty(Cf,{W:"isActive"},t("UA"),ba("UA"));w.g(Cf,"transactionResult",Cf.prototype.Xe);w.defineProperty(Cf,{Xe:"transactionResult"},t("MB"),ba("MB"));
function Gf(){Cf.call(this);this.name="Dragging";this.xA=h;this.rl=this.NA=q;this.sx=h;this.jx=(new bb(NaN,NaN)).freeze();this.kx=Jb;this.lx=(new F(NaN,NaN)).freeze();this.KA=q;this.LA=this.wA=this.MA=this.AA=n;this.np=this.JA=q;this.ln=new F(NaN,NaN);this.ni=new F;this.Eu=q;this.Au=h;this.Cm=100;this.ml=this.qu=n}w.P("DraggingTool",Gf);w.Da(Gf,Cf);w.g(Gf,"copiesEffectiveCollection",Gf.prototype.pC);w.defineProperty(Gf,{pC:"copiesEffectiveCollection"},t("xA"),ba("xA"));w.g(Gf,"dragsTree",Gf.prototype.IC);
w.defineProperty(Gf,{IC:"dragsTree"},t("NA"),ba("NA"));w.g(Gf,"isGridSnapEnabled",Gf.prototype.bo);w.defineProperty(Gf,{bo:"isGridSnapEnabled"},t("rl"),function(a){this.rl!==a&&(w.k(a,"boolean",Gf,"isGridSnapEnabled"),this.rl=a)});w.g(Gf,"isGridSnapRealtime",Gf.prototype.nD);w.defineProperty(Gf,{nD:"isGridSnapRealtime"},t("sx"),function(a){this.sx!==a&&(w.k(a,"boolean",Gf,"isGridSnapRealtime"),this.sx=a)});w.g(Gf,"gridSnapCellSize",Gf.prototype.fz);
w.defineProperty(Gf,{fz:"gridSnapCellSize"},t("jx"),function(a){this.jx.I(a)||(w.i(a,bb,Gf,"gridSnapCellSize"),this.jx=a=a.O())});w.g(Gf,"gridSnapCellSpot",Gf.prototype.XC);w.defineProperty(Gf,{XC:"gridSnapCellSpot"},t("kx"),function(a){this.kx.I(a)||(w.i(a,H,Gf,"gridSnapCellSpot"),this.kx=a=a.O())});w.g(Gf,"gridSnapOrigin",Gf.prototype.YC);w.defineProperty(Gf,{YC:"gridSnapOrigin"},t("lx"),function(a){this.lx.I(a)||(w.i(a,F,Gf,"gridSnapOrigin"),this.lx=a=a.O())});w.g(Gf,"draggableLinks",Gf.prototype.Ul);
w.defineProperty(Gf,{Ul:"draggableLinks"},t("KA"),ba("KA"));w.g(Gf,"currentPart",Gf.prototype.Qn);w.defineProperty(Gf,{Qn:"currentPart"},t("AA"),ba("AA"));w.g(Gf,"copiedParts",Gf.prototype.Mc);w.defineProperty(Gf,{Mc:"copiedParts"},t("wA"),ba("wA"));w.g(Gf,"draggedParts",Gf.prototype.dc);w.defineProperty(Gf,{dc:"draggedParts"},t("MA"),ba("MA"));w.g(Gf,"draggedLink",Gf.prototype.cc);w.defineProperty(Gf,{cc:"draggedLink"},t("LA"),ba("LA"));w.g(Gf,"dragOutStarted",Gf.prototype.Zy);
w.defineProperty(Gf,{Zy:"dragOutStarted"},t("JA"),ba("JA"));w.g(Gf,"delay",Gf.prototype.kv);w.defineProperty(Gf,{kv:"delay"},t("Cm"),ba("Cm"));Gf.prototype.canStart=Gf.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||!a.Fk&&!a.qj&&!a.Vu||!a.ke)return q;var b=a.N;return!b.left||a.Ha!==this&&(!this.isBeyondDragSize()||window.TouchEvent&&(b.Vi!==n&&b.Vi instanceof window.TouchEvent)&&b.timestamp-a.xc.timestamp<this.Cm)?q:this.findDraggablePart()!==n};
Gf.prototype.findDraggablePart=Gf.prototype.oK=function(){var a=this.h;if(a===n)return n;a=a.Rr(a.xc.M,q);if(a===n)return n;for(;a!==n&&!a.Ik();)a=a.bb;return a!==n&&(a.canMove()||a.canCopy())?a:n};Gf.prototype.standardMouseSelect=Gf.prototype.XH=function(){var a=this.h;if(a!==n&&a.ke){var b=a.Rr(a.xc.M,q);if(b!==n){for(;b!==n&&!b.Ik();)b=b.bb;this.Qn=b;this.Qn.Qa||(a.ya("ChangingSelection"),b=a.N,!b.Lk&&!b.shift&&Af(a),this.Qn.Qa=h,a.ya("ChangedSelection"))}}};
Gf.prototype.doActivate=Gf.prototype.zh=function(){var a=this.h;if(a!==n){this.standardMouseSelect();var b=this.Qn;b===n||!b.canMove()&&!b.canCopy()||(this.W=h,this.ln.set(a.position),Hf(this,a.selection),this.ml=this.qu=n,this.dc=this.computeEffectiveCollection(a.selection),If(this,this.dc),this.hc("Drag"),this.ni.set(a.xc.M),a.Vu?(this.Zy=h,this.np=q,Jf=this,this.h.Fc=h):a.Fc=h)}};
function Hf(a,b){if(a.Ul){var c=a.h;c!==n&&c.rj&&(1===b.count?(c=b.l,c.next(),a.cc=c.value,a.cc!==n&&(a.cc.canRelinkFrom()&&a.cc.canRelinkTo())&&a.cc.wh()):a.cc=n)}}
Gf.prototype.computeEffectiveCollection=Gf.prototype.oJ=function(a){var b=this.h!==n&&this.h.Ha===this,c=new la(S,Object);if(a===n)return c;for(var d=a.l;d.next();){var e=d.value;Kf(this,c,e,b)}if(this.cc!==n&&this.Ul)return c;for(d=a.l;d.next();)e=d.value,e instanceof U&&(a=e,b=a.ga,b!==n&&!c.contains(b)?c.remove(a):(b=a.la,b!==n&&!c.contains(b)&&c.remove(a)));return c};function Lf(a){return a===f?{point:new F}:{point:a}}
function Kf(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof T){b.add(c,Lf(c.location));if(c instanceof xf)for(var e=c.Gc;e.next();){var g=e.value;Kf(a,b,g,d)}for(g=c.ue;g.next();)if(e=g.value,!b.contains(e)){var i=e.ga,j=e.la;i!==n&&(b.contains(i)&&j!==n&&b.contains(j))&&Kf(a,b,e,d)}if(a.IC){g=h;e=c.h;e!==n&&(g=e.jd);for(c=g?c.LC():c.KC();c.next();)g=c.value,Kf(a,b,g,d)}}else if(c instanceof U){e=c;b.add(e,Lf());for(g=e.Fj;g.next();)Kf(a,b,g.value,d)}else c instanceof of||
b.add(c,Lf(c.location))}Gf.prototype.doDeactivate=Gf.prototype.xi=function(){this.W=q;var a=this.h;a!==n&&Mf(a);Nf(this);Of(this,this.dc);this.dc=n;this.np=this.Zy=q;if(0<Pf.count){for(var b=Pf.length,c=0;c<b;c++){var d=Pf.n[c];d.cc!==n&&(d.cc=n);Qf(d);Nf(d);d.h!==n&&Mf(d.h)}Pf.clear()}this.cc!==n&&(this.cc=n);this.ln.Co(NaN,NaN);Jf=Rf=n;Qf(this);a.Fc=q;this.Kj()};
function Nf(a){var b=a.h;if(b!==n){var c=b.ub;b.ub=h;for(var d=b.N,e=a.ml;e!==n;){var g=e.xz;if(g!==n&&(g(d,e,n),d.ae))break;e=e.fa}b.ub=c}a.qu=n;a.ml=n}Gf.prototype.doCancel=Gf.prototype.zj=function(){Qf(this);Sf(this);var a=this.h;a!==n&&this.ln.T()&&(a.position=this.ln);this.stopTool()};function If(a,b){if(b!==n){a.Eu=h;for(var c=b.l;c.next();){var d=c.key;d instanceof U&&(d.pn=h)}}}
function Of(a,b){if(b!==n&&a.Eu){for(var c=b.l;c.next();){var d=c.key;d instanceof U&&(d.pn=q,d.Dh===Tf?d.Tb():d.R())}a.Eu=q}}Gf.prototype.doKeyDown=Gf.prototype.Vy=function(){var a=this.h;a!==n&&(a=a.N,a!==n&&this.W&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};Gf.prototype.doKeyUp=Gf.prototype.Wy=function(){var a=this.h;a!==n&&(a.N!==n&&this.W)&&this.doMouseMove()};
function bg(a){for(var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity,a=a.l;a.next();){var g=a.value;if(g.be()){var i=g.location,g=i.x,i=i.y;!isNaN(g)&&!isNaN(i)&&(g<b&&(b=g),i<c&&(c=i),g>d&&(d=g),i>e&&(e=i))}}return Infinity===b?new G(0,0,0,0):new G(b,c,d-b,e-c)}
function cg(a,b){if(a.Mc===n){var c=a.h;if(!(c===n||c.cb||c.te)&&a.dc!==n){c.ub=!b;c.Cr=!b;Sf(a);a.ni.set(c.xc.M);for(var c=a.pC?c.On(a.dc.Lj(),c,h):c.On(c.selection,c,h),d=c.l;d.next();)d.value.location=d.key.location.copy();d=bg(c);new F(d.x+d.width/2,d.y+d.height/2);for(var d=new la(S,Object),e=a.dc.l;e.next();){var g=e.key;g.be()&&g.canCopy()&&(g=c.qa(g),g!==n&&(g.yi(),d.add(g,Lf(g.location))))}for(c=c.l;c.next();)e=c.value,e instanceof U&&e.canCopy()&&d.add(e,Lf());a.Mc=d;Hf(a,d.Lj());a.cc!==
n&&(c=a.cc,d=c.Th(),c.Uk(a.ni.x-(d.x+d.width/2),a.ni.y-(d.y+d.height/2)))}}}function Qf(a){var b=a.h;b!==n&&(a.Mc!==n&&(b.Kz(a.Mc.Lj(),q),a.Mc=n),b.ub=q,b.Cr=q,a.ni.set(b.xc.M))}function dg(a,b){var c=a.h;if(c!==n){var d=a.ni;a.moveParts(b,c.N.M.copy().Fs(d),h)}}
Gf.prototype.moveParts=Gf.prototype.lH=function(a,b,c){if(!(a===n||0===a.count)){var d=b.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);var e=this.Eu;e||If(this,a);for(var g=new z,i=new z(Ma),j=a.l;j.next();){var k=j.key;if(k.be()){var l=eg(this,k,a);if(l!==n)g.add({Tg:k,info:j.value,GG:l});else if(!c||k.canMove()){var l=j.value.point,m=this.computeMove(k,l.copy().add(d),a);k.location=m;j.value.jF=m.copy().Fs(l)}}else j.key instanceof U&&i.add(j.Gd)}for(c=g.l;c.next();)g=c.value,l=g.info.point,m=
l.copy().add(g.GG.jF),g.Tg.location=m;for(i=i.l;i.next();)if(j=i.value,l=j.key,l instanceof U)if(l.pn)if(c=l.ga,g=l.la,this.cc!==n&&this.Ul)j=j.value.point,a.add(l,Lf(d)),m=b.x-j.x,c=b.y-j.y,l.Uk(m,c);else{m=new F(0,0);if(c!==n){m.set(c.location);var p=a.qa(c);p!==n&&m.Fs(p.point)}k=new F(0,0);g!==n&&(k.set(g.location),p=a.qa(g),p!==n&&k.Fs(p.point));c!==n&&g!==n?m.zi(k)?(j=j.value.point,c=m.copy(),c.Fs(j),a.add(l,Lf(m)),l.Uk(c.x,c.y)):(l.pn=q,l.Tb()):(j=j.value.point,a.add(l,Lf(c!==n?m:g!==n?k:b)),
m=d.x-j.x,c=d.y-j.y,l.Uk(m,c))}else if(l.ga===n||l.la===n)j=j.value.point,a.add(l,Lf(b)),m=d.x-j.x,c=d.y-j.y,l.Uk(m,c);e||Of(this,a)}};function eg(a,b,c){b=b.bb;if(b!==n){a=eg(a,b,c);if(a!==n)return a;a=c.qa(b);if(a!==n)return a}return n}
function Sf(a){if(a.dc!==n){var b=a.h,c=q;b!==n&&(c=b.ub,b.ub=h);for(var d=a.dc.l;d.next();){var e=d.key;e.be()&&(e.location=d.value.point)}for(d=a.dc.l;d.next();)if(e=d.key,e instanceof U&&e.pn){var g=d.value.point;a.dc.add(e,Lf());e.Uk(-g.x,-g.y)}b!==n&&(b.ub=c,b.Ci())}}
Gf.prototype.computeMove=Gf.prototype.rJ=function(a,b,c){if(a===n)return b;c===f&&(c=n);var d=b,d=b;if(this.bo&&(this.nD||c===n||this.h.N.Ji))if(d=b.copy(),a!==n&&(c=this.h,c!==n)){var e=c.yv,g=this.fz,c=g.width,g=g.height,i=this.YC,j=i.x,i=i.y,k=this.XC;if(e!==n){var l=e.Yr;isNaN(c)&&(c=l.width);isNaN(g)&&(g=l.height);e=e.ez;isNaN(j)&&(j=e.x);isNaN(i)&&(i=e.y)}e=(new F).im(0,0,c,g,k);d=fd(d.x,d.y,j+e.x,i+e.y,c,g)}d=a.Yy!==n?a.Yy(a,b,d):d;c=a.GD;b=c.x;isNaN(b)&&(b=a.location.x);c=c.y;isNaN(c)&&(c=
a.location.y);j=a.AD;g=j.x;isNaN(g)&&(g=a.location.x);j=j.y;isNaN(j)&&(j=a.location.y);return new F(Math.max(b,Math.min(d.x,g)),Math.max(c,Math.min(d.y,j)))};function fg(a,b){if(b===n)return h;var c=b.ca;return c===n||c.Qa||c instanceof of||c.Ja.zc||a.dc&&a.dc.contains(c)||a.Mc&&a.Mc.contains(c)?h:q}
function gg(a,b,c,d){var e=a.h;if(e!==n){if(a.Ul&&a.cc!==n){var g=a.h.ba;g instanceof O&&(a.cc.ga!==n&&g.Bs(a.cc.data,""),a.cc.la!==n&&g.Cs(a.cc.data,""))}g=q;a.Au===q&&(g=e.ub,e.ub=h);var i=q,j=hg(e,b,n,function(b){return!fg(a,b)}),k=e.N;k.Ad=j;var l=e.ub;e.ub=h;if(j!==a.ml){var m=a.ml;a.qu=m;for(a.ml=j;m!==n;){var p=m.xz;if(p!==n){if(j===m)break;if(j!==n&&j.Ei(m))break;p(k,m,j);i=h;if(k.ae)break}m=m.fa}for(m=a.qu;j!==n;){p=j.HD;if(p!==n){if(m===j)break;if(m!==n&&m.Ei(j))break;p(k,j,m);i=h;if(k.ae)break}j=
j.fa}j=a.ml}j===n&&(p=e.JD,p!==n&&(p(k),i=h));a.doDragOver(b,j);e.ub=l;i&&e.Qg();a.Au===q&&(e.ub=g);if((e.sf||e.tf)&&(c||d))e.Kw=e.Ks(b),ig(e,e.Kw).zi(e.position)?Mf(e):jg(e)}}Gf.prototype.doDragOver=Gf.prototype.OJ=aa();
function kg(a,b){var c=a.h;if(c!==n&&c.ba!==n){Nf(a);var d=hg(c,b,n,function(b){return!fg(a,b)}),e=c.N;e.Ad=d;if(d!==n)for(var g=d;g!==n;){var i=g.ls;if(i!==n&&(i(e,g),e.ae))break;g=g.fa}else i=c.ls,i!==n&&i(e);a.doDropOnto(b,d);for(d=c.selection.l;d.next();)e=d.value,e instanceof T&&lg(c,e.va)}}Gf.prototype.doDropOnto=Gf.prototype.PJ=aa();
Gf.prototype.doMouseMove=Gf.prototype.Mg=function(){if(this.W){var a=this.h;if(a!==n&&this.Qn!==n&&this.dc!==n){var b=q,c=q;this.mayCopy()?(b=h,cg(this,q),dg(this,this.Mc)):this.mayMove()?(c=h,Qf(this),dg(this,this.dc)):Qf(this);gg(this,a.N.M,c,b);a.yb()}}};
Gf.prototype.doMouseUp=Gf.prototype.qe=function(){if(this.W){this.np=h;var a=this.h;if(a!==n){var b=q,c=this.mayCopy();c&&this.Mc!==n?(Sf(this),Qf(this),cg(this,h),dg(this,this.Mc),this.Mc!==n&&a.Pz(this.Mc.Lj())):(b=h,Qf(this),this.mayMove()&&(dg(this,this.dc),this.Au=q,gg(this,a.N.M,h,q),this.Au=h));kg(this,a.N.M);if(this.W){this.Mc=n;if(b&&this.dc!==n)for(b=this.dc.l;b.next();){var d=b.key;d instanceof T&&(d=d.bb,d!==n&&d.placeholder!==n&&!this.dc.contains(d)&&d.Qy&&d.R())}a.Ci();Of(this,this.dc);
this.Xe=c?"Copy":"Move";a.ya(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};Gf.prototype.mayCopy=Gf.prototype.vL=function(){var a=this.h;if(a===n||(a.cb||a.te||!a.En||!a.qj)||!a.N.Lk)return q;for(a=a.selection.l;a.next();){var b=a.value;if(b.be()&&b.canCopy())return h}return this.cc!==n&&this.Ul&&this.cc.canCopy()?h:q};
Gf.prototype.mayMove=Gf.prototype.xL=function(){var a=this.h;if(a===n||a.cb||!a.Fk)return q;for(a=a.selection.l;a.next();){var b=a.value;if(b.be()&&b.canMove())return h}return this.cc!==n&&this.Ul&&this.cc.canMove()?h:q};var Pf=new z(Gf),Jf=n,Rf=n;Gf.prototype.mayCopyExternal=Gf.prototype.wL=function(){var a=this.h;return a===n||(!a.YB||a.cb||a.te||!a.En)||a.ba===n?q:h};Gf.prototype.doSimulatedDragEnter=Gf.prototype.RJ=function(){this.mayCopyExternal()&&(Pf.contains(this)||Pf.add(this))};
Gf.prototype.doSimulatedDragLeave=Gf.prototype.SJ=function(){Qf(this);var a=this.h;a!==n&&(a.Ha!==this&&this.ln.T())&&(a.position=this.ln)};Gf.prototype.doSimulatedDragOver=Gf.prototype.TJ=function(){if(this.mayCopyExternal()){var a=this.h;if(a!==n){var b=Jf;b!==n&&b.dc!==n&&(rg(this,b.dc.Lj(),q),dg(this,this.Mc),a.Pz(this.Mc.Lj()),gg(this,a.N.M,q,h),a.yb())}}};
Gf.prototype.doSimulatedDrop=Gf.prototype.UJ=function(){var a=Jf;if(a!==n&&(a.np=h,Qf(this),this.mayCopyExternal())){var b=this.h;b!==n&&(this.hc("Drop"),rg(this,a.dc.Lj(),h),dg(this,this.Mc),this.Mc!==n&&b.Pz(this.Mc.Lj()),this.Xe="ExternalCopy",kg(this,b.N.M),this.Mc=n,b.ya("ExternalObjectsDropped",b.selection),this.Kj(),b.Ci())}};
function rg(a,b,c){if(a.Mc===n){var d=a.h;if(!(d===n||d.cb||d.te)&&d.ba!==n){d.ub=!c;d.Cr=!c;a.ni.set(d.N.M);for(var d=d.On(b,d,h),c=bg(b),e=new F(c.x+c.width/2,c.y+c.height/2),g=a.ni,c=new la(S,Object),b=b.l;b.next();){var i=b.value;if(i.be()&&i.canCopy()){var j=i.location,i=d.qa(i);i.location=new F(g.x-(e.x-j.x),g.y-(e.y-j.y));i.yi();c.add(i,Lf(i.location))}}for(d=d.l;d.next();)e=d.value,e instanceof U&&e.canCopy()&&c.add(e,Lf());a.Mc=c;Hf(a,c.Lj());a.cc!==n&&(c=a.cc,d=c.Th(),c.Uk(a.ni.x-(d.x+d.width/
2),a.ni.y-(d.y+d.height/2)))}}}
function sg(){Cf.call(this);this.Ox=100;this.sy=q;var a=new U;a.As="PATH";var b=new V;b.Gi=h;b.name="PATH";b.stroke="blue";a.add(b);b=new V;b.nm="Standard";b.fill="blue";a.add(b);a.Pd="Tool";this.ky=a;a=new T;b=new V;b.Se="";b.gb="Rectangle";b.fill=n;b.stroke="magenta";b.eb=2;b.wa=new bb(1,1);a.add(b);a.Hj=q;a.Pd="Tool";this.iy=a;this.jy=b;a=new T;b=new V;b.Se="";b.gb="Rectangle";b.fill=n;b.stroke="magenta";b.eb=2;b.wa=new bb(1,1);a.add(b);a.Hj=q;a.Pd="Tool";this.ly=a;this.my=b;this.Nx=this.Mx=this.Hx=
this.Gx=this.Ix=n;this.Ip=h;this.pF=new la(P,"boolean");this.sB=this.bB=this.gy=n}w.P("LinkingBaseTool",sg);w.Da(sg,Cf);sg.prototype.doStop=sg.prototype.Nk=function(){this.ig=this.hg=this.gg=this.fg=this.Qb=n;this.ew.clear();this.Ue=n};w.g(sg,"portGravity",sg.prototype.SD);w.defineProperty(sg,{SD:"portGravity"},t("Ox"),function(a){this.Ox!==a&&(u&&w.k(a,"number",sg,"portGravity"),this.Ox=a)});w.g(sg,"validUnconnectedLinks",sg.prototype.Go);
w.defineProperty(sg,{Go:"validUnconnectedLinks"},t("sy"),function(a){this.sy!==a&&(u&&w.k(a,"boolean",sg,"validUnconnectedLinks"),this.sy=a)});w.g(sg,"temporaryLink",sg.prototype.og);w.defineProperty(sg,{og:"temporaryLink"},t("ky"),function(a){this.ky!==a&&(u&&w.i(a,U,sg,"temporaryLink"),this.ky=a)});w.g(sg,"temporaryFromNode",sg.prototype.Ve);w.defineProperty(sg,{Ve:"temporaryFromNode"},t("iy"),function(a){this.iy!==a&&(u&&w.i(a,T,sg,"temporaryFromNode"),this.iy=a)});w.g(sg,"temporaryFromPort",sg.prototype.lm);
w.defineProperty(sg,{lm:"temporaryFromPort"},t("jy"),function(a){this.jy!==a&&(u&&w.i(a,P,sg,"temporaryFromPort"),this.jy=a)});w.g(sg,"temporaryToNode",sg.prototype.We);w.defineProperty(sg,{We:"temporaryToNode"},t("ly"),function(a){this.ly!==a&&(u&&w.i(a,T,sg,"temporaryToNode"),this.ly=a)});w.g(sg,"temporaryToPort",sg.prototype.mm);w.defineProperty(sg,{mm:"temporaryToPort"},t("my"),function(a){this.my!==a&&(u&&w.i(a,P,sg,"temporaryToPort"),this.my=a)});w.g(sg,"originalLink",sg.prototype.Qb);
w.defineProperty(sg,{Qb:"originalLink"},t("Ix"),function(a){this.Ix!==a&&(u&&a!==n&&w.i(a,U,sg,"originalLink"),this.Ix=a)});w.g(sg,"originalFromNode",sg.prototype.fg);w.defineProperty(sg,{fg:"originalFromNode"},t("Gx"),function(a){this.Gx!==a&&(u&&a!==n&&w.i(a,T,sg,"originalFromNode"),this.Gx=a)});w.g(sg,"originalFromPort",sg.prototype.gg);w.defineProperty(sg,{gg:"originalFromPort"},t("Hx"),function(a){this.Hx!==a&&(u&&a!==n&&w.i(a,P,sg,"originalFromPort"),this.Hx=a)});w.g(sg,"originalToNode",sg.prototype.hg);
w.defineProperty(sg,{hg:"originalToNode"},t("Mx"),function(a){this.Mx!==a&&(u&&a!==n&&w.i(a,T,sg,"originalToNode"),this.Mx=a)});w.g(sg,"originalToPort",sg.prototype.ig);w.defineProperty(sg,{ig:"originalToPort"},t("Nx"),function(a){this.Nx!==a&&(u&&a!==n&&w.i(a,P,sg,"originalToPort"),this.Nx=a)});w.defineProperty(sg,{se:"isForwards"},t("Ip"),ba("Ip"));w.u(sg,{ew:"validPortsCache"},t("pF"));w.g(sg,"targetPort",sg.prototype.Ue);
w.defineProperty(sg,{Ue:"targetPort"},t("gy"),function(a){this.gy!==a&&(u&&a!==n&&w.i(a,P,sg,"targetPort"),this.gy=a)});sg.prototype.copyPortProperties=sg.prototype.AJ=function(a,b,c,d,e){a===n||(b===n||c===n||d===n)||(d.wa=b.va.size,e?(d.ob=b.ob,d.al=b.al):(d.kb=b.kb,d.Ok=b.Ok),c.ag=Ob,c.location=b.Ab(Ob),d.angle=b.Xn(),this.us!==n&&this.us(a,b,c,d,e))};
sg.prototype.setNoTargetPortProperties=sg.prototype.ZL=function(a,b,c){b!==n&&(b.wa=new bb(1,1),b.kb=Fb,b.ob=Fb);a!==n&&(a.location=this.h.N.M);this.us!==n&&this.us(n,n,a,b,c)};sg.prototype.doMouseDown=sg.prototype.Lr=function(){this.W&&this.doMouseMove()};
sg.prototype.doMouseMove=sg.prototype.Mg=function(){if(this.W){var a=this.h;if(a!==n){this.Ue=this.findTargetPort(this.se);if(this.Ue!==n){var b=this.Ue.ca;if(b instanceof T){this.se?this.copyPortProperties(b,this.Ue,this.We,this.mm,h):this.copyPortProperties(b,this.Ue,this.Ve,this.lm,q);a.yb();return}}this.se?this.setNoTargetPortProperties(this.We,this.mm,h):this.setNoTargetPortProperties(this.Ve,this.lm,q);a.yb()}}};
sg.prototype.findValidLinkablePort=sg.prototype.BK=function(a,b){if(a===n)return n;var c=a.ca;if(!(c instanceof T))return n;for(;a!==n;){var d=b?a.Zz:a.bz;if(d===h&&(a.Se!==n||a instanceof T)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===q)break;a=a.fa}return n};
sg.prototype.findTargetPort=sg.prototype.sK=function(a){var b=this.h,c=b.N.M,d=this.SD;0>=d&&(d=0.1);for(var e=this,g=b.Wn(c,d,function(b){return e.findValidLinkablePort(b,a)},n),d=Infinity,b=n,g=g.l;g.next();){var i=g.value,j=i.ca;if(j instanceof T){var k=i.Ab(Ob),l=c.x-k.x,k=c.y-k.y,l=l*l+k*k;l<d&&(k=this.ew.qa(i),k!==n?k&&(b=i,d=l):a&&this.isValidLink(this.fg,this.gg,j,i)||!a&&this.isValidLink(j,i,this.hg,this.ig)?(this.ew.add(i,h),b=i,d=l):this.ew.add(i,q))}}return b!==n&&(c=b.ca,c instanceof
T&&(c.Ja===n||c.Ja.Kl))?b:n};sg.prototype.isValidFrom=sg.prototype.iL=function(a,b){if(a===n||b===n)return this.Go;if(this.h.Ha===this&&(a.Ja!==n&&!a.Ja.Kl||b.bz!==h))return q;var c=b.QC;if(Infinity>c){if(this.Qb!==n&&a===this.fg&&b===this.gg)return h;var d=b.Se;d===n&&(d="");if(a.Pr(d).count>=c)return q}return h};
sg.prototype.isValidTo=sg.prototype.lL=function(a,b){if(a===n||b===n)return this.Go;if(this.h.Ha===this&&(a.Ja!==n&&!a.Ja.Kl||b.Zz!==h))return q;var c=b.FE;if(Infinity>c){if(this.Qb!==n&&a===this.hg&&b===this.ig)return h;var d=b.Se;d===n&&(d="");if(a.zf(d).count>=c)return q}return h};sg.prototype.isInSameNode=sg.prototype.dL=function(a,b){if(a===n||b===n)return q;if(a===b)return h;var c=a.ca,d=b.ca;return c!==n&&c===d};
sg.prototype.isLinked=sg.prototype.gL=function(a,b){if(a===n||b===n)return q;var c=a.ca;if(!(c instanceof T))return q;var d=a.Se;d===n&&(d="");var e=b.ca;if(!(e instanceof T))return q;var g=b.Se;g===n&&(g="");for(e=e.zf(g);e.next();)if(g=e.value,g.ga===c&&g.Ai===d)return h;return q};
sg.prototype.isValidLink=sg.prototype.jL=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==n&&d!==n&&((!b.PC||!d.EE)&&this.isInSameNode(b,d)||(!b.OC||!d.DE)&&this.isLinked(b,d))||this.Qb!==n&&(a!==n&&tg(this,a,this.Qb)||c!==n&&tg(this,c,this.Qb))||a!==n&&c!==n&&(a.data===n&&c.data!==n||a.data!==n&&c.data===n)||!ug(this,a,c,this.Qb)?q:this.sz!==n?this.sz(a,b,c,d,this.Qb):h};
function tg(a,b,c){if(b===n)return q;var d=b.yd;if(d===n)return q;if(d===c)return h;var e=new ma(T);e.add(b);return vg(a,d,c,e)}function vg(a,b,c,d){if(b===c)return h;var e=b.ga;if(e!==n&&e.Fi&&(d.add(e),vg(a,e.yd,c,d)))return h;b=b.la;return b!==n&&b.Fi&&(d.add(b),vg(a,b.yd,c,d))?h:q}
function ug(a,b,c,d){if(b===n||c===n)return q;var e=a.h.RE;if(e!==wg){if(e===xg){for(e=c.ue;e.next();){var g=e.value;if(g!==d&&g.la===c)return q}return!yg(a,b,c,d)}if(e===zg){for(e=b.ue;e.next();)if(g=e.value,g!==d&&g.ga===b)return q;return!yg(a,b,c,d)}if(e===Ag)return b===c?a=h:(e=new ma(T),e.add(c),a=Bg(a,e,b,c,d)),!a;if(e===Cg)return!yg(a,b,c,d);if(e===Dg)return b===c?a=h:(e=new ma(T),e.add(c),a=Eg(a,e,b,c,d)),!a}return h}
function yg(a,b,c,d){if(b===c)return h;if(b===n||c===n)return q;for(var e=b.ue;e.next();){var g=e.value;if(g!==d&&g.la===b&&(g=g.ga,g!==b&&yg(a,g,c,d)))return h}return q}function Bg(a,b,c,d,e){if(c===d)return h;if(c===n||d===n||b.contains(c))return q;b.add(c);for(var g=c.ue;g.next();){var i=g.value;if(i!==e&&i.la===c&&(i=i.ga,i!==c&&Bg(a,b,i,d,e)))return h}return q}
function Eg(a,b,c,d,e){if(c===d)return h;if(c===n||d===n||b.contains(c))return q;b.add(c);for(var g=c.ue;g.next();){var i=g.value;if(i!==e){var j=i.ga,i=i.la,j=j===c?i:j;if(j!==c&&Eg(a,b,j,d,e))return h}}return q}w.g(sg,"linkValidation",sg.prototype.sz);w.defineProperty(sg,{sz:"linkValidation"},t("bB"),function(a){a!==n&&w.k(a,"function",sg,"linkValidation");this.bB=a});w.g(sg,"portTargeted",sg.prototype.us);
w.defineProperty(sg,{us:"portTargeted"},t("sB"),function(a){a!==n&&w.k(a,"function",sg,"portTargeted");this.sB=a});function qa(){sg.call(this);this.name="Linking";this.Jw={};this.Iw=n;this.da=Fg;this.Zx=this.Yx=n}w.P("LinkingTool",qa);w.Da(qa,sg);var Fg;qa.Either=Fg=w.s(qa,"Either",0);var Gg;qa.ForwardsOnly=Gg=w.s(qa,"ForwardsOnly",0);var Lg;qa.BackwardsOnly=Lg=w.s(qa,"BackwardsOnly",0);w.g(qa,"archetypeLinkData",qa.prototype.$B);
w.defineProperty(qa,{$B:"archetypeLinkData"},t("Jw"),function(a){this.Jw!==a&&(a!==n&&w.i(a,Object,qa,"archetypeLinkData"),this.Jw=a)});w.g(qa,"archetypeLabelNodeData",qa.prototype.ZB);
w.defineProperty(qa,{ZB:"archetypeLabelNodeData"},t("Iw"),function(a){if(this.Iw!==a){a!==n&&w.i(a,Object,qa,"archetypeLabelNodeData");var b=this.h;b!==n&&(b=b.ba,b instanceof O&&!(a instanceof T)&&!b.nz(a)&&w.m("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a));this.Iw=a}});w.g(qa,"direction",qa.prototype.direction);
w.defineProperty(qa,{direction:"direction"},t("da"),function(a){this.da!==a&&(u&&w.jb(a,qa,qa,"direction"),this.da=a)});w.g(qa,"startObject",qa.prototype.Vz);w.defineProperty(qa,{Vz:"startObject"},t("Yx"),function(a){this.Yx!==a&&(u&&a!==n&&w.i(a,P,qa,"startObject"),this.Yx=a)});w.u(qa,{aw:n},t("Zx"));
qa.prototype.canStart=qa.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||(a.cb||a.te)||!a.Kl)return q;var b=a.ba;return b===n||!(b instanceof O)&&!(b instanceof De)||!a.N.left||a.Ha!==this&&!this.isBeyondDragSize()?q:this.findLinkablePort()!==n};
qa.prototype.findLinkablePort=qa.prototype.pK=function(){var a=this.h;if(a===n)return n;var b=this.Vz;b===n&&(b=a.xd(a.xc.M,n,n));if(b===n||!(b.ca instanceof T))return n;var c=this.direction;if(c===Fg||c===Gg)if(a=this.findValidLinkablePort(b,q),a!==n)return this.Ip=h,a;if(c===Fg||c===Lg)if(a=this.findValidLinkablePort(b,h),a!==n)return this.Ip=q,a;return n};
qa.prototype.doActivate=qa.prototype.zh=function(){var a=this.h;if(a!==n&&(this.aw===n&&(this.Zx=this.findLinkablePort()),this.aw!==n)){this.hc(this.name);a.Fc=h;a.vc="hand";if(this.se){this.gg=this.aw;var b=this.gg.ca;b instanceof T&&(this.fg=b);this.copyPortProperties(this.fg,this.gg,this.Ve,this.lm,q)}else this.ig=this.aw,b=this.ig.ca,b instanceof T&&(this.hg=b),this.copyPortProperties(this.hg,this.ig,this.We,this.mm,h);a.add(this.Ve);a.add(this.We);this.og!==n&&(this.Ve!==n&&(this.og.ga=this.Ve),
this.We!==n&&(this.og.la=this.We),this.og.Tb(),a.add(this.og));this.W=h}};qa.prototype.doDeactivate=qa.prototype.xi=function(){this.W=q;var a=this.h;a!==n&&(a.remove(this.og),a.remove(this.Ve),a.remove(this.We),a.Fc=q,a.vc="",this.Kj())};qa.prototype.doStop=qa.prototype.Nk=function(){sg.prototype.Nk.call(this);this.Vz=this.Zx=n};
qa.prototype.doMouseUp=qa.prototype.qe=function(){if(this.W){var a=this.h;if(a===n)return;var b=this.Xe=n,c=n,d=n,e=n,g=this.Ue=this.findTargetPort(this.se),i=n;g!==n?(i=g.ca,i instanceof T&&(this.se?(this.fg!==n&&(b=this.fg,c=this.gg),d=i,e=g):(b=i,c=g,this.hg!==n&&(d=this.hg,e=this.ig)))):this.se?this.fg!==n&&this.Go&&(b=this.fg,c=this.gg):this.hg!==n&&this.Go&&(d=this.hg,e=this.ig);if(b!==n||d!==n)b=this.insertLink(b,c,d,e),b!==n?(g===n&&(this.se?b.kG=a.N.M:b.jG=a.N.M),a.ke&&a.select(b),this.Xe=
this.name,a.ya("LinkDrawn",b)):a.ba.wg.clear()}this.stopTool()};
qa.prototype.insertLink=qa.prototype.YK=function(a,b,c,d){var e=this.h;if(e===n)return n;var g=e.ba;if(g===n)return n;if(g instanceof De){if(b=a,d=c,e.jd||(b=c,d=a),b!==n&&d!==n)return g.Cf(d.data,g.lb(b.data)),d.uv()}else if(g instanceof O){b===n&&(b=a);b=b.Se;b===n&&(b="");d===n&&(d=c);var i=d.Se;i===n&&(i="");d=this.$B;if(d instanceof U){if(zf(d),g=d.copy(),g instanceof U)return g.ga=a,g.Ai=b,g.la=c,g.Mj=i,e.add(g),g}else if(d!==n&&(d=g.rC(d),w.mb(d)))return g.Yv(d,g.lb(a.data)),g.Bs(d,b),g.Zv(d,
g.lb(c.data)),g.Cs(d,i),g.VB(d),a=this.ZB,a!==n&&g.nz(a)&&(a=g.vj(a),w.mb(a)&&(g.Ar(a),a=g.lb(a),a!==f&&g.UB(d,a))),g=e.yf(d)}return n};function Rg(){sg.call(this);this.name="Relinking";var a=new V;a.gb="Diamond";a.wa=new bb(8,8);a.fill="cyan";a.cursor="pointer";a.Eh=0;this.RA=a;a=new V;a.gb="Diamond";a.wa=new bb(8,8);a.fill="cyan";a.cursor="pointer";a.Eh=-1;this.IB=a;this.sc=n;this.pB=new G}w.P("RelinkingTool",Rg);w.Da(Rg,sg);
Rg.prototype.updateAdornments=Rg.prototype.Ki=function(a){if(a instanceof U){var b=n,c="RelinkFrom";if(a.Qa){var d=a.Vv;a.va.T()&&(d!==n&&a.nb()&&a.canRelinkFrom()&&d.Tk()&&d.va.T())&&(b=a.Un(c),b===n&&(b=this.makeAdornment(d,q),b.vd=c),b!==n&&b.R());a.yn(c,b)}else a.hm(c);b=n;c="RelinkTo";a.Qa?(d=a.Vv,a.va.T()&&(d!==n&&a.nb()&&a.canRelinkTo()&&d.Tk()&&d.va.T())&&(b=a.Un(c),b===n&&(b=this.makeAdornment(d,h),b.vd=c),b!==n&&b.R()),a.yn(c,b)):a.hm(c)}};
Rg.prototype.makeAdornment=Rg.prototype.uz=function(a,b){var c=new of;c.type=Sg;var d=b?this.fI:this.BG;d!==n&&c.add(d.copy());c.Cc=a;return c};w.defineProperty(Rg,{BG:"fromHandleArchetype"},t("RA"),function(a){a&&w.i(a,P,Rg,"fromHandleArchetype");this.RA=a});w.defineProperty(Rg,{fI:"toHandleArchetype"},t("IB"),function(a){a&&w.i(a,P,Rg,"toHandleArchetype");this.IB=a});w.u(Rg,{handle:"handle"},t("sc"));
Rg.prototype.canStart=Rg.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||(a.cb||a.te)||!a.rj)return q;var b=a.ba;if(b===n||!(b instanceof O)&&!(b instanceof De)||!a.N.left)return q;b=this.findToolHandleAt(a.xc.M,"RelinkFrom");b===n&&(b=this.findToolHandleAt(a.xc.M,"RelinkTo"));return b!==n};
Rg.prototype.doActivate=Rg.prototype.zh=function(){var a=this.h;if(a!==n){if(this.Qb===n){var b=this.findToolHandleAt(a.xc.M,"RelinkFrom");b===n&&(b=this.findToolHandleAt(a.xc.M,"RelinkTo"));if(b===n)return;var c=b.ca;if(!(c instanceof of)||!(c.Cn instanceof U))return;this.sc=b;this.Ip=c===n||"RelinkTo"===c.vd;this.Qb=c.Cn}this.hc(this.name);a.Fc=h;a.vc="hand";this.gg=this.Qb.Nc;this.fg=this.Qb.ga;this.ig=this.Qb.Bd;this.hg=this.Qb.la;this.pB=this.Qb.va;this.Qb!==n&&0<this.Qb.ja&&(this.Qb.ga===n&&
(this.lm!==n&&(this.lm.wa=new bb(0,0)),this.Ve!==n&&(this.Ve.location=this.Qb.p(0))),this.Qb.la===n&&(this.mm!==n&&(this.mm.wa=new bb(0,0)),this.We!==n&&(this.We.location=this.Qb.p(this.Qb.ja-1))));this.copyPortProperties(this.fg,this.gg,this.Ve,this.lm,q);this.copyPortProperties(this.hg,this.ig,this.We,this.mm,h);a.add(this.Ve);a.add(this.We);this.og!==n&&(this.Ve!==n&&(this.og.ga=this.Ve),this.We!==n&&(this.og.la=this.We),this.og.Tb(),a.add(this.og));this.W=h}};
Rg.prototype.doDeactivate=Rg.prototype.xi=function(){this.W=q;var a=this.h;a!==n&&(a.remove(this.og),a.remove(this.Ve),a.remove(this.We),a.Fc=q,a.vc="",this.Kj())};Rg.prototype.doStop=Rg.prototype.Nk=function(){sg.prototype.Nk.call(this);this.sc=n};
Rg.prototype.doMouseUp=Rg.prototype.qe=function(){if(this.W){var a=this.h;if(a===n)return;this.Xe=n;var b=this.fg,c=this.gg,d=this.hg,e=this.ig,g=this.Qb;this.Ue=this.findTargetPort(this.se);if(this.Ue!==n){var i=this.Ue.ca;i instanceof T&&(this.se?(d=i,e=this.Ue):(b=i,c=this.Ue))}else this.Go?this.se?e=d=n:c=b=n:g=n;g!==n&&(this.reconnectLink(g,this.se?d:b,this.se?e:c,this.se),this.Ue===n&&(this.se?g.kG=a.N.M:g.jG=a.N.M,g.Tb()),a.ke&&(g.Qa=h),this.Xe=this.name,a.ya("LinkRelinked",g,this.se?this.ig:
this.gg));Tg(this.Qb,this.pB)}this.stopTool()};
Rg.prototype.reconnectLink=Rg.prototype.LL=function(a,b,c,d){var e=this.h;if(e===n)return q;var g=b!==n?b.data:n,g=g!==n?e.ba.lb(g):f,i=c.Se!==n?c.Se:"",j=a.data;if(j!==n&&g!==f)if(c=e.ba,c instanceof De)e=e.jd,i=a.ga,g=a.la,e||(i=a.la,g=a.ga),a=i,i=g,d&&e||!d&&!e?(i=b,c.Cf(g.data,f),c.Cf(i.data,c.lb(a.data))):c.Cf(g.data,c.lb(b.data));else if(c instanceof O)d?(c.Zv(j,g),c.Cs(j,i)):(c.Yv(j,g),c.Bs(j,i));else return q;else d?(this.Qb.la=b,this.Qb.Mj=i):(this.Qb.ga=b,this.Qb.Ai=i);return h};
function Ug(){Cf.call(this);this.name="LinkReshaping";var a=new V;a.gb="Rectangle";a.wa=new bb(6,6);a.fill="cyan";this.lk=a;this.Gw=this.sc=n;this.qB=new F;this.Kx=n}w.P("LinkReshapingTool",Ug);w.Da(Ug,Cf);var Vg;Ug.None=Vg=w.s(Ug,"None",0);var Wg;Ug.Horizontal=Wg=w.s(Ug,"Horizontal",1);var Xg;Ug.Vertical=Xg=w.s(Ug,"Vertical",2);var Yg;Ug.All=Yg=w.s(Ug,"All",3);
Ug.prototype.updateAdornments=Ug.prototype.Ki=function(a){if(a instanceof U){var b=n;if(a.Qa){var c=a.path;a.va.T()&&(c!==n&&a.nb()&&a.canReshape()&&c.Tk()&&c.va.T())&&(b=a.Un(this.name),b===n&&(b=this.makeAdornment(c),b.vd=this.name),b!==n&&(b.location=a.position,b.R()));a.yn(this.name,b)}else a.hm(this.name)}};
Ug.prototype.makeAdornment=Ug.prototype.uz=function(a){var b=new of;b.type=Sg;var c=a.ca,d=c.ja,e=c.fc;if(c.points!==n&&2<d){for(var d=c.vv,g=c.pz,i=d+1;i<=g-1;i++){var j=this.makeHandle(a,i);if(j!==n){j.Eh=i;if(i!==d)if(i===d+1&&e){var k=c.p(d),l=c.p(d+1);Ua(k.x,l.x)&&Ua(k.y,l.y)&&(l=c.p(d-1));Ua(k.x,l.x)?(j.yo=Xg,j.cursor="n-resize"):Ua(k.y,l.y)&&(j.yo=Wg,j.cursor="w-resize")}else i===g-1&&e?(k=c.p(g-1),l=c.p(g),Ua(k.x,l.x)&&Ua(k.y,l.y)&&(k=c.p(g+1)),Ua(k.x,l.x)?(j.yo=Xg,j.cursor="n-resize"):Ua(k.y,
l.y)&&(j.yo=Wg,j.cursor="w-resize")):i!==g&&(j.yo=Yg,j.cursor="move");b.add(j)}}b.Cc=a}return b};Ug.prototype.makeHandle=Ug.prototype.dH=function(){var a=this.Zr;return a===n?n:a.copy()};w.defineProperty(Ug,{Zr:"handleArchetype"},t("lk"),function(a){a&&w.i(a,P,Ug,"handleArchetype");this.lk=a});w.u(Ug,{handle:"handle"},t("sc"));w.u(Ug,{Bn:"adornedLink"},t("Gw"));
Ug.prototype.canStart=Ug.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||a.cb||!a.Fn?q:this.findToolHandleAt(a.xc.M,this.name)!==n};Ug.prototype.doActivate=Ug.prototype.zh=function(){var a=this.h;if(a!==n&&(this.sc=this.findToolHandleAt(a.xc.M,this.name),this.sc!==n)){var b=this.sc.ca.Cn;b instanceof U&&(this.Gw=b,a.Fc=h,this.qB=b.p(this.sc.Eh),this.Kx=b.points.copy(),this.hc(this.name),this.W=h)}};
Ug.prototype.doDeactivate=Ug.prototype.xi=function(){this.Kj();this.Gw=this.sc=n;var a=this.h;a!==n&&(a.Fc=q);this.W=q};Ug.prototype.doCancel=Ug.prototype.zj=function(){var a=this.Bn;a!==n&&(a.points=this.Kx);this.stopTool()};Ug.prototype.doMouseMove=Ug.prototype.Mg=function(){var a=this.h;this.W&&a!==n&&(a=this.computeReshape(a.N.M),this.reshape(a))};
Ug.prototype.doMouseUp=Ug.prototype.qe=function(){var a=this.h;if(this.W&&a!==n){var b=this.computeReshape(a.N.M);this.reshape(b);b=this.Bn;b!==n&&(b.points=this.Bn.points);a.Ci();this.Xe=this.name;a.ya("LinkReshaped",this.Bn)}this.stopTool()};
Ug.prototype.reshape=Ug.prototype.TL=function(a){var b=this.Bn;b.$k();var c=this.handle.Eh,d=this.handle.yo;if(b.fc)if(c===b.vv+1)c=b.vv+1,d==Xg?(b.J(c,new F(b.p(c-1).x,a.y)),b.J(c+1,new F(b.p(c+2).x,a.y))):d==Wg&&(b.J(c,new F(a.x,b.p(c-1).y)),b.J(c+1,new F(a.x,b.p(c+2).y)));else if(c===b.pz-1)c=b.pz-1,d===Xg?(b.J(c-1,new F(b.p(c-2).x,a.y)),b.J(c,new F(b.p(c+1).x,a.y))):d===Wg&&(b.J(c-1,new F(a.x,b.p(c-2).y)),b.J(c,new F(a.x,b.p(c+1).y)));else{var d=c,e=b.p(d),g=b.p(d-1),i=b.p(d+1);Ua(g.x,e.x)&&Ua(e.y,
i.y)?(Ua(g.x,b.p(d-2).x)&&!Ua(g.y,b.p(d-2).y)?(e=b.points,e.yc(d,new F(a.x,g.y)),b.points=e,c++,d++):b.J(d-1,new F(a.x,g.y)),Ua(i.y,b.p(d+2).y)&&!Ua(i.x,b.p(d+2).x)?(e=b.points,e.yc(d+1,new F(i.x,a.y)),b.points=e):b.J(d+1,new F(i.x,a.y))):Ua(g.y,e.y)&&Ua(e.x,i.x)?(Ua(g.y,b.p(d-2).y)&&!Ua(g.x,b.p(d-2).x)?(e=b.points,e.yc(d,new F(g.x,a.y)),b.points=e,c++,d++):b.J(d-1,new F(g.x,a.y)),Ua(i.x,b.p(d+2).x)&&!Ua(i.y,b.p(d+2).y)?(e=b.points,e.yc(d+1,new F(a.x,i.y)),b.points=e):b.J(d+1,new F(a.x,i.y))):Ua(g.x,
e.x)&&Ua(e.x,i.x)?(Ua(g.x,b.p(d-2).x)&&!Ua(g.y,b.p(d-2).y)?(e=b.points,e.yc(d,new F(a.x,g.y)),b.points=e,c++,d++):b.J(d-1,new F(a.x,g.y)),Ua(i.x,b.p(d+2).x)&&!Ua(i.y,b.p(d+2).y)?(e=b.points,e.yc(d+1,new F(a.x,i.y)),b.points=e):b.J(d+1,new F(a.x,i.y))):Ua(g.y,e.y)&&Ua(e.y,i.y)&&(Ua(g.y,b.p(d-2).y)&&!Ua(g.x,b.p(d-2).x)?(e=b.points,e.yc(d,new F(g.x,a.y)),b.points=e,c++,d++):b.J(d-1,new F(g.x,a.y)),Ua(i.y,b.p(d+2).y)&&!Ua(i.x,b.p(d+2).x)?(e=b.points,e.yc(d+1,new F(i.x,a.y)),b.points=e):b.J(d+1,new F(i.x,
a.y)));b.J(c,a.copy())}else b.J(c,a.copy()),1===c&&yb(b.mC(h))?(d=b.ga,g=b.Nc,c=g.Ab(Ob),a=b.getLinkPointFromPoint(d,g,c,a,h),b.J(0,a)):c===b.ja-2&&yb(b.mC(q))&&(d=b.la,g=b.Bd,c=g.Ab(Ob),a=b.getLinkPointFromPoint(d,g,c,a,q),b.J(b.ja-1,a));b.ti()};Ug.prototype.computeReshape=Ug.prototype.uJ=function(a){var b=this.Bn,c=this.handle.Eh;switch(this.handle.yo){case Yg:return a;case Xg:return b=b.p(c),new F(b.x,a.y);case Wg:return b=b.p(c),new F(a.x,b.y);default:case Vg:return b.p(c)}};
w.g(Ug,"originalPoint",Ug.prototype.uH);w.u(Ug,{uH:"originalPoint"},t("qB"));w.g(Ug,"originalPoints",Ug.prototype.vH);w.u(Ug,{vH:"originalPoints"},t("Kx"));
function Zg(){Cf.call(this);this.name="Resizing";this.Td=(new bb(1,1)).freeze();this.dj=(new bb(9999,9999)).freeze();this.Qi=(new bb(NaN,NaN)).freeze();this.rl=q;this.La=n;var a=new V;a.pj=Ob;a.gb="Rectangle";a.wa=new bb(6,6);a.fill="cyan";a.stroke="black";a.eb=1;a.cursor="pointer";this.lk=a;this.sc=n;this.an=0;this.fF=new G;this.lu=new bb;this.Jx=new F;this.ex=new bb(0,0);this.bx=new bb(Infinity,Infinity);this.ax=new bb(1,1)}w.P("ResizingTool",Zg);w.Da(Zg,Cf);
Zg.prototype.updateAdornments=Zg.prototype.Ki=function(a){if(!(a===n||a instanceof U)){var b=n;if(a.Qa){var c=a.KH;if(a.va.T()&&(c!==n&&a.nb()&&a.canResize()&&c.Tk()&&c.va.T())&&(b=a.Un(this.name),b===n&&(b=this.makeAdornment(c),b.vd=this.name),b!==n)){var d=c.Xn();b.angle=d;b.location=c.Ab(Jb);var e=b.placeholder;if(e!==n){var g=c.Yl(),c=c.Sa;e.wa=new bb(c.width*g,c.height*g)}$g(this,b,d)}a.yn(this.name,b)}else a.hm(this.name)}};
Zg.prototype.makeAdornment=Zg.prototype.uz=function(a){var b=n,b=a.ca.dE;if(b===n){b=new of;b.type=ah;var c=new bh;c.Gi=h;b.add(c);b.add(this.makeHandle(a,Jb));b.add(this.makeHandle(a,Lb));b.add(this.makeHandle(a,Rb));b.add(this.makeHandle(a,Pb));b.add(this.makeHandle(a,Sb));b.add(this.makeHandle(a,Zb));b.add(this.makeHandle(a,$b));b.add(this.makeHandle(a,Tb))}else if(zf(b),b=b.copy(),!(b instanceof of))return n;b.Cc=a;return b};
Zg.prototype.makeHandle=Zg.prototype.dH=function(a,b){var c=this.Zr;if(c===n)return n;c=c.copy();c.Db=b;return c};
function $g(a,b,c){if(b!==n)if(!Cb(b.Db)&&""!==b.cursor)a:{a=b.Db;yb(a)&&(a=Ob);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof x)for(b=b.elements;b.next();)$g(a,b.value,c)}
w.defineProperty(Zg,{Zr:"handleArchetype"},t("lk"),function(a){a&&w.i(a,P,Zg,"handleArchetype");this.lk=a});w.u(Zg,{handle:"handle"},t("sc"));w.u(Zg,{Cc:"adornedObject"},t("La"));Zg.prototype.canStart=Zg.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||a.cb||!a.Gn||!a.N.left?q:this.findToolHandleAt(a.xc.M,this.name)!==n?h:q};
Zg.prototype.doActivate=Zg.prototype.zh=function(){var a=this.h;a!==n&&(this.sc=this.findToolHandleAt(a.xc.M,this.name),this.sc!==n&&(this.La=this.sc.ca.Cc,this.an=this.La.angle,this.fF.set(this.La.Sa),this.Jx.set(this.La.ca.location),this.lu.set(this.La.wa),this.ax=this.computeCellSize(),this.ex=this.computeMinSize(),this.bx=this.computeMaxSize(),a.Fc=h,this.hc(this.name),this.W=h))};
Zg.prototype.doDeactivate=Zg.prototype.xi=function(){var a=this.h;a!==n&&(this.Kj(),this.La=this.sc=n,this.W=a.Fc=q)};Zg.prototype.doCancel=Zg.prototype.zj=function(){this.La.wa=this.lu;this.La.ca.location=this.Jx;this.stopTool()};Zg.prototype.doMouseMove=Zg.prototype.Mg=function(){var a=this.h;if(this.W&&a!==n){var b=this.ex,c=this.bx,d=this.ax,e=this.La.UC(a.N.M),g=this.La.xv;g===ch&&(g=this.La.Ga.$b);b=this.computeResize(e,this.sc.Db,b,c,d,!(g===dh||g===eh||a.N.shift));this.resize(b);fh(a)}};
Zg.prototype.doMouseUp=Zg.prototype.qe=function(){var a=this.h;if(this.W&&a!==n){var b=this.ex,c=this.bx,d=this.ax,e=this.La.UC(a.N.M),g=this.La.xv;g===ch&&(g=this.La.Ga.$b);b=this.computeResize(e,this.sc.Db,b,c,d,!(g===dh||g===eh||a.N.shift));this.resize(b);a.Ci();this.Xe=this.name;a.ya("PartResized",this.La,this.lu)}this.stopTool()};
Zg.prototype.resize=Zg.prototype.UL=function(a){var b=this.h;if(b!==n){var c=this.La.ca,d=c.position.copy(),e=this.La.Sa.copy(),g=this.La.Xn();360<=g?g-=360:0>g&&(g+=360);var i=Math.PI*g/180,j=Math.cos(i),i=Math.sin(i),k=a.width-e.width,e=a.height-e.height,l=90<g&&270>g?1:0;d.x+=(a.x+k*l)*j-(a.y+e*(0<g&&180>g?1:0))*i;d.y+=(a.x+k*(180<g&&360>g?1:0))*i+(a.y+e*l)*j;this.La.wa=a.size;c.yi();c.position=d;b.yb()}};
Zg.prototype.computeResize=Zg.prototype.vJ=function(a,b,c,d,e,g){yb(b)&&(b=Ob);var i=this.La.Sa,j=i.x,k=i.y,l=i.x+i.width,m=i.y+i.height,p=1;if(!g){var p=i.width,r=i.height;0>=p&&(p=1);0>=r&&(r=1);p=r/p}a=fd(a.x,a.y,j,k,e.width,e.height);e=i.copy();0>=b.x?0>=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.y=Math.max(a.y,m-d.height),e.y=Math.min(e.y,m-c.height),e.height=Math.max(m-e.y,c.height),g||(a=e.height/e.width,p<a?(e.height=p*e.width,e.y=m-e.height):
(e.width=e.height/p,e.x=l-e.width))):1<=b.y?(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=Math.max(l-e.x,c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,p<a?e.height=p*e.width:(e.width=e.height/p,e.x=l-e.width))):(e.x=Math.max(a.x,l-d.width),e.x=Math.min(e.x,l-c.width),e.width=l-e.x,g||(e.height=p*e.width,e.y=k+0.5*(m-k-e.height))):1<=b.x?0>=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.y=Math.max(a.y,m-d.height),e.y=Math.min(e.y,
m-c.height),e.height=Math.max(m-e.y,c.height),g||(a=e.height/e.width,p<a?(e.height=p*e.width,e.y=m-e.height):e.width=e.height/p)):1<=b.y?(e.width=Math.max(Math.min(a.x-j,d.width),c.width),e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(a=e.height/e.width,p<a?e.height=p*e.width:e.width=e.height/p)):(e.width=Math.max(Math.min(a.x-j,d.width),c.width),g||(e.height=p*e.width,e.y=k+0.5*(m-k-e.height))):0>=b.y?(e.y=Math.max(a.y,m-d.height),e.y=Math.min(e.y,m-c.height),e.height=m-e.y,g||(e.width=
e.height/p,e.x=j+0.5*(l-j-e.width))):1<=b.y&&(e.height=Math.max(Math.min(a.y-k,d.height),c.height),g||(e.width=e.height/p,e.x=j+0.5*(l-j-e.width)));return e};Zg.prototype.computeMinSize=Zg.prototype.qJ=function(){var a=this.La.ve.copy(),b=this.ve;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Zg.prototype.computeMaxSize=Zg.prototype.pJ=function(){var a=this.La.ce.copy(),b=this.ce;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Zg.prototype.computeCellSize=Zg.prototype.mJ=function(){var a=new bb(NaN,NaN),b=this.La.ca;if(b){var c=b.eE;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.Kk;isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width);isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height);b=this.h;if((isNaN(a.width)||isNaN(a.height))&&b)c=b.Rb.re,c!==n&&c.bo&&(c=c.fz,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&
(!isNaN(c.height)&&0<c.height)&&(a.height=c.height)),b=b.yv,b!==n&&(b.visible&&this.bo)&&(c=b.Yr,isNaN(a.width)&&(!isNaN(c.width)&&0<c.width)&&(a.width=c.width),isNaN(a.height)&&(!isNaN(c.height)&&0<c.height)&&(a.height=c.height));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};w.g(Zg,"minSize",Zg.prototype.ve);
w.defineProperty(Zg,{ve:"minSize"},t("Td"),function(a){this.Td.I(a)||(u&&w.i(a,bb,Zg,"minSize"),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),this.Td.Xa(a))});w.g(Zg,"maxSize",Zg.prototype.ce);w.defineProperty(Zg,{ce:"maxSize"},t("dj"),function(a){this.dj.I(a)||(u&&w.i(a,bb,Zg,"maxSize"),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),this.dj.Xa(a))});w.g(Zg,"cellSize",Zg.prototype.Kk);
w.defineProperty(Zg,{Kk:"cellSize"},t("Qi"),function(a){this.Qi.I(a)||(u&&w.i(a,bb,Zg,"cellSize"),this.Qi.Xa(a))});w.g(Zg,"isGridSnapEnabled",Zg.prototype.bo);w.defineProperty(Zg,{bo:"isGridSnapEnabled"},t("rl"),function(a){this.rl!==a&&(w.k(a,"boolean",Zg,"isGridSnapEnabled"),this.rl=a)});w.g(Zg,"originalDesiredSize",Zg.prototype.sH);w.u(Zg,{sH:"originalDesiredSize"},t("lu"));w.g(Zg,"originalLocation",Zg.prototype.tH);w.u(Zg,{tH:"originalLocation"},t("Jx"));
function gh(){Cf.call(this);this.name="Rotating";this.Xx=45;this.Wx=2;this.La=n;var a=new V;a.gb="Ellipse";a.wa=new bb(6,6);a.fill="yellow";a.stroke="black";a.eb=1;a.cursor="pointer";this.lk=a;this.sc=n;this.an=0;this.tB=new F}w.P("RotatingTool",gh);w.Da(gh,Cf);
gh.prototype.updateAdornments=gh.prototype.Ki=function(a){if(!(a===n||a instanceof U)){var b=n;if(a.Qa){var c=a.OH;if(a.va.T()&&(c!==n&&a.nb()&&a.canRotate()&&c.Tk()&&c.va.T())&&(b=a.Un(this.name),b===n&&(b=this.makeAdornment(c),b.vd=this.name),b!==n)){b.angle=c.Xn();var d=n,e=n;c===a||c===a.Yb?(d=a.Yb,e=a.ag):(d=c,e=Ob);for(var g=d.Sa,e=new F(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==n&&d!==c;)d.transform.Ta(e),d=d.fa;d=e.y;e=Math.max(e.x-c.Sa.width,0);b.ag=Ob;b.location=c.Ab(new H(1,0,50+
e,d))}a.yn(this.name,b)}else a.hm(this.name)}};gh.prototype.makeAdornment=gh.prototype.uz=function(a){var b=n,b=a.ca.iE;if(b===n){b=new of;b.type=hh;var c=this.Zr;c!==n&&b.add(c.copy())}else if(zf(b),b=b.copy(),!(b instanceof of))return n;b.Cc=a;return b};w.defineProperty(gh,{Zr:"handleArchetype"},t("lk"),function(a){a&&w.i(a,P,gh,"handleArchetype");this.lk=a});w.u(gh,{handle:"handle"},t("sc"));w.u(gh,{Cc:"adornedObject"},t("La"));
gh.prototype.canStart=gh.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||a.cb||!a.Hn||!a.N.left?q:this.findToolHandleAt(a.xc.M,this.name)!==n?h:q};gh.prototype.doActivate=gh.prototype.zh=function(){var a=this.h;if(a!==n&&(this.sc=this.findToolHandleAt(a.xc.M,this.name),this.sc!==n)){this.La=this.sc.ca.Cc;var b=this.La.ca,c=b.Yb;this.tB=this.La===b||this.La===c?c.Ab(b.ag):this.La.Ab(Ob);this.an=this.La.angle;a.Fc=h;this.hc(this.name);this.W=h}};
gh.prototype.doDeactivate=gh.prototype.xi=function(){var a=this.h;a!==n&&(this.Kj(),this.La=this.sc=n,this.W=a.Fc=q)};gh.prototype.doCancel=gh.prototype.zj=function(){this.rotate(this.an);this.stopTool()};gh.prototype.doMouseMove=gh.prototype.Mg=function(){var a=this.h;this.W&&a!==n&&(a=this.computeRotate(a.N.M),this.rotate(a))};
gh.prototype.doMouseUp=gh.prototype.qe=function(){var a=this.h;if(this.W&&a!==n){var b=this.computeRotate(a.N.M);this.rotate(b);a.Ci();this.Xe=this.name;a.ya("PartRotated",this.La,this.an)}this.stopTool()};gh.prototype.rotate=gh.prototype.rotate=function(a){this.La!==n&&(this.La.angle=a,this.h.yb())};
gh.prototype.computeRotate=gh.prototype.wJ=function(a){var a=this.tB.vi(a),b=this.La.fa;b&&(a-=b.Xn(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.wE),180),c=Math.min(Math.abs(this.vE),b/2);!this.h.N.shift&&(0<b&&0<c)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};w.g(gh,"snapAngleMultiple",gh.prototype.wE);
w.defineProperty(gh,{wE:"snapAngleMultiple"},t("Xx"),function(a){this.Xx!==a&&(u&&w.k(a,"number",gh,"snapAngleMultiple"),this.Xx=a)});w.g(gh,"snapAngleEpsilon",gh.prototype.vE);w.defineProperty(gh,{vE:"snapAngleEpsilon"},t("Wx"),function(a){this.Wx!==a&&(u&&w.k(a,"number",gh,"snapAngleEpsilon"),this.Wx=a)});w.g(gh,"originalAngle",gh.prototype.rH);w.u(gh,{rH:"originalAngle"},t("an"));function ih(){Cf.call(this);this.name="ClickSelecting"}w.P("ClickSelectingTool",ih);w.Da(ih,Cf);
ih.prototype.canStart=ih.prototype.uf=function(){return!this.isEnabled||this.h===n||this.isBeyondDragSize()?q:h};ih.prototype.doMouseUp=ih.prototype.qe=function(){this.W&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};function jh(){Cf.call(this);this.name="Action";this.qm=n}w.P("ActionTool",jh);w.Da(jh,Cf);
jh.prototype.canStart=jh.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n)return q;var b=a.N,c=a.xd(b.M,function(a){for(;a.fa!==n;){if(a.zv)return a;a=a.fa}return n},function(a){return a.zv});return c!==n?(this.qm=c,a.ym=a.xd(b.M,n,n),h):q};jh.prototype.doMouseDown=jh.prototype.Lr=function(){if(this.W){var a=this.h.N,b=this.qm;b!==n&&(a.Ad=b,b.wy!==n&&b.wy(a,b))}else this.canStart()&&this.doActivate()};
jh.prototype.doMouseMove=jh.prototype.Mg=function(){if(this.W){var a=this.h.N,b=this.qm;b!==n&&(a.Ad=b,b.xy!==n&&b.xy(a,b))}};jh.prototype.doMouseUp=jh.prototype.qe=function(){if(this.W){var a=this.h,b=a.N,c=this.qm;if(c===n)return;b.Ad=c;c.yy!==n&&c.yy(b,c);this.isBeyondDragSize()||Df(c,b,a)}this.stopTool()};jh.prototype.doCancel=jh.prototype.zj=function(){var a=this.h;if(a!==n){var a=a.N,b=this.qm;if(b===n)return;a.Ad=b;b.vy!==n&&b.vy(a,b)}this.stopTool()};
jh.prototype.doStop=jh.prototype.Nk=function(){this.qm=n};function ra(){Cf.call(this);this.name="ClickCreating";this.$j=n;this.px=h;this.PA=new F(0,0)}w.P("ClickCreatingTool",ra);w.Da(ra,Cf);
ra.prototype.canStart=ra.prototype.uf=function(){if(!this.isEnabled||this.Er===n)return q;var a=this.h;if(a===n||(a.cb||a.te)||!a.En||!a.N.left||this.isBeyondDragSize())return q;if(this.lD){if(1===a.N.Xd&&(this.PA=a.N.kd.copy()),2!==a.N.Xd||this.isBeyondDragSize(this.PA))return q}else if(1!==a.N.Xd)return q;return a.Ha!==this&&a.Rr(a.N.M,h)!==n?q:h};ra.prototype.doMouseUp=ra.prototype.qe=function(){var a=this.h;this.W&&a!==n&&this.insertPart(a.N.M);this.stopTool()};
ra.prototype.insertPart=ra.prototype.ZK=function(a){var b=this.h;if(b===n)return n;var c=this.Er;if(c===n)return n;this.hc(this.name);var d=n;c instanceof S?c.be()&&(zf(c),d=c.copy(),d instanceof S&&b.add(d)):c!==n&&(c=b.ba.vj(c),w.mb(c)&&(b.ba.Ar(c),d=b.Cj(c)));d instanceof S&&(d.location=a,b.ke&&b.select(d));b.Ci();this.Xe=this.name;b.ya("PartCreated",d);this.Kj();return d instanceof S?d:n};w.g(ra,"archetypeNodeData",ra.prototype.Er);
w.defineProperty(ra,{Er:"archetypeNodeData"},t("$j"),function(a){this.$j!==a&&(a!==n&&w.i(a,Object,ra,"archetypeNodeData"),this.$j=a)});w.g(ra,"isDoubleClick",ra.prototype.lD);w.defineProperty(ra,{lD:"isDoubleClick"},t("px"),function(a){this.px!==a&&(w.k(a,"boolean",ra,"isDoubleClick"),this.px=a)});
function kh(){Cf.call(this);this.name="ContextMenu";this.zA=n;this.fB=new F;this.Bm=n;if(w.ay===h){this.Bm=new of;this.Tw=n;var a=this;this.JB=function(){a.stopTool()};if(w.CA===q){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";
var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();
return q},q);b.addEventListener("selectstart",function(a){a.preventDefault();return q},q);c.addEventListener("contextmenu",function(a){a.preventDefault();return q},q);document.body&&(document.body.appendChild(b),document.body.appendChild(c));w.dt=b;w.ct=c;w.CA=h}}}w.P("ContextMenuTool",kh);w.Da(kh,Cf);kh.prototype.canStart=kh.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||this.isBeyondDragSize()||!a.N.right?q:this.Bm!==n||this.findObjectWithContextMenu()!==n?h:q};
kh.prototype.doStart=kh.prototype.Xy=function(){var a=this.h;a!==n&&this.fB.set(a.xc.M)};kh.prototype.doStop=kh.prototype.Nk=function(){this.hideDefaultContextMenu();this.hideContextMenu()};kh.prototype.findObjectWithContextMenu=kh.prototype.qK=function(){var a=this.h;if(a===n)return n;var b=a.xd(a.N.M,n,function(a){return!a.Ja.zc});if(b!==n){for(a=b;a!==n;){var c=a.contextMenu;if(c!==n)return a;a=a.fa}if(this.Bm!==n)return b.ca}else if(c=a.contextMenu,c!==n)return a;return n};
kh.prototype.doActivate=kh.prototype.zh=aa();kh.prototype.doMouseDown=kh.prototype.Lr=function(){if(this.W){var a=this.h;if(a!==n&&this.Ge!==n){var b=a.xd(a.N.M,n,n);b!==n&&b.Ei(this.Ge)?(this.standardMouseClick(n,n),this.stopTool()):(this.stopTool(),a.Ha.doMouseDown())}}};
kh.prototype.doMouseUp=kh.prototype.qe=function(){!this.W&&this.canStart()&&(this.W=h);this.standardMouseSelect();this.standardMouseClick();var a=this.findObjectWithContextMenu();if(a!==n){var b=a.contextMenu;b!==n?this.showContextMenu(b,a instanceof P?a:n):this.showDefaultContextMenu()}else this.showDefaultContextMenu()};kh.prototype.doMouseMove=kh.prototype.Mg=function(){this.W&&this.standardMouseOver()};
kh.prototype.showContextMenu=kh.prototype.$L=function(a,b){w.i(a,of,kh,"showContextMenu:contextmenu");b!==n&&w.i(b,P,kh,"showContextMenu:obj");var c=this.h;if(c!==n){a!==this.Ge&&this.hideContextMenu();a.Pd="Tool";a.Hj=q;a.scale=1/c.scale;c.add(a);if(b!==n){var d=n,e=b.Tr();e!==n&&(d=e.data);a.Cc=b;a.data=d}else a.data=c.ba;a.yi();this.positionContextMenu(a,b);this.Ge=a;c.yb()}};
kh.prototype.positionContextMenu=kh.prototype.JL=function(a){var b=this.h;if(b!==n){var c=b.N.M.copy(),d=a.xa,b=b.Ua;c.x+d.width>b.right&&(c.x-=d.width+5);c.y+d.height>b.bottom&&(c.y-=d.height+5);a.position=c}};kh.prototype.hideContextMenu=kh.prototype.QK=function(){var a=this.h;a!==n&&this.Ge!==n&&(this.Ge.data=n,this.Ge.Cc=n,a.remove(this.Ge),this.Ge=n,this.standardMouseOver(),a.yb())};
kh.prototype.initializeDefaultButtons=kh.prototype.VK=function(){if(this.h===n)return n;var a=new z,b=this.h.Xf;a.add({text:"Copy",vf:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",vf:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",vf:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",vf:function(a){b.pasteSelection(a.N.M)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",vf:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",vf:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",vf:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",vf:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",vf:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Zoom To Fit",
vf:function(){b.zoomToFit()},visible:function(){return b.canZoomToFit()}});a.add({text:"Reset Zoom",vf:function(){b.resetZoom()},visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",vf:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",vf:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",vf:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});
return a};
kh.prototype.showDefaultContextMenu=kh.prototype.aM=function(){var a=this.h;if(a!==n){this.Tw===n&&(this.Tw=this.initializeDefaultButtons());this.Bm!==this.Ge&&this.hideContextMenu();w.dt.innerHTML="";w.ct.addEventListener("click",this.JB,q);var b=this,c=document.createElement("ul");c.className="defaultCXul";w.dt.appendChild(c);c.innerHTML="";for(var d=this.Tw.l;d.next();){var e=d.value,g=e.text,i=e.visible;if("function"!==typeof i||i()){i=document.createElement("li");i.className="defaultCXli";var j=
document.createElement("a");j.className="defaultCXa";j.href="#";j.aF=e.vf;j.addEventListener("click",function(c){this.aF(a);b.stopTool();c.preventDefault();return q},q);j.textContent=g;i.appendChild(j);c.appendChild(i)}}w.dt.style.display="block";w.ct.style.display="block";this.Ge=this.Bm}};kh.prototype.hideDefaultContextMenu=kh.prototype.RK=function(){this.Ge!==n&&this.Ge===this.Bm&&(w.dt.style.display="none",w.ct.style.display="none",w.ct.removeEventListener("click",this.JB,q),this.Ge=n)};
w.g(kh,"currentContextMenu",kh.prototype.Ge);w.defineProperty(kh,{Ge:"currentContextMenu"},t("zA"),ba("zA"));w.u(kh,{BL:"mouseDownPoint"},t("fB"));function lh(){Cf.call(this);this.name="DragSelecting";this.Cm=175;this.ZA=q;var a=new S;a.Pd="Tool";a.Hj=q;var b=new V;b.name="SHAPE";b.gb="Rectangle";b.fill=n;b.stroke="magenta";b.position=new F(0,0);a.add(b);this.Ni=a}w.P("DragSelectingTool",lh);w.Da(lh,Cf);
lh.prototype.canStart=lh.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||!a.ke)return q;var b=a.N;return!b.left||a.Ha!==this&&(!this.isBeyondDragSize()||b.timestamp-a.xc.timestamp<this.kv||a.Rr(b.M,h)!==n)?q:h};lh.prototype.doActivate=lh.prototype.zh=function(){var a=this.h;a!==n&&(this.W=h,a.Fc=h,a.ub=h,a.add(this.gd),this.doMouseMove())};lh.prototype.doDeactivate=lh.prototype.xi=function(){var a=this.h;a!==n&&(a.remove(this.gd),a.ub=q,this.W=a.Fc=q,a.yb())};
lh.prototype.doMouseMove=lh.prototype.Mg=function(){var a=this.h;if(a!==n&&this.W&&this.gd!==n){var b=this.computeBoxBounds();this.gd.Je("SHAPE").wa=b.size;this.gd.position=b.position;a.yb()}};lh.prototype.doMouseUp=lh.prototype.qe=function(){if(this.W){var a=this.h;a.remove(this.gd);try{a.vc="wait",this.selectInRect(this.computeBoxBounds())}finally{a.vc=""}}this.stopTool()};lh.prototype.computeBoxBounds=lh.prototype.fG=function(){var a=this.h;return a===n?new G(0,0,0,0):new G(a.xc.M,a.N.M)};
lh.prototype.selectInRect=lh.prototype.YL=function(a){var b=this.h;if(b!==n){var c=b.N;b.ya("ChangingSelection");a=b.Xl(a,n,function(a){return a instanceof S&&a.Ik()},this.qD);if(c.Lk)if(c.shift)for(a=a.l;a.next();)c=a.value,c.Qa&&(c.Qa=q);else for(a=a.l;a.next();)c=a.value,c.Qa=!c.Qa;else{if(!c.shift){for(var d=new z(S),e=b.selection.l;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.l;d.next();)c=d.value,c.Qa=q}for(a=a.l;a.next();)c=a.value,c.Qa||(c.Qa=h)}b.ya("ChangedSelection")}};
w.g(lh,"delay",lh.prototype.kv);w.defineProperty(lh,{kv:"delay"},t("Cm"),ba("Cm"));w.g(lh,"isPartialInclusion",lh.prototype.qD);w.defineProperty(lh,{qD:"isPartialInclusion"},t("ZA"),ba("ZA"));w.g(lh,"box",lh.prototype.gd);w.defineProperty(lh,{gd:"box"},t("Ni"),ba("Ni"));function mh(){Cf.call(this);this.name="DragZooming";var a=new S;a.Pd="Tool";a.Hj=q;var b=new V;b.name="SHAPE";b.gb="Rectangle";b.fill=n;b.stroke="magenta";b.position=new F(0,0);a.add(b);this.Ni=a;this.QB=n}w.P("DragZoomingTool",mh);
w.Da(mh,Cf);mh.prototype.canStart=mh.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||!a.N.left||a.Ha!==this&&!this.isBeyondDragSize()?q:h};mh.prototype.doActivate=mh.prototype.zh=function(){var a=this.h;a!==n&&(this.W=h,a.Fc=h,a.ub=h,a.add(this.gd),this.doMouseMove())};mh.prototype.doDeactivate=mh.prototype.xi=function(){var a=this.h;a!==n&&(a.remove(this.gd),a.ub=q,this.W=a.Fc=q,a.yb())};
mh.prototype.doMouseMove=mh.prototype.Mg=function(){var a=this.h;if(a!==n&&this.W&&this.gd!==n){var b=this.computeBoxBounds();this.gd.Je("SHAPE").wa=b.size;this.gd.position=b.position;a.yb()}};mh.prototype.doMouseUp=mh.prototype.qe=function(){if(this.W){var a=this.h;a.remove(this.gd);try{a.vc="wait",this.zoomToRect(this.computeBoxBounds())}finally{a.vc=""}}this.stopTool()};
mh.prototype.computeBoxBounds=mh.prototype.fG=function(){var a=this.h;if(a===n)return new G(0,0,0,0);var b=a.xc.M,c=a.N.M,a=c.x-b.x,d=c.y-b.y,e=this.Os;e===n&&(e=this.h);if(e===n)return new G(b,c);e=e.Ua;if(0===e.height||0===d)return new G(b,c);e=e.width/e.height;Math.abs(a/d)<e?(c=b.x+a,a=b.y+Math.ceil(Math.abs(a)/e)*(0>d?-1:1)):(c=b.x+Math.ceil(Math.abs(d)*e)*(0>a?-1:1),a=b.y+d);return new G(b,new F(c,a))};
mh.prototype.zoomToRect=mh.prototype.mI=function(a){if(!(0.1>a.width)){var b=this.Os;b===n&&(b=this.h);b!==n&&(b.scale=Math.min(b.Ua.width*b.scale/a.width,b.Bh),b.position=new F(a.x,a.y))}};w.g(mh,"box",mh.prototype.gd);w.defineProperty(mh,{gd:"box"},t("Ni"),ba("Ni"));w.g(mh,"zoomedDiagram",mh.prototype.Os);w.defineProperty(mh,{Os:"zoomedDiagram"},t("QB"),ba("QB"));
function nh(){Cf.call(this);this.name="Panning";this.Lx=new F;this.Oi=q;var a=this;this.xB=function(){document.removeEventListener("scroll",a.xB,q);a.stopTool()}}w.P("PanningTool",nh);w.Da(nh,Cf);nh.prototype.canStart=nh.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;return a===n||!a.sf&&!a.tf||!a.N.left||a.Ha!==this&&!this.isBeyondDragSize()?q:h};
nh.prototype.doActivate=nh.prototype.zh=function(){var a=this.h;a!==n&&(this.Oi?(a.N.bubbles=h,document.addEventListener("scroll",this.xB,q)):(a.vc="move",a.Fc=h,this.Lx=a.position.copy()),this.W=h)};nh.prototype.doDeactivate=nh.prototype.xi=function(){var a=this.h;a!==n&&(a.vc="",this.W=a.Fc=q)};nh.prototype.doCancel=nh.prototype.zj=function(){var a=this.h;a!==n&&(a.position=this.Lx,a.Fc=q);this.stopTool()};nh.prototype.doMouseMove=nh.prototype.Mg=function(){this.move()};
nh.prototype.doMouseUp=nh.prototype.qe=function(){this.move();this.stopTool()};nh.prototype.move=function(){var a=this.h;if(this.W&&a)if(this.Oi)a.N.bubbles=h;else{var b=a.position,c=a.xc.M,d=a.N.M,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.sf||(e=b.x);a.tf||(c=b.y);a.position=new F(e,c);a.Qg()}};w.g(nh,"bubbles",nh.prototype.bubbles);w.defineProperty(nh,{bubbles:"bubbles"},t("Oi"),ba("Oi"));w.g(nh,"originalPosition",nh.prototype.wH);w.u(nh,{wH:"originalPosition"},t("Lx"));
function oh(){Cf.call(this);this.name="TextEditing";this.Uw=this.BA=this.ny=n;this.$x=ph;this.oj=n;this.Ya=qh;this.wk=n}w.P("TextEditingTool",oh);w.Da(oh,Cf);var rh;oh.LostFocus=rh=w.s(oh,"LostFocus",0);var sh;oh.MouseDown=sh=w.s(oh,"MouseDown",1);var th;oh.Tab=th=w.s(oh,"Tab",2);var uh;oh.Enter=uh=w.s(oh,"Enter",3);oh.SingleClick=w.s(oh,"SingleClick",0);var ph;oh.SingleClickSelected=ph=w.s(oh,"SingleClickSelected",1);
var qh=w.s(oh,"StateNone",0),Bh=w.s(oh,"StateActive",1),Ch=w.s(oh,"StateEditing",2),Dh=w.s(oh,"StateEditing2",3),Eh=w.s(oh,"StateValidating",4),Fh=w.s(oh,"StateValidated",5);w.g(oh,"textBlock",oh.prototype.pg);w.defineProperty(oh,{pg:"textBlock"},t("ny"),ba("ny"));w.g(oh,"currentTextEditor",oh.prototype.Lg);w.defineProperty(oh,{Lg:"currentTextEditor"},t("BA"),ba("BA"));w.g(oh,"defaultTextEditor",oh.prototype.BC);w.defineProperty(oh,{BC:"defaultTextEditor"},t("Uw"),ba("Uw"));w.g(oh,"starting",oh.prototype.yE);
w.defineProperty(oh,{yE:"starting"},t("$x"),function(a){this.$x!==a&&(u&&w.jb(a,oh,oh,"starting"),this.$x=a)});oh.prototype.canStart=oh.prototype.uf=function(){if(!this.isEnabled)return q;var a=this.h;if(a===n||a.cb||!a.N.left||this.isBeyondDragSize())return q;a=a.xd(a.N.M,n,function(a){return a instanceof na});if(!(a instanceof na)||!a.mv)return q;a=a.ca;return a===n||this.yE===ph&&!a.Qa?q:h};oh.prototype.doStart=oh.prototype.Xy=function(){!this.W&&this.pg!==n&&this.doActivate()};
oh.prototype.doActivate=oh.prototype.zh=function(){if(!this.W){var a=this.h;if(a!==n){var b=this.pg;b===n&&(b=a.xd(a.N.M,function(a){return a instanceof na?a:n}),b=b instanceof na?b:n);if(b!==n&&(this.pg=b,b.ca!==n)){this.W=h;this.Ya=Bh;this.hc(this.name);var c=this.BC,d=q;b.Xz!==n&&(c=b.Xz);c!==n&&!c.mA&&(d=h);if(c===n){c=document.createElement("textarea");c.mA=h;this.Uw=c;var e=this.pg.copy();c.addEventListener("input",function(){e.text=this.value;Gh(e,Infinity,Infinity);this.style.width=20+e.xa.width*
this.eI+"px";this.rows=e.wl},q);c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==n)if(13==b)c.uy(uh);else{if(9==b)return c.uy(th),a.preventDefault(),q;27==b&&(c.doCancel(),c.h&&c.h.focus())}},q);c.addEventListener("focus",function(){var a=this.textEditingTool;a.Ya===Bh?a.Ya=Ch:a.Ya===Fh?a.Ya=Dh:a.Ya===Dh&&(a.Ya=Ch)},q)}if(c.mA){var g=b.Ab(Ob),i=a.position,j=a.scale,k=b.Yl()*j,l=b.Sa.width*k;Hh(b,b.font);g=new F((g.x-i.x)*j,(g.y-i.y)*j);c.value=b.text;a.wi.style.font=
b.font;c.style.font="inherit";c.style.fontSize=100*k+"%";c.style.lineHeight="normal";l=20+l;c.style.width=l+"px";c.style.height="";c.rows=b.wl;a.wi.appendChild(c);c.style.left=(g.x-l/2|0)+"px";c.style.top=(g.y-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.wi.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.eI=k;if(d&&c.onActivate!==f)c.onActivate();this.Lg=c;c.focus()}}}};
oh.prototype.doCancel=oh.prototype.zj=function(){this.wk!==n&&(this.Lg.style.border=this.wk,this.wk=n);this.stopTool()};oh.prototype.doMouseUp=oh.prototype.qe=function(){!this.W&&this.canStart()&&this.doActivate()};oh.prototype.doMouseDown=oh.prototype.Lr=function(){this.W&&this.uy(sh)};
oh.prototype.acceptText=oh.prototype.uy=function(a){switch(a){case sh:if(this.Ya===Fh||this.Ya===Dh)this.Lg.focus();else if(this.Ya===Bh||this.Ya===Ch)this.Ya=Eh,Ih(this);break;case rh:case uh:case th:if(uh===a&&this.ny.Ev===h)break;if(this.Ya===Bh||this.Ya===Ch)this.Ya=Eh,Ih(this)}};
function Ih(a){if(a.pg!==n&&a.Lg!==n){var b=a.pg,c=a.pg.text,d=a.Lg.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.pg,c,e)){a.Ya=Ch;b.Nr!==n&&b.Nr(a,c,e);a.wk===n&&(a.wk=a.Lg.style.border,a.Lg.style.border="3px solid red");a.Lg.focus();return}a.Ya=Fh;c!==e&&(a.pg.text=e);a.Xe=a.name;b=a.h;b!==n&&b.ya("TextEdited",a.pg,c);a.stopTool();b!==n&&b.focus()}a.wk!==n&&(a.Lg.style.border=a.wk,a.wk=n)}
oh.prototype.doDeactivate=oh.prototype.xi=function(){var a=this.h;if(a!==n){this.W&&this.Kj();this.Ya=qh;this.pg=n;if(this.Lg!==n){var b=this.Lg;if(b.onDeactivate!==f)b.onDeactivate();b!==n&&a.wi.removeChild(b)}this.W=q}};oh.prototype.isValidText=oh.prototype.kL=function(a,b,c){w.i(a,na,oh,"isValidText:textblock");var d=this.Gs;if(d!==n&&!d(a,b,c))return q;d=a.Gs;return d!==n&&!d(a,b,c)?q:h};w.g(oh,"textValidation",oh.prototype.Gs);
w.defineProperty(oh,{Gs:"textValidation"},t("oj"),function(a){this.oj!==a&&(this.oj=a)});function mf(){Cf.call(this);this.name="ToolManager";this.gB=new z(Cf);this.hB=new z(Cf);this.iB=new z(Cf);this.SA=this.TA=1E3;this.kt=this.Rw=n;this.jB=Ff}w.P("ToolManager",mf);w.Da(mf,Cf);var Ff;mf.WheelScroll=Ff=w.s(mf,"WheelScroll",0);var Ef;mf.WheelZoom=Ef=w.s(mf,"WheelZoom",1);w.g(mf,"mouseWheelBehavior",mf.prototype.em);w.defineProperty(mf,{em:"mouseWheelBehavior"},t("jB"),ba("jB"));
mf.prototype.initializeStandardTools=mf.prototype.XK=function(){this.RB=new jh;this.XD=new Rg;this.xD=new Ug;this.gE=new Zg;this.kE=new gh;this.tz=new qa;this.re=new Gf;this.HC=new lh;this.Mr=new mh;this.Mr.isEnabled=q;this.QD=new nh;this.nC=new kh;this.cw=new oh;this.iC=new ra;this.jC=new ih};
mf.prototype.doMouseDown=mf.prototype.Lr=function(){var a=this.h;if(a!==n){var b=a.sa;b.Iy&&0!==b.bl&&w.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.Re.length,c=0;c<b;c++){var d=this.Re.oa(c);d.h===n&&d.ee(this.h);if(d.canStart()){a.Ha=d;a.Ha===d&&(d.W||d.doActivate(),d.doMouseDown());return}}1===a.N.button&&(this.em===Ff?this.em=Ef:this.em===Ef&&(this.em=Ff));this.doActivate();this.standardWaitAfter(this.iz)}};
mf.prototype.doMouseMove=mf.prototype.Mg=function(){var a=this.h;if(a!==n){if(this.W)for(var b=this.cg.length,c=0;c<b;c++){var d=this.cg.oa(c);d.h===n&&d.ee(this.h);if(d.canStart()){a.Ha=d;a.Ha===d&&(d.W||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.W?this.iz:this.eD)}};mf.prototype.doCurrentObjectChanged=mf.prototype.pG=function(a,b){var c=this.Mk;c!==n&&!(b!==n&&(b===c||b.Ei(c)))&&this.hideToolTip()};
mf.prototype.doWaitAfter=mf.prototype.rG=function(){this.h&&this.h.Ea&&(this.doMouseHover(),this.W||this.doToolTip())};mf.prototype.doMouseHover=mf.prototype.QJ=function(){var a=this.h;if(a!==n){var b=a.N;b.Ad===n&&(b.Ad=a.xd(b.M,n,n));var c=b.Ad;if(c!==n)for(;c!==n;){a=this.W?c.ms:c.ns;if(a!==n&&(a(b,c),b.ae))break;c=c.fa}else a=this.W?a.ms:a.ns,a!==n&&a(b)}};
mf.prototype.doToolTip=mf.prototype.VJ=function(){var a=this.h;if(a!==n){var b=a.N;b.Ad===n&&(b.Ad=a.xd(b.M,n,n));b=b.Ad;if(b!==n){if(!(b===this.Mk||b.Ei(this.Mk))){for(;b!==n;){a=b.Js;if(a!==n){this.showToolTip(a,b);return}b=b.fa}this.hideToolTip()}}else a=a.Js,a!==n?this.showToolTip(a,n):this.hideToolTip()}};
mf.prototype.showToolTip=mf.prototype.bM=function(a,b){w.i(a,of,mf,"showToolTip:tooltip");b!==n&&w.i(b,P,mf,"showToolTip:obj");var c=this.h;if(c!==n){a!==this.Mk&&this.hideToolTip();a.Pd="Tool";a.Hj=q;a.scale=1/c.scale;c.add(a);if(b!==n&&b!==this.kt){var d=n,e=b.ca;e!==n&&(d=e.data);a.Cc=b;a.data=d}else b===n&&(a.data=c.ba);if(b===n||b!==this.kt)a.yi(),this.positionToolTip(a,b);this.Rw=a;this.kt=b;c.yb()}};
mf.prototype.positionToolTip=mf.prototype.KL=function(a){var b=this.h;if(b!==n){var c=b.N.M.copy(),d=a.xa,b=b.Ua;c.x+d.width>b.right&&(c.x-=d.width+5);c.y=c.y+20+d.height>b.bottom?c.y-(d.height+5):c.y+20;a.position=c}};mf.prototype.hideToolTip=mf.prototype.SK=function(){if(this.Mk!==n){var a=this.h;a!==n&&(this.Mk.data=n,this.Mk.Cc=n,a.remove(this.Mk),this.kt=this.Rw=n,a.yb())}};w.u(mf,{Mk:"currentToolTip"},t("Rw"));
mf.prototype.doMouseUp=mf.prototype.qe=function(){this.cancelWaitAfter();if(this.W){var a=this.h;if(a===n)return;for(var b=this.Rg.length,c=0;c<b;c++){var d=this.Rg.oa(c);d.h===n&&d.ee(this.h);if(d.canStart()){a.Ha=d;a.Ha===d&&(d.W||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};mf.prototype.doMouseWheel=mf.prototype.qG=function(){this.standardMouseWheel()};mf.prototype.doKeyDown=mf.prototype.Vy=function(){var a=this.h;a!==n&&a.Xf.doKeyDown()};
mf.prototype.doKeyUp=mf.prototype.Wy=function(){var a=this.h;a!==n&&a.Xf.doKeyUp()};mf.prototype.doCancel=mf.prototype.zj=function(){Jf!==n&&Jf.doCancel();Cf.prototype.zj.call(this)};mf.prototype.findTool=mf.prototype.Ke=function(a){w.k(a,"string",mf,"findTool:name");for(var b=this.Re.length,c=0;c<b;c++){var d=this.Re.oa(c);if(d.name===a)return d}b=this.cg.length;for(c=0;c<b;c++)if(d=this.cg.oa(c),d.name===a)return d;b=this.Rg.length;for(c=0;c<b;c++)if(d=this.Rg.oa(c),d.name===a)return d;return n};
mf.prototype.replaceTool=mf.prototype.JH=function(a,b){w.k(a,"string",mf,"replaceTool:name");b!==n&&(w.i(b,Cf,mf,"replaceTool:newtool"),b.h&&b.h!==this.h&&w.m("Cannot share tools between Diagrams: "+b.toString()),b.ee(this.h));for(var c=this.Re.length,d=0;d<c;d++){var e=this.Re.oa(d);if(e.name===a)return b!==n?this.Re.Xv(d,b):this.Re.Te(d),e}c=this.cg.length;for(d=0;d<c;d++)if(e=this.cg.oa(d),e.name===a)return b!==n?this.cg.Xv(d,b):this.cg.Te(d),e;c=this.Rg.length;for(d=0;d<c;d++)if(e=this.Rg.oa(d),
e.name===a)return b!==n?this.Rg.Xv(d,b):this.Rg.Te(d),e;return n};function Jh(a,b,c,d){w.k(b,"string",mf,"replaceStandardTool:name");w.i(d,z,mf,"replaceStandardTool:list");c!==n&&(w.i(c,Cf,mf,"replaceStandardTool:newtool"),c.h&&c.h!==a.h&&w.m("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.ee(a.h));a.Ke(b)?a.JH(b,c):c!==n&&d.add(c)}w.u(mf,{Re:"mouseDownTools"},t("gB"));w.u(mf,{cg:"mouseMoveTools"},t("hB"));w.u(mf,{Rg:"mouseUpTools"},t("iB"));w.g(mf,"hoverDelay",mf.prototype.eD);
w.defineProperty(mf,{eD:"hoverDelay"},t("TA"),ba("TA"));w.g(mf,"holdDelay",mf.prototype.iz);w.defineProperty(mf,{iz:"holdDelay"},t("SA"),ba("SA"));w.g(mf,"actionTool",mf.prototype.RB);w.defineProperty(mf,{RB:"actionTool"},function(){return this.Ke("Action")},function(a){Jh(this,"Action",a,this.Re)});w.g(mf,"relinkingTool",mf.prototype.XD);w.defineProperty(mf,{XD:"relinkingTool"},function(){return this.Ke("Relinking")},function(a){Jh(this,"Relinking",a,this.Re)});w.g(mf,"linkReshapingTool",mf.prototype.xD);
w.defineProperty(mf,{xD:"linkReshapingTool"},function(){return this.Ke("LinkReshaping")},function(a){Jh(this,"LinkReshaping",a,this.Re)});w.g(mf,"resizingTool",mf.prototype.gE);w.defineProperty(mf,{gE:"resizingTool"},function(){return this.Ke("Resizing")},function(a){Jh(this,"Resizing",a,this.Re)});w.g(mf,"rotatingTool",mf.prototype.kE);w.defineProperty(mf,{kE:"rotatingTool"},function(){return this.Ke("Rotating")},function(a){Jh(this,"Rotating",a,this.Re)});w.g(mf,"linkingTool",mf.prototype.tz);
w.defineProperty(mf,{tz:"linkingTool"},function(){return this.Ke("Linking")},function(a){Jh(this,"Linking",a,this.cg)});w.g(mf,"draggingTool",mf.prototype.re);w.defineProperty(mf,{re:"draggingTool"},function(){return this.Ke("Dragging")},function(a){Jh(this,"Dragging",a,this.cg)});w.g(mf,"dragSelectingTool",mf.prototype.HC);w.defineProperty(mf,{HC:"dragSelectingTool"},function(){return this.Ke("DragSelecting")},function(a){Jh(this,"DragSelecting",a,this.cg)});w.g(mf,"panningTool",mf.prototype.QD);
w.defineProperty(mf,{QD:"panningTool"},function(){return this.Ke("Panning")},function(a){Jh(this,"Panning",a,this.cg)});w.g(mf,"dragZoomingTool",mf.prototype.Mr);w.defineProperty(mf,{Mr:"dragZoomingTool"},function(){return this.Ke("DragZooming")},function(a){Jh(this,"DragZooming",a,this.cg)});w.g(mf,"contextMenuTool",mf.prototype.nC);w.defineProperty(mf,{nC:"contextMenuTool"},function(){return this.Ke("ContextMenu")},function(a){Jh(this,"ContextMenu",a,this.Rg)});w.g(mf,"textEditingTool",mf.prototype.cw);
w.defineProperty(mf,{cw:"textEditingTool"},function(){return this.Ke("TextEditing")},function(a){Jh(this,"TextEditing",a,this.Rg)});w.g(mf,"clickCreatingTool",mf.prototype.iC);w.defineProperty(mf,{iC:"clickCreatingTool"},function(){return this.Ke("ClickCreating")},function(a){Jh(this,"ClickCreating",a,this.Rg)});w.g(mf,"clickSelectingTool",mf.prototype.jC);w.defineProperty(mf,{jC:"clickSelectingTool"},function(){return this.Ke("ClickSelecting")},function(a){Jh(this,"ClickSelecting",a,this.Rg)});
function jf(){w.jc(this);this.aa=n;this.Nb=new z(S);this.Bb="";this.gi=1;this.ux=q;this.Kg=this.Xj=this.Wj=this.Vj=this.Uj=this.Sj=this.Rj=this.Tj=this.Qj=this.Zj=this.Pj=this.Yj=this.Oj=this.Nj=h;this.rB=[]}w.P("Layer",jf);jf.prototype.ee=ba("aa");
jf.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,g=0,i=0,j=this.Nb.l;j.next();){var k=j.value;k instanceof xf?e++:k instanceof T?d++:k instanceof U?g++:k instanceof of?i++:c++}j="";0<c&&(j+=c+" Parts ");0<d&&(j+=d+" Nodes ");0<e&&(j+=e+" Groups ");0<g&&(j+=g+" Links ");0<i&&(j+=i+" Adornments ");if(1<a)for(c=this.Nb.l;c.next();)d=c.value,j+="\n    "+d.toString(a-1),(e=d.data)&&w.ec(e)&&(j+=" #"+w.ec(e)),d instanceof T?j+=" "+le(e):d instanceof
U&&(j+=" "+le(d.ga)+" "+le(d.la));return b+" "+this.Nb.count+": "+j};jf.prototype.findObjectAt=jf.prototype.xd=function(a,b,c){b===f&&(b=n);c===f&&(c=n);var d=this.Nb,e=q;this.h.Ua.ua(a)&&(e=h);for(var g=new F,i=d.length;i--;){var j=d.oa(i);if(!(e===h&&j.he===q)&&j.nb()&&(Za(g.set(a),j.je),j=j.xd(g,b,c),j!==n&&(b!==n&&(j=b(j)),j&&(c===n||c(j)))))return j}return n};
jf.prototype.findObjectsAt=jf.prototype.Vn=function(a,b,c,d){b===f&&(b=n);c===f&&(c=n);!(d instanceof z)&&!(d instanceof ma)&&(d=new ma(P));var e=this.Nb,g=q;this.h.Ua.ua(a)&&(g=h);for(var i=new F,j=e.length;j--;){var k=e.oa(j);!(g===h&&k.he===q)&&k.nb()&&(Za(i.set(a),k.je),k.Vn(i,b,c,d)&&(b!==n&&(k=b(k)),k&&(c===n||c(k))&&d.add(k)))}return d};
jf.prototype.findObjectsIn=jf.prototype.Xl=function(a,b,c,d,e){b===f&&(b=n);c===f&&(c=n);d===f&&(d=q);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));var g=this.Nb,i=q;this.h.Ua.Ol(a)&&(i=h);for(var j=g.length;j--;){var k=g.oa(j);!(i===h&&k.he===q)&&(k.nb()&&k.Xl(a,b,c,d,e))&&(b!==n&&(k=b(k)),k&&(c===n||c(k))&&e.add(k))}return e};
jf.prototype.findObjectsNear=jf.prototype.Wn=function(a,b,c,d,e){c===f&&(c=n);d===f&&(d=n);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));var g=this.Nb,i=q;this.h.Ua.ua(a)&&(i=h);for(var j=new F,k=g.length;k--;){var l=g.n[k];if(!(i===h&&l.he===q)&&l.nb()){Za(j.set(a),l.je);var m=new F(a.x+b,a.y);Za(m,l.je);l.Wn(j,m,c,d,e)&&(c!==n&&(l=c(l)),l&&(d===n||d(l))&&e.add(l))}}return e};da=jf.prototype;
da.He=function(a,b,c){if(this.visible){a.globalAlpha=this.gi;var d=this.Nb,c=c?c:b.Ua,e=[],g=b.scale;if(b.qk)for(var i=d.length,j=0;j<i;j++){var k=d.n[j];k.aB=j;if(k instanceof U&&(k.fc&&e.push(k),k.pi===q))continue;var l=k.va;l.Me(c)?(1<l.width*g||1<l.height*g?k.He(a,b):Kh(k,a),k.he=h):k.he=q}else{i=d.length;for(j=0;j<i;j++)if(k=d.n[j],k.he){if(k instanceof U&&(k.fc&&e.push(k),k.pi===q))continue;l=k.va;1<l.width*g||1<l.height*g?k.He(a,b):Kh(k,a)}}this.rB=e;a.globalAlpha=1}};
da.j=function(a,b,c,d,e){var g=this.h;g!==n&&g.Pc(ie,a,this,b,c,d,e)};da.Rk=function(a,b,c){var d=this.Nb;b.G=this;if(a>=d.count)a=d.count;else if(d.oa(a)===b)return-1;d.yc(a,b);b.as();d=this.h;d!==n&&(c?Lh(d):d.Rk(b));b instanceof xf&&this.$v(b);return a};da.Od=function(a,b,c){var d=this.Nb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.oa(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.bs();d.Te(a);d=this.h;d!==n&&(c?Lh(d):d.Od(b));b.G=n;return a};
da.$v=function(a){for(;a!==n;){if(a.Ja===this){var b=a;if(b.Gc.next()){for(var c=-1,d=-1,e=this.Nb.n,g=e.length,i=0;i<g;i++){var j=e[i];if(j===b&&(c=i,0<=d))break;if(0>d&&j.bb===b&&(d=i,0<=c))break}!(0>d)&&d<c&&(e=this.Nb,e.Te(c),e.yc(d,b))}}a=a.bb}};da.clear=function(){for(var a=this.Nb.qg(),b=a.length,c=0;c<b;c++)a[c].he=q,this.Od(-1,a[c])};w.u(jf,{Yk:"parts"},function(){return this.Nb.l});w.u(jf,{FL:"partsBackwards"},function(){return this.Nb.eo});w.u(jf,{h:"diagram"},t("aa"));w.g(jf,"name",jf.prototype.name);
w.defineProperty(jf,{name:"name"},t("Bb"),function(a){w.k(a,"string",jf,"name");var b=this.Bb;if(b!==a){var c=this.h;if(c!==n){""===b&&w.m("Cannot rename default Layer to: "+a);for(c=c.Gv;c.next();)c.value.name===a&&w.m("Layer.name is already present in this diagram: "+a)}this.Bb=a;this.j("name",b,a);for(a=this.Nb.l;a.next();)a.value.Pd=this.Bb}});w.g(jf,"opacity",jf.prototype.opacity);
w.defineProperty(jf,{opacity:"opacity"},t("gi"),function(a){var b=this.gi;b!==a&&(w.k(a,"number",jf,"opacity"),(0>a||1<a)&&w.ra(a,"0 <= val <= 1",jf,"opacity"),this.gi=a,this.j("opacity",b,a),a=this.h,a!==n&&Lh(a))});w.g(jf,"isTemporary",jf.prototype.zc);w.defineProperty(jf,{zc:"isTemporary"},t("ux"),function(a){var b=this.ux;b!==a&&(w.k(a,"boolean",jf,"isTemporary"),this.ux=a,this.j("isTemporary",b,a))});w.g(jf,"visible",jf.prototype.visible);
w.defineProperty(jf,{visible:"visible"},t("Kg"),function(a){var b=this.Kg;if(b!==a){w.k(a,"boolean",jf,"visible");this.Kg=a;this.j("visible",b,a);for(a=this.Nb.l;a.next();)a.value.updateAdornments();a=this.h;a!==n&&Lh(a)}});w.g(jf,"allowCopy",jf.prototype.qj);w.defineProperty(jf,{qj:"allowCopy"},t("Nj"),function(a){var b=this.Nj;b!==a&&(w.k(a,"boolean",jf,"allowCopy"),this.Nj=a,this.j("allowCopy",b,a))});w.g(jf,"allowDelete",jf.prototype.Ek);
w.defineProperty(jf,{Ek:"allowDelete"},t("Oj"),function(a){var b=this.Oj;b!==a&&(w.k(a,"boolean",jf,"allowDelete"),this.Oj=a,this.j("allowDelete",b,a))});w.g(jf,"allowTextEdit",jf.prototype.In);w.defineProperty(jf,{In:"allowTextEdit"},t("Yj"),function(a){var b=this.Yj;b!==a&&(w.k(a,"boolean",jf,"allowTextEdit"),this.Yj=a,this.j("allowTextEdit",b,a))});w.g(jf,"allowGroup",jf.prototype.Dn);
w.defineProperty(jf,{Dn:"allowGroup"},t("Pj"),function(a){var b=this.Pj;b!==a&&(w.k(a,"boolean",jf,"allowGroup"),this.Pj=a,this.j("allowGroup",b,a))});w.g(jf,"allowUngroup",jf.prototype.Jn);w.defineProperty(jf,{Jn:"allowUngroup"},t("Zj"),function(a){var b=this.Zj;b!==a&&(w.k(a,"boolean",jf,"allowUngroup"),this.Zj=a,this.j("allowUngroup",b,a))});w.g(jf,"allowLink",jf.prototype.Kl);
w.defineProperty(jf,{Kl:"allowLink"},t("Qj"),function(a){var b=this.Qj;b!==a&&(w.k(a,"boolean",jf,"allowLink"),this.Qj=a,this.j("allowLink",b,a))});w.g(jf,"allowRelink",jf.prototype.rj);w.defineProperty(jf,{rj:"allowRelink"},t("Tj"),function(a){var b=this.Tj;b!==a&&(w.k(a,"boolean",jf,"allowRelink"),this.Tj=a,this.j("allowRelink",b,a))});w.g(jf,"allowMove",jf.prototype.Fk);
w.defineProperty(jf,{Fk:"allowMove"},t("Rj"),function(a){var b=this.Rj;b!==a&&(w.k(a,"boolean",jf,"allowMove"),this.Rj=a,this.j("allowMove",b,a))});w.g(jf,"allowPrint",jf.prototype.Dr);w.defineProperty(jf,{Dr:"allowPrint"},t("Sj"),function(a){var b=this.Sj;b!==a&&(w.k(a,"boolean",jf,"allowPrint"),this.Sj=a,this.j("allowPrint",b,a))});w.g(jf,"allowReshape",jf.prototype.Fn);
w.defineProperty(jf,{Fn:"allowReshape"},t("Uj"),function(a){var b=this.Uj;b!==a&&(w.k(a,"boolean",jf,"allowReshape"),this.Uj=a,this.j("allowReshape",b,a))});w.g(jf,"allowResize",jf.prototype.Gn);w.defineProperty(jf,{Gn:"allowResize"},t("Vj"),function(a){var b=this.Vj;b!==a&&(w.k(a,"boolean",jf,"allowResize"),this.Vj=a,this.j("allowResize",b,a))});w.g(jf,"allowRotate",jf.prototype.Hn);
w.defineProperty(jf,{Hn:"allowRotate"},t("Wj"),function(a){var b=this.Wj;b!==a&&(w.k(a,"boolean",jf,"allowRotate"),this.Wj=a,this.j("allowRotate",b,a))});w.g(jf,"allowSelect",jf.prototype.ke);w.defineProperty(jf,{ke:"allowSelect"},t("Xj"),function(a){var b=this.Xj;b!==a&&(w.k(a,"boolean",jf,"allowSelect"),this.Xj=a,this.j("allowSelect",b,a))});
function A(a){function b(a){var b=a.toLowerCase(),c=new z("function");e.add(a,c);e.add(b,c);g.add(a,a);g.add(b,a)}function c(){document.removeEventListener("DOMContentLoaded",c,q);Mh(d)}w.jc(this);w.HA=[];this.tc=h;this.Qf=17;var d=this;document.body!==n?Mh(this):document.addEventListener("DOMContentLoaded",c,q);this.hb=new z(jf);this.zB=this.yB=this.BB=this.AB=this.Lb=this.ek=this.Ea=n;this.rb=(new F(NaN,NaN)).freeze();this.Wb=1;this.nx=(new F(NaN,NaN)).freeze();this.ox=NaN;this.Xt=1E-4;this.Ut=
100;this.Md=new Wa;this.Ru=(new F(NaN,NaN)).freeze();this.tt=(new G(NaN,NaN,NaN,NaN)).freeze();this.fl=Nh;this.kl=Ib;this.nk=Nh;this.Nm=Ib;this.Ct=this.Bt=Jb;this.dh=new ma(P);this.bh=h;this.Ti=new la(U,G);this.qt=h;this.ZE=250;this.YE=1E3;this.Ug=n;this.Ys=(new hb(16,16,16,16)).freeze();this.IA=h;this.sn=this.rf=q;this.tp=h;this.qy=q;this.yg=new $d;this.Lc=new $d;this.bc=new $d;this.Ri=n;this.Gu=-1;this.by=q;this.Xw=new la("string",z);this.Ww=new la("string","string");var e=new la("string",z),g=
new la("string","string");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");
b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");this.Xw=e;this.Ww=g;this.gu=new ma(T);this.Hl=new ma(xf);this.Ot=new ma(U);this.Nb=new ma(S);this.It=h;this.VA=q;this.Ou=wg;this.Qw=this.Vw=this.Mu=n;this.jt="";this.gp="auto";this.Oh=this.oi=this.ai=this.$t=this.bi=this.ci=this.di=this.Nh=this.Qh=this.Mh=n;this.nl=
h;this.Hw=q;this.Nw=n;this.pl=this.ki=this.pA=q;this.Ma=h;this.Jd=n;var i=this;this.dB=function(a){if(a.ba===i.ba&&i.Ma){i.Ma=q;try{var b=a.hd;""===a.Qe&&b===ie&&Oh(i,a.object,a.propertyName)}finally{i.Ma=h}}};this.eB=function(a){if(a.ba===i.ba&&i.Ma){i.Ma=q;try{var b=a.hd,c=a.Qe;if(""!==c)if(b===ie)if("linkFromKey"===c){var d=a.object,e=i.yf(d);if(e!==n){var g=a.newValue,s=i.Yf(g);e.ga=s}}else if("linkToKey"===c)d=a.object,e=i.yf(d),e!==n&&(g=a.newValue,s=i.Yf(g),e.la=s);else if("linkFromPortId"===
c){if(d=a.object,e=i.yf(d),e!==n){var v=a.newValue;"string"===typeof v&&(e.Ai=v)}}else if("linkToPortId"===c)d=a.object,e=i.yf(d),e!==n&&(v=a.newValue,"string"===typeof v&&(e.Mj=v));else if("nodeGroupKey"===c){var d=a.object,y=i.Cj(d);if(y!==n){var C=a.newValue;if(C!==f){var E=i.Yf(C);y.bb=E instanceof xf?E:n}else y.bb=n}}else if("linkLabelKeys"===c){if(d=a.object,e=i.yf(d),e!==n){var I=a.oldValue,D=a.newValue;if(w.isArray(I))for(var M=w.Sb(I),N=0;N<M;N++){var Z=w.Eb(I,N),s=i.Yf(Z);s!==n&&(s.yd=n)}if(w.isArray(D)){M=
w.Sb(D);for(N=0;N<M;N++)Z=w.Eb(D,N),s=i.Yf(Z),s!==n&&(s.yd=e)}}}else if("nodeParentKey"===c){var va=a.object,ka=i.Yf(a.newValue),ta=i.Qr(va);if(ta!==n){var Da=ta.uv();Da!==n?ka===n?i.remove(Da):i.jd?Da.ga=ka:Da.la=ka:Ph(i,ka,ta)}}else if("parentLinkCategory"===c){var va=a.object,ta=i.Qr(va),Ha=a.newValue;ta!==n&&"string"===typeof Ha&&(Da=ta.uv(),Da!==n&&(Da.vd=Ha))}else if("nodeCategory"===c){var d=a.object,cb=i.Cj(d),Ha=a.newValue;cb!==n&&"string"===typeof Ha&&(cb.vd=Ha)}else if("linkCategory"===
c){var d=a.object,rb=i.yf(d),Ha=a.newValue;rb!==n&&"string"===typeof Ha&&(rb.vd=Ha)}else if("nodeDataArray"===c){var Xa=a.oldValue;Qh(i,Xa);var Na=a.newValue;Rh(i,Na)}else"linkDataArray"===c&&(Xa=a.oldValue,Qh(i,Xa),Na=a.newValue,Sh(i,Na));else if(b===je)Na=a.newValue,"nodeDataArray"===c&&w.mb(Na)?Th(i,Na):"linkDataArray"===c&&w.mb(Na)?Uh(i,Na):"linkLabelKeys"===c&&Me(Na)&&(e=i.yf(a.object),s=i.Yf(Na),e!==n&&s!==n&&(s.yd=e));else if(b===ke)Xa=a.oldValue,"nodeDataArray"===c&&w.mb(Xa)?Vh(i,Xa):"linkDataArray"===
c&&w.mb(Xa)?Vh(i,Xa):"linkLabelKeys"===c&&Me(Xa)&&(s=i.Yf(Xa),s!==n&&(s.yd=n));else{if(b===he&&"SourceChanged"===c){var y=i.Cj(a.object),gb=a.propertyName;y!==n&&"string"===typeof gb&&(y.vb(gb),i.ba instanceof De&&(e=i.yf(a.object),e!==n&&e.vb(gb)))}}else if(b===ie){var Ya=a.propertyName,d=a.object;if(d===i.ba){if("nodeKeyProperty"===Ya||"nodeCategoryProperty"===Ya||"linkFromKeyProperty"===Ya||"linkToKeyProperty"===Ya||"linkFromPortIdProperty"===Ya||"linkToPortIdProperty"===Ya||"nodeIsLinkLabelProperty"===
Ya||"linkLabelKeysProperty"===Ya||"nodeIsGroupProperty"===Ya||"nodeGroupKeyProperty"===Ya||"nodeParentKeyProperty"===Ya||"linkCategoryProperty"===Ya)i.sa.tb||i.gm()}else Oh(i,d,Ya)}else if(b===je||b===ke){var nb=a.hd===je,ud=nb?a.Af:a.Bf,me=nb?a.newValue:a.oldValue,Kd=i.tl.qa(a.object);if(Array.isArray(Kd))for(a=0;a<Kd.length;a++){var Ub=Kd[a];"number"===typeof ud&&((Ub.type===ah||Ub.type===Wh)&&ud++,nb?w.mb(me)&&(Xh(Ub,me,ud),Yh(Ub,Ub)):(Ub.Od(ud),Yh(Ub,Ub)))}}else if(b===he){var Ec=a.propertyName;
if("S"!==Ec[0]){if("CommittingTransaction"!==Ec){if("FinishedUndo"===Ec||"FinishedRedo"===Ec)i.sa.Xh=h,Zh(i),i.sa.Xh=q;i.zg&&i.Ha.standardMouseOver();for(var Zd=i.selection.l;Zd.next();)Zd.value.updateAdornments()}i.sn=h;i.Qg();fh(i)}else"StartingFirstTransaction"===Ec&&(!i.Sd&&!i.zg)&&(i.sn=h,i.tp&&(i.rf=h),i.Qg())}}finally{i.Ma=h}}};this.Ph=new la(Object,S);this.fk=new la(Object,U);this.tl=new la(Object,Array);this.rk=q;this.Oj=this.Nj=this.Ps=this.Wh=h;this.Rs=this.Qs=q;this.Ws=this.Us=this.Xj=
this.Wj=this.Vj=this.Uj=this.Sj=this.Rj=this.Tj=this.Qj=this.Ts=this.Zj=this.Pj=this.Yj=h;this.YA=q;this.Vs=this.Ss=this.xt=this.wt=h;this.uu=this.tu=16;this.Tx=this.su=q;this.Vx=this.Ux=this.mj=this.lj=n;this.ie=(new hb(5)).freeze();this.xu=(new ma(S)).freeze();this.Vt=999999999;this.qk=this.pk=this.Uh=h;this.Lm=this.Km=q;this.At=this.zt=0;this.qd=n;this.Xs=h;this.zg=q;this.td=n;this.oB=1;this.NB=(new G(NaN,NaN,NaN,NaN)).freeze();this.ot=(new G(NaN,NaN,NaN,NaN)).freeze();this.Sd=q;this.mu=new ma;
$h(this);this.Nt=this.ut=this.fu=this.EA=this.DA=this.FA=this.Zi=this.kk=this.ei=n;ai(this);this.ym=this.Qx=this.nd=n;this.Rb=new mf;this.Rb.initializeStandardTools();this.Ha=this.jv=this.Rb;this.Xf=new pa;this.ba=new O;this.ki=h;this.Pb=new bi;this.ki=q;a===f&&(a=document.createElement("div"));this.yt=new ci;di(this,a);this.ar=n;this.Sm=1;this.Lt=0;this.Mt=new F;this.LB=500;this.kB=q;window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&(this.kB=h);this.tc=q}w.P("Diagram",A);
function ai(a){a.ei=new la("string",S);var b=new T,c=new na;c.bind(new df("text","",le));b.add(c);a.FA=b;a.ei.add("",b);b=new T;c=new na;c.stroke="brown";c.bind(new df("text","",le));b.add(c);a.ei.add("Comment",b);b=new T;b.Hj=q;b.Fy=q;c=new V;c.gb="Ellipse";c.fill="black";c.stroke=n;c.wa=new bb(3,3);b.add(c);a.ei.add("LinkLabel",b);a.kk=new la("string",xf);b=new xf;b.As="GROUPPANEL";b.type=ei;c=new na;c.font="bold 12pt sans-serif";c.bind(new df("text","",le));b.add(c);c=new x(Wh);c.name="GROUPPANEL";
var d=new V;d.gb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new bh;d.padding=new hb(5,5,5,5);c.add(d);b.add(c);a.DA=b;a.kk.add("",b);a.Zi=new la("string",U);b=new U;c=new V;c.Gi=h;b.add(c);c=new V;c.nm="Standard";c.fill="black";c.stroke=n;c.eb=0;b.add(c);a.EA=b;a.Zi.add("",b);b=new U;c=new V;c.Gi=h;c.stroke="brown";b.add(c);a.Zi.add("Comment",b);b=new of;b.type=Wh;c=new V;c.fill=n;c.stroke="magenta";c.eb=2;b.add(c);c=new bh;c.margin=new hb(1,1,1,1);b.add(c);a.fu=b;a.ut=
b;b=new of;b.type=Sg;c=new V;c.Gi=h;c.fill=n;c.stroke="magenta";c.eb=0;b.add(c);a.Nt=b}
function Mh(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);document.body.removeChild(c);a.Qf=d-b}
A.prototype.toString=function(a){a===f&&(a=0);var b="";this.id&&(b=this.id);this.wi&&this.wi.id&&(b=this.wi.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.hb.l;c.next();)b+="\n  "+c.value.toString(a-1);return b};A.prototype.checkProperties=A.prototype.lJ=function(){return w.$F(this)};A.fromDiv=function(a){var b=a;"string"===typeof a&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.aa instanceof A?b.aa:n};w.g(A,"div",A.prototype.wi);
w.defineProperty(A,{wi:"div"},t("Lb"),function(a){a!==n&&w.i(a,HTMLDivElement,A,"div");if(this.Lb!==a){var b=this.Lb;if(b!==n){delete b.aa;b.innerHTML="";this.Ea!==n&&(this.Ea.aa=n,this.Ea.removeEventListener("touchstart",this.IE,q),this.Ea.removeEventListener("touchmove",this.HE,q),this.Ea.removeEventListener("touchend",this.GE,q));b=this.Mu;if(b!==n){for(var c=b.gB,d=c.length,e=0;e<d;e++)c.n[e].cancelWaitAfter();c=b.hB;d=c.length;for(e=0;e<d;e++)c.n[e].cancelWaitAfter();c=b.iB;d=c.length;for(e=
0;e<d;e++)c.n[e].cancelWaitAfter()}b.cancelWaitAfter();this.ek=this.Ea=n;window.removeEventListener("resize",this.wz,q);window.removeEventListener("mousemove",this.po,h);window.removeEventListener("mousedown",this.oo,h);window.removeEventListener("mouseup",this.ro,h);window.removeEventListener("mousewheel",this.Sg,h);window.removeEventListener("DOMMouseScroll",this.Sg,h);window.removeEventListener("mouseout",this.qo,h)}this.Lb=n;if(a!==n){if(b=a.aa)b.wi=n;di(this,a)}}});
function ci(){this.DB=h;this.oI=q;this.qI=212;this.oF="63ad05bbe23a1786468a4c741b6d2e";if(this.oF===this._tk)this.Ui=h;else{var a="p",b=window[w.Oa("76a715b2f73f148a")][w.Oa("72ba13b5")];if(w.Oa("77bb5bb2f32603de")===window[w.Oa("76a715b2f73f148a")][w.Oa("6aba19a7ec351488")])try{this.Ui=!window[w.Oa("4da118b7ec2108")][w.Oa("5bb806bfea351a904a84515e1b6d38b6")][w.Oa("49bc19a1e6")][w.Oa("59bd04a1e6380fa5539b")][w.Oa("7bb8069ae7")]===w.Oa(w.Ay);if(this.Ui===q)return;this.Ui=!window[w.Oa("4da118b7ec2108")][w.Oa("5bb806bfea351a904a84515e1b6d38b6")][w.Oa("49bc19a1e6")][w.Oa("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")][w.Oa("7bb8069ae7")]===
w.Oa(w.Ay);if(this.Ui===q)return}catch(c){}for(var d=b[w.Oa("76ad18b4f73e")],e=b[w.Oa("73a612b6fb191d")](w.Oa("35e7"))+2;e<d;e++)a+=b[e];d=a[w.Oa("73a612b6fb191d")](w.Oa(w.Ay));if(this.Ui=!(0<d&&d<a[w.Oa("73a612b6fb191d")](w.Oa("35")))){a=document[w.Oa("69bc0fbfe6051381469f4c")];d=a.length;for(e=0;e<d;e++)if(b=a[e][w.Oa("79bb0581f63a1e97")],b!==n){for(var g=b.length,i=0;i<g;i++)if(b[i][w.Oa("69ad1ab6e0221496778e4767")]==w.Oa("02cncncn")){var j=b[i][w.Oa("69bc0fbfe6")][w.Oa("78a704b7e6242f8b53a8507f1b7b")];
if(!j)return;if(-1!==j.indexOf(w.Oa(w.aG))&&-1!==j.indexOf(w.Oa(w.bG))){this.Ui=q;break}}if(this.Ui===q)break}}this.rI=new F(NaN,NaN)}}ci.prototype.Ms=function(a){a.XE();return 0<this.Ui&&this!==this.DB?h:q};ci.prototype.t=ci.prototype.mM=function(){this.DB=n};
function di(a,b){(b===f||b===n)&&w.m("Diagram setup requires an argument DIV.");a.Lb!==n&&w.m("Diagram has already completed setup.");"string"===typeof b?a.Lb=document.getElementById(b):b instanceof HTMLDivElement?a.Lb=b:w.m("No DIV or DIV id supplied: "+b);a.Lb===n&&w.m("Invalid DIV id; could not get element with id: "+b);a.Lb.aa!==f&&w.m("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.Lb,n).position&&(a.Lb.style.position="relative");a.Lb.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.Lb.innerHTML="";a.Lb.aa=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.Lb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style!==f&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.zIndex="2",c.style.sM="none",c.style.webkitUserSelect="none",c.style.MozUserSelect="none");
c.width=a.Lb.clientWidth||1;c.height=a.Lb.clientHeight||1;c.style!==f&&(document.defaultView&&document.defaultView.getComputedStyle)&&(a.AB=parseInt(document.defaultView.getComputedStyle(c,n).paddingLeft,10)||0,a.BB=parseInt(document.defaultView.getComputedStyle(c,n).paddingTop,10)||0,a.yB=parseInt(document.defaultView.getComputedStyle(c,n).borderLeftWidth,10)||0,a.zB=parseInt(document.defaultView.getComputedStyle(c,n).borderTopWidth,10)||0);a.At=0;a.zt=0;if(document.body){var d=document.body.parentNode;
a.At=d.offsetTop||0;a.zt=d.offsetLeft||0}else document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;a.At=b.offsetTop||0;a.zt=b.offsetLeft||0}},q);c.aa=a;a.Ea=c;a.ek=c.getContext("2d");d=a.ek;a.XE=d[w.Oa("69ad0287f137159745844d7e")][w.Oa("78a118b7")](d,1,0,0,1,0,0);a.nA=d[w.Oa("7eba17a4ca3b1a8346")][w.Oa("78a118b7")](d,w.Ms,4,4);a.Lb.insertBefore(c,a.Lb.firstChild);if(a.IA!==n){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),
i=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.Ea.width+"px";d.style.height=a.Ea.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.Ea.width+"px";e.style.height=a.Ea.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";i.style.position="absolute";i.style.width="1px";i.style.height="1px";a.Lb.appendChild(d);a.Lb.appendChild(e);d.appendChild(g);e.appendChild(i);
d.onscroll=a.mB;d.onmousedown=a.nB;d.aa=a;d.uB=h;e.onscroll=a.mB;e.onmousedown=a.nB;e.aa=a;e.vB=h;a.lj=d;a.mj=e;a.Ux=g;a.Vx=i}a.preventDefault=function(a){a.preventDefault();return q};a.po=function(b){if(a.isEnabled){var c=a.Lc;window.TouchEvent&&c.Vi!==n&&c.Vi instanceof window.TouchEvent?(b.preventDefault(),b.simulated=h,a.ar=b):(a.Lc=a.bc,a.bc=c,fi(a,b,c,h),gi(b,new F,b.target.aa)||(a.Ha.doMouseMove(),a.Ha.isBeyondDragSize()&&hi(a)))}};a.oo=function(b){if(a.isEnabled){var c=a.Lc;if(a.ar!==n)a.ar=
b,b.preventDefault();else if(a.Lc=a.bc,a.bc=c,fi(a,b,c,h),c.Aj=h,c.Xd=b.detail,a.yg=c.copy(),c.Vi.simulated===h)b.preventDefault(),b.simulated=h;else if(u&&u.MD&&(window.MD=a.Vn(c.M)),Jf=n,a.Ha.doMouseDown(),1===b.button)return b.preventDefault(),q}};a.ro=function(b){if(a.isEnabled){var c=a.Lc;a.ar!==n?(a.ar=n,b.preventDefault()):(a.Lc=a.bc,a.bc=c,fi(a,b,c,h),c.Ji=h,c.Xd=b.detail,c.bubbles=b.bubbles,b.target.aa&&(c.ng=b.target.aa),ii(a,b,new F,c.ng)||(a.Ha.doMouseUp(),Mf(a),ji(a,c,b)))}};a.Sg=function(b){if(a.isEnabled){var c=
a.Lc;a.Lc=a.bc;a.bc=c;fi(a,b,c,h);c.bubbles=h;c.yj=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;a.Ha.doMouseWheel();ji(a,c,b)}};a.qo=function(){if(a.isEnabled){var b=a.Ha;b.cancelWaitAfter();b instanceof mf&&b.hideToolTip()}};a.wz=function(){var b=a.Ea,c=a.Lb,d=0;a.Lm&&(d=a.Qf);var e=0;a.Km&&(e=a.Qf);(0===c.clientWidth||0===c.clientHeight)&&w.trace("Diagram div has a width or height of zero");if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e)a.pk=h,a.bh=h,b=a.Pb,b!==n&&b.hs&&b.F(),a.yb()};a.IE=
function(b){if(a.isEnabled){a.by=q;if(1<b.touches.length){a.Ha.doCancel();if(a.nl&&w.CB)return b.preventDefault(),b.cancelBubble=h,q;hi(a);b.cancelBubble=q;return h}var c=a.Lc;a.Lc=a.bc;a.bc=c;c.h=a;var d=a.ah(b.targetTouches[0]);c.kd=a.Ks(d);c.M=d;c.Ch=0;c.button=0;c.Aj=h;c.Ji=q;c.Xd=1;c.yj=0;c.ae=q;c.bubbles=q;c.event=b;c.timestamp=Date.now();c.ng=b.target.aa?b.target.aa:n;c.Ad=n;a.yg=c.copy();Jf=n;a.Ha.doMouseDown();var e=c.copy();a.Gu=setTimeout(function(){e.button=2;a.N=e;a.by=h;a.Ha.doMouseUp()},
850);ji(a,c,b)}};a.HE=function(b){if(a.isEnabled){if(1<b.touches.length){a.Ha.doCancel();hi(a);if(a.nl&&w.CB)return b.preventDefault(),b.cancelBubble=h,q;b.cancelBubble=q;return h}var c=a.Lc;a.Lc=a.bc;a.bc=c;var d=n,e,g=n;0<b.changedTouches.length?g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.h=a;c.Xd=1;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;d&&d.aa?(e=d.aa.ah(g),i=d.aa):(e=a.ah(b.changedTouches[0]),i=a);c.M=e;c.kd=i.Ks(e);e=new F(g.screenX,g.screenY);
i=a.Mt;b.timeStamp-a.Lt<a.LB&&!(25<Math.abs(i.x-e.x)||25<Math.abs(i.y-e.y))?a.Sm++:a.Sm=1;c.Xd=a.Sm;a.Lt=b.timeStamp;a.Mt=e}else a.Lc!==n?(c.M=a.Lc.M,c.kd=a.Lc.kd,d=a.Lc.ng):a.yg!==n&&(c.M=a.yg.M,c.kd=a.yg.kd,d=a.yg.ng);c.Ch=0;c.button=0;c.Aj=q;c.Ji=q;c.yj=0;c.ae=q;c.bubbles=q;c.event=b;c.timestamp=Date.now();c.ng=d===n?b.target.aa:d.aa?d.aa:n;c.Ad=n;a.Ha.isBeyondDragSize()&&hi(a);if(!gi(g?g:b,new F,c.ng))a.Ha.doMouseMove(),ji(a,c,b)}};a.GE=function(b){if(a.isEnabled){hi(a);if(a.by)return b.preventDefault(),
q;var c=a.Lc;a.Lc=a.bc;a.bc=c;if(!(1<b.touches.length)){var d=n,e,g=n;0<b.changedTouches.length?g=b.changedTouches[0]:0<b.targetTouches.length&&(g=b.targetTouches[0]);c.h=a;c.Xd=1;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;d&&d.aa?(e=d.aa.ah(g),i=d.aa):(e=a.ah(b.changedTouches[0]),i=a);c.M=e;c.kd=i.Ks(e);e=new F(g.screenX,g.screenY);i=a.Mt;b.timeStamp-a.Lt<a.LB&&!(25<Math.abs(i.x-e.x)||25<Math.abs(i.y-e.y))?a.Sm++:a.Sm=1;c.Xd=a.Sm;a.Lt=b.timeStamp;a.Mt=e}else a.Lc!==n?(c.M=a.Lc.M,
c.kd=a.Lc.kd,d=a.Lc.ng):a.yg!==n&&(c.M=a.yg.M,c.kd=a.yg.kd,d=a.yg.ng);c.Ch=0;c.button=0;c.Aj=q;c.Ji=h;c.yj=0;c.ae=q;c.bubbles=q;c.event=b;c.timestamp=Date.now();c.ng=d===n?b.target.aa:d.aa?d.aa:n;c.Ad=n;if(!ii(a,g?g:b,new F,c.ng))a.Ha.doMouseUp(),ji(a,c,b)}}};c.addEventListener("touchstart",a.IE,q);c.addEventListener("touchmove",a.HE,q);c.addEventListener("touchend",a.GE,q);c.addEventListener("gesturestart",function(){a.nl!==q&&(a.oB=a.scale,a.Ha.doCancel())},q);c.addEventListener("gesturechange",
function(b){if(a.nl!==q){var c=a.ah(b),d=a.dl;a.dl=c;a.scale=a.oB*b.scale;a.dl=d}},q);c.addEventListener("mousemove",a.po,q);c.addEventListener("mousedown",a.oo,q);c.addEventListener("mouseup",a.ro,q);c.addEventListener("mousewheel",a.Sg,q);c.addEventListener("DOMMouseScroll",a.Sg,q);c.addEventListener("mouseout",a.qo,q);c.addEventListener("keydown",a.ZG,q);c.addEventListener("keyup",a.$G,q);c.addEventListener("selectstart",function(a){a.preventDefault();return q},q);c.addEventListener("contextmenu",
function(a){a.preventDefault();return q},q);window.addEventListener("resize",a.wz,q);c.tabIndex=0;ki(a)}}A.prototype.focus=A.prototype.focus=function(){this.Ea.focus()};function ki(a,b){b===f&&(b=a.ek);b.Fw="";b.pm="";b.om=""}function $h(a){var b=new jf;b.name="Background";a.yr(b);b=new jf;b.name="";a.yr(b);b=new jf;b.name="Foreground";a.yr(b);b=new jf;b.name="Adornment";b.zc=h;a.yr(b);b=new jf;b.name="Tool";b.zc=h;a.yr(b);b=new jf;b.name="Grid";b.ke=q;b.zc=h;a.AF(b,a.Wl("Background"))}
function si(a){a.nd=new x(ti);a.nd.name="GRID";var b=new V;b.gb="LineH";b.stroke="lightgray";b.eb=0.5;b.Bi=1;a.nd.add(b);b=new V;b.gb="LineH";b.stroke="gray";b.eb=0.5;b.Bi=5;a.nd.add(b);b=new V;b.gb="LineH";b.stroke="gray";b.eb=1;b.Bi=10;a.nd.add(b);b=new V;b.gb="LineV";b.stroke="lightgray";b.eb=0.5;b.Bi=1;a.nd.add(b);b=new V;b.gb="LineV";b.stroke="gray";b.eb=0.5;b.Bi=5;a.nd.add(b);b=new V;b.gb="LineV";b.stroke="gray";b.eb=1;b.Bi=10;a.nd.add(b);b=new S;b.add(a.nd);b.Pd="Grid";b.Cv=q;b.RD=q;b.Hv="GRID";
a.add(b);a.Nb.remove(b);a.nd.visible=q}
A.prototype.mB=function(){var a=this.aa;if(a.Tx){a.su=h;var b=a.wc,c=a.Ua,d=b.width,e=c.width,g=b.height,i=c.height,j=b.right,k=c.right,l=b.bottom,m=c.bottom,p=b.x,r=c.x,b=b.y,c=c.y,s=a.scale;e<d||i<g?(this.uB&&a.sf?a.position=new F(this.scrollLeft/s+p,a.position.y):this.vB&&a.tf&&(a.position=new F(a.position.x,this.scrollTop/s+b)),ui(a),Lh(a),a.su=q,a.pk=q):(this.uB&&a.sf&&(p<r&&(a.position=new F(this.scrollLeft+p,a.position.y)),j>k&&(a.position=new F(-(a.lj.scrollWidth-a.Ea.width)+this.scrollLeft-
a.Ea.width/s+a.wc.right,a.position.y))),this.vB&&a.tf&&(b<c&&(a.position=new F(a.position.x,this.scrollTop+b)),l>m&&(a.position=new F(a.position.x,-(a.mj.scrollHeight-a.Ea.height)+this.scrollTop-a.Ea.height/s+a.wc.bottom))),ui(a),a.su=q,a.pk=q,Lh(a),b=a.wc,c=a.Ua,j=b.right,k=c.right,l=b.bottom,m=c.bottom,p=b.x,r=c.x,b=b.y,c=c.y,e>=d&&(p>=r&&j<=k)&&(a.Ux.style.width="1px"),i>=g&&(b>=c&&l<=m)&&(a.Vx.style.height="1px"))}};A.prototype.nB=function(){this.aa.Tx=h};
A.prototype.computeBounds=A.prototype.oe=function(){0<this.dh.count&&Zh(this);if(this.Ur.T()){var a=this.Ur.copy();a.zr(this.padding);return a}for(var b=h,c=this.hb,d=c.length,e=0;e<d;e++){var g=c.n[e];if(g.visible&&!g.zc)for(var g=g.Nb,i=g.length,j=0;j<i;j++){var k=g.n[j];k.Cv&&k.nb()&&(k=k.va,k.T()&&(b?(b=q,a=k.copy()):a.Ii(k)))}}b&&(a=new G(0,0,0,0));a.zr(this.padding);return a};
A.prototype.computePartsBounds=A.prototype.sJ=function(a){for(var b=n,a=a.l;a.next();){var c=a.value;c instanceof U||(c.yi(),b===n?b=c.va.copy():b.Ii(c.va))}return b===n?new G(NaN,NaN,0,0):b};function vi(a,b){if((b||a.zg)&&!a.tc&&a.wc.T()){a.tc=h;var c=a.fl;b&&a.nk!==Nh&&(c=a.nk);var d=c!==Nh?wi(a,c):a.scale,c=a.Ua.copy(),e=a.Ea.width/d,g=a.Ea.height/d;a.position.Ia();var i=a.kl;b&&sb(a.Nm)&&(i=a.Nm);xi(a,a.rb,a.wc,e,g,i);a.position.freeze();a.scale=d;a.tc=q;d=a.Ua;d.zi(c)||a.ss(c,d)}}
function wi(a,b){a.Uh&&yi(a,a.oe());var c=a.wc;if(!c.T())return 1;var d=c.width,c=c.height,e=a.Ea.width,g=a.Ea.height,i=e/d,j=g/c,k=1;return b===zi?(k=Math.min(j,i),1<k&&(k=1),k):b===Ai?(k=j>i?(g-a.Qf)/c:(e-a.Qf)/d,1<k&&(k=1),k):a.scale}A.prototype.zoomToFit=A.prototype.UE=function(){this.scale=wi(this,zi);this.yb()};
A.prototype.zoomToRect=A.prototype.mI=function(a){var b=a.width,c=a.height;if(!(0===b||0===c||isNaN(b)&&isNaN(c))){var d=1,d=isNaN(b)?this.Ua.height*this.scale/c:isNaN(c)?this.Ua.width*this.scale/b:Math.max(this.Ua.height*this.scale/c,this.Ua.width*this.scale/b);this.scale=Math.min(d,this.Bh);this.position=new F(a.x,a.y)}};
A.prototype.alignDocument=A.prototype.BI=function(a,b){this.Uh&&yi(this,this.oe());var c=this.wc,d=this.Ua,e=this.tc;this.tc=h;this.position=new F(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.tc=e;Lh(this);this.Sd||this.yb()};
function xi(a,b,c,d,e,g){sb(g)&&(d>c.width&&(b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX)),e>c.height&&(b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)));d<c.width?(g=b.x+d/2,g=Math.min(g,c.right-d/2),g=Math.max(g,c.left+d/2),b.x=g-d/2):b.x>c.left?b.x=c.left:b.x<c.right-d&&(b.x=c.right-d);e<c.height?(d=b.y+e/2,d=Math.min(d,c.bottom-e/2),d=Math.max(d,c.top+e/2),b.y=d-e/2):b.y>c.top?b.y=c.top:b.y<c.bottom-e&&(b.y=c.bottom-e);isFinite(b.x)||(b.x=-a.padding.left);isFinite(b.y)||(b.y=-a.padding.top)}
A.prototype.findPartAt=A.prototype.Rr=function(a,b){var c=b?hg(this,a,function(a){return a.ca},function(a){return a.Ik()}):this.xd(a,function(a){return a.ca});return c instanceof S?c:n};A.prototype.findObjectAt=A.prototype.xd=function(a,b,c){b===f&&(b=n);c===f&&(c=n);var d=this.hb.eo;for(Zh(this);d.next();){var e=d.value;if(e.visible&&(e=e.xd(a,b,c),e!==n))return e}return n};
function hg(a,b,c,d){c===f&&(c=n);d===f&&(d=n);var e=a.hb.eo;for(Zh(a);e.next();)if(a=e.value,a.visible&&!a.zc&&(a=a.xd(b,c,d),a!==n))return a;return n}A.prototype.findObjectsAt=A.prototype.Vn=function(a,b,c,d){b===f&&(b=n);c===f&&(c=n);if(!(d instanceof z)||!(d instanceof ma))d=new ma(P);Zh(this);for(var e=this.hb.eo;e.next();){var g=e.value;g.visible&&g.Vn(a,b,c,d)}return d};
A.prototype.findObjectsIn=A.prototype.Xl=function(a,b,c,d,e){b===f&&(b=n);c===f&&(c=n);d===f&&(d=q);if(!(e instanceof z)||!(e instanceof ma))e=new ma(P);Zh(this);for(var g=this.hb.eo;g.next();){var i=g.value;i.visible&&i.Xl(a,b,c,d,e)}return e};A.prototype.findObjectsNear=A.prototype.Wn=function(a,b,c,d,e){c===f&&(c=n);d===f&&(d=n);!(e instanceof z)&&!(e instanceof ma)&&(e=new ma(P));Zh(this);for(var g=this.hb.eo;g.next();){var i=g.value;i.visible&&i.Wn(a,b,c,d,e)}return e};
function hi(a){-1!==a.Gu&&(clearTimeout(a.Gu),a.Gu=-1)}function fi(a,b,c,d){c.h=a;d?(d=a.ah(b),c.kd=a.Ks(d),c.M=d):(c.kd=a.bc.kd,c.M=a.bc.M);a=0;b.ctrlKey&&(a+=1);b.altKey&&(a+=2);b.shiftKey&&(a+=4);c.Ch=a;c.button=b.button;c.Aj=q;c.Ji=q;c.Xd=1;c.yj=0;c.ae=q;c.bubbles=q;c.event=b;c.timestamp=Date.now();c.ng=b.target.aa?b.target.aa:n;c.Ad=n}
function ji(a,b,c){if(b.bubbles)return u&&(u.trace&&u.bD)&&u.trace("NOT handled "+c.type+" "+b.toString()),h;u&&(u.trace&&u.bD)&&u.trace("handled "+c.type+" "+a.Ha.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&c.preventDefault();c.cancelBubble=h;return q}
A.prototype.ZG=function(a){if(this.aa.isEnabled){var b=this.aa.bc;fi(this.aa,a,b,q);b.key=String.fromCharCode(a.which);b.Aj=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.aa.Ha.doKeyDown();return(187===a.which||189===a.which||48===a.which||107===a.which||109===a.which)&&a.ctrlKey===h?(a.cancelBubble=h,a.preventDefault!==f?a.preventDefault():a.returnValue=q,Event.stop&&(w.m("Event.stop can fire for this browser"),Event.stop(a)),a.stopPropagation!==f&&a.stopPropagation(),q):ji(this.aa,b,a)}};
A.prototype.$G=function(a){if(this.aa.isEnabled){var b=this.aa.bc;fi(this.aa,a,b,q);b.key=String.fromCharCode(a.which);b.Ji=h;switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.aa.Ha.doKeyUp();return ji(this.aa,b,a)}};
A.prototype.ah=function(a){if(this.Hw){var b=this.Ea,c=0,d=0;if(b.offsetParent!==f){do c+=b.offsetLeft+b.clientLeft,d+=b.offsetTop+b.clientTop;while(b=b.offsetParent)}c+=this.AB+this.yB+this.zt;d+=this.BB+this.zB+this.At;b=a.pageX-c;a=a.pageY-d;this.Md!==n&&(a=new F(b,a),Za(a,this.Md),b=a.x,a=a.y);return new F(b,a)}b=this.Ea;c=b.getBoundingClientRect();d=a.clientX-c.left*(b.width/c.width);a=a.clientY-c.top*(b.height/c.height);this.Md!==n&&(a=new F(d,a),Za(a,this.Md),d=a.x,a=a.y);return new F(d,a)};
w.g(A,"alternateCoordinates",A.prototype.LF);w.defineProperty(A,{LF:n},t("Hw"),function(a){w.k(a,"boolean",A,"alternateCoordinates");this.Hw=a});A.prototype.invalidateDocumentBounds=A.prototype.Ci=function(){if(!this.Sd&&(Bi(this),this.qy===q)){this.qy=h;var a=this;requestAnimationFrame(function(){a.Ea===n||a.rf===h||(fh(a),a.qy=q)})}};function fh(a){a.Sd||Zh(a);a.Uh&&yi(a,a.oe());vi(a);!a.tc&&a.pk&&Ci(a);for(a=a.mu.l;a.next();)fh(a.value)}
A.prototype.redraw=A.prototype.ML=function(){!this.tc&&!this.Sd&&(Lh(this),Di(this),ui(this),Bi(this),this.Qg())};A.prototype.isUpdateRequested=A.prototype.hL=t("rf");A.prototype.delayInitialization=A.prototype.IJ=function(a){this.update();this.zg=q;a&&setTimeout(a,1)};A.prototype.requestUpdate=A.prototype.yb=function(a){a===f&&(a=q);if(!(this.tc||a===q&&this.Sd)&&this.rf===q){this.rf=h;var b=this;requestAnimationFrame(function(){b.rf&&b.Qg()})}};
A.prototype.maybeUpdate=A.prototype.Qg=function(){if(!this.tp||this.rf)this.tp&&(this.tp=q),this.update()};
A.prototype.update=A.prototype.update=function(){if(!(this.Lb===n||this.Sd)){this.Sd=h;this.wz();this.rf=q;Zh(this);var a=q;if(!this.zg||this.sn&&this.Xs)Ei(this),this.sn=q,a=h;Zh(this);this.wc.T()||yi(this,this.oe());if(a){if(!this.zg){if(this.nk!==Nh)this.scale=wi(this,this.nk);else if(this.fl!==Nh)this.scale=wi(this,this.fl);else{var b=this.hD;isFinite(b)&&0<b&&(this.scale=b)}this.Uh&&yi(this,this.oe());b=this.gD;if(b.T())this.position=b;else{b=new F;b.Bo(this.wc,this.fD);var c=this.Ua,c=new G(0,
0,c.width,c.height),d=new F;d.Bo(c,this.iD);this.position=new F(b.x-d.x,b.y-d.y);vi(this,h)}this.ya("InitialLayoutCompleted");b=this.sa;b!==n&&b.clear();Fi(this)}this.ya("LayoutCompleted")}Zh(this);!this.tc&&this.pk&&!Ci(this)&&(Ci(this),Zh(this));a&&!this.zg&&(this.zg=h);this.He();this.Sd=q}};
function Zh(a){for(var b=0;23>b;b++){var c=a.dh.l;if(c===n||0===a.dh.count)break;a.dh=new ma(P);var d=a,e=a.dh;for(c.reset();c.next();){var g=c.value;g.be()&&!(g instanceof xf)&&(g.Sk()?(Gh(g,Infinity,Infinity),g.Dc()):e.add(g))}for(c.reset();c.next();)g=c.value,g instanceof xf&&Gi(d,g);for(c.reset();c.next();)d=c.value,d instanceof U&&(d.Sk()?(Gh(d,Infinity,Infinity),d.Dc(),d.Iv()):e.add(d));for(c.reset();c.next();)d=c.value,d instanceof of&&(d.Sk()?(Gh(d,Infinity,Infinity),d.Dc()):e.add(d))}}
function Gi(a,b){for(var c=b.Gc,d=[];c.next();){var e=c.value;e instanceof xf?(e.ac||e.Jc||e.Xi)&&Gi(a,e):e instanceof U?d.push(e):(Gh(e,Infinity,Infinity),e.Dc())}c=d.length;for(e=0;e<c;e++){var g=d[e];Gh(g,Infinity,Infinity);g.Dc()}Gh(b,Infinity,Infinity);b.Dc()}
A.prototype.He=function(a){this.Lb===n&&w.m("No div specified");var b=this.Ea;b===n&&w.m("No canvas specified");a||(a=this.ek);var c=a!==this.ek;if(c)ki(this),ui(this);else if(!this.bh)return;if(0<this.Ti.count){for(var d=this.Ti.l;d.next();)Tg(d.key,d.value);this.Ti.clear()}this.kB?(b.width=b.width,ki(this)):(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,b.width,b.height));b=this.Md;b.reset();1!==this.Wb&&b.scale(this.Wb);d=this.rb;(0!==d.x||0!==d.y)&&b.translate(-d.x,-d.y);a.setTransform(b.m11,b.m12,
b.m21,b.m22,b.dx,b.dy);u&&u.gC&&(a.fillStyle="red",a.fillRect(0,0,8,8),a.lineWidth=8,a.strokeStyle="rgba(255,255,0,.6)",b=this.Ua,a.strokeRect(b.x,b.y,b.width,b.height),a.fillStyle="rgba(0,255,0,.2)",a.fillRect(this.wc.x,this.wc.y,this.wc.width,this.wc.height));b=this.hb.length;for(d=0;d<b;d++)this.hb.n[d].He(a,this);this.yt?this.yt.Ms(this)&&this.nA():this.ah=aa();c?(ki(this),ui(this)):this.bh=this.qk=q};
function Hi(a,b,c,d,e,g,i,j,k){a.Lb===n&&w.m("No div specified");a.Ea===n&&w.m("No canvas specified");ki(a);ui(a);if(0<a.Ti.count){for(var l=a.Ti.l;l.next();)Tg(l.key,l.value);a.Ti.clear()}b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,d.width,d.height);j&&(b.fillStyle=j,b.fillRect(0,0,d.width,d.height));j=new Wa;j.translate(c.left,c.top);j.scale(e);(0!==g.x||0!==g.y)&&j.translate(-g.x,-g.y);b.setTransform(j.m11,j.m12,j.m21,j.m22,j.dx,j.dy);c=f;g&&(d&&e)&&(c=new G(g.x,g.y,d.width/e,d.height/e));if(i){k=
i.l;for(k.reset();k.next();)c=k.value,c instanceof S&&c.He(b,a)}else{d=a.hb.length;for(e=0;e<d;e++)if(k){if(g=a.hb.n[e],i=b,j=a,g.visible&&!g.zc){var l=g.Nb,m=f,m=c?c:j.Ua,p=[];if(j.qk)for(var r=l.length,s=0;s<r;s++){var v=l.n[s];v.aB=s;if(v instanceof U&&(v.fc&&p.push(v),v.pi===q))continue;v.va.Me(m)?(v.zc||v.He(i,j),v.he=h):v.he=q}else{r=l.length;for(s=0;s<r;s++)if(v=l.n[s],v.he){if(v instanceof U&&(v.fc&&p.push(v),v.pi===q))continue;v.zc||v.He(i,j)}}g.rB=p}}else a.hb.n[e].He(b,a,c)}a.yt?a.yt.Ms(a)&&
a.nA():a.ah=aa();ki(a);ui(a)}function Bi(a){if(a.Uh===q||a.rf===q)a.Uh=h,a.yb()}
function Lh(a,b,c){if(a.bh===q&&(b===f||a.Ua.Me(b)))a.bh=h,c&&a instanceof Ii?!a.tc&&!a.Sd&&a.rf===q&&(a.rf=h,requestAnimationFrame(function(){if(a.rf&&!(a.Lb===n||a.Sd)){a.Sd=h;a.rf=q;Zh(a);a.wc.T()||yi(a,a.oe());a.Lb===n&&w.m("No div specified");a.Ea===n&&w.m("No canvas specified");if(a.bh&&a.fi!==n){var b=a.ek,c=a.hy;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.Ea.width,a.Ea.height);b.drawImage(c,0,0);c=a.Md;c.reset();1!==a.Wb&&c.scale(a.scale);(0!==a.position.x||0!==a.position.y)&&c.translate(-a.rb.x,
-a.rb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.hb.length,d=0;d<c;d++)a.hb.n[d].He(b,a);a.qk=q;a.bh=q}a.Sd=q}})):a.yb();for(var d=a.mu.l;d.next();)Lh(d.value,b,c)}function Di(a){a.pk===q&&(a.pk=h)}function ui(a){a.qk===q&&(a.qk=h)}
function Ci(a){var b=a.Ea;if(b!==n){var c=a.Lb,d=b.width,e=b.height,g=a.NB.copy(),i=q,j=0,k=0;a.Lm&&(j=a.Qf);a.Km&&(k=a.Qf);var l=c.clientWidth,c=c.clientHeight;if(l!==b.width+j||c!==b.height+k)a.Lm=q,a.Km=q,b.width=l,b.height=c,i=h;a.pk=q;if(!a.IA||a.su)(d!==b.width||e!==b.height)&&a.Qg();else{var m=a.Ua,p=a.wc,j=p.width,k=p.height,r=m.width,s=m.height,v=p.x,y=m.x,C=p.right,E=m.right,I=p.y,D=m.y,M=p.bottom,N=m.bottom,p=m="1px",Z=a.scale;l/Z>j&&c/Z>k||(a.cD&&a.sf&&(r+1<j?(m=(j-r)*Z+b.width+"px",a.lj.scrollLeft=
(a.position.x-v)*Z):v+1<y?(m=(y-v)*Z+b.width+"px",a.lj.scrollLeft=a.lj.scrollWidth-a.lj.clientWidth):C>E+1&&(m=(C-E)*Z+b.width+"px",a.lj.scrollLeft=a.position.x*Z)),a.dD&&a.tf&&(s+1<k?(p=(k-s)*Z+b.height+"px",a.mj.scrollTop=(a.position.y-I)*Z):I+1<D?(p=(D-I)*Z+b.height+"px",a.mj.scrollTop=a.mj.scrollHeight-a.mj.clientHeight):M>N+1&&(p=(M-N)*Z+b.height+"px",a.mj.scrollTop=a.position.y*Z)));l="1px"!==m;c="1px"!==p;l!==a.Km&&(b.height="1px"===m?b.height+a.Qf:b.height-a.Qf,i=h);a.Km=l;a.Ux.style.width=
m;c!==a.Lm&&(b.width="1px"===p?b.width+a.Qf:b.width-a.Qf,i=h);a.Lm=c;a.Vx.style.height=p;i&&ki(a);l=b.width;c=b.height;a.mj.style.height=c+"px";a.mj.style.width=a.Lm?l+a.Qf+"px":l+"px";a.lj.style.width=l+"px";a.lj.style.height=a.Km?c+a.Qf+"px":c+"px";a.Tx=q;return d!==b.width||e!==b.height?(m=a.Ua,a.ss(g,m,i?h:f),a.Qg(),q):h}}}
function Ji(a,b){for(var c=a.hb,d=c.count,e=0;e<d;e++)c.oa(e).name===b&&w.m("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}w.g(A,"addsToTemporaryLayer",A.prototype.Cr);w.defineProperty(A,{Cr:n},t("pA"),function(a){w.k(a,"boolean",A,"addsToTemporaryLayer");this.pA=a});
A.prototype.add=A.prototype.add=function(a){w.i(a,S,A,"add:part");var b=a.h;if(b!==this){b!==n&&w.m("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());var c=this.Cr?"Tool":a.Pd,b=this.Wl(c);b===n&&(b=this.Wl(""));b===n&&w.m('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.Ja!==b&&(c=a.h===this?b.Rk(99999999,a,h):b.Rk(99999999,a),0<=c&&this.Pc(je,"parts",b,n,a,n,c),this.Ci(),a.F(Ki),c=a.fo,c!==n&&c(a,n,b))}};
A.prototype.Rk=function(a){if(a instanceof T){if(this.gu.add(a),a instanceof xf){var b=a.bb;b===n?this.Hl.add(a):b.Zm.add(a);b=a.Pb;b!==n&&(b.h=this)}}else a instanceof U?this.Ot.add(a):a instanceof of||this.Nb.add(a);if(b=a.data){a instanceof of||(a instanceof U?this.fk.add(b,a):this.Ph.add(b,a));var c=this;Li(a,a,function(a){Mi(c,a)})}(a.Jc===h||a.Xi===h)&&this.dh.add(a);Ni(a,h);a.nb()&&(Lh(this),Bi(this))};
A.prototype.Od=function(a){if(a instanceof T){if(this.gu.remove(a),a instanceof xf){var b=a.bb;b===n?this.Hl.remove(a):b.Zm.remove(a);b=a.Pb;b!==n&&(b.h=n)}}else a instanceof U?this.Ot.remove(a):a instanceof of||this.Nb.remove(a);if(b=a.data){a instanceof of||(a instanceof U?this.fk.remove(b):this.Ph.remove(b));var c=this;Li(a,a,function(a){Oi(c,a)})}this.dh.remove(a);a.nb()&&(Lh(this),Bi(this))};
A.prototype.remove=A.prototype.remove=function(a){w.i(a,S,A,"remove:part");a.Qa=q;var b=a.Ja;if(b!==n&&b.h===this){a.F(Pi);a.Rl();var c=b.Od(-1,a);0<=c&&this.Pc(ke,"parts",b,a,n,c,n);c=a.fo;c!==n&&c(a,b,n);this.Ci();this.Ha.standardMouseOver()}};A.prototype.removeParts=A.prototype.Kz=function(a,b){for(var c=a.l;c.next();){var d=c.value;d.h===this&&(!b||d.canDelete())&&this.remove(d)}};A.prototype.copyParts=A.prototype.On=function(a,b,c){return this.Xf.copyParts(a,b,c)};
A.prototype.moveParts=A.prototype.lH=function(a,b,c){var d=this.Rb;if(d!==n&&(d=d.re,d!==n)){for(var e=new la(S,Object),a=a.l;a.next();){var g=a.value;g instanceof U?e.add(g,Lf()):e.add(g,Lf(g.location))}d.moveParts(e,b,c)}};A.prototype.addLayer=A.prototype.yr=function(a){w.i(a,jf,A,"addLayer:layer");Ji(this,a.name);a.ee(this);var b=this.hb,c=b.count-1;if(!a.zc)for(;0<=c&&b.oa(c).zc;)c--;b.yc(c+1,a);this.Jd!==n&&this.Pc(je,"layers",this,n,a,n,c+1);Bi(this)};
A.prototype.addLayerBefore=A.prototype.AF=function(a,b){w.i(a,jf,A,"addLayer:layer");w.i(b,jf,A,"addLayerBefore:existingLayer");Ji(this,a.name);a.ee(this);for(var c=q,d=this.hb.count,e=0;e<d;e++)if(this.hb.oa(e)===b){this.hb.yc(e,a);c=h;break}c||w.m("addLayerBefore: Existing layer "+b.toString()+" not found.");this.Jd!==n&&this.Pc(je,"layers",this,n,a,n,e);Bi(this)};
A.prototype.addLayerAfter=A.prototype.xI=function(a,b){w.i(a,jf,A,"addLayer:layer");w.i(b,jf,A,"addLayerAfter:existingLayer");Ji(this,a.name);a.ee(this);for(var c=q,d=this.hb.count,e=0;e<d;e++)if(this.hb.oa(e)===b){this.hb.yc(e+1,a);c=h;break}c||w.m("addLayerAfter: Existing layer "+b.toString()+" not found.");this.Jd!==n&&this.Pc(je,"layers",this,n,a,n,e+1);Bi(this)};function Qi(a,b,c){w.i(b,jf,A,"addLayer:layer");Ji(a,b.name);b.ee(a);a.hb.yc(c,b);a.Jd!==n&&a.Pc(je,"layers",a,n,b,n,c);Bi(a)}
A.prototype.removeLayer=A.prototype.ZD=function(a){if(""!==a.name){var b=this.hb.indexOf(a);if(this.hb.remove(a)){for(var c=a.Nb.copy().l;c.next();){var d=c.value,e=d.Pd;d.Pd="";e!==a.name&&(d.Pd=e)}this.Jd!==n&&this.Pc(ke,"layers",this,a,n,b,n);Bi(this)}}};A.prototype.findLayer=A.prototype.Wl=function(a){for(var b=this.Gv;b.next();){var c=b.value;if(c.name===a)return c}return n};
A.prototype.addChangedListener=A.prototype.zy=function(a){w.k(a,"function",A,"addChangedListener:listener");this.Ri===n&&(this.Ri=new z("function"));this.Ri.add(a)};A.prototype.removeChangedListener=A.prototype.Jz=function(a){w.k(a,"function",A,"removeChangedListener:listener");this.Ri!==n&&(this.Ri.remove(a),0===this.Ri.count&&(this.Ri=n))};A.prototype.Xu=function(a){this.ub||this.sa.aD(a);if(this.Ri!==n)for(var b=this.Ri.l;b.next();){var c=b.value;c(a)}};
A.prototype.raiseChangedEvent=A.prototype.Pc=function(a,b,c,d,e,g,i){g===f&&(g=n);i===f&&(i=n);var j=new ge;j.h=this;j.hd=a;j.propertyName=b;j.object=c;j.oldValue=d;j.Bf=g;j.newValue=e;j.Af=i;this.Xu(j)};A.prototype.raiseChanged=A.prototype.j=function(a,b,c,d,e){this.Pc(ie,a,this,b,c,d,e)};w.u(A,{sa:"undoManager"},function(){return this.Jd.sa});w.g(A,"skipsUndoManager",A.prototype.ub);
w.defineProperty(A,{ub:"skipsUndoManager"},t("ki"),function(a){w.k(a,"boolean",A,"skipsUndoManager");this.ki=a;this.Jd.ki=a});
A.prototype.changeState=A.prototype.Gr=function(a,b){if(a!==n&&a.h===this){var c=this.pl;try{this.pl=h;var d=a.hd;if(d===ie){var e=a.object,g=a.propertyName,i=a.qa(b);w.Ka(e,g,i);if(e instanceof P){var j=e.ca;j!==n&&j.wh()}}else if(d===je){var k=a.object,l=a.Af,e=a.newValue;if(k instanceof x){if("number"===typeof l&&e instanceof P){var m=k;b?m.Od(l):m.yc(l,e);j=k.ca;j!==n&&j.wh()}}else if(k instanceof jf){var p=a.Bf===h;if("number"===typeof l&&e instanceof S){var r=k;b?(e.wh(),p?r.Od(l,e,p):this.remove(e)):
r.Rk(l,e,p)}}else k instanceof A?"number"===typeof l&&e instanceof jf&&(b?this.ZD(e):Qi(this,e,l)):w.m("unknown ChangedEvent.Insert object: "+a.toString())}else d===ke?(k=a.object,l=a.Bf,e=a.oldValue,k instanceof x?"number"===typeof l&&e instanceof P&&(m=k,b?m.yc(l,e):m.Od(l)):k instanceof jf?(p=a.Af===h,"number"===typeof l&&e instanceof S&&(r=k,b?r.Rk(l,e,p):(e.wh(),p?r.Od(l,e,p):this.remove(e)))):k instanceof A?"number"===typeof l&&e instanceof jf&&(b?Qi(this,e,l):this.ZD(e)):w.m("unknown ChangedEvent.Remove object: "+
a.toString())):d!==he&&w.m("unknown ChangedEvent: "+a.toString())}finally{this.pl=c}}};A.prototype.startTransaction=A.prototype.hc=function(a){return this.sa.hc(a)};A.prototype.commitTransaction=A.prototype.ne=function(a){return this.sa.ne(a)};A.prototype.rollbackTransaction=A.prototype.ws=function(){return this.sa.ws()};A.prototype.updateAllTargetBindings=A.prototype.qM=function(){for(var a=this.Yk;a.next();)a.value.vb();for(a=this.Xk;a.next();)a.value.vb();for(a=this.links;a.next();)a.value.vb()};
A.prototype.ss=function(a,b,c){if(!this.tc){ui(this);Lh(this,f,h);Di(this);Bi(this);var d=this.Pb;d!==n&&(d.hs&&!c)&&(a.width!==b.width||a.height!==b.height||isNaN(a.x&&!isNaN(b.x))||isNaN(a.y&&!isNaN(b.y)))&&d.F();vi(this);this.ya("ViewportBoundsChanged",c?{}:n,a);Fi(this)}};
function Fi(a){var b=a.nd;if(b!==n&&b.visible){for(var c,d=c=1,e=b.Fa.length,g=0;g<e;g++){var i=b.Fa.n[g],j=i.Bi;2>j||("LineV"===i.gb?d=d*j/gd(d,j):c=c*j/gd(c,j))}e=b.Yr;c=new bb(d*e.width,c*e.height);a=a.Ua;a.T()&&(b.width=a.width+2*c.width,b.height=a.height+2*c.height,a=fd(a.x,a.y,0,0,c.width,c.height),b.ca.location=new F(a.x-c.width,a.y-c.height))}}A.prototype.clearSelection=A.prototype.Ky=function(){var a=0<this.selection.count;a&&this.ya("ChangingSelection");Af(this);a&&this.ya("ChangedSelection")};
function Af(a){a=a.selection;if(0<a.count){for(var b=a.qg(),c=b.length,d=0;d<c;d++)b[d].Qa=q;a.Ia();a.clear();a.freeze()}}A.prototype.select=A.prototype.select=function(a){if(a!==n&&a.Ja.h===this&&(!a.Qa||1<this.selection.count))this.ya("ChangingSelection"),Af(this),a.Qa=h,this.ya("ChangedSelection")};A.prototype.selectCollection=A.prototype.Pz=function(a){this.ya("ChangingSelection");Af(this);for(a=a.l;a.next();)a.value.Qa=h;this.ya("ChangedSelection")};
A.prototype.scroll=function(a,b,c){c===f&&(c=1);var d="up"===b||"down"===b,e;"pixel"===a?e=c:"line"===a?e=c*(d?this.ys:this.xs):"page"===a?(a=d?this.Ua.height:this.Ua.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.ys:this.xs),0),e*=c)):w.m("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:w.m("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};A.prototype.scrollToRect=A.prototype.WL=function(a){var b=this.Ua;b.Ol(a)||(a=a.Yu,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};A.prototype.centerRect=A.prototype.kJ=function(a){var b=this.Ua,a=a.Yu;a.x-=b.width/2;a.y-=b.height/2;this.position=a};A.prototype.transformDocToView=A.prototype.Ks=function(a){var b=this.Md;b.reset();1!==this.Wb&&b.scale(this.Wb);var c=this.rb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.Md)};
A.prototype.transformViewToDoc=A.prototype.kI=function(a){var b=this.Md;b.reset();1!==this.Wb&&b.scale(this.Wb);var c=this.rb;(0!==c.x||0!==c.y)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return Za(a.copy(),this.Md)};var Nh;A.None=Nh=w.s(A,"None",0);var zi;A.Uniform=zi=w.s(A,"Uniform",1);var Ai;A.UniformToFill=Ai=w.s(A,"UniformToFill",2);var wg;A.CycleAll=wg=w.s(A,"CycleAll",10);var Ag;A.CycleNotDirected=Ag=w.s(A,"CycleNotDirected",11);var Cg;
A.CycleNotDirectedFast=Cg=w.s(A,"CycleNotDirectedFast",12);var Dg;A.CycleNotUndirected=Dg=w.s(A,"CycleNotUndirected",13);var xg;A.CycleDestinationTree=xg=w.s(A,"CycleDestinationTree",14);var zg;A.CycleSourceTree=zg=w.s(A,"CycleSourceTree",15);w.g(A,"validCycle",A.prototype.RE);w.defineProperty(A,{RE:"validCycle"},t("Ou"),function(a){var b=this.Ou;b!==a&&(w.jb(a,A,A,"validCycle"),this.Ou=a,this.j("validCycle",b,a))});w.u(A,{Gv:"layers"},function(){return this.hb.l});w.g(A,"isModelReadOnly",A.prototype.te);
w.defineProperty(A,{te:"isModelReadOnly"},function(){var a=this.Jd;return a===n?q:a.cb},function(a){var b=this.Jd;b!==n&&(b.cb=a)});w.g(A,"isReadOnly",A.prototype.cb);w.defineProperty(A,{cb:"isReadOnly"},t("rk"),function(a){var b=this.rk;b!==a&&(w.k(a,"boolean",A,"isReadOnly"),this.rk=a,this.j("isReadOnly",b,a))});w.g(A,"isEnabled",A.prototype.isEnabled);
w.defineProperty(A,{isEnabled:"isEnabled"},t("Wh"),function(a){var b=this.Wh;b!==a&&(w.k(a,"boolean",A,"isEnabled"),this.Wh=a,this.j("isEnabled",b,a))});w.g(A,"allowClipboard",A.prototype.Uu);w.defineProperty(A,{Uu:"allowClipboard"},t("Ps"),function(a){var b=this.Ps;b!==a&&(w.k(a,"boolean",A,"allowClipboard"),this.Ps=a,this.j("allowClipboard",b,a))});w.g(A,"allowCopy",A.prototype.qj);
w.defineProperty(A,{qj:"allowCopy"},t("Nj"),function(a){var b=this.Nj;b!==a&&(w.k(a,"boolean",A,"allowCopy"),this.Nj=a,this.j("allowCopy",b,a))});w.g(A,"allowDelete",A.prototype.Ek);w.defineProperty(A,{Ek:"allowDelete"},t("Oj"),function(a){var b=this.Oj;b!==a&&(w.k(a,"boolean",A,"allowDelete"),this.Oj=a,this.j("allowDelete",b,a))});w.g(A,"allowDragOut",A.prototype.Vu);
w.defineProperty(A,{Vu:"allowDragOut"},t("Qs"),function(a){var b=this.Qs;b!==a&&(w.k(a,"boolean",A,"allowDragOut"),this.Qs=a,this.j("allowDragOut",b,a))});w.g(A,"allowDrop",A.prototype.YB);w.defineProperty(A,{YB:"allowDrop"},t("Rs"),function(a){var b=this.Rs;b!==a&&(w.k(a,"boolean",A,"allowDrop"),this.Rs=a,this.j("allowDrop",b,a))});w.g(A,"allowTextEdit",A.prototype.In);
w.defineProperty(A,{In:"allowTextEdit"},t("Yj"),function(a){var b=this.Yj;b!==a&&(w.k(a,"boolean",A,"allowTextEdit"),this.Yj=a,this.j("allowTextEdit",b,a))});w.g(A,"allowGroup",A.prototype.Dn);w.defineProperty(A,{Dn:"allowGroup"},t("Pj"),function(a){var b=this.Pj;b!==a&&(w.k(a,"boolean",A,"allowGroup"),this.Pj=a,this.j("allowGroup",b,a))});w.g(A,"allowUngroup",A.prototype.Jn);
w.defineProperty(A,{Jn:"allowUngroup"},t("Zj"),function(a){var b=this.Zj;b!==a&&(w.k(a,"boolean",A,"allowUngroup"),this.Zj=a,this.j("allowUngroup",b,a))});w.g(A,"allowInsert",A.prototype.En);w.defineProperty(A,{En:"allowInsert"},t("Ts"),function(a){var b=this.Ts;b!==a&&(w.k(a,"boolean",A,"allowInsert"),this.Ts=a,this.j("allowInsert",b,a))});w.g(A,"allowLink",A.prototype.Kl);
w.defineProperty(A,{Kl:"allowLink"},t("Qj"),function(a){var b=this.Qj;b!==a&&(w.k(a,"boolean",A,"allowLink"),this.Qj=a,this.j("allowLink",b,a))});w.g(A,"allowRelink",A.prototype.rj);w.defineProperty(A,{rj:"allowRelink"},t("Tj"),function(a){var b=this.Tj;b!==a&&(w.k(a,"boolean",A,"allowRelink"),this.Tj=a,this.j("allowRelink",b,a))});w.g(A,"allowMove",A.prototype.Fk);
w.defineProperty(A,{Fk:"allowMove"},t("Rj"),function(a){var b=this.Rj;b!==a&&(w.k(a,"boolean",A,"allowMove"),this.Rj=a,this.j("allowMove",b,a))});w.g(A,"allowPrint",A.prototype.Dr);w.defineProperty(A,{Dr:"allowPrint"},t("Sj"),function(a){var b=this.Sj;b!==a&&(w.k(a,"boolean",A,"allowPrint"),this.Sj=a,this.j("allowPrint",b,a))});w.g(A,"allowReshape",A.prototype.Fn);
w.defineProperty(A,{Fn:"allowReshape"},t("Uj"),function(a){var b=this.Uj;b!==a&&(w.k(a,"boolean",A,"allowReshape"),this.Uj=a,this.j("allowReshape",b,a))});w.g(A,"allowResize",A.prototype.Gn);w.defineProperty(A,{Gn:"allowResize"},t("Vj"),function(a){var b=this.Vj;b!==a&&(w.k(a,"boolean",A,"allowResize"),this.Vj=a,this.j("allowResize",b,a))});w.g(A,"allowRotate",A.prototype.Hn);
w.defineProperty(A,{Hn:"allowRotate"},t("Wj"),function(a){var b=this.Wj;b!==a&&(w.k(a,"boolean",A,"allowRotate"),this.Wj=a,this.j("allowRotate",b,a))});w.g(A,"allowSelect",A.prototype.ke);w.defineProperty(A,{ke:"allowSelect"},t("Xj"),function(a){var b=this.Xj;b!==a&&(w.k(a,"boolean",A,"allowSelect"),this.Xj=a,this.j("allowSelect",b,a))});w.g(A,"allowUndo",A.prototype.By);
w.defineProperty(A,{By:"allowUndo"},t("Us"),function(a){var b=this.Us;b!==a&&(w.k(a,"boolean",A,"allowUndo"),this.Us=a,this.j("allowUndo",b,a))});w.g(A,"allowZoom",A.prototype.Kn);w.defineProperty(A,{Kn:"allowZoom"},t("Ws"),function(a){var b=this.Ws;b!==a&&(w.k(a,"boolean",A,"allowZoom"),this.Ws=a,this.j("allowZoom",b,a))});w.g(A,"hasVerticalScrollbar",A.prototype.dD);
w.defineProperty(A,{dD:"hasVerticalScrollbar"},t("xt"),function(a){var b=this.xt;b!==a&&(w.k(a,"boolean",A,"hasVerticalScrollbar"),this.xt=a,this.j("hasVerticalScrollbar",b,a),vi(this))});w.g(A,"hasHorizontalScrollbar",A.prototype.cD);w.defineProperty(A,{cD:"hasHorizontalScrollbar"},t("wt"),function(a){var b=this.wt;b!==a&&(w.k(a,"boolean",A,"hasHorizontalScrollbar"),this.wt=a,this.j("hasHorizontalScrollbar",b,a),vi(this))});w.g(A,"allowHorizontalScroll",A.prototype.sf);
w.defineProperty(A,{sf:"allowHorizontalScroll"},t("Ss"),function(a){var b=this.Ss;b!==a&&(w.k(a,"boolean",A,"allowHorizontalScroll"),this.Ss=a,this.j("allowHorizontalScroll",b,a),vi(this))});w.g(A,"allowVerticalScroll",A.prototype.tf);w.defineProperty(A,{tf:"allowVerticalScroll"},t("Vs"),function(a){var b=this.Vs;b!==a&&(w.k(a,"boolean",A,"allowVerticalScroll"),this.Vs=a,this.j("allowVerticalScroll",b,a),vi(this))});w.g(A,"scrollHorizontalLineChange",A.prototype.xs);
w.defineProperty(A,{xs:"scrollHorizontalLineChange"},t("tu"),function(a){var b=this.tu;b!==a&&(w.k(a,"number",A,"scrollHorizontalLineChange"),0>a&&w.ra(a,">= 0",A,"scrollHorizontalLineChange"),this.tu=a,this.j("scrollHorizontalLineChange",b,a))});w.g(A,"scrollVerticalLineChange",A.prototype.ys);
w.defineProperty(A,{ys:"scrollVerticalLineChange"},t("uu"),function(a){var b=this.uu;b!==a&&(w.k(a,"number",A,"scrollVerticalLineChange"),0>a&&w.ra(a,">= 0",A,"scrollVerticalLineChange"),this.uu=a,this.j("scrollVerticalLineChange",b,a))});w.g(A,"lastInput",A.prototype.N);w.defineProperty(A,{N:"lastInput"},t("bc"),function(a){u&&w.i(a,$d,A,"lastInput");this.bc=a});w.g(A,"firstInput",A.prototype.xc);w.defineProperty(A,{xc:"firstInput"},t("yg"),function(a){u&&w.i(a,$d,A,"firstInput");this.yg=a});
w.g(A,"currentCursor",A.prototype.vc);w.defineProperty(A,{vc:"currentCursor"},t("jt"),function(a){w.k(a,"string",A,"currentCursor");this.jt===a||""===a&&this.jt===this.gp||(this.jt=a,""!==a?(this.Ea.style.cursor=a,document.body.style.cursor=a):(this.Ea.style.cursor=this.Ty,document.body.style.cursor=this.Ty))});w.g(A,"defaultCursor",A.prototype.Ty);
w.defineProperty(A,{Ty:"defaultCursor"},t("gp"),function(a){w.k(a,"string",A,"defaultCursor");var b=this.gp;b!==a&&(this.gp=a,this.j("defaultCursor",b,a))});w.g(A,"hasGestureZoom",A.prototype.IG);w.defineProperty(A,{IG:"hasGestureZoom"},t("nl"),function(a){var b=this.nl;b!==a&&(w.k(a,"boolean",A,"hasGestureZoom"),this.nl=a,this.j("hasGestureZoom",b,a))});w.g(A,"click",A.prototype.click);
w.defineProperty(A,{click:"click"},t("Mh"),function(a){var b=this.Mh;b!==a&&(a!==n&&w.k(a,"function",A,"click"),this.Mh=a,this.j("click",b,a))});w.g(A,"doubleClick",A.prototype.Tl);w.defineProperty(A,{Tl:"doubleClick"},t("Qh"),function(a){var b=this.Qh;b!==a&&(a!==n&&w.k(a,"function",A,"doubleClick"),this.Qh=a,this.j("doubleClick",b,a))});w.g(A,"contextClick",A.prototype.Ir);
w.defineProperty(A,{Ir:"contextClick"},t("Nh"),function(a){var b=this.Nh;b!==a&&(a!==n&&w.k(a,"function",A,"contextClick"),this.Nh=a,this.j("contextClick",b,a))});w.g(A,"mouseOver",A.prototype.os);w.defineProperty(A,{os:"mouseOver"},t("di"),function(a){var b=this.di;b!==a&&(a!==n&&w.k(a,"function",A,"mouseOver"),this.di=a,this.j("mouseOver",b,a))});w.g(A,"mouseHover",A.prototype.ns);
w.defineProperty(A,{ns:"mouseHover"},t("ci"),function(a){var b=this.ci;b!==a&&(a!==n&&w.k(a,"function",A,"mouseHover"),this.ci=a,this.j("mouseHover",b,a))});w.g(A,"mouseHold",A.prototype.ms);w.defineProperty(A,{ms:"mouseHold"},t("bi"),function(a){var b=this.bi;b!==a&&(a!==n&&w.k(a,"function",A,"mouseHold"),this.bi=a,this.j("mouseHold",b,a))});w.g(A,"mouseDragOver",A.prototype.JD);
w.defineProperty(A,{JD:"mouseDragOver"},t("$t"),function(a){var b=this.$t;b!==a&&(a!==n&&w.k(a,"function",A,"mouseDragOver"),this.$t=a,this.j("mouseDragOver",b,a))});w.g(A,"mouseDrop",A.prototype.ls);w.defineProperty(A,{ls:"mouseDrop"},t("ai"),function(a){var b=this.ai;b!==a&&(a!==n&&w.k(a,"function",A,"mouseDrop"),this.ai=a,this.j("mouseDrop",b,a))});w.g(A,"toolTip",A.prototype.Js);
w.defineProperty(A,{Js:"toolTip"},t("oi"),function(a){var b=this.oi;b!==a&&(a!==n&&w.i(a,of,A,"toolTip"),this.oi=a,this.j("toolTip",b,a))});w.g(A,"contextMenu",A.prototype.contextMenu);w.defineProperty(A,{contextMenu:"contextMenu"},t("Oh"),function(a){var b=this.Oh;b!==a&&(a!==n&&w.i(a,of,A,"contextMenu"),this.Oh=a,this.j("contextMenu",b,a))});w.g(A,"commandHandler",A.prototype.Xf);
w.defineProperty(A,{Xf:"commandHandler"},t("Nw"),function(a){var b=this.Nw;b!==a&&(w.i(a,pa,A,"commandHandler"),a.h!==n&&w.m("Cannot share CommandHandlers between Diagrams: "+a.toString()),b!==n&&b.ee(n),this.Nw=a,a.ee(this))});w.g(A,"toolManager",A.prototype.Rb);w.defineProperty(A,{Rb:"toolManager"},t("Mu"),function(a){var b=this.Mu;b!==a&&(w.i(a,mf,A,"toolManager"),a.h!==n&&w.m("Cannot share ToolManagers between Diagrams: "+a.toString()),b!==n&&b.ee(n),this.Mu=a,a.ee(this))});
w.g(A,"defaultTool",A.prototype.jv);w.defineProperty(A,{jv:"defaultTool"},t("Vw"),function(a){var b=this.Vw;b!==a&&(w.i(a,Cf,A,"defaultTool"),this.Vw=a,this.Ha===b&&(this.Ha=a))});w.g(A,"currentTool",A.prototype.Ha);w.defineProperty(A,{Ha:"currentTool"},t("Qw"),function(a){var b=this.Qw;b!==n&&(b.W&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop());a===n&&(a=this.jv);a!==n&&(w.i(a,Cf,A,"currentTool"),this.Qw=a,a.ee(this),a.doStart())});w.u(A,{selection:"selection"},t("xu"));
w.g(A,"maxSelectionCount",A.prototype.BD);w.defineProperty(A,{BD:"maxSelectionCount"},t("Vt"),function(a){var b=this.Vt;if(b!==a)if(w.k(a,"number",A,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.Vt=a,this.j("maxSelectionCount",b,a),!this.sa.tb&&(a=this.selection.count-a,0<a)){this.ya("ChangingSelection");for(var b=this.selection.qg(),c=0;c<a;c++)b[c].Qa=q;this.ya("ChangedSelection")}}else w.ra(a,">= 0",A,"maxSelectionCount")});w.g(A,"nodeSelectionAdornmentTemplate",A.prototype.ND);
w.defineProperty(A,{ND:"nodeSelectionAdornmentTemplate"},t("fu"),function(a){var b=this.fu;b!==a&&(w.i(a,of,A,"nodeSelectionAdornmentTemplate"),this.fu=a,this.j("nodeSelectionAdornmentTemplate",b,a))});w.g(A,"groupSelectionAdornmentTemplate",A.prototype.ZC);w.defineProperty(A,{ZC:"groupSelectionAdornmentTemplate"},t("ut"),function(a){var b=this.ut;b!==a&&(w.i(a,of,A,"groupSelectionAdornmentTemplate"),this.ut=a,this.j("groupSelectionAdornmentTemplate",b,a))});
w.g(A,"linkSelectionAdornmentTemplate",A.prototype.yD);w.defineProperty(A,{yD:"linkSelectionAdornmentTemplate"},t("Nt"),function(a){var b=this.Nt;b!==a&&(w.i(a,of,A,"linkSelectionAdornmentTemplate"),this.Nt=a,this.j("linkSelectionAdornmentTemplate",b,a))});w.g(A,"isModified",A.prototype.TG);w.defineProperty(A,{TG:"isModified"},function(){var a=this.sa;return a===n?this.XA:a.Pl!==n?h:this.XA&&this.mk!==a.Dj},function(a){w.k(a,"boolean",A,"isModified");this.XA=a;var b=this.sa;!a&&b&&(this.mk=b.Dj)});
w.g(A,"model",A.prototype.ba);w.defineProperty(A,{ba:"model"},t("Jd"),function(a){var b=this.Jd;if(b!==a){w.i(a,B,A,"model");b!==n&&(b.sa!==a.sa&&b.sa.RG)&&w.m("Do not replace a Diagram.model while a transaction is in progress.");this.zg=q;this.tp=h;this.rf=q;var c=this.Sd;this.Sd=h;b!==n&&(b.Jz(this.eB),b instanceof O&&Qh(this,b.Pg),Qh(this,b.eg));this.Jd=a;a.zy(this.dB);Rh(this,a.eg);a instanceof O&&Sh(this,a.Pg);a.Jz(this.dB);a.zy(this.eB);this.Sd=c;this.yb();b!==n&&(a.sa.isEnabled=b.sa.isEnabled)}});
function Oh(a,b,c){var d=a.Cj(b);if(d!==n&&"string"===typeof c)d.vb(c),a.ba instanceof De&&(b=a.yf(b),b!==n&&b.vb(c));else if("string"===typeof c){d=n;for(a=a.tl.l;a.next();){for(var e=a.value,g=0;g<e.length;g++){var i=e[g];i.Jf!==n&&(i=i.Jf.qa(b),i!==n&&(d===n&&(d=[]),d.push(i)))}if(d!==n)break}b=d;if(b!==n)for(d=0;d<b.length;d++)b[d].vb(c)}}function Mi(a,b){var c=b.sk;if(w.isArray(c)){var d=a.tl.qa(c);if(d===n)a.tl.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Oi(a,b){var c=b.sk;if(w.isArray(c)){var d=a.tl.qa(c);if(d!==n)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.tl.remove(c);break}}}
A.prototype.clear=A.prototype.clear=function(){var a=n;this.nd!==n&&(a=this.nd.ca);this.ba.clear();for(var b=this.hb.length,c=0;c<b;c++)this.hb.n[c].clear();this.dh.clear();this.Ti.clear();this.gu.clear();this.Hl.clear();this.Ot.clear();this.Nb.clear();this.Ph.clear();this.fk.clear();this.tl.clear();this.xu.Ia();this.xu.clear();this.xu.freeze();this.ym=this.Qx=n;this.ot=(new G(NaN,NaN,NaN,NaN)).freeze();a!==n&&(this.add(a),this.Nb.remove(a))};
A.prototype.reset=A.prototype.reset=function(){this.tc=h;this.clear();this.hb=new z(jf);this.rb=(new F(NaN,NaN)).freeze();this.Wb=1;this.Xt=1E-4;this.Ut=100;this.Ru=(new F(NaN,NaN)).freeze();this.tt=(new G(NaN,NaN,NaN,NaN)).freeze();this.fl=Nh;this.kl=Ib;this.nk=Nh;this.Nm=Ib;this.Ct=this.Bt=Jb;this.Ys=(new hb(16,16,16,16)).freeze();this.It=h;this.Ou=wg;this.gp="auto";this.Jd=this.Oh=this.oi=this.ai=this.$t=this.bi=this.ci=this.di=this.Nh=this.Qh=this.Mh=n;this.rk=q;this.Oj=this.Nj=this.Ps=this.Wh=
h;this.Rs=this.Qs=q;this.Vs=this.Ss=this.xt=this.wt=this.Ws=this.Us=this.Xj=this.Wj=this.Vj=this.Uj=this.Sj=this.Rj=this.Tj=this.Qj=this.Ts=this.Zj=this.Pj=this.Yj=h;this.uu=this.tu=16;this.ie=(new hb(5)).freeze();this.Vt=999999999;this.qd=n;$h(this);ai(this);this.nd=n;this.ba=new O;this.ki=h;this.Pb=new bi;this.tc=this.ki=q};
A.prototype.rebuildParts=A.prototype.gm=function(){for(var a=[],b=this.selection.l;b.next();){var c=b.value.data;c&&a.push(c)}b=this.ba;b instanceof O&&Qh(this,b.Pg);Qh(this,b.eg);Rh(this,b.eg);b instanceof O&&Sh(this,b.Pg);for(b=0;b<a.length;b++)if(c=this.Cj(a[b]))c.Qa=h};
function Rh(a,b){if(b!==n){for(var c=a.ba,d=w.Sb(b),e=0;e<d;e++){var g=w.Eb(b,e);c.pe(g)?Th(a,g,q):c instanceof O&&Uh(a,g)}if(c instanceof O||c instanceof De){for(e=0;e<d;e++)g=w.Eb(b,e),c.pe(g)&&Ri(a,g);if(c instanceof O)for(c=a.links;c.next();)Si(c.value)}Ti(a,q)}}
function Th(a,b,c){if(!(b===f||b===n)&&!a.sa.tb&&!a.Ph.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof S&&(zf(e),e=e.copy(),e instanceof S&&(e.Pi=d,a.add(e),e.data=b,c&&Ri(a,b)))}}A.prototype.getCategoryForNodeData=A.prototype.TC=function(a){var b=this.ba,c=b.TC(a),d=q;b instanceof O&&(d=b.nz(a));d&&""===c&&(c="LinkLabel");return c};
A.prototype.findTemplateForNodeData=A.prototype.vK=function(a,b){var c=q,d=this.ba;d instanceof O&&(c=d.kz(a));c?(c=this.gz.qa(b),c===n&&(c=this.gz.qa(""),c===n&&(w.rF===f&&(w.rF=h,w.trace('No Group template found for category "'+b+'"'),w.trace("  Using default group template")),c=this.DA))):(c=this.Dz.qa(b),c===n&&(c=this.Dz.qa(""),c===n&&(w.uF===f&&(w.uF=h,w.trace('No Node template found for category "'+b+'"'),w.trace("  Using default node template")),c=this.FA)));return c instanceof S?c:n};
function Ri(a,b){var c=a.ba;if(c instanceof O||c instanceof De){var d=c.lb(b);if(d!==f){var e=Ne(c,d),g=a.Qr(b);if(e!==n&&g!==n){for(e=e.l;e.next();){var i=e.value;if(c instanceof O)if(c.pe(i)){if(g instanceof xf&&c.Yn(i)===d){var j=a.Cj(i);j!==n&&(j.bb=g)}}else{if(j=a.yf(i),j!==n){c.Zl(i)===d&&(j.ga=g);c.$l(i)===d&&(j.la=g);for(var i=c.Qk(i),k=0;k<i.length;k++)if(i[k]===d){g.yd=j;break}}}else c instanceof De&&(c.pe(i)&&c.Zn(i)===d)&&(j=a.Qr(i),Ph(a,g,j))}bf(c,d)}c instanceof O?(c=c.Yn(b),c!==f&&
(c=a.Yf(c),c instanceof xf&&(g.bb=c))):c instanceof De&&(c=c.Zn(b),c!==f&&(c=a.Yf(c),Ph(a,c,g)))}}}function Ph(a,b,c){if(!(b===n||c===n)){var d=a.Rb.tz,e=b,g=c;if(a.jd)for(b=g.ue;b.next();){var i=b.value;if(i.la===g)return}else{e=c;g=b;for(b=e.ue;b.next();)if(i=b.value,i.ga===e)return}d!==n&&yg(d,e,g,n)||(d=a.getCategoryForLinkData(c.data),b=a.findTemplateForLinkData(c.data,d),b instanceof U&&(zf(b),b=b.copy(),b instanceof U&&(b.Pi=d,b.ga=e,b.la=g,a.add(b),b.data=c.data)))}}
function Sh(a,b){if(b!==n){for(var c=w.Sb(b),d=0;d<c;d++)Uh(a,w.Eb(b,d));Ti(a,q)}}
function Uh(a,b){if(!(b===f||b===n)&&!a.sa.tb&&!a.fk.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof U&&(zf(d),d=d.copy(),d instanceof U)){d.Pi=c;var c=a.ba,e=c.CG(b);""!==e&&(d.Ai=e);e=c.Zl(b);e!==f&&(e=a.Yf(e),e instanceof T&&(d.ga=e));e=c.FG(b);""!==e&&(d.Mj=e);e=c.$l(b);e!==f&&(e=a.Yf(e),e instanceof T&&(d.la=e));c=c.Qk(b);if(w.isArray(c))for(var e=w.Sb(c),g=0;g<e;g++){var i=a.Yf(w.Eb(c,g));i!==n&&(i.yd=d)}a.add(d);d.data=b}}}
A.prototype.getCategoryForLinkData=A.prototype.SC=function(a){var b=this.ba,c="";b instanceof O?c=b.SC(a):b instanceof De&&(c=b.EG(a));return c};A.prototype.findTemplateForLinkData=A.prototype.uK=function(a,b){var c=this.rz.qa(b);c===n&&(c=this.rz.qa(""),c===n&&(w.tF===f&&(w.tF=h,w.trace('No Link template found for category "'+b+'"'),w.trace("  Using default link template")),c=this.EA));return c instanceof U?c:n};function Qh(a,b){for(var c=w.Sb(b),d=0;d<c;d++)Vh(a,w.Eb(b,d))}
function Vh(a,b){if(!(b===f||b===n)){var c=a.Cj(b);if(c instanceof S){c.Qa=q;var d=c.Ja;if(!(d===n||d.h!==a)){var e=a.ba;if(e instanceof O&&c instanceof T){var g=e.lb(c.data);if(g!==f){for(var i=c.ue;i.next();){var j=i.value.data;af(e,g,j)}c.Fi&&(i=c.yd,i!==n&&(j=i.data,af(e,g,j)));if(c instanceof xf)for(i=c.Gc;i.next();)j=i.value.data,e.pe(j)&&af(e,g,j)}}else if(e instanceof De&&c instanceof T){i=a.yf(c.data);if(i!==n&&(i.Qa=q,j=i.Ja,j!==n)){var k=j.Od(-1,i);0<=k&&a.Pc(ke,"parts",j,i,n,k,n);k=i.fo;
k!==n&&k(i,j,n)}i=a.jd;for(j=c.ue;j.next();)k=j.value,k=(i?k.la:k.ga).data,e.pe(k)&&af(e,g,k)}e=d.Od(-1,c);0<=e&&a.Pc(ke,"parts",d,c,n,e,n);e=c.fo;e!==n&&e(c,d,n)}}}}A.prototype.findPartForKey=A.prototype.rK=function(a){if(a===n||a===f)return n;a=this.ba.Ie(a);if(a===n)return n;a=this.Ph.qa(a);return a instanceof S?a:n};A.prototype.findNodeForKey=A.prototype.Yf=function(a){if(a===n||a===f)return n;a=this.ba.Ie(a);if(a===n)return n;a=this.Ph.qa(a);return a instanceof T?a:n};
A.prototype.findPartForData=A.prototype.Cj=function(a){if(a===n)return n;var b=this.Ph.qa(a);if(b instanceof S)return b;b=this.fk.qa(a);return b instanceof S?b:n};A.prototype.findNodeForData=A.prototype.Qr=function(a){if(a===n)return n;a=this.Ph.qa(a);return a instanceof T?a:n};A.prototype.findLinkForData=A.prototype.yf=function(a){if(a===n)return n;a=this.fk.qa(a);return a instanceof U?a:n};w.g(A,"nodeTemplate",A.prototype.pH);
w.defineProperty(A,{pH:"nodeTemplate"},function(){return this.ei.qa("")},function(a){var b=this.ei.qa("");b!==a&&(w.i(a,S,A,"nodeTemplate"),this.ei.add("",a),this.j("nodeTemplate",b,a),this.sa.tb||this.gm())});w.g(A,"nodeTemplateMap",A.prototype.Dz);w.defineProperty(A,{Dz:"nodeTemplateMap"},t("ei"),function(a){var b=this.ei;b!==a&&(w.i(a,la,A,"nodeTemplateMap"),this.ei=a,this.j("nodeTemplateMap",b,a),this.sa.tb||this.gm())});w.g(A,"groupTemplate",A.prototype.HG);
w.defineProperty(A,{HG:"groupTemplate"},function(){return this.kk.qa("")},function(a){var b=this.kk.qa("");b!==a&&(w.i(a,xf,A,"groupTemplate"),this.kk.add("",a),this.j("groupTemplate",b,a),this.sa.tb||this.gm())});w.g(A,"groupTemplateMap",A.prototype.gz);w.defineProperty(A,{gz:"groupTemplateMap"},t("kk"),function(a){var b=this.kk;b!==a&&(w.i(a,la,A,"groupTemplateMap"),this.kk=a,this.j("groupTemplateMap",b,a),this.sa.tb||this.gm())});w.g(A,"linkTemplate",A.prototype.cH);
w.defineProperty(A,{cH:"linkTemplate"},function(){return this.Zi.qa("")},function(a){var b=this.Zi.qa("");b!==a&&(w.i(a,U,A,"linkTemplate"),this.Zi.add("",a),this.j("linkTemplate",b,a),this.sa.tb||this.gm())});w.g(A,"linkTemplateMap",A.prototype.rz);w.defineProperty(A,{rz:"linkTemplateMap"},t("Zi"),function(a){var b=this.Zi;b!==a&&(w.i(a,la,A,"linkTemplateMap"),this.Zi=a,this.j("linkTemplateMap",b,a),this.sa.tb||this.gm())});w.g(A,"isMouseCaptured",A.prototype.Fc);
w.defineProperty(A,{Fc:"isMouseCaptured"},t("YA"),function(a){var b=this.Ea;a?(this.N.bubbles=q,b.removeEventListener("mousemove",this.po,q),b.removeEventListener("mousedown",this.oo,q),b.removeEventListener("mouseup",this.ro,q),b.removeEventListener("mousewheel",this.Sg,q),b.removeEventListener("DOMMouseScroll",this.Sg,q),b.removeEventListener("mouseout",this.qo,q),window.addEventListener("mousemove",this.po,h),window.addEventListener("mousedown",this.oo,h),window.addEventListener("mouseup",this.ro,
h),window.addEventListener("mousewheel",this.Sg,h),window.addEventListener("DOMMouseScroll",this.Sg,h),window.addEventListener("mouseout",this.qo,h),window.addEventListener("selectstart",this.preventDefault,q)):(window.removeEventListener("mousemove",this.po,h),window.removeEventListener("mousedown",this.oo,h),window.removeEventListener("mouseup",this.ro,h),window.removeEventListener("mousewheel",this.Sg,h),window.removeEventListener("DOMMouseScroll",this.Sg,h),window.removeEventListener("mouseout",
this.qo,h),window.removeEventListener("selectstart",this.preventDefault,q),b.addEventListener("mousemove",this.po,q),b.addEventListener("mousedown",this.oo,q),b.addEventListener("mouseup",this.ro,q),b.addEventListener("mousewheel",this.Sg,q),b.addEventListener("DOMMouseScroll",this.Sg,q),b.addEventListener("mouseout",this.qo,q));this.YA=a});w.g(A,"position",A.prototype.position);
w.defineProperty(A,{position:"position"},t("rb"),function(a){var b=this.rb;if(!b.I(a)){w.i(a,F,A,"position");var c=this.Ua.copy();c.x=b.x;c.y=b.y;b.Bj(a)?a=b:this.tc||(this.tc=h,b=this.scale,xi(this,a,this.wc,this.Ea.width/b,this.Ea.height/b,this.kl),this.tc=q);this.rb=a.O();this.ss(c,this.Ua);this.yb()}});w.g(A,"initialPosition",A.prototype.gD);w.defineProperty(A,{gD:"initialPosition"},t("nx"),function(a){this.nx.I(a)||(w.i(a,F,A,"initialPosition"),this.nx=a)});w.g(A,"initialScale",A.prototype.hD);
w.defineProperty(A,{hD:"initialScale"},t("ox"),function(a){this.ox!==a&&(w.k(a,"number",A,"initialScale"),this.ox=a)});w.g(A,"grid",A.prototype.yv);w.defineProperty(A,{yv:"grid"},function(){this.nd===n&&si(this);return this.nd},function(a){var b=this.nd;if(b!==a){b===n&&(si(this),b=this.nd);w.i(a,x,A,"grid");a.type!==ti&&w.m("Diagram.grid must be a Panel of type Panel.Grid");var c=b.fa;c!==n&&c.remove(b);this.nd=a;a.name="GRID";c!==n&&c.add(a);Lh(this);this.j("grid",b,a)}});
w.u(A,{Ua:"viewportBounds"},function(){var a=this.rb,b=this.Wb,c=this.Ea,d=this.NB;d.V(a.x,a.y,Math.max(c.width,0)/b,Math.max(c.height,0)/b);return d});w.g(A,"fixedBounds",A.prototype.Ur);w.defineProperty(A,{Ur:"fixedBounds"},t("tt"),function(a){var b=this.tt;b.I(a)||(w.i(a,G,A,"fixedBounds"),this.tt=a=a.O(),Bi(this),this.j("fixedBounds",b,a))});w.u(A,{wc:"documentBounds"},t("ot"));function yi(a,b){var c=a.ot;c.I(b)||(b=b.O(),a.ot=b,a.Uh=q,vi(a),a.ya("DocumentBoundsChanged",n,c.copy()),Di(a))}
w.g(A,"scale",A.prototype.scale);
w.defineProperty(A,{scale:"scale"},t("Wb"),function(a){var b=this.Wb;if(b!==a){w.o(a,A,"scale");this.Wb=a;var c=a;a<this.Gj&&(c=this.Gj);a>this.Bh&&(c=this.Bh);if(!isNaN(a)&&!this.tc&&!this.Sd){this.tc=h;var d=this.Ua.copy(),e=this.Ea.width/c,g=this.Ea.height/c;d.width=this.Ea.width/b;d.height=this.Ea.height/b;var i=this.dl.copy();if(isNaN(i.x))switch(this.hv){case ec:i.x=0;break;case fc:i.x=e-1;break;case Ob:i.x=e/2;break;case Ib:case hc:i.x=e/2}if(isNaN(i.y))switch(this.hv){case dc:i.y=0;break;
case gc:i.y=g-1;break;case Ob:i.y=g/2;break;case Ib:case hc:i.y=g/2}var j=this.position,a=new F(j.x+i.x/b-i.x/a,j.y+i.y/b-i.y/a);xi(this,a,this.wc,e,g,this.kl);this.position=a;this.tc=q;e=this.Ua;this.Wb=c;this.ss(d,e)}Lh(this);Di(this)}});w.g(A,"autoScale",A.prototype.Ey);w.defineProperty(A,{Ey:"autoScale"},t("fl"),function(a){var b=this.fl;b!==a&&(w.jb(a,A,A,"autoScale"),this.fl=a,this.j("autoScale",b,a),a!==Nh&&vi(this))});w.g(A,"initialAutoScale",A.prototype.LG);
w.defineProperty(A,{LG:"initialAutoScale"},t("nk"),function(a){var b=this.nk;b!==a&&(w.jb(a,A,A,"initialAutoScale"),this.nk=a,this.j("initialAutoScale",b,a))});w.g(A,"initialViewportSpot",A.prototype.iD);w.defineProperty(A,{iD:"initialViewportSpot"},t("Ct"),function(a){var b=this.Ct;b!==a&&(w.i(a,H,A,"initialViewportSpot"),sb(a)||w.m("initialViewportSpot must be a real Spot: "+a),this.Ct=a,this.j("initialViewportSpot",b,a))});w.g(A,"initialDocumentSpot",A.prototype.fD);
w.defineProperty(A,{fD:"initialDocumentSpot"},t("Bt"),function(a){var b=this.Bt;b!==a&&(w.i(a,H,A,"initialDocumentSpot"),sb(a)||w.m("initialViewportSpot must be a real Spot: "+a),this.Bt=a,this.j("initialDocumentSpot",b,a))});w.g(A,"minScale",A.prototype.Gj);w.defineProperty(A,{Gj:"minScale"},t("Xt"),function(a){w.o(a,A,"minScale");var b=this.Xt;b!==a&&0<a?(this.Xt=a,this.j("minScale",b,a),a>this.scale&&(this.scale=a)):w.ra(a,"> 0",A,"minScale")});w.g(A,"maxScale",A.prototype.Bh);
w.defineProperty(A,{Bh:"maxScale"},t("Ut"),function(a){w.o(a,A,"maxScale");var b=this.Ut;b!==a&&0<a?(this.Ut=a,this.j("maxScale",b,a),a<this.scale&&(this.scale=a)):w.ra(a,"> 0",A,"maxScale")});w.g(A,"zoomPoint",A.prototype.dl);w.defineProperty(A,{dl:"zoomPoint"},t("Ru"),function(a){this.Ru.I(a)||(w.i(a,F,A,"zoomPoint"),this.Ru=a=a.O(),Bi(this))});w.g(A,"contentAlignment",A.prototype.hv);
w.defineProperty(A,{hv:"contentAlignment"},t("kl"),function(a){var b=this.kl;b.I(a)||(w.i(a,H,A,"contentAlignment"),this.kl=a=a.O(),this.j("contentAlignment",b,a),vi(this))});w.g(A,"initialContentAlignment",A.prototype.MG);w.defineProperty(A,{MG:"initialContentAlignment"},t("Nm"),function(a){var b=this.Nm;b.I(a)||(w.i(a,H,A,"initialContentAlignment"),this.Nm=a=a.O(),this.j("initialContentAlignment",b,a))});w.g(A,"padding",A.prototype.padding);
w.defineProperty(A,{padding:"padding"},t("ie"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,A,"padding");var b=this.ie;b.I(a)||(this.ie=a=a.O(),Bi(this),this.j("padding",b,a))});w.u(A,{Xk:"nodes"},function(){return this.gu.l});w.u(A,{links:"links"},function(){return this.Ot.l});w.u(A,{Yk:"parts"},function(){return this.Nb.l});w.g(A,"layout",A.prototype.Pb);
w.defineProperty(A,{Pb:"layout"},t("qd"),function(a){var b=this.qd;b!==a&&(w.i(a,bi,A,"layout"),b!==n&&(b.h=n,b.group=n),this.qd=a,a.h=this,a.group=n,this.sn=this.Xs=h,this.j("layout",b,a),this.yb())});A.prototype.layoutDiagram=A.prototype.nL=function(a){Zh(this);a&&Ti(this,h);Ei(this)};function Ti(a,b){for(var c=a.Hl.l;c.next();)Ui(a,c.value,b);a.Pb!==n&&(b?a.Pb.Pe=q:a.Pb.F())}function Ui(a,b,c){if(b!==n){for(var d=b.Zm.l;d.next();)Ui(a,d.value,c);b.Pb!==n&&(c?b.Pb.Pe=q:b.Pb.F())}}
function Ei(a){for(var b=a.Hl.l;b.next();)Vi(a,b.value);b=a.Pb;b!==n&&!b.Pe&&(b.doLayout(a),b.Pe=h);a.Xs=q}function Vi(a,b){if(b!==n){for(var c=b.Zm.l;c.next();)Vi(a,c.value);c=b.Pb;c!==n&&!c.Pe&&(b.lB=!b.location.T(),c.doLayout(b),b.F(Wi),c.Pe=h,Gi(a,b))}}w.g(A,"isTreePathToChildren",A.prototype.jd);w.defineProperty(A,{jd:"isTreePathToChildren"},t("It"),function(a){var b=this.It;if(b!==a&&(w.k(a,"boolean",A,"isTreePathToChildren"),this.It=a,this.j("isTreePathToChildren",b,a),!this.sa.tb))for(a=this.Xk;a.next();)Xi(a.value)});
w.g(A,"isCollapsingExpanding",A.prototype.$f);w.defineProperty(A,{$f:n},t("VA"),ba("VA"));function Yi(a,b){var c=a.Xw.qa(b);if(c!==n)return c;c=a.Xw.qa(b.toLowerCase());if(c!==n)return c;w.m("Unknown DiagramEvent name: "+b);return n}A.prototype.addDiagramListener=A.prototype.TB=function(a,b){w.k(a,"string",A,"addDiagramListener:name");w.k(b,"function",A,"addDiagramListener:listener");var c=Yi(this,a);c!==n&&c.add(b)};
A.prototype.removeDiagramListener=A.prototype.YD=function(a,b){w.k(a,"string",A,"removeDiagramListener:name");w.k(b,"function",A,"addDiagramListener:listener");var c=Yi(this,a);c!==n&&c.remove(b)};A.prototype.raiseDiagramEvent=A.prototype.ya=function(a,b,c){u&&w.k(a,"string",A,"raiseDiagramEvent:name");var d=Yi(this,a),e=new fe;e.h=this;var g=this.Ww.qa(a),a=g!==n?g:this.Ww.qa(a.toLowerCase());e.name=a;b!==f&&(e.bw=b);c!==f&&(e.Ov=c);for(b=d.l;b.next();)c=b.value,c(e);return e.cancel};
function lg(a,b){for(var c=a.Xl(b,function(a){return a.ca},function(a){return a instanceof U},h).l;c.next();){var d=c.value;d.Dh===Tf&&d.Tb()}}function Zi(a,b,c){if(b!==c)if(b.canAvoid()){for(var c=b.getAvoidableRectangle(),b=a.td.Ml,d=a.td.Ll,e=c.x+c.width,g=c.y+c.height,i=c.x;i<e;i+=b){for(var j=c.y;j<g;j+=d)$i(a.td,i,j);$i(a.td,i,g)}for(j=c.y;j<g;j+=d)$i(a.td,e,j);$i(a.td,e,g)}else if(b instanceof xf)for(b=b.Gc;b.next();)d=b.value,d instanceof T&&Zi(a,d,c)}
function aj(a,b){if(a.td!==n&&!a.td.cs&&(b===n||b.canAvoid()))a.td.cs=h}function gi(a,b,c){if(Jf!==n){c instanceof A||(c=n);var d=Rf;c!==d&&(d!==n&&d.Rb.re!==n&&d.Rb.re.doSimulatedDragLeave(),c!==n&&c.Rb.re!==n&&c.Rb.re.doSimulatedDragEnter());Rf=c;if(c===n)return h;d=c.Rb.re;d!==n&&(a!==n&&(b=c.ah(a)),c.bc.M=b,c.bc.Aj=q,c.bc.Ji=q,d.doSimulatedDragOver());return h}return q}
function ii(a,b,c,d){if(Jf!==n){d===n&&(d=n);var e=Rf;d!==e&&(e!==n&&e.Rb.re!==n&&e.Rb.re.doSimulatedDragLeave(),d!==n&&d.Rb.re!==n&&d.Rb.re.doSimulatedDragEnter());Rf=d;if(d===n)return Jf.doCancel(),h;if(d!==a)return a=c,b!==n&&(a=d.ah(b)),d.bc.M=a,d.bc.Aj=q,d.bc.Ji=h,b=d.Rb.re,b!==n&&b.doSimulatedDrop(),Jf!==n&&Jf.doCancel(),h}return q}w.g(A,"autoScrollRegion",A.prototype.dC);
w.defineProperty(A,{dC:"autoScrollRegion"},t("Ys"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,A,"autoScrollRegion");var b=this.Ys;b.I(a)||(this.Ys=a=a.O(),Bi(this),this.j("autoScrollRegion",b,a))});
function jg(a){if(a.Ug===n){a.Ug={};var b;b=a.Ha!==a.Rb.re?a.YE:a.ZE;a.Ug.isEnabled=h;var c=setInterval(function(){var b=c;a.Ug!==n&&a.Ug.isEnabled&&(a.Ug=n,clearInterval(b),b=ig(a,a.Kw),b.zi(a.position)||(a.position=b,a.N.M=a.kI(a.Kw),a.Ha.doMouseMove(),a.Uh=h,yi(a,a.oe()),a.bh=h,a.Qg(),jg(a)))},b);a.Ug.id=c}}function Mf(a){a.Ug!==n&&(a.Ug.isEnabled&&clearInterval(a.Ug.id),a.Ug=n)}
function ig(a,b){var c=a.position,d=a.dC;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.Ua,g=new G(0,0,e.width,e.height),e=new F(0,0);if(b.x>=g.x&&b.x<g.x+d.left){var i=Math.max(a.xs,1),i=i|0;e.x-=i;b.x<g.x+d.left/2&&(e.x-=i);b.x<g.x+d.left/4&&(e.x-=4*i)}else b.x<=g.x+g.width&&b.x>g.x+g.width-d.right&&(i=Math.max(a.xs,1),i|=0,e.x+=i,b.x>g.x+g.width-d.right/2&&(e.x+=i),b.x>g.x+g.width-d.right/4&&(e.x+=4*i));b.y>=g.y&&b.y<g.y+d.top?(i=Math.max(a.ys,1),i|=0,e.y-=i,b.y<g.y+d.top/2&&
(e.y-=i),b.y<g.y+d.top/4&&(e.y-=4*i)):b.y<=g.y+g.height&&b.y>g.y+g.height-d.bottom&&(i=Math.max(a.ys,1),i|=0,e.y+=i,b.y>g.y+g.height-d.bottom/2&&(e.y+=i),b.y>g.y+g.height-d.bottom/4&&(e.y+=4*i));e.zi(new F(0,0))||(d=a.scale,c=new F(c.x+e.x/d,c.y+e.y/d));return c}A.prototype.makeImage=A.prototype.pL=function(a){var b=document.createElement("img");b.src=this.eH(a);return b instanceof HTMLImageElement?b:n};
A.prototype.makeImageData=A.prototype.eH=function(a){this.Qg();if(this.Ea===n)return"";a===f&&(a={});"object"!==typeof a&&w.m("properties argument must be an Object.");var b=a.size||n,c=a.scale||n,d=a.maxSize||new bb(2E3,2E3),e=a.position||n,g=a.parts||n,i=a.padding||1,j=a.background||n,k=a.omitTemporary;k===f&&(k=h);b!==n&&(isNaN(b.width)&&isNaN(b.height))&&(b=n);i&&"number"===typeof i&&(i=new hb(i));i||(i=new hb(0));this.qt=q;ki(this);var l=document.createElement("canvas"),m=l.getContext("2d");
if(!b&&!c&&!g&&!e)return l.width=this.Ea.width+Math.ceil(i.left+i.right),l.height=this.Ea.height+Math.ceil(i.top+i.bottom),Hi(this,m,i,new bb(l.width,l.height),this.Wb,this.rb,g,j,k),this.qt=h,l.toDataURL(a.type,a.details);var p,r=new F(0,0);p=this.wc.copy();p.bI(this.padding);p.width-=r.x;p.height-=r.y;if(g){var s,v=h,g=g.l;for(g.reset();g.next();){var y=g.value;if(y instanceof S){var C=y.Ja;if(!C||C.visible)if((!C||!C.zc)&&y.nb())y=y.va,y.T()&&(v?(v=q,s=y.copy()):s.Ii(y))}}v&&(s=new G(0,0,0,0));
p.width=s.width;p.height=s.height;r.x=s.x;r.y=s.y}r.x+=p.x;r.y+=p.y;e!==n&&e.T()&&(r=e,c||(c=1));s=e=0;i&&(e=i.left+i.right,s=i.top+i.bottom);v=y=0;b&&(y=b.width,v=b.height,isFinite(y)&&(y=Math.max(0,y-e)),isFinite(v)&&(v=Math.max(0,v-s)));b&&c?b.T()?(b=y,p=v):isNaN(v)?(b=y,p=p.height*c):(b=p.width*c,p=v):b?b.T()?(c=Math.min(y/p.width,v/p.height),b=y,p=v):isNaN(v)?(c=y/p.width,b=y,p=p.height*c):(c=v/p.height,b=p.width*c,p=v):c?(b=p.width*c,p=p.height*c):(c=1,b=p.width,p=p.height);i?(b+=e,p+=s):i=
new hb(0);d&&(e=d.width,isNaN(e)&&(e=2E3),d=d.height,isNaN(d)&&(d=2E3),isFinite(e)&&(b=Math.min(b,e)),isFinite(d)&&(p=Math.min(p,d)));l.width=b;l.height=p;Hi(this,m,i,new bb(Math.ceil(b),Math.ceil(p)),c,r,g,j,k);this.qt=h;return l.toDataURL(a.type,a.details)};A.inherit=function(a,b){w.k(a,"function",A,"inherit");w.k(b,"function",A,"inherit");w.Da(a,b)};function bj(a){A.call(this,a);this.Vu=h;this.Fk=q;this.cb=h;this.hv=Kb;this.Pb=new cj}w.P("Palette",bj);w.Da(bj,A);
function Ii(a){A.call(this,a);this.tc=h;this.fi=n;var a=new S,b=new V;b.stroke="magenta";b.eb=2;b.fill=n;b.name="BOXSHAPE";a.As="BOXSHAPE";a.Hv="BOXSHAPE";a.add(b);this.Ni=a;this.hy=document.createElement("canvas");this.mF=this.hy.getContext("2d");a=new dj;a.ee(this);this.Rb.Re.yc(0,a);var c=this;this.PD=function(){ej(c)};this.OD=function(){c.fi!==n&&(Bi(c),Lh(c))};this.cb=h;this.ke=q;this.Ey=zi;this.Rb.em=Ef;this.tc=q}w.P("Overview",Ii);w.Da(Ii,A);
Ii.prototype.He=function(){this.Lb===n&&w.m("No div specified");this.Ea===n&&w.m("No canvas specified");if(this.bh){var a=this.fi;if(a!==n){var b=this.Ea,c=this.ek,d=this.hy,e=this.mF;d.width=b.width;d.height=b.height;c.Fw="";c.setTransform(1,0,0,1,0,0);c.clearRect(0,0,this.Ea.width,this.Ea.height);var g=this.Md;g.reset();1!==this.Wb&&g.scale(this.scale);(0!==this.position.x||0!==this.position.y)&&g.translate(-this.rb.x,-this.rb.y);c.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);for(var i=this.Ua,
j=a.hb.length,g=0;g<j;g++)for(var k=c,l=i,m=a.hb.n[g].Nb,p=this.scale,r=m.length,s=0;s<r;s++){var v=m.n[s],y=v.va;y.Me(l)&&(1<y.width*p||1<y.height*p?v.He(k,this):Kh(v,k))}e.drawImage(b,0,0);u&&u.gC&&(e.fillStyle="red",e.fillRect(0,d.height/2,d.width,4));a=this.hb.length;for(g=0;g<a;g++)this.hb.n[g].He(c,this);this.bh=this.qk=q}}};w.g(Ii,"observed",Ii.prototype.qH);
w.defineProperty(Ii,{qH:"observed"},t("fi"),function(a){var b=this.fi;a!==n&&w.i(a,A,Ii,"observed");b!==a&&!(a instanceof Ii)&&(b!==n&&(this.remove(this.gd),b.YD("ViewportBoundsChanged",this.PD),b.YD("DocumentBoundsChanged",this.OD),b.mu.remove(this),this.Rb.Mr.Os=n),this.fi=a,a!==n&&(a.TB("ViewportBoundsChanged",this.PD),a.TB("DocumentBoundsChanged",this.OD),a.mu.add(this),this.add(this.gd),ej(this),this.Rb.Mr.Os=a),Bi(this),this.j("observed",b,a))});w.g(Ii,"box",Ii.prototype.gd);
w.defineProperty(Ii,{gd:"box"},t("Ni"),function(a){var b=this.Ni;b!==a&&(this.Ni=a,this.j("box",b,a))});function ej(a){var b=a.gd;if(b!==n){var c=a.fi;if(c!==n){a.bh=h;var c=c.Ua,d=b.Vv;d.wa=new bb(c.width,c.height);a=2/a.scale;d instanceof V&&(d.eb=a);b.location=new F(c.x-a/2,c.y-a/2)}}}Ii.prototype.oe=function(){var a=this.fi;return a===n?new G(0,0,0,0):a.wc};Ii.prototype.ss=function(a){this.tc||(ui(this),Lh(this),Di(this),Bi(this),ej(this),this.ya("ViewportBoundsChanged",a))};
function dj(){Cf.call(this);this.name="MoveBox"}w.Da(dj,Cf);dj.prototype.doStart=dj.prototype.Xy=function(){this.W=this.h.Fc=h};dj.prototype.doMouseMove=dj.prototype.Mg=function(){if(this.W){var a=this.h;if(!(a===n||a.fi===n)){var b=a.fi,c=b.Ua,d=a.N.M;b.position=new F(d.x-c.width/2,d.y-c.height/2);a.yb()}}};dj.prototype.doMouseUp=dj.prototype.qe=function(){this.W&&this.doMouseMove();this.stopTool()};dj.prototype.doStop=dj.prototype.Nk=function(){this.W=q;var a=this.h;a.Fc=q;ej(a)};
function Fe(a){w.jc(this);this.$a=q;a===f?(this.S=He,this.xm="black"):"string"===typeof a?(this.S=He,this.xm=a):(u&&w.jb(a,Fe,Fe,"constructor:type"),this.S=a,this.xm="black");a=this.S;a===Ie?(this.kn=Kb,this.Fm=Qb):this.Fm=a===Je?this.kn=Ob:this.kn=Fb;this.Cu=0;this.rt=NaN;this.uA=this.vA=this.vg=this.ou=this.tg=n}w.P("Brush",Fe);var He;Fe.Solid=He=w.s(Fe,"Solid",0);var Ie;Fe.Linear=Ie=w.s(Fe,"Linear",1);var Je;Fe.Radial=Je=w.s(Fe,"Radial",2);var fj;Fe.Pattern=fj=w.s(Fe,"Pattern",2);
Fe.prototype.copy=Fe.prototype.copy=function(){var a=new Fe;a.S=this.S;a.xm=this.xm;a.kn=this.kn;a.Fm=this.Fm;a.Cu=this.Cu;a.rt=this.rt;this.tg!==n&&(a.tg=this.tg.copy());a.ou=this.ou;return a};Fe.prototype.Za=function(){this.freeze();Object.freeze(this);return this};Fe.prototype.freeze=function(){this.$a=h;this.tg!==n&&this.tg.freeze();return this};Fe.prototype.Ia=function(){Object.isFrozen(this)&&w.m("cannot thaw constant: "+this);this.$a=q;this.tg!==n&&this.tg.Ia();return this};
Fe.prototype.toString=function(){var a="Brush(";if(this.type===He)a+=this.color;else if(a=this.type===Ie?a+"Linear ":this.type===Je?a+"Radial ":this.type===fj?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,this.Nn!==n)for(var b=this.Nn.l;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
Fe.prototype.addColorStop=Fe.prototype.addColorStop=function(a,b){w.H(this);(a===n||1<a||0>a)&&w.ra(a,"0 <= loc <= 1",Fe,"addColorStop:loc");w.k(b,"string",Fe,"addColorStop:color");this.tg===n&&(this.tg=new la("number","string"));this.tg.add(a,b);this.S===He&&(this.type=Ie);this.vg=n};w.g(Fe,"type",Fe.prototype.type);
w.defineProperty(Fe,{type:"type"},t("S"),function(a){w.H(this,a);w.jb(a,Fe,Fe,"type");this.S=a;yb(this.start)&&(a===Ie?this.start=Kb:a===Je&&(this.start=Ob));yb(this.end)&&(a===Ie?this.end=Qb:a===Je&&(this.end=Ob));this.vg=n});w.g(Fe,"color",Fe.prototype.color);w.defineProperty(Fe,{color:"color"},t("xm"),function(a){w.H(this,a);w.k(a,"string",Fe,"color");this.xm=a;this.vg=n});w.g(Fe,"start",Fe.prototype.start);
w.defineProperty(Fe,{start:"start"},t("kn"),function(a){w.H(this,a);a instanceof H||w.ic(a,"Spot",Fe,"start");this.kn=a.O();this.vg=n});w.g(Fe,"end",Fe.prototype.end);w.defineProperty(Fe,{end:"end"},t("Fm"),function(a){w.H(this,a);a instanceof H||w.ic(a,"Spot",Fe,"end");this.Fm=a.O();this.vg=n});w.g(Fe,"startRadius",Fe.prototype.Fo);w.defineProperty(Fe,{Fo:"startRadius"},t("Cu"),function(a){w.H(this,a);w.o(a,Fe,"startRadius");0>a&&w.ra(a,">= zero",Fe,"startRadius");this.Cu=a;this.vg=n});
w.g(Fe,"endRadius",Fe.prototype.Tn);w.defineProperty(Fe,{Tn:"endRadius"},t("rt"),function(a){w.H(this,a);w.o(a,Fe,"endRadius");0>a&&w.ra(a,">= zero",Fe,"endRadius");this.rt=a;this.vg=n});w.g(Fe,"colorStops",Fe.prototype.Nn);w.defineProperty(Fe,{Nn:"colorStops"},t("tg"),function(a){w.H(this,a);u&&w.i(a,la,Fe,"colorStops");this.tg=a;this.vg=n});w.g(Fe,"pattern",Fe.prototype.pattern);w.defineProperty(Fe,{pattern:"pattern"},t("ou"),function(a){w.H(this,a);this.ou=a;this.vg=n});
Fe.randomColor=function(a,b){a===f&&(a=128);u&&(w.o(a,Fe,"randomColor:min"),(0>a||255<a)&&w.ra(a,"0 <= min <= 255",Fe,"randomColor:min"));b===f&&(b=Math.max(a,255));u&&(w.o(b,Fe,"randomColor:max"),(b<a||255<b)&&w.ra(b,"min <= max <= 255",Fe,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};
function P(){w.jc(this);this.xk=n;this.Bb="";this.Nf=this.Kg=h;this.we=this.xe=n;this.rb=(new F(NaN,NaN)).freeze();this.Ae=(new bb(NaN,NaN)).freeze();this.Td=pc;this.dj=kc;this.Md=new Wa;this.sm=new Wa;this.uk=new Wa;this.Wb=1;this.oc=0;this.oh=ch;this.gq=(new hb(0)).freeze();this.Tc=(new G(NaN,NaN,NaN,NaN)).freeze();this.Ib=(new G(NaN,NaN,NaN,NaN)).freeze();this.Kc=(new G(0,0,NaN,NaN)).freeze();this.Jc=this.ac=this.ol=this.Pm=h;this.Bq=n;this.$g=Fb;this.Xg=10;this.Wg=gj;this.Zg=0;this.vp=n;this.xp=
this.wp=q;this.yp=Infinity;this.uh=Fb;this.rh=10;this.qh=gj;this.th=0;this.lr=n;this.nr=this.mr=q;this.or=Infinity;this.Kd=n;this.Aa=Ib;this.Op=q;this.Qo=Ib;this.Qq=0;this.Ak=1;this.Y=0;this.bk=1;this.Tq=-Infinity;this.Sq=0;this.Uq=jc;this.Vq=hj;this.ap="";this.Oh=this.oi=this.ai=this.qq=this.pq=this.bi=this.ci=this.di=this.sq=this.rq=this.Nh=this.Qh=this.Mh=n;this.Hp=q;this.pc=this.Lo=this.Oo=this.No=this.Mo=n;this.um=q;this.ll=n;this.GB=new G(NaN,NaN,NaN,NaN);this.il=q;this.ak=n;this.tm=q;this.Dl=
n}w.P("GraphObject",P);
P.prototype.xb=function(a){a.Bb=this.Bb;a.Kg=this.Kg;a.Nf=this.Nf;a.xe=this.xe;a.we=this.we;a.rb.Xa(this.rb);a.Ae.Xa(this.Ae);a.Td=this.Td.O();a.dj=this.dj.O();a.Wb=this.Wb;a.oc=this.oc;a.oh=this.oh;a.gq.Xa(this.gq);a.Tc.Xa(this.Tc);a.Ib.Xa(this.Ib);a.Kc.Xa(this.Kc);a.Bq=this.Bq;a.$g=this.$g.O();a.Xg=this.Xg;a.Wg=this.Wg;a.Zg=this.Zg;a.vp=this.vp;a.wp=this.wp;a.xp=this.xp;a.yp=this.yp;a.uh=this.uh.O();a.rh=this.rh;a.qh=this.qh;a.th=this.th;a.lr=this.lr;a.mr=this.mr;a.nr=this.nr;a.or=this.or;a.Aa=
this.Aa.O();a.Op=this.Op;a.Qo=this.Qo.O();a.Qq=this.Qq;a.Ak=this.Ak;a.Y=this.Y;a.bk=this.bk;a.Tq=this.Tq;a.Sq=this.Sq;a.Uq=this.Uq.O();a.Vq=this.Vq;a.ap=this.ap;a.Mh=this.Mh;a.Qh=this.Qh;a.Nh=this.Nh;a.rq=this.rq;a.sq=this.sq;a.di=this.di;a.ci=this.ci;a.bi=this.bi;a.pq=this.pq;a.qq=this.qq;a.ai=this.ai;a.oi=this.oi;a.Oh=this.Oh;a.Hp=this.Hp;a.Mo=this.Mo;a.No=this.No;a.Oo=this.Oo;a.Lo=this.Lo;a.pc=this.pc;a.um=this.um;if(Array.isArray(this.ll)){a.ll=this.ll.slice(0);for(var b=0;b<this.ll.length;b++){var c=
this.ll[b];a[c]=this[c]}}a.tm=this.tm;a.ac=this.ac;a.Jc=this.Jc;a.uk=this.uk.copy();a.il=this.il;this.ak!==n&&(a.ak=this.ak.copy())};P.prototype.yh=function(a){a.Kd=n;a.Dl=n;a.R()};P.prototype.copy=P.prototype.copy=function(){var a=new this.constructor;this.xb(a);return a};P.prototype.toString=function(){return w.Pk(Object.getPrototypeOf(this))+"#"+w.ec(this)};var ij;P.None=ij=w.s(P,"None",0);var ch;P.Default=ch=w.s(P,"Default",0);var kd;P.Fill=kd=w.s(P,"Fill",3);var dh;
P.Uniform=dh=w.s(P,"Uniform",1);var eh;P.UniformToFill=eh=w.s(P,"UniformToFill",2);var jj;P.Vertical=jj=w.s(P,"Vertical",4);var kj;P.Horizontal=kj=w.s(P,"Horizontal",5);P.prototype.Pc=function(a,b,c,d,e,g,i){var j=this.ca;if(j!==n&&(j.fm(a,b,c,d,e,g,i),this.um&&(c===this&&a===ie)&&(a=this.Tr(),a!==n)))for(c=this.pc.l;c.next();)d=c.value,e=a.data,g=d.Eo,g!==n&&(e=a.Je(g)),e!==n&&(d.PE(this,e,b),g=d.Eo,g!==n&&(e=a,""!==g&&(e=a.Je(g)),e!==n&&(g=d.km,i=a,""!==g&&(i=a.Je(g)),i!==n&&d.QE(i,e,b))))};
P.prototype.j=function(a,b,c){this.Pc(ie,a,this,b,c)};function lj(a,b,c,d,e){var g=a.Tc,i=a.uk;i.reset();mj(a,i,b,c,d,e);a.uk=i;g.x=b;g.y=c;g.width=d;g.height=e;i.ds()||i.LE(g)}P.prototype.MC=function(a,b){if(this.Nf===q)return q;var c=this.Sa,d=a.Sl(b);return $a(a.x,a.y,0,0,0,c.height)<d||$a(a.x,a.y,0,c.height,c.width,c.height)<d||$a(a.x,a.y,c.width,c.height,c.width,0)<d||$a(a.x,a.y,c.width,0,0,0)<d?h:q};
function nj(a,b,c,d){if(a instanceof x)for(var e=a.Fa.length;e--;){var g=a.Fa.n[e];if(g.visible){var i=g.va,j=a.va;i.x>j.width||(i.y>j.height||0>i.x+i.width||0>i.y+i.height)||(nj(g,b,c,d),b!==n&&(g=b(g)),g&&(c===n||c(g))&&d.add(g))}}}P.prototype.Ih=ca(h);
P.prototype.containsPoint=P.prototype.ua=function(a){u&&w.i(a,F,P,"containsPoint:p");var b=kb(this.transform,a),c=this.va;if(!c.T())return q;if(w.ay){var d=this.Sa,e=this.Yl()*(this.h!==n?this.h.scale:1),g=1/e;if(10>d.width*e&&10>d.height*e)return jb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y)}return(this.Cc!==f||this instanceof V?jb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.ua(b))?this.ak&&!this.ak.ua(b)?q:this.we!==n&&c.ua(b)||this.xe!==n&&this.Kc.ua(a)?h:this.uj(a):q};
P.prototype.uj=function(a){var b=this.Sa;return jb(0,0,b.width,b.height,a.x,a.y)};P.prototype.containsRect=P.prototype.Ol=function(a){u&&w.i(a,G,P,"containsRect:r");if(0===this.angle)return this.va.Ol(a);var b=this.Sa,b=new G(0,0,b.width,b.height),c=this.transform;return b.ua(c.Di(new F(a.x,a.y)))&&b.ua(c.Di(new F(a.x,a.bottom)))&&b.ua(c.Di(new F(a.right,a.bottom)))&&b.ua(c.Di(new F(a.right,a.y)))};
P.prototype.containedInRect=P.prototype.gv=function(a,b){u&&w.i(a,G,P,"containedInRect:r");if(b===f)return a.Ol(this.va);var c=this.Sa;return!a.ua(b.Ta(new F(0,0)))||!a.ua(b.Ta(new F(0,c.height)))||!a.ua(b.Ta(new F(c.width,c.height)))||!a.ua(b.Ta(new F(c.width,0)))?q:h};
P.prototype.intersectsRect=P.prototype.Me=function(a,b){u&&w.i(a,G,P,"intersectsRect:r");if(b===f&&(b=this.transform,0===this.angle))return a.Me(this.va);var c=this.Sa,d=b,e=new F(0,0),g=new F(0,c.height),i=new F(c.width,c.height),j=new F(c.width,0);if(a.ua(d.Ta(e))||a.ua(d.Ta(g))||a.ua(d.Ta(i))||a.ua(d.Ta(j)))return h;c=new G(0,0,c.width,c.height);return c.ua(d.Di(new F(a.x,a.y)))||c.ua(d.Di(new F(a.x,a.bottom)))||c.ua(d.Di(new F(a.right,a.bottom)))||c.ua(d.Di(new F(a.right,a.y)))||Tc(a,e,g)||Tc(a,
g,i)||Tc(a,i,j)||Tc(a,j,e)?h:q};P.prototype.getDocumentPoint=P.prototype.Ab=function(a){yb(a)&&w.m("Spot must be real");var b=this.Sa,a=new F(a.x*b.width+a.offsetX,a.y*b.height+a.offsetY);this.je.Ta(a);return a};P.prototype.getDocumentAngle=P.prototype.Xn=function(){var a=this.je;return Math.atan2(a.m12,a.m11)*(180/Math.PI)};P.prototype.getDocumentScale=P.prototype.Yl=function(){var a=this.Wb;return this.fa!==n?a*this.fa.Yl():a};P.prototype.getLocalPoint=P.prototype.UC=function(a){return this.je.Di(a.copy())};
P.prototype.getNearestIntersectionPoint=P.prototype.VC=function(a,b,c){return this.Xr(a.x,a.y,b.x,b.y,c)};da=P.prototype;
da.Xr=function(a,b,c,d,e){var g=this.transform,i=1/(g.m11*g.m22-g.m12*g.m21),j=g.m22*i,k=-g.m12*i,l=-g.m21*i,m=g.m11*i,p=i*(g.m21*g.dy-g.m22*g.dx),r=i*(g.m12*g.dx-g.m11*g.dy);if(this.Gk!==n)return g=this.va,Sc(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(!(this instanceof x)||this instanceof x&&this.background!==n)return i=a*j+b*l+p,a=a*k+b*m+r,j=c*j+d*l+p,c=c*k+d*m+r,e.V(0,0),d=this.Sa,c=Sc(0,0,d.width,d.height,i,a,j,c,e),e.transform(g),c;if(this instanceof x&&(this.Gk===n||this.Gk===f)){i=a*j+b*
l+p;a=a*k+b*m+r;j=c*j+d*l+p;d=c*k+d*m+r;e.V(j,d);k=(j-i)*(j-i)+(d-a)*(d-a);c=q;m=this.Fa.n;r=m.length;l=new F;for(p=0;p<r;p++)b=m[p],b.visible&&b.Xr(i,a,j,d,l)&&(c=h,b=(i-l.x)*(i-l.x)+(a-l.y)*(a-l.y),b<k&&(k=b,e.set(l)));e.transform(g);return c}w.m("Unknown GraphObject case");return q};
function Gh(a,b,c,d,e){if(a.ac!==q){var g=a.margin,i=g.top+g.bottom,b=Math.max(b-(g.right+g.left),0),c=Math.max(c-i,0),g=a.wa,i=0;a.eb&&(i=a.eb);var b=isFinite(g.width)?g.width+i:b,c=isFinite(g.height)?g.height+i:c,g=d,i=e,j=a instanceof x;switch(oj(a)){case ij:i=g=0;j&&(c=b=Infinity);break;case kd:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(i=c);break;case kj:isFinite(b)&&b>d&&(g=b);i=0;j&&(c=Infinity);break;case jj:isFinite(c)&&c>e&&(i=c),g=0,j&&(b=Infinity)}var j=a.ce,k=a.ve;g>j.width&&k.width<
j.width&&(g=j.width);i>j.height&&k.height<j.height&&(i=j.height);d=Math.max(g/a.scale,k.width);e=Math.max(i/a.scale,k.height);j.width<d&&(d=Math.min(k.width,d));j.height<e&&(e=Math.min(k.height,e));b=Math.min(j.width,b);c=Math.min(j.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.angle;if(90===g||270===g)g=b,b=c,c=g,g=d,d=e,e=g;a.Tc.Ia();a.js(b,c,d,e);a.Tc.freeze();a.Tc.T()||w.m("Non-real measuredBounds has been set");a.ac=q}}
da.Dc=function(a,b,c,d,e){pj(this);var g=this.GB;g.set(this.Ib);this.Ib.Ia();if(this.Jc===q){var i=this.Ib;i.x=a;i.y=b;i.width=c;i.height=d}else this.tj(a,b,c,d);this.Ib.freeze();this.ak=e===f?n:e;e!==f?this.il=h:this.fa&&(c=this.fa.Kc,d=this.xa,this.Gk!==n&&(d=this.Ib),e=b+d.height,i=a+d.width,this.il=!(0<=a&&i<=c.width&&0<=b&&e<=c.height),this instanceof na&&(this.Tt>d.height&&(this.il=h),this.Zp.Hi>d.width&&(this.il=h)));this.Ib.T()||w.m("Non-real actualBounds has been set");qj(this,g,this.Ib)};
da.tj=aa();function rj(a,b,c,d,e){var g=a.va;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.wa.T()){var g=a.Tc,c=a.margin,b=c.right+c.left,i=c.top+c.bottom,c=g.width+b,g=g.height+i,d=d+b,e=e+i,b=oj(a);c===d&&g===e&&(b=ij);switch(b){case ij:if(c>d||g>e)a.ac=h,Gh(a,c>d?d:c,g>e?e:g);break;case kd:a.ac=h;Gh(a,d,e,0,0);break;case kj:a.ac=h;Gh(a,d,g,0,0);break;case jj:a.ac=h,Gh(a,c,e,0,0)}}}
function qj(a,b,c){a.Jc=q;var d=a.ca;if(d!==n){var e=d.h;if(e!==n)if(sj(d),a instanceof S){d=q;if(e.Uh===q){var g=e.wc,i=e.padding,e=g.x+i.left,j=g.y+i.top,k=g.width-2*i.right,g=g.height-2*i.bottom;b.T()&&(b.x>e&&b.y>j&&b.right<k&&b.bottom<g&&c.x>e&&c.y>j&&c.right<k&&c.bottom<g)&&(d=h)}(a.hu===h||!b.I(c))&&Ni(a,d)}else if(tj(a,d),uj(a),b=a.ca,b!==n&&(b.Bk===a||b.El===a||b.Fl===a))b.hu=h}}function tj(a,b){a.Se!==n&&(b.hu=h);if(a instanceof x)for(var c=a.Fa,d=c.length,e=0;e<d;e++)tj(c.n[e],b)}
da.He=function(a,b){if(this.Kg)if(this instanceof x&&(this.type===vj||this.type===wj)){var c=this.Ib;0===c.width||(0===c.height||isNaN(c.x)||isNaN(c.y))||(this.we!==n&&(xj(this,a,this.we,h,h),a.fillRect(c.x,c.y,c.width,c.height)),this.xe!==n&&(xj(this,a,this.xe,h),a.fillRect(c.x,c.y,c.width,c.height)),this.Sn(a,b))}else{var d=q;if(this instanceof S){d=h;if(!this.nb())return;if(this.If){var e=this.jn;a.shadowOffsetX=e.x*b.scale;a.shadowOffsetY=e.y*b.scale;a.shadowColor=this.hn;a.shadowBlur=this.gn}}var g=
q;this.ca&&(g=this.ca.co);c=this.Ib;if(!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var e=this.transform,i=this.fa,j=this.sm;j.reset();i!==n&&(i.Ih()?j.multiply(i.je):i.fa!==n&&j.multiply(i.fa.je));j.multiply(this.Md);if(j=this.il){u&&u.sG&&u.trace("clip"+this.toString());var k=i.Ih()?i.Sa:i.va;if(this.ak)var l=this.ak,m=Math.max(l.x,Math.max(c.x,k.x)),p=Math.max(l.y,Math.max(c.y,k.y)),r=Math.abs(m-Math.min(l.right,Math.min(c.right,k.right))),l=Math.abs(p-Math.min(l.bottom,Math.min(c.bottom,
k.bottom)));else m=Math.max(c.x,k.x),p=Math.max(c.y,k.y),r=Math.min(c.right,k.right)-m,l=Math.min(c.bottom,k.bottom)-p;if(m>c.width+c.x||c.x>k.width+k.x||p>c.height+c.y||c.y>k.height+k.y)return;a.save();a.beginPath();a.rect(m,p,r,l);a.clip()}this.we!==n&&(xj(this,a,this.we,h,h),a.fillRect(c.x,c.y,c.width,c.height));e.ds()||a.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);this.xe!==n&&(p=this.Sa,k=c=0,m=p.width,p=p.height,r=0,this instanceof V&&(p=this.Ga.Fb,c=p.x,k=p.y,m=p.width,p=p.height,r=this.ph),
xj(this,a,this.xe,h),a.fillRect(c-r/2,k-r/2,m+r,p+r));if(g&&(this.xe!==n||this.we!==n||i!==n&&i.tm||i!==n&&i.type===Wh&&i.Gl!==this)){this.tm=h;var s=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.tm=q;this.Sn(a,b);g&&this.tm===h&&(a.shadowOffsetX=s[0],a.shadowOffsetY=s[1],a.shadowBlur=s[2]);d&&g&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);j?(a.restore(),ki(b,a)):e.ds()||(d=1/(e.m11*e.m22-e.m12*e.m21),a.transform(e.m22*d,-e.m12*
d,-e.m21*d,e.m11*d,d*(e.m21*e.dy-e.m22*e.dx),d*(e.m12*e.dx-e.m11*e.dy)))}}};da.Sn=aa();
function xj(a,b,c,d,e){if(c!==n)if("string"===typeof c)d?b.om!==c&&(b.fillStyle=c,b.om=c):b.pm!==c&&(b.strokeStyle=c,b.pm=c);else if(c.type===He)c=c.color,d?b.om!==c&&(b.fillStyle=c,b.om=c):b.pm!==c&&(b.strokeStyle=c,b.pm=c);else{var g,i=a.Sa,j=i.width,i=i.height;if(c.vg&&c.type===fj||c.vA==j&&c.uA==i)g=c.vg;else{var k,l,m,p=m=0;e&&(a=a.va,j=a.width,i=a.height,m=a.x,p=a.y);c.start instanceof F?(a=c.start.x,e=c.start.y):c.start instanceof H?(a=c.start.x*j,e=c.start.y*i):(a=Ob.x*j,e=Ob.y*i);c.end instanceof
F?(k=c.end.x,l=c.end.y):c.end instanceof H?(k=c.end.x*j,l=c.end.y*i):c.type===Ie?(k=Qb.x*j,l=Qb.y*i):(k=Ob.x*j,l=Ob.y*i);a+=m;k+=m;e+=p;l+=p;c.type===Ie?g=b.createLinearGradient(a,e,k,l):c.type===Je?(m=isNaN(c.Tn)?Math.max(j,i)/2:c.Tn,isNaN(c.Fo)?(g=0,m=Math.max(j,i)/2):g=c.Fo,g=b.createRadialGradient(a,e,g,k,l,m)):c.type===fj?g=b.createPattern(c.pattern,"repeat"):w.ic(c.type,"Brush type");if(c.type!==fj&&(m=c.Nn))for(m=m.l;m.next();)g.addColorStop(m.key,m.value);c.vg=g;c.vA=j;c.uA=i}d?b.om!==g&&
(b.fillStyle=g,b.om=g):b.pm!==g&&(b.strokeStyle=g,b.pm=g)}}P.prototype.isContainedBy=P.prototype.Ei=function(a){if(a instanceof x)a:{if(!(this===a||a===n))for(var b=this.fa;b!==n;){if(b===a){a=h;break a}b=b.fa}a=q}else a=q;return a};P.prototype.isVisibleObject=P.prototype.Tk=function(){if(!this.visible)return q;var a=this.fa;return a!==n?a.Tk():h};
function yj(a){if(a.Pm===h){var b=a.Md;b.reset();if(!a.Ib.T()||!a.Tc.T()){a.Pm=q;return}b.translate(a.Ib.x,a.Ib.y);b.translate(-a.xa.x,-a.xa.y);var c=a.Sa;mj(a,b,c.x,c.y,c.width,c.height);a.Pm=q;a.ol=h}a.ol===h&&(a.fa===n?(a.sm.set(a.Md),a.ol=q):a.fa.je!==n&&(b=a.sm,b.reset(),b.multiply(a.fa.sm),b.multiply(a.Md),a.ol=q))}
function mj(a,b,c,d,e,g){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var i=Ob;a.ag&&sb(a.ag)&&(i=a.ag);var j=new F;if(a instanceof S&&a.Yb!==a){c=a.Yb;d=c.Sa;j.im(d.x,d.y,d.width,d.height,i);c.uk.Ta(j);j.offset(-c.xa.x,-c.xa.y);for(i=c.fa;i!==n&&i!==a;)i.uk.Ta(j),j.offset(-i.xa.x,-i.xa.y),i=i.fa}else j.im(c,d,e,g,i);b.rotate(a.angle,j.x,j.y)}}
P.prototype.R=function(a){if(this.ac!==h){this.Jc=this.ac=h;this.fa!==n?a||(this.fa.ac=q,this.fa.R()):(a=this.h,a!==n&&(a.dh.add(this),this instanceof T&&(a.sa.tb||this.Og(),this.yd!==n&&Bj(this.yd)),a.yb()));if(this instanceof x){var a=this.S===Wh,b=n,c=this.Fa,d=c.length;a&&(b=Jj(this,c,d));for(var e=0;e<d;e++){var g=c.n[e];a&&g===b?g.R(h):g.wa.T()||(g instanceof bh||g instanceof x||oj(g)!==ij)&&g.R(h)}}uj(this)}};
function Mj(a){if(a.ac===q&&(a.ac=h,a.Jc=h,a instanceof x))for(var a=a.Fa.n,b=a.length,c=0;c<b;c++)Mj(a[c])}function Bj(a){if(a.Jc===q){if(a.fa!==n)Bj(a.fa);else{var b=a.h;b!==n&&(b.dh.add(a),a instanceof T&&a.Og(),b.yb())}a.Jc=h}}function pj(a){if(a.Pm===q&&(a.Pm=h,a.ol=h,a instanceof x))for(a=a.elements;a.next();)Nj(a.value)}function Nj(a){a.ol=h;if(a instanceof x)for(a=a.elements;a.next();)Nj(a.value)}function uj(a){if(a.fa!==n)uj(a.fa);else{var b=a.h;b!==n&&a.Ib.T()&&Lh(b,a.Ib)}}
function oj(a){var b=a.Gh,c=a.fa;if(c&&c.S===Oj)return Pj(a,c.$d(a.nc),c.Zd(a.Ec));if(c&&c.S===Wh){if(c.Gl===n){var d=c.Fa,e=d.length;Jj(c,d,e)}if(c.Gl===a)return kd}if(b===ch){if(c){c.S===ah&&c.Gl===n&&(d=c.Fa,e=d.length,Jj(c,d,e));if(c.Gl===a)return kd;a=c.Uy;return a===ch?ij:a}return ij}return b}
function Pj(a,b,c){var d=a.Gh;if(d!==ch)return d;var e=d=f;switch(b.Gh){case jj:e=h;break;case kd:e=h}switch(c.Gh){case kj:d=h;break;case kd:d=h}a=a.fa.Uy;d=d===f&&(a===kj||a===kd)?h:q;e=e===f&&(a===jj||a===kd)?h:q;return d===h&&e===h?kd:d===h?kj:e===h?jj:ij}w.g(P,"segmentOrientation",P.prototype.zs);w.defineProperty(P,{zs:"segmentOrientation"},t("Vq"),function(a){var b=this.Vq;b!==a&&(u&&w.jb(a,U,P,"segmentOrientation"),this.Vq=a,this.R(),this.j("segmentOrientation",b,a))});
w.g(P,"segmentIndex",P.prototype.Eh);w.defineProperty(P,{Eh:"segmentIndex"},t("Tq"),function(a){u&&w.k(a,"number",P,"segmentIndex");var a=Math.round(a),b=this.Tq;b!==a&&(this.Tq=a,this.R(),this.j("segmentIndex",b,a))});w.g(P,"segmentFraction",P.prototype.Nz);w.defineProperty(P,{Nz:"segmentFraction"},t("Sq"),function(a){u&&w.k(a,"number",P,"segmentFraction");isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.Sq;b!==a&&(this.Sq=a,this.R(),this.j("segmentFraction",b,a))});w.g(P,"segmentOffset",P.prototype.Oz);
w.defineProperty(P,{Oz:"segmentOffset"},t("Uq"),function(a){var b=this.Uq;b.I(a)||(u&&w.i(a,F,P,"segmentOffset"),this.Uq=a=a.O(),this.R(),this.j("segmentOffset",b,a))});w.g(P,"stretch",P.prototype.Gh);w.defineProperty(P,{Gh:"stretch"},t("oh"),function(a){var b=this.oh;b!==a&&(u&&w.jb(a,P,P,"stretch"),this.oh=a,this.R(),this.j("stretch",b,a))});w.g(P,"name",P.prototype.name);
w.defineProperty(P,{name:"name"},t("Bb"),function(a){var b=this.Bb;b!==a&&(u&&w.k(a,"string",P,"name"),this.Bb=a,this.j("name",b,a))});w.g(P,"visible",P.prototype.visible);w.defineProperty(P,{visible:"visible"},t("Kg"),function(a){var b=this.Kg;b!==a&&(u&&w.k(a,"boolean",P,"visible"),this.Kg=a,this.j("visible",b,a),b=this.fa,b!==n?b.R():this instanceof S&&(this.R(),sj(this),a?(this.F(Qj),this.Ki()):(this.F(Rj),this.wh())),uj(this),Sj(this))});w.g(P,"areaBackground",P.prototype.Gk);
w.defineProperty(P,{Gk:"areaBackground"},t("we"),function(a){var b=this.we;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.we=a,uj(this),this.j("areaBackground",b,a)});w.g(P,"background",P.prototype.background);w.defineProperty(P,{background:"background"},t("xe"),function(a){var b=this.xe;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.xe=a,uj(this),this.j("background",b,a)});
w.u(P,{ca:"part"},function(){if(this instanceof S)return this;if(this.Dl)return this.Dl;var a;for(a=this.fa;a;){if(a instanceof S)return this.Dl=a;a=a.fa}return n});P.prototype.Zk=ba("xk");w.u(P,{fa:"panel"},t("xk"));w.u(P,{Ja:"layer"},function(){var a=this.ca;return a!==n?a.Ja:n});w.u(P,{h:"diagram"},function(){var a=this.ca;return a!==n?a.h:n},{configurable:h});w.g(P,"position",P.prototype.position);
w.defineProperty(P,{position:"position"},t("rb"),function(a){var b=this.rb;if(!b.I(a)){u&&w.i(a,F,P,"position");if(this instanceof S){if(!a.T())return;var c=this.bj,d=this.Pt,e=c.copy();c.V(a.x+d.x,a.y+d.y);c.I(e)||this.j("location",e,c);if(this.Jc===q){this.rb=a=a.O();Tj(this);pj(this);this.j("position",b,a);return}}this.rb=a=a.O();Bj(this);pj(this);this.j("position",b,a)}});w.u(P,{va:"actualBounds"},t("Ib"));w.g(P,"scale",P.prototype.scale);
w.defineProperty(P,{scale:"scale"},t("Wb"),function(a){var b=this.Wb;b!==a&&(u&&w.o(a,P,"scale"),0>=a&&w.m("GraphObject.scale must be greater than zero"),this.Wb=a,pj(this),this.R(),this.j("scale",b,a))});w.g(P,"angle",P.prototype.angle);w.defineProperty(P,{angle:"angle"},t("oc"),function(a){var b=this.oc;b!==a&&(u&&w.o(a,P,"angle"),a%=360,0>a&&(a+=360),this.oc=a,this.R(),pj(this),this.j("angle",b,a))});w.g(P,"desiredSize",P.prototype.wa);
w.defineProperty(P,{wa:"desiredSize"},t("Ae"),function(a){var b=this.Ae;b.I(a)||(u&&w.i(a,bb,P,"desiredSize"),this.Ae=a=a.O(),this.R(),this instanceof V&&this.Zf(),this.j("desiredSize",b,a))});w.g(P,"width",P.prototype.width);w.defineProperty(P,{width:"width"},function(){return this.Ae.width},function(a){if(this.Ae.width!==a){u&&w.k(a,"number",P,"width");var b=this.Ae;this.Ae=a=(new bb(a,this.Ae.height)).freeze();this.R();this instanceof V&&this.Zf();this.j("desiredSize",b,a)}});w.g(P,"height",P.prototype.height);
w.defineProperty(P,{height:"height"},function(){return this.Ae.height},function(a){if(this.Ae.height!==a){u&&w.k(a,"number",P,"height");var b=this.Ae;this.Ae=a=(new bb(this.Ae.width,a)).freeze();this.R();this instanceof V&&this.Zf();this.j("desiredSize",b,a)}});w.g(P,"minSize",P.prototype.ve);
w.defineProperty(P,{ve:"minSize"},t("Td"),function(a){var b=this.Td;b.I(a)||(u&&w.i(a,bb,P,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Td=a,this.R(),this.j("minSize",b,a))});w.g(P,"maxSize",P.prototype.ce);w.defineProperty(P,{ce:"maxSize"},t("dj"),function(a){var b=this.dj;b.I(a)||(u&&w.i(a,bb,P,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.dj=a,this.R(),this.j("maxSize",b,a))});
w.u(P,{xa:"measuredBounds"},t("Tc"));w.u(P,{Sa:"naturalBounds"},t("Kc"),{configurable:h});w.g(P,"margin",P.prototype.margin);w.defineProperty(P,{margin:"margin"},t("gq"),function(a){"number"===typeof a?a=new hb(a):u&&w.i(a,hb,P,"margin");var b=this.gq;b.I(a)||(this.gq=a=a.O(),this.R(),this.j("margin",b,a))});w.u(P,{transform:n},function(){this.Pm===h&&yj(this);return this.Md});w.u(P,{je:n},function(){this.ol===h&&yj(this);return this.sm});w.g(P,"alignment",P.prototype.Db);
w.defineProperty(P,{Db:"alignment"},t("Aa"),function(a){var b=this.Aa;b.I(a)||(u?w.i(a,H,P,"alignment"):yb(a)&&!Cb(a)&&w.m("alignment must be a real Spot or Spot.Default"),this.Aa=a=a.O(),Bj(this),this.j("alignment",b,a))});w.g(P,"column",P.prototype.Ec);w.defineProperty(P,{Ec:"column"},t("Y"),function(a){u&&w.o(a,P,"column");var a=Math.round(a),b=this.Y;b!==a&&(0>a&&w.ra(a,">= 0",P,"column"),this.Y=a,this.R(),this.j("column",b,a))});w.g(P,"columnSpan",P.prototype.lC);
w.defineProperty(P,{lC:"columnSpan"},t("bk"),function(a){u&&w.o(a,P,"columnSpan");var a=Math.round(a),b=this.bk;b!==a&&(1>a&&w.ra(a,">= 1",P,"columnSpan"),this.bk=a,this.R(),this.j("columnSpan",b,a))});w.g(P,"row",P.prototype.nc);w.defineProperty(P,{nc:"row"},t("Qq"),function(a){u&&w.o(a,P,"row");var a=Math.round(a),b=this.Qq;b!==a&&(0>a&&w.ra(a,">= 0",P,"row"),this.Qq=a,this.R(),this.j("row",b,a))});w.g(P,"rowSpan",P.prototype.rowSpan);
w.defineProperty(P,{rowSpan:"rowSpan"},t("Ak"),function(a){u&&w.o(a,P,"rowSpan");var a=Math.round(a),b=this.Ak;b!==a&&(1>a&&w.ra(a,">= 1",P,"rowSpan"),this.Ak=a,this.R(),this.j("rowSpan",b,a))});w.g(P,"isPanelMain",P.prototype.Gi);w.defineProperty(P,{Gi:"isPanelMain"},t("Op"),function(a){var b=this.Op;b!==a&&(u&&w.k(a,"boolean",P,"isPanelMain"),this.Op=a,this.R(),this.j("isPanelMain",b,a))});w.g(P,"alignmentFocus",P.prototype.pj);
w.defineProperty(P,{pj:"alignmentFocus"},t("Qo"),function(a){var b=this.Qo;b.I(a)||(u?w.i(a,H,P,"alignmentFocus"):yb(a)&&!Cb(a)&&w.m("alignmentFocus must be a real Spot or Spot.Default"),this.Qo=a=a.O(),this.R(),this.j("alignmentFocus",b,a))});w.g(P,"portId",P.prototype.Se);
w.defineProperty(P,{Se:"portId"},t("Bq"),function(a){var b=this.Bq;if(b!==a){u&&a!==n&&w.k(a,"string",P,"portId");var c=this.ca;c!==n&&!(c instanceof T)&&(w.m("portID being set on a Link: "+a),c=n);b!==n&&c&&Uj(c,this);this.Bq=a;a!==n&&c&&(c.bd===n&&Vj(c),Wj(c,this));this.j("portId",b,a)}});function Xj(a){var b={value:n};Yj(a,b);return b.value}function Yj(a,b){var c=a.fa;return c===n||!Yj(c,b)&&a.visible?(b.value=a,q):h}function Sj(a){var b=a.ca;b instanceof T&&(a=a.h)&&!a.sa.tb&&b.Og()}
w.g(P,"toSpot",P.prototype.ob);w.defineProperty(P,{ob:"toSpot"},t("uh"),function(a){var b=this.uh;b.I(a)||(u&&w.i(a,H,P,"toSpot"),this.uh=a=a.O(),this.j("toSpot",b,a),Sj(this))});w.g(P,"toEndSegmentLength",P.prototype.al);w.defineProperty(P,{al:"toEndSegmentLength"},t("rh"),function(a){var b=this.rh;b!==a&&(u&&w.k(a,"number",P,"toEndSegmentLength"),0>a&&w.ra(a,">= 0",P,"toEndSegmentLength"),this.rh=a,this.j("toEndSegmentLength",b,a),Sj(this))});w.g(P,"toEndSegmentDirection",P.prototype.Hs);
w.defineProperty(P,{Hs:"toEndSegmentDirection"},t("qh"),function(a){var b=this.qh;b!==a&&(u&&w.jb(a,T,P,"toEndSegmentDirection"),this.qh=a,this.j("toEndSegmentDirection",b,a),Sj(this))});w.g(P,"toShortLength",P.prototype.Is);w.defineProperty(P,{Is:"toShortLength"},t("th"),function(a){var b=this.th;b!==a&&(u&&w.k(a,"number",P,"toShortLength"),this.th=a,this.j("toShortLength",b,a),Sj(this))});w.g(P,"toLinkable",P.prototype.Zz);
w.defineProperty(P,{Zz:"toLinkable"},t("lr"),function(a){var b=this.lr;b!==a&&(u&&a!==n&&w.k(a,"boolean",P,"toLinkable"),this.lr=a,this.j("toLinkable",b,a))});w.g(P,"toLinkableDuplicates",P.prototype.DE);w.defineProperty(P,{DE:"toLinkableDuplicates"},t("mr"),function(a){var b=this.mr;b!==a&&(u&&w.k(a,"boolean",P,"toLinkableDuplicates"),this.mr=a,this.j("toLinkableDuplicates",b,a))});w.g(P,"toLinkableSelfNode",P.prototype.EE);
w.defineProperty(P,{EE:"toLinkableSelfNode"},t("nr"),function(a){var b=this.nr;b!==a&&(u&&w.k(a,"boolean",P,"toLinkableSelfNode"),this.nr=a,this.j("toLinkableSelfNode",b,a))});w.g(P,"toMaxLinks",P.prototype.FE);w.defineProperty(P,{FE:"toMaxLinks"},t("or"),function(a){var b=this.or;b!==a&&(u&&w.o(a,P,"toMaxLinks"),0>a&&w.ra(a,">= 0",P,"toMaxLinks"),this.or=a,this.j("toMaxLinks",b,a))});w.g(P,"fromSpot",P.prototype.kb);
w.defineProperty(P,{kb:"fromSpot"},t("$g"),function(a){var b=this.$g;b.I(a)||(u&&w.i(a,H,P,"fromSpot"),this.$g=a=a.O(),this.j("fromSpot",b,a),Sj(this))});w.g(P,"fromEndSegmentLength",P.prototype.Ok);w.defineProperty(P,{Ok:"fromEndSegmentLength"},t("Xg"),function(a){var b=this.Xg;b!==a&&(u&&w.k(a,"number",P,"fromEndSegmentLength"),0>a&&w.ra(a,">= 0",P,"fromEndSegmentLength"),this.Xg=a,this.j("fromEndSegmentLength",b,a),Sj(this))});w.g(P,"fromEndSegmentDirection",P.prototype.Vr);
w.defineProperty(P,{Vr:"fromEndSegmentDirection"},t("Wg"),function(a){var b=this.Wg;b!==a&&(u&&w.jb(a,T,P,"fromEndSegmentDirection"),this.Wg=a,this.j("fromEndSegmentDirection",b,a),Sj(this))});w.g(P,"fromShortLength",P.prototype.Wr);w.defineProperty(P,{Wr:"fromShortLength"},t("Zg"),function(a){var b=this.Zg;b!==a&&(u&&w.k(a,"number",P,"fromShortLength"),this.Zg=a,this.j("fromShortLength",b,a),Sj(this))});w.g(P,"fromLinkable",P.prototype.bz);
w.defineProperty(P,{bz:"fromLinkable"},t("vp"),function(a){var b=this.vp;b!==a&&(u&&a!==n&&w.k(a,"boolean",P,"fromLinkable"),this.vp=a,this.j("fromLinkable",b,a))});w.g(P,"fromLinkableDuplicates",P.prototype.OC);w.defineProperty(P,{OC:"fromLinkableDuplicates"},t("wp"),function(a){var b=this.wp;b!==a&&(u&&w.k(a,"boolean",P,"fromLinkableDuplicates"),this.wp=a,this.j("fromLinkableDuplicates",b,a))});w.g(P,"fromLinkableSelfNode",P.prototype.PC);
w.defineProperty(P,{PC:"fromLinkableSelfNode"},t("xp"),function(a){var b=this.xp;b!==a&&(u&&w.k(a,"boolean",P,"fromLinkableSelfNode"),this.xp=a,this.j("fromLinkableSelfNode",b,a))});w.g(P,"fromMaxLinks",P.prototype.QC);w.defineProperty(P,{QC:"fromMaxLinks"},t("yp"),function(a){var b=this.yp;b!==a&&(u&&w.o(a,P,"fromMaxLinks"),0>a&&w.ra(a,">= 0",P,"fromMaxLinks"),this.yp=a,this.j("fromMaxLinks",b,a))});w.g(P,"cursor",P.prototype.cursor);
w.defineProperty(P,{cursor:"cursor"},t("ap"),function(a){var b=this.ap;b!==a&&(w.k(a,"string",P,"cursor"),this.ap=a,this.j("cursor",b,a))});w.g(P,"click",P.prototype.click);w.defineProperty(P,{click:"click"},t("Mh"),function(a){var b=this.Mh;b!==a&&(a!==n&&w.k(a,"function",P,"click"),this.Mh=a,this.j("click",b,a))});w.g(P,"doubleClick",P.prototype.Tl);
w.defineProperty(P,{Tl:"doubleClick"},t("Qh"),function(a){var b=this.Qh;b!==a&&(a!==n&&w.k(a,"function",P,"doubleClick"),this.Qh=a,this.j("doubleClick",b,a))});w.g(P,"contextClick",P.prototype.Ir);w.defineProperty(P,{Ir:"contextClick"},t("Nh"),function(a){var b=this.Nh;b!==a&&(a!==n&&w.k(a,"function",P,"contextClick"),this.Nh=a,this.j("contextClick",b,a))});w.g(P,"mouseEnter",P.prototype.yz);
w.defineProperty(P,{yz:"mouseEnter"},t("rq"),function(a){var b=this.rq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseEnter"),this.rq=a,this.j("mouseEnter",b,a))});w.g(P,"mouseLeave",P.prototype.zz);w.defineProperty(P,{zz:"mouseLeave"},t("sq"),function(a){var b=this.sq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseLeave"),this.sq=a,this.j("mouseLeave",b,a))});w.g(P,"mouseOver",P.prototype.os);
w.defineProperty(P,{os:"mouseOver"},t("di"),function(a){var b=this.di;b!==a&&(a!==n&&w.k(a,"function",P,"mouseOver"),this.di=a,this.j("mouseOver",b,a))});w.g(P,"mouseHover",P.prototype.ns);w.defineProperty(P,{ns:"mouseHover"},t("ci"),function(a){var b=this.ci;b!==a&&(a!==n&&w.k(a,"function",P,"mouseHover"),this.ci=a,this.j("mouseHover",b,a))});w.g(P,"mouseHold",P.prototype.ms);
w.defineProperty(P,{ms:"mouseHold"},t("bi"),function(a){var b=this.bi;b!==a&&(a!==n&&w.k(a,"function",P,"mouseHold"),this.bi=a,this.j("mouseHold",b,a))});w.g(P,"mouseDragEnter",P.prototype.HD);w.defineProperty(P,{HD:"mouseDragEnter"},t("pq"),function(a){var b=this.pq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseDragEnter"),this.pq=a,this.j("mouseDragEnter",b,a))});w.g(P,"mouseDragLeave",P.prototype.xz);
w.defineProperty(P,{xz:"mouseDragLeave"},t("qq"),function(a){var b=this.qq;b!==a&&(a!==n&&w.k(a,"function",P,"mouseDragLeave"),this.qq=a,this.j("mouseDragLeave",b,a))});w.g(P,"mouseDrop",P.prototype.ls);w.defineProperty(P,{ls:"mouseDrop"},t("ai"),function(a){var b=this.ai;b!==a&&(a!==n&&w.k(a,"function",P,"mouseDrop"),this.ai=a,this.j("mouseDrop",b,a))});w.g(P,"actionDown",P.prototype.wy);
w.defineProperty(P,{wy:"actionDown"},t("Mo"),function(a){var b=this.Mo;b!==a&&(a!==n&&w.k(a,"function",P,"actionDown"),this.Mo=a,this.j("actionDown",b,a))});w.g(P,"actionUp",P.prototype.yy);w.defineProperty(P,{yy:"actionUp"},t("Oo"),function(a){var b=this.Oo;b!==a&&(a!==n&&w.k(a,"function",P,"actionUp"),this.Oo=a,this.j("actionUp",b,a))});w.g(P,"actionMove",P.prototype.xy);
w.defineProperty(P,{xy:"actionMove"},t("No"),function(a){var b=this.No;b!==a&&(a!==n&&w.k(a,"function",P,"actionMove"),this.No=a,this.j("actionMove",b,a))});w.g(P,"actionCancel",P.prototype.vy);w.defineProperty(P,{vy:"actionCancel"},t("Lo"),function(a){var b=this.Lo;b!==a&&(a!==n&&w.k(a,"function",P,"actionCancel"),this.Lo=a,this.j("actionCancel",b,a))});w.g(P,"toolTip",P.prototype.Js);
w.defineProperty(P,{Js:"toolTip"},t("oi"),function(a){var b=this.oi;b!==a&&(a!==n&&w.i(a,of,P,"toolTip"),this.oi=a,this.j("toolTip",b,a))});w.g(P,"contextMenu",P.prototype.contextMenu);w.defineProperty(P,{contextMenu:"contextMenu"},t("Oh"),function(a){var b=this.Oh;b!==a&&(a!==n&&w.i(a,of,P,"contextMenu"),this.Oh=a,this.j("contextMenu",b,a))});w.g(P,"isActionable",P.prototype.zv);
w.defineProperty(P,{zv:"isActionable"},t("Hp"),function(a){var b=this.Hp;b!==a&&(w.k(a,"boolean",P,"isActionable"),this.Hp=a,this.j("isActionable",b,a))});w.g(P,"pickable",P.prototype.RD);w.defineProperty(P,{RD:"pickable"},t("Nf"),function(a){var b=this.Nf;b!==a&&(w.k(a,"boolean",P,"pickable"),this.Nf=a,this.j("pickable",b,a))});
P.prototype.bind=P.prototype.bind=function(a){a.Sf=this;var b=this.Tr();b!==n&&Zj(b)&&w.m("Cannot add a Binding to a template that has already been copied: "+a);this.pc===n&&(this.pc=new z(df));this.pc.add(a)};P.prototype.findTemplateBinder=P.prototype.Tr=function(){for(var a=this instanceof x?this:this.fa;a!==n;){if(a.gl!==n&&a instanceof x)return a;a=a.fa}return n};P.fromSvg=function(a){return $j(a)};var ak;
P.make=ak=function(a,b){var c=n,d=n;if("function"===typeof a)d=a;else if("string"===typeof a){var e=bk.qa(a);"function"===typeof e?c=e():d=ea[a]}c===n&&(d===f&&(c=window.$,c!==f&&c.noop!==f&&w.m("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),w.m("GraphObject.make failed to complete, it may be conflicting with another var.")),(d===n||!d.constructor)&&w.m("GraphObject.make requires a class function or class name, not: "+a),c=new d);e=1;c instanceof A&&
1<arguments.length&&(d=arguments[1],"string"===typeof d||d instanceof HTMLDivElement?(c.wi=n,di(c,d),e++):w.m("Unknown argument to Diagram constructor: "+d));for(;e<arguments.length;e++)if(d=arguments[e],d===f)w.m("Undefined value at argument "+e+" for object being constructed by GraphObject.make: "+c);else if("string"===typeof d)if(c instanceof na)c.text=d;else if(c instanceof V)c.gb=d;else if(c instanceof ck)c.source=d;else if(c instanceof x){var g=w.Vl(x,d);g!==n?c.type=g:w.m("Unknown Panel type as an argument to GraphObject.make: "+
d)}else c instanceof Fe?(g=w.Vl(Fe,d),g!==n?c.type=g:w.m("Unknown Brush type as an argument to GraphObject.make: "+d)):c instanceof hd?(g=w.Vl(hd,d),g!==n?c.type=g:w.m("Unknown Geometry type as an argument to GraphObject.make: "+d)):c instanceof Ed?(g=w.Vl(Ed,d),g!==n?c.type=g:w.m("Unknown PathSegment type as an argument to GraphObject.make: "+d)):w.m("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof P)c instanceof x||w.m("A GraphObject can only be added to a Panel, not to: "+
c),c.add(d);else if(d instanceof dk)c instanceof x||w.m("A RowColumnDefinition can only be added to a Panel, not to: "+c),g=d.Fv?c.$d(d.index):c.Zd(d.index),w.i(d,dk,dk,"copyFrom:pd"),d.Fv?g.height=d.height:g.width=d.width,g.bg=d.bg,g.de=d.de,g.Db=d.Db,g.Ds=d.Ds,g.pc=d.pc;else if(d instanceof ja)c instanceof U&&d.me===U?d===ek||d===Tf?c.Dh=d:d===fk||d===gk||d===hk?c.wf=d:d===ik||d===jk||d===kk?c.Tu=d:d===lk||d===hj||w.m("Unknown Link enum value for a Link property: "+d):c instanceof x&&d.me===x?c.type=
d:c instanceof na&&d.me===na?c.eA=d:c instanceof P&&d.me===U?0===d.name.indexOf("Orient")?c.zs=d:w.m("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof P&&d.me===P?c.Gh=d:c instanceof A&&d.me===A?c.Ey=d:c instanceof Fe&&d.me===Fe?c.type=d:c instanceof hd&&d.me===hd?c.type=d:c instanceof Ed&&d.me===Ed?c.type=d:c instanceof df&&d.me===df?c.mode=d:c instanceof ge&&d.me===ge?c.hd=d:c instanceof W&&d.me===W?0===d.name.indexOf("Alignment")?c.Db=d:0===d.name.indexOf("Arrangement")?
c.le=d:0===d.name.indexOf("Compaction")?c.ev=d:0===d.name.indexOf("Path")?c.path=d:0===d.name.indexOf("Sorting")?c.lg=d:0===d.name.indexOf("Style")?c.NE=d:w.m("Unknown enum value: "+d):c instanceof X&&d.me===X?0===d.name.indexOf("Aggressive")?c.XB=d:0===d.name.indexOf("Cycle")?c.uC=d:0===d.name.indexOf("Init")?c.jD=d:0===d.name.indexOf("Layer")?c.tD=d:w.m("Unknown enum value: "+d):c instanceof cj&&d.me===cj?d===mk||d===nk||d===ok||d===pk?c.lg=d:d===qk||d===rk?c.le=d:d===sk||d===tk?c.Db=d:w.m("Unknown enum value: "+
d):c instanceof uk&&d.me===uk?d===vk||d===wk||d===xk||d===yk||d===zk?c.lg=d:d===Ak||d===Bk||d===Ck||d===Dk?c.direction=d:d===Ek||d===Fk||d===Gk||d===Hk?c.le=d:d===Ik||d===Jk?c.rs=d:w.m("Unknown enum value: "+d):w.m("No property to set for this enum value: "+d);else if(d instanceof df)c instanceof P||c instanceof dk?c.bind(d):w.m("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof jd)c instanceof hd?c.sb.add(d):w.m("A PathFigure can only be added to a Geometry, not to: "+
c);else if(d instanceof Ed)c instanceof jd?c.za.add(d):w.m("A PathSegment can only be added to a PathFigure, not to: "+c);else if(w.mb(d))if(c instanceof Fe){var g={},i;for(i in d){var j=parseFloat(i);isNaN(j)?g[i]=d[i]:c.addColorStop(j,d[i])}w.Qz(c,g)}else c instanceof dk?(d.row!==f?(g=d.row,(g===f||g===n||Infinity===g||isNaN(g)||0>g)&&w.m("Must specify non-negative integer row for RowColumnDefinition "+d),c.sl=h,c.ea=g):d.column!==f?(g=d.column,(g===f||g===n||Infinity===g||isNaN(g)||0>g)&&w.m("Must specify non-negative integer column for RowColumnDefinition "+
d),c.sl=q,c.ea=g):w.m("Must specify row or column value in a RowColumnDefinition "+d),g=w.gG(d,"row","column"),w.Qz(c,g)):w.Qz(c,d);else w.m('Unknown initializer "'+d+'" for object being constructed by GraphObject.make: '+c);return c};var bk;P.Builders=bk=new la("string","function");
bk.add("Button",function(){var a=new Fe(Ie);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Fe(Ie);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=ak(x,Wh,{zv:h},ak(V,{name:"ButtonBorder",gb:"RoundedRectangle",fill:a,stroke:"gray"}));c.yz=function(a,c){var g=c.oa(0),i=c._buttonFillOver;i===f&&(i=b);c._buttonFillNormal=g.fill;g.fill=i;i=c._buttonStrokeOver;i===f&&(i="blue");c._buttonStrokeNormal=g.stroke;g.stroke=i};c.zz=function(b,c){var g=c.oa(0),i=c._buttonFillNormal;
i===f&&(i=a);g.fill=i;i=c._buttonStrokeNormal;i===f&&(i="gray");g.stroke=i};return c});
bk.add("TreeExpanderButton",function(){var a=ak("Button",ak(V,{name:"ButtonIcon",gb:"MinusLine",wa:new bb(6,6)},(new df("figure","isTreeExpanded",function(a,c){var d=n,e=c.fa;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Ez("")),{visible:q},(new df("visible","isTreeLeaf",function(a){return!a})).Ez(""));a.click=function(a,c){var d=c.ca;if(d instanceof T){var e=d.h;e===n||e.cb||(a.ae=h,d.Oe?e.Xf.collapseTree(d):e.Xf.expandTree(d))}};return a});
bk.add("SubGraphExpanderButton",function(){var a=ak("Button",ak(V,{name:"ButtonIcon",gb:"MinusLine",wa:new bb(6,6)},(new df("figure","isSubGraphExpanded",function(a,c){var d=n,e=c.fa;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Ez("")));a.click=function(a,c){var d=c.ca;if(d instanceof xf){var e=d.h;e===n||e.cb||(a.ae=h,d.Ne?e.Xf.collapseSubGraph(d):e.Xf.expandSubGraph(d))}};return a});
bk.add("ContextMenuButton",function(){var a=ak("Button");a.Gh=kj;var b=a.Je("ButtonBorder");b instanceof V&&(b.gb="Rectangle",b.v=new H(0,0,2,2),b.w=new H(1,1,-2,-2));return a});
function x(a){P.call(this);a===f?0===arguments.length?this.S=hh:w.m("invalid argument to Panel constructor: undefined"):(w.jb(a,x,x,"type"),this.S=a);this.Fa=new z(P);this.ie=(new hb).freeze();this.dp=Ib;this.$b=ch;this.eh=q;this.S===ti&&(this.eh=h);this.gi=1;this.nf=[];this.Ze=[];this.Wo=this.Rq=Kk;this.Vm=this.rn=0;this.vn=dh;this.Cp=(new bb(10,10)).freeze();this.Dp=(new F(0,0)).freeze();this.gl=this.Am=n;this.vx="";this.Ag=this.sk=n;this.Qm="category";this.Jf=n;this.Xb=new G(NaN,NaN,NaN,NaN);this.kF=
new G(0,0,0,0);this.uI=new bb(0,0);this.Gl=n}w.P("Panel",x);w.Da(x,P);
x.prototype.xb=function(a){P.prototype.xb.call(this,a);a.S=this.S;a.ie.Xa(this.ie);a.dp=this.dp.O();a.$b=this.$b;if(0<this.nf.length){for(var b=[],c=this.nf,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.Zk(a);b[e]=g}a.nf=b}if(0<this.Ze.length){b=[];c=this.Ze;d=c.length;for(e=0;e<d;e++)c[e]!==f&&(g=c[e].copy(),g.Zk(a),b[e]=g);a.Ze=b}a.Rq=this.Rq;a.Wo=this.Wo;a.rn=this.rn;a.Vm=this.Vm;a.vn=this.vn;a.Cp.Xa(this.Cp);a.Dp.Xa(this.Dp);a.eh=this.eh;a.gi=this.gi;a.Am=this.Am;a.gl=this.gl;a.vx=this.vx;
a.sk=this.sk;a.Ag=this.Ag;a.Qm=this.Qm;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=
this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure);a.Xb=this.Xb.copy()};x.prototype.yh=function(a){P.prototype.yh.call(this,a);a.Fa=this.Fa;for(var b=a.Fa.l;b.next();)b.value.xk=a};
x.prototype.copy=x.prototype.copy=function(){var a=P.prototype.copy.call(this);if(a instanceof x){var b=this.Fa;if(0<b.length)for(var c=b.length,d=0;d<c;d++){var e=b.n[d].copy(),g=a;e.Zk(g);e.Dl=n;var i=g.Fa,j=i.count;i.yc(j,e);i=g.ca;if(i!==n){var k=g.h;k!==n&&k.sa.tb||i.Pc(je,"elements",g,n,e,n,j)}}return a}return n};x.prototype.toString=function(){return"Panel("+this.type+")#"+w.ec(this)};var hh;x.Position=hh=w.s(x,"Position",0);x.Horizontal=w.s(x,"Horizontal",1);var ei;
x.Vertical=ei=w.s(x,"Vertical",2);var ah;x.Spot=ah=w.s(x,"Spot",3);var Wh;x.Auto=Wh=w.s(x,"Auto",4);var Oj;x.Table=Oj=w.s(x,"Table",5);x.Viewbox=w.s(x,"Viewbox",6);var vj;x.TableRow=vj=w.s(x,"TableRow",7);var wj;x.TableColumn=wj=w.s(x,"TableColumn",8);var Sg;x.Link=Sg=w.s(x,"Link",9);var ti;x.Grid=ti=w.s(x,"Grid",10);w.u(x,{elements:"elements"},function(){return this.Fa.l});w.u(x,{Sa:"naturalBounds"},t("Kc"));w.g(x,"padding",x.prototype.padding);
w.defineProperty(x,{padding:"padding"},t("ie"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,x,"padding");var b=this.ie;b.I(a)||(this.ie=a=a.O(),this.R(),this.j("padding",b,a))});w.g(x,"type",x.prototype.type);w.defineProperty(x,{type:"type"},t("S"),function(a){var b=this.S;b!==a&&(u&&w.jb(a,x,x,"type"),(b===vj||b===wj)&&w.m("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.S=a,this.S===ti&&(this.eh=h),this.R(),this.j("type",b,a))});
w.g(x,"defaultAlignment",x.prototype.xj);w.defineProperty(x,{xj:"defaultAlignment"},t("dp"),function(a){var b=this.dp;b.I(a)||(u&&w.i(a,H,x,"defaultAlignment"),this.dp=a=a.O(),this.R(),this.j("defaultAlignment",b,a))});w.g(x,"defaultStretch",x.prototype.Uy);w.defineProperty(x,{Uy:"defaultStretch"},t("$b"),function(a){var b=this.$b;b!==a&&(w.jb(a,P,x,"defaultStretch"),this.$b=a,this.R(),this.j("defaultStretch",b,a))});w.g(x,"viewboxStretch",x.prototype.lI);
w.defineProperty(x,{lI:"viewboxStretch"},t("vn"),function(a){var b=this.vn;b!==a&&(w.jb(a,P,x,"viewboxStretch"),this.vn=a,this.j("viewboxStretch",b,a))});w.g(x,"gridCellSize",x.prototype.Yr);w.defineProperty(x,{Yr:"gridCellSize"},t("Cp"),function(a){var b=this.Cp;b.I(a)||(w.i(a,bb,x,"gridCellSize"),(!a.T()||0===a.width||0===a.height)&&w.m("Invalid Panel.gridCellSize: "+a),this.Cp=a.O(),this.h!==n&&this===this.h.yv&&Fi(this.h),uj(this),this.j("gridCellSize",b,a))});w.g(x,"gridOrigin",x.prototype.ez);
w.defineProperty(x,{ez:"gridOrigin"},t("Dp"),function(a){var b=this.Dp;b.I(a)||(w.i(a,F,x,"gridOrigin"),a.T()||w.m("Invalid Panel.gridOrigin: "+a),this.Dp=a.O(),uj(this),this.j("gridOrigin",b,a))});
x.prototype.Sn=function(a,b){var c=this.opacity,d=1;1!==c&&(d=a.globalAlpha,a.globalAlpha=d*c);if(this.S===ti){c=this.Yl()*b.scale;0>=c&&(c=1);var e=this.Yr,d=e.width,e=e.height,g=this.Sa,i=g.width,g=g.height,j=Math.ceil(i/d),k=Math.ceil(g/e),l=this.ez;a.save();a.beginPath();a.rect(0,0,i,g);a.clip();for(var m=[],p=this.Fa.n,r=this.Fa.length,s=0;s<r;s++){var v=[];m.push(v);var y=p[s];if(y.visible)for(var y="LineV"===y.gb,C=s+1;C<r;C++){var E=p[C];E.visible&&"LineV"===E.gb===y&&(E=E.Bi,2<=E&&v.push(E))}}p=
this.Fa.length;for(r=0;r<p;r++)if(y=this.Fa.n[r],y.visible){s=m[r];v=y.Bi;if("LineV"===y.gb){a.lineWidth=y.eb;xj(this,a,y.stroke,q);a.beginPath();for(C=y=Math.floor(-l.x/d);C<=y+j&&!(E=C*d+l.x,0<=E&&(E<i&&Lk(C,v,s))&&(a.moveTo(E,0),a.lineTo(E,g),2>d*v*c));C++);}else{a.lineWidth=y.eb;xj(this,a,y.stroke,q);a.beginPath();for(C=y=Math.floor(-l.y/e);C<=y+k&&!(E=C*e+l.y,0<=E&&(E<=g&&Lk(C,v,s))&&(a.moveTo(0,E),a.lineTo(i,E),2>e*v*c));C++);}a.stroke()}a.restore();ki(b,a)}else{e=this.Fa.length;for(i=0;i<e;i++)this.Fa.n[i].He(a,
b);u&&u.fK&&this instanceof U&&u.eK(a,b,this);1!==c&&(a.globalAlpha=d)}};function Lk(a,b,c){if(0!==a%b)return q;for(var b=c.length,d=0;d<b;d++)if(0===a%c[d])return q;return h}
x.prototype.js=function(a,b,c,d){var e=this.Xb;e.width=0;e.height=0;var g=this.wa,i=this.ve;c===f&&(c=i.width,d=i.height);var c=Math.max(c/this.scale,i.width),d=Math.max(d/this.scale,i.height),j=this.ce;isNaN(g.width)||(a=Math.min(g.width,j.width));isNaN(g.height)||(b=Math.min(g.height,j.height));var a=Math.max(c,a),b=Math.max(d,b),k=this.padding,a=Math.max(a-k.left-k.right,0),b=Math.max(b-k.top-k.bottom,0),l=this.Fa,m=l.length;if(0===m){var p=this.Kc;db(p,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);
lj(this,0,0,p.width,p.height)}else{var r=this.S.Bb;switch(r){case "Position":var s=a,v=b,y=c,C=d;e.x=0;e.y=0;e.width=0;for(var E=e.height=0;E<m;E++){var I=l.n[E];if(I.visible||I===this.Yb){var D=I.margin,M=D.right+D.left,N=D.top+D.bottom;Gh(I,s,v,y,C);var Z=I.xa,va=Math.max(Z.width+M,0),ka=Math.max(Z.height+N,0),ta=I.position.x,Da=I.position.y;isFinite(ta)||(ta=0);isFinite(Da)||(Da=0);if(I instanceof V&&I.jz)var Ha=I.eb/2,ta=ta-Ha,Da=Da-Ha;e.Xb(ta,Da,va,ka)}}break;case "Vertical":for(var cb=a,rb=
c,Xa=[],Na=0;Na<m;Na++){var gb=l.n[Na];if(gb.visible||gb===this.Yb){var Ya=oj(gb);if(Ya!==ij&&Ya!==jj)Xa.push(gb);else{var nb=gb.margin,ud=nb.right+nb.left,me=nb.top+nb.bottom;Gh(gb,cb,Infinity,rb,0);var Kd=gb.xa,Ub=Math.max(Kd.width+ud,0),Ec=Math.max(Kd.height+me,0);e.width=Math.max(e.width,Ub);e.height+=Ec}}}var Zd=Xa.length;if(0!==Zd){this.wa.width?cb=Math.min(this.wa.width,this.ce.width):0!==e.width&&(cb=Math.min(e.width,this.ce.width));for(Na=0;Na<Zd;Na++)if(gb=Xa[Na],gb.visible||gb===this.Yb)nb=
gb.margin,ud=nb.right+nb.left,me=nb.top+nb.bottom,Gh(gb,cb,Infinity,rb,0),Kd=gb.xa,Ub=Math.max(Kd.width+ud,0),Ec=Math.max(Kd.height+me,0),e.width=Math.max(e.width,Ub),e.height+=Ec}break;case "Horizontal":for(var oe=b,Uf=d,Vc=[],wd=0;wd<m;wd++){var cc=l.n[wd];if(cc.visible||cc===this.Yb){var Vf=oj(cc);if(Vf!==ij&&Vf!==kj)Vc.push(cc);else{var Mc=cc.margin,Oe=Mc.right+Mc.left,pf=Mc.top+Mc.bottom;Gh(cc,Infinity,oe,0,Uf);var qf=cc.xa,Wc=Math.max(qf.width+Oe,0),Nc=Math.max(qf.height+pf,0);e.width+=Wc;e.height=
Math.max(e.height,Nc)}}}var Pe=Vc.length;if(0!==Pe){this.wa.height?oe=Math.min(this.wa.height,this.ce.height):0!==e.height&&(oe=Math.min(e.height,this.ce.height));for(wd=0;wd<Pe;wd++)if(cc=Vc[wd],cc.visible||cc===this.Yb)Mc=cc.margin,Oe=Mc.right+Mc.left,pf=Mc.top+Mc.bottom,Gh(cc,Infinity,oe,0,Uf),qf=cc.xa,Wc=Math.max(qf.width+Oe,0),Nc=Math.max(qf.height+pf,0),e.width+=Wc,e.height=Math.max(e.height,Nc)}break;case "Spot":a:{var ae=a,Mb=b,be=c,pe=d,lc=Jj(this,l,m),wb=lc.margin,Xc,Nb,Od=wb.right+wb.left,
qe=wb.top+wb.bottom;Gh(lc,ae,Mb,be,pe);var Bb=lc.xa,R=Bb.width,Vb=Bb.height,Q=Math.max(R+Od,0),ha=Math.max(Vb+qe,0);e.x=-wb.left;e.y=-wb.top;e.width=Q;e.height=ha;for(var zb=0;zb<m;zb++){var Db=l.n[zb];if(Db!==lc&&(Db.visible||Db===this.Yb)){wb=Db.margin;Xc=wb.right+wb.left;Nb=wb.top+wb.bottom;Gh(Db,ae,Mb,0,0);var Bb=Db.xa,Q=Math.max(Bb.width+Xc,0),ha=Math.max(Bb.height+Nb,0),Fa=Db.Db;Cb(Fa)&&(Fa=this.xj);sb(Fa)||(Fa=Ob);var oa=Db.pj;Cb(oa)&&(oa=Ob);e.Xb(Fa.x*R+Fa.offsetX-(oa.x*Bb.width-oa.offsetX)-
wb.left,Fa.y*Vb+Fa.offsetY-(oa.y*Bb.height-oa.offsetY)-wb.top,Q,ha)}}var za=lc.Gh;za===ch&&(za=oj(lc));switch(za){case ij:break a;case kd:if(!isFinite(ae)&&!isFinite(Mb))break a;break;case kj:if(!isFinite(ae))break a;break;case jj:if(!isFinite(Mb))break a}Bb=lc.xa;R=Bb.width;Vb=Bb.height;Q=Math.max(R+Od,0);ha=Math.max(Vb+qe,0);wb=lc.margin;e.x=-wb.left;e.y=-wb.top;e.width=Q;e.height=ha;for(zb=0;zb<m;zb++)if(Db=l.n[zb],Db!==lc&&(Db.visible||Db===this.Yb))wb=Db.margin,Xc=wb.right+wb.left,Nb=wb.top+
wb.bottom,Bb=Db.xa,Q=Math.max(Bb.width+Xc,0),ha=Math.max(Bb.height+Nb,0),Fa=Db.Db,Cb(Fa)&&(Fa=this.xj),sb(Fa)||(Fa=Ob),oa=Db.pj,Cb(oa)&&(oa=Ob),e.Xb(Fa.x*R+Fa.offsetX-(oa.x*Bb.width-oa.offsetX)-wb.left,Fa.y*Vb+Fa.offsetY-(oa.y*Bb.height-oa.offsetY)-wb.top,Q,ha)}break;case "Auto":var Pa=a,Yc=b,xc=c,ld=d,xb=Jj(this,l,m),Zc=xb.margin,Gb=Zc.right+Zc.left,eb=Zc.top+Zc.bottom;Gh(xb,Pa,Yc,xc,ld);var yc=xb.xa,Qe=Math.max(yc.width+Gb,0),re=Math.max(yc.height+eb,0),xd=(new F).im(0,0,Qe,re,Mk(xb)),rf=(new F).im(0,
0,Qe,re,Nk(xb)),Wf=new G(xd,rf),mg=Pa,se=Yc;isFinite(Pa)&&(mg=Wf.width);isFinite(Yc)&&(se=Wf.height);for(var Pd=new bb(0,0),te=0;te<m;te++){var yd=l.n[te];if(yd!==xb&&(yd.visible||yd===this.Yb)){var Zc=yd.margin,Re=Zc.right+Zc.left,Wb=Zc.top+Zc.bottom;Gh(yd,mg,se,xc,ld);yc=yd.xa;Qe=Math.max(yc.width+Re,0);re=Math.max(yc.height+Wb,0);Pd=new bb(Math.max(Qe,Pd.width),Math.max(re,Pd.height))}}if(1===m)e.width=Qe,e.height=re;else{var Oc=Mk(xb),ue=Nk(xb),$c,Se;ue.x!==Oc.x&&ue.y!==Oc.y&&($c=Pd.width/Math.abs(ue.x-
Oc.x),Se=Pd.height/Math.abs(ue.y-Oc.y));var ve=0;xb instanceof V&&(ve=xb.eb*xb.scale);$c+=Math.abs(Oc.offsetX)+Math.abs(ue.offsetX)+ve;Se+=Math.abs(Oc.offsetY)+Math.abs(ue.offsetY)+ve;var Qd=xb.Gh;Qd===ch&&(Qd=oj(xb));switch(Qd){case ij:ld=xc=0;break;case kd:isFinite(Pa)&&($c=Pa);isFinite(Yc)&&(Se=Yc);break;case kj:isFinite(Pa)&&($c=Pa);ld=0;break;case jj:xc=0,isFinite(Yc)&&(Se=Yc)}xb instanceof V&&(xb.lh?xb.ck=n:xb.Ga=n);Mj(xb);Gh(xb,$c,Se,xc,ld);e.width=xb.xa.width+Gb;e.height=xb.xa.height+eb}break;
case "Table":for(var Rd=a,we=b,Eb=m,zd=c,lb=d,Ab=[],zc=[],Ba=0;Ba<Eb;Ba++){var ya=l.n[Ba];if(ya instanceof x&&(ya.type===vj||ya.type===wj)){zc.push(ya);for(var zj=ya.Fa,xl=zj.length,Pc=0;Pc<xl;Pc++){var Hg=zj.n[Pc];ya.type===vj?Hg.nc=ya.nc:ya.type===wj&&(Hg.Ec=ya.Ec);Ab.push(Hg)}}else Ab.push(ya)}for(var Eb=Ab.length,Fc=[],Ba=0;Ba<Eb;Ba++)ya=Ab[Ba],ya.ac=h,ya.Jc=h,Fc[ya.nc]||(Fc[ya.nc]=[]),Fc[ya.nc][ya.Ec]||(Fc[ya.nc][ya.Ec]=[]),Fc[ya.nc][ya.Ec].push(ya);for(var li=[],vh=[],Ig=[],Xb={count:0},Te=
{count:0},Sd=Rd,Ac=we,Aa,ad,Aj=Fc.length,Ba=0;Ba<Aj;Ba++)if(Fc[Ba]){var ng=Fc[Ba].length,ub=this.$d(Ba);Ok(ub,0);for(Pc=0;Pc<ng;Pc++)if(Fc[Ba][Pc]){var vb=this.Zd(Pc);li[Pc]===f&&(Ok(vb,0),li[Pc]=h);for(var Jg=Fc[Ba][Pc],yl=Jg.length,og=0;og<yl;og++)if(ya=Jg[og],ya.visible||ya===this.Yb)if(1<ya.Ak||1<ya.bk)vh.push(ya);else{var ce=Pj(ya,ub,vb);if(ce!==ij&&!ya.wa.T())Xb[Pc]===f&&(Xb[Pc]=-1,Xb.count++),Te[Ba]===f&&(Te[Ba]=-1,Te.count++),Ig.push(ya),Gh(ya,Infinity,Infinity,zd,lb);else{var Ue=isFinite(vb.width)?
vb.width:Rd,pg=isFinite(ub.height)?ub.height:we,Yb=new bb(Math.max(vb.bg,Math.min(Ue,vb.de)),Math.max(ub.bg,Math.min(pg,ub.de))),tc=ya.margin,Qc=tc.right+tc.left,Ve=tc.top+tc.bottom;Gh(ya,Infinity,Infinity,zd,lb);var Ad=ya.xa,md=Math.max(Ad.width+Qc,0),sf=Math.max(Ad.height+Ve,0);Aa=this.$d(Ba);ad=Math.max(sf-Aa.Wa,0);ad>Ac&&(ad=Ac);Ok(Aa,Aa.Wa+ad);Ac=Math.max(Ac-ad,0);Aa=this.Zd(Pc);ad=Math.max(md-Aa.Wa,0);ad>Sd&&(ad=Sd);Ok(Aa,Aa.Wa+ad);Sd=Math.max(Sd-ad,0)}}}}for(var We=0,Xe=0,Eb=this.bv,Ba=0;Ba<
Eb;Ba++)this.Ze[Ba]!==f&&(We+=this.Zd(Ba).Wa);Eb=this.Sv;for(Ba=0;Ba<Eb;Ba++)this.nf[Ba]!==f&&(Xe+=this.$d(Ba).Wa);Sd=Math.max(Rd-We,0);Ac=Math.max(we-Xe,0);Eb=Ig.length;for(Ba=0;Ba<Eb;Ba++){var ya=Ig[Ba],ub=this.$d(ya.nc),vb=this.Zd(ya.Ec),mi=ya.xa,tc=ya.margin,Qc=tc.right+tc.left,Ve=tc.top+tc.bottom;Xb[ya.Ec]=Math.max(mi.width+Qc-vb.ed,0);Te[ya.nc]=Math.max(mi.height+Ve-ub.ed,0)}var wh=0,nd=0;for(Ba in Te)"count"!==Ba&&(wh+=Te[Ba]);for(Ba in Xb)"count"!==Ba&&(nd+=Xb[Ba]);for(Ba=0;Ba<Eb;Ba++)if(ya=
Ig[Ba],ya.visible||ya===this.Yb){ub=this.$d(ya.nc);vb=this.Zd(ya.Ec);Ue=isFinite(vb.width)?vb.width:isFinite(Sd)?vb.ed+Xb[ya.Ec]/nd*Sd:vb.ed||Sd;pg=isFinite(ub.height)?ub.height:isFinite(Ac)?ub.ed+Te[ya.nc]/wh*Ac:ub.ed||Ac;Yb=new bb(Math.max(vb.bg,Math.min(Ue,vb.de)),Math.max(ub.bg,Math.min(pg,ub.de)));ce=Pj(ya,ub,vb);switch(ce){case kj:Yb.height=Infinity;break;case jj:Yb.width=Infinity}tc=ya.margin;Qc=tc.right+tc.left;Ve=tc.top+tc.bottom;Mj(ya);Gh(ya,Yb.width,Yb.height,vb.bg,ub.bg);var Ad=ya.xa,
md=Math.max(Ad.width+Qc,0),sf=Math.max(Ad.height+Ve,0),Xf;Xf=ub.ed;Ok(ub,Math.max(ub.Wa,sf));ad=ub.ed-Xf;Ac=Math.max(Ac-ad,0);Xf=vb.ed;Ok(vb,Math.max(vb.Wa,md));ad=vb.ed-Xf;Sd=Math.max(Sd-ad,0)}Eb=vh.length;for(Ba=0;Ba<Eb;Ba++)if(ya=vh[Ba],ya.visible||ya===this.Yb){ub=this.$d(ya.nc);vb=this.Zd(ya.Ec);Yb=new bb(Math.max(vb.bg,Math.min(Rd,vb.de)),Math.max(ub.bg,Math.min(we,ub.de)));ce=Pj(ya,ub,vb);switch(ce){case kd:0!==vb.ed&&(Yb.width=Math.min(Yb.width,vb.ed));0!==ub.ed&&(Yb.height=Math.min(Yb.height,
ub.ed));break;case kj:0!==vb.ed&&(Yb.width=Math.min(Yb.width,vb.ed));break;case jj:0!==ub.ed&&(Yb.height=Math.min(Yb.height,ub.ed))}isFinite(vb.width)&&(Yb.width=vb.width);isFinite(ub.height)&&(Yb.height=ub.height);for(var Ye=new bb(0,0),Hb=1;Hb<ya.Ak&&!(ya.nc+Hb>=this.Sv);Hb++)Aa=this.$d(ya.nc+Hb),Ye.height+=Math.max(Aa.bg,isNaN(Aa.of)?Aa.de:Math.min(Aa.of,Aa.de));for(Hb=1;Hb<ya.bk&&!(ya.Ec+Hb>=this.bv);Hb++)Aa=this.Zd(ya.Ec+Hb),Ye.width+=Math.max(Aa.bg,isNaN(Aa.of)?Aa.de:Math.min(Aa.of,Aa.de));
Yb.width+=Ye.width;Yb.height+=Ye.height;tc=ya.margin;Qc=tc.right+tc.left;Ve=tc.top+tc.bottom;Gh(ya,Yb.width,Yb.height,zd,lb);for(var Ad=ya.xa,md=Math.max(Ad.width+Qc,0),sf=Math.max(Ad.height+Ve,0),Kg=0,Hb=0;Hb<ya.Ak;Hb++)Aa=this.$d(ya.nc+Hb),Kg+=Aa.Wa||0;if(Kg<sf)for(var de=sf-Kg;0<de;){var Ud=Aa.Wa||0;isNaN(Aa.height)&&Aa.de>Ud&&(Ok(Aa,Math.min(Aa.de,Ud+de)),Aa.Wa!==Ud&&(de-=Aa.Wa-Ud));if(-1===Aa.index-1)break;Aa=this.$d(Aa.index-1)}for(var xh=0,Hb=0;Hb<ya.bk;Hb++)Aa=this.Zd(ya.Ec+Hb),xh+=Aa.Wa||
0;if(xh<md)for(de=md-xh;0<de;){Ud=Aa.Wa||0;isNaN(Aa.width)&&Aa.de>Ud&&(Ok(Aa,Math.min(Aa.de,Ud+de)),Aa.Wa!==Ud&&(de-=Aa.Wa-Ud));if(-1===Aa.index-1)break;Aa=this.Zd(Aa.index-1)}}for(var xe=0,ye=0,ce=oj(this),Yf=this.wa,ni=this.ce,tf=Xe=We=0,od=0,Eb=this.bv,Ba=0;Ba<Eb;Ba++)this.Ze[Ba]!==f&&(Aa=this.Zd(Ba),isFinite(Aa.width)?tf+=Aa.width:Pk(Aa)===Qk?tf+=Aa.Wa:We+=Aa.Wa);var xe=isFinite(Yf.width)?Math.min(Yf.width,ni.width):ce!==ij&&isFinite(Rd)?Rd:We,xe=Math.max(xe,this.ve.width),xe=Math.max(xe-tf,0),
uf=Math.max(xe/We,1);isFinite(uf)||(uf=1);for(Ba=0;Ba<Eb;Ba++)this.Ze[Ba]!==f&&(Aa=this.Zd(Ba),!isFinite(Aa.width)&&Pk(Aa)!==Qk&&Ok(Aa,Aa.Wa*uf),Aa.rb=e.width,e.width+=Aa.Wa);Eb=this.Sv;for(Ba=0;Ba<Eb;Ba++)this.nf[Ba]!==f&&(Aa=this.$d(Ba),isFinite(Aa.height)?od+=Aa.height:Pk(Aa)===Qk?od+=Aa.Wa:Xe+=Aa.Wa);var ye=isFinite(Yf.height)?Math.min(Yf.height,ni.height):ce!==ij&&isFinite(we)?we:Xe,ye=Math.max(ye,this.ve.height),ye=Math.max(ye-od,0),Mg=Math.max(ye/Xe,1);isFinite(Mg)||(Mg=1);for(Ba=0;Ba<Eb;Ba++)this.nf[Ba]!==
f&&(Aa=this.$d(Ba),!isFinite(Aa.height)&&Pk(Aa)!==Qk&&Ok(Aa,Aa.Wa*Mg),Aa.rb=e.height,e.height+=Aa.Wa);Eb=zc.length;for(Ba=0;Ba<Eb;Ba++){var Gc=zc[Ba];Gc.type===vj?(Ue=e.width,Aa=this.$d(Gc.nc),pg=Aa.ed):(Aa=this.Zd(Gc.Ec),Ue=Aa.ed,pg=e.height);Gc.Tc.V(0,0,Ue,pg);Gc.ac=q;Fc[Gc.nc]||(Fc[Gc.nc]=[]);Fc[Gc.nc][Gc.Ec]||(Fc[Gc.nc][Gc.Ec]=[]);Fc[Gc.nc][Gc.Ec].push(Gc)}this.iF=Fc;break;case "Viewbox":var Ng=a,Zf=b,vf=c,yh=d;1<m&&w.m("Viewbox Panel cannot contain more than one GraphObject.");var bd=l.n[0];
bd.Wb=1;Mj(bd);Gh(bd,Infinity,Infinity,vf,yh);var ee=bd.xa,Cj=bd.margin,io=Cj.right+Cj.left,jo=Cj.top+Cj.bottom;if(isFinite(Ng)||isFinite(Zf)){var cq=bd.scale,ko=ee.width,lo=ee.height,mo=Math.max(Ng-io,0),no=Math.max(Zf-jo,0);bd.Wb=this.vn===dh?bd.Wb*Math.min(mo/ko,no/lo):bd.Wb*Math.max(mo/ko,no/lo);cq!==bd.scale&&(bd.ac=h,Gh(bd,Infinity,Infinity,vf,yh))}ee=bd.xa;e.width=isFinite(Ng)?Ng:Math.max(ee.width+io,0);e.height=isFinite(Zf)?Zf:Math.max(ee.height+jo,0);break;case "Link":var oo=this instanceof
of?this.Cn:this;if(0===m){var Dj=this.Kc;db(Dj,0,0);var Vd=this.xa;Vd.V(0,0,0,0)}else{var Ej=this.Bp(),Ze=this.Th(),$e=Ze.copy();$e.x=0;$e.y=0;var Og,zh=this.ix();Og=this.ja!==f?this.ja:zh.count;for(var Fj=new F(Infinity,Infinity),Pg=0;Pg<Og;Pg++){var po=zh.n[Pg];Fj.x=Math.min(po.x,Fj.x);Fj.y=Math.min(po.y,Fj.y)}this.bj=new F(Ze.x,Ze.y);this.Lh.clear();Ej!==n&&(Rk(Ej,Ze.width,Ze.height),Vd=Ej.xa,$e.Ii(Vd),this.Lh.add(Vd));for(var Qg=n,qg=n,$f=n,Pg=0;Pg<m;Pg++){var mc=l.n[Pg];if(mc!==Ej)if(mc.Gi&&
mc instanceof V)Rk(mc,Ze.width,Ze.height),Vd=mc.xa,$e.Ii(Vd),this.Lh.add(Vd);else if(2>Og)Gh(mc,Infinity,Infinity),Vd=mc.xa,$e.Ii(Vd),this.Lh.add(Vd);else{Qg===n&&(Qg=new Wa,qg=new F,$f=new F);var ag=mc.Eh,ro=mc.Nz,zl=mc.pj;yb(zl)&&(zl=Ob);var Gj=mc.zs,dq=mc.Oz,oi,pi,Hj=0;if(ag<-Og||ag>=Og){var so=oo.FD,Ij=oo.ED;Gj!==hj&&(Hj=Sk(Gj,Ij),mc.angle=Hj);oi=so.x-Ze.x;pi=so.y-Ze.y}else{var wf,Ah;if(0<=ag)wf=zh.n[ag],Ah=ag<Og-1?zh.n[ag+1]:wf;else{var Al=Og+ag;wf=zh.n[Al];Ah=0<Al?zh.n[Al-1]:wf}Ij=0<=ag?wf.vi(Ah):
Ah.vi(wf);Gj!==hj&&(Hj=Sk(Gj,Ij),mc.oc=Hj);oi=wf.x+(Ah.x-wf.x)*ro-Ze.x;pi=wf.y+(Ah.y-wf.y)*ro-Ze.y}Gh(mc,Infinity,Infinity);var Vd=mc.xa,Dj=mc.Sa,qi=0;mc instanceof V&&(qi=mc.eb);var to=Dj.width+qi,uo=Dj.height+qi;Qg.reset();Qg.translate(-Vd.x,-Vd.y);Qg.scale(mc.scale,mc.scale);Qg.rotate(mc.angle,to/2,uo/2);var vo=new G(0,0,to,uo);qg.Bo(vo,zl);Qg.Ta(qg);var eq=-qg.x+qi/2,fq=-qg.y+qi/2;$f.set(dq);isNaN($f.x)&&($f.x=0<=ag?qg.x+3:-(qg.x+3));isNaN($f.y)&&($f.y=-(qg.y+3));$f.rotate(Ij);oi+=$f.x;pi+=$f.y;
var ri=vo;ri.set(Vd);ri.x=oi+eq;ri.y=pi+fq;this.Lh.add(ri);$e.Ii(ri)}}if(this.De)for(var wo=this.Fj;wo.next();)Gh(wo.value,Infinity,Infinity);this.Xb=$e;var Kj=this.bj;Kj&&Kj.V(Kj.x+$e.x,Kj.y+$e.y);db(e,$e.width||0,$e.height||0)}break;case "Grid":break;case "TableRow":case "TableColumn":w.m(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:w.m("Unknown panel type: "+r)}var ze=e.width,Ae=e.height,Lj=this.padding,
gq=Lj.top+Lj.bottom,ze=ze+(Lj.left+Lj.right),Ae=Ae+gq;isFinite(g.width)&&(ze=g.width);isFinite(g.height)&&(Ae=g.height);ze=Math.min(j.width,ze);Ae=Math.min(j.height,Ae);ze=Math.max(i.width,ze);Ae=Math.max(i.height,Ae);ze=Math.max(c,ze);Ae=Math.max(d,Ae);e.width=ze;e.height=Ae;p=this.Kc;db(p,ze,Ae);lj(this,0,0,ze,Ae)}};function Jj(a,b,c){for(var d=0;d<c;d++){var e=b.n[d];if(e.Gi===h)return a.Gl=e}b=b.n[0];return a.Gl=b}
x.prototype.tj=function(a,b,c,d){var e=this.Xb,g=this.Fa,i=g.length,j=this.kF;j.reset();if(0===i){var k=this.va;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.wa.T()){var l=oj(this),m=this.Tc,p=m.width,r=m.height,s=this.margin,v=s.left+s.right,y=s.top+s.bottom;p===c&&r===d&&(l=ij);switch(l){case ij:if(p>c||r>d)this.R(),Gh(this,p>c?c:p,r>d?d:r);break;case kd:this.ac=h;Gh(this,c+v,d+y,0,0);break;case kj:this.ac=h;Gh(this,c+v,r+y,0,0);break;case jj:this.ac=h,Gh(this,p+v,d+y,0,0)}}k=this.va;k.x=a;k.y=
b;k.width=c;k.height=d;var C=this.S.Bb;switch(C){case "Position":for(var E=e.x-this.padding.left,I=e.y-this.padding.top,D=0;D<i;D++){var M=g.n[D],N=M.xa,Z=M.margin,va=M.position.x,ka=M.position.y;j.x=isNaN(va)?-E:va-E;j.y=isNaN(ka)?-I:ka-I;if(M instanceof V&&M.jz){var ta=M.eb/2;j.x-=ta;j.y-=ta}j.x+=Z.left;j.y+=Z.top;j.width=N.width;j.height=N.height;M.visible&&M.Dc(j.x,j.y,j.width,j.height)}break;case "Vertical":for(var Da=this.padding.left,Ha=this.padding.top,cb=0;cb<i;cb++){var rb=Da,Xa=g.n[cb],
Na=Xa.xa,gb=Xa.margin,Ya=gb.left+gb.right,nb=Da+this.padding.right,ud=Na.width,me=oj(Xa);if(isNaN(Xa.wa.width)&&me===kd||me===kj)ud=Math.max(e.width-Ya-nb,0);var Kd=ud+Ya+nb,Ub=Xa.Db;Cb(Ub)&&(Ub=this.xj);sb(Ub)||(Ub=Ob);j.x=rb+Ub.offsetX+gb.left+(e.width*Ub.x-Kd*Ub.x);j.y=Ha+Ub.offsetY+gb.top;j.width=ud;j.height=Na.height;Xa.visible&&(Xa.Dc(j.x,j.y,j.width,j.height),Ha+=Na.height+gb.bottom+gb.top)}break;case "Horizontal":for(var Ec=this.padding.top,Zd=this.padding.left,oe=0;oe<i;oe++){var Uf=Ec,Vc=
g.n[oe],wd=Vc.xa,cc=Vc.margin,Vf=cc.top+cc.bottom,Mc=Ec+this.padding.bottom,Oe=wd.height,pf=oj(Vc);if(isNaN(Vc.wa.height)&&pf===kd||pf===jj)Oe=Math.max(e.height-Vf-Mc,0);var qf=Oe+Vf+Mc,Wc=Vc.Db;Cb(Wc)&&(Wc=this.xj);sb(Wc)||(Wc=Ob);j.x=Zd+Wc.offsetX+cc.left;j.y=Uf+Wc.offsetY+cc.top+(e.height*Wc.y-qf*Wc.y);j.width=wd.width;j.height=Oe;Vc.visible&&(Vc.Dc(j.x,j.y,j.width,j.height),Zd+=wd.width+cc.left+cc.right)}break;case "Spot":var Nc=Jj(this,g,i),Pe=Nc.xa,ae=Pe.width,Mb=Pe.height,be=this.padding,pe=
be.left,lc=be.top;j.x=pe-e.x;j.y=lc-e.y;Nc.Dc(j.x,j.y,ae,Mb);for(var wb=0;wb<i;wb++){var Xc=g.n[wb];if(Xc!==Nc){var Nb=Xc.xa,Od=Nb.width,qe=Nb.height,Bb=Xc.Db;Cb(Bb)&&(Bb=this.xj);sb(Bb)||(Bb=Ob);var R=Xc.pj;Cb(R)&&(R=Ob);j.x=Bb.x*ae+Bb.offsetX-(R.x*Od-R.offsetX);j.y=Bb.y*Mb+Bb.offsetY-(R.y*qe-R.offsetY);j.x-=e.x;j.y-=e.y;Xc.visible&&Xc.Dc(pe+j.x,lc+j.y,Od,qe)}}break;case "Auto":var Vb=Jj(this,g,i),Q=Vb.xa,ha=new G(0,0,Q.width,Q.height),zb=new G(0,0,1,1),Db=Vb.margin,Fa=Db.left,oa=Db.top,za=this.padding,
Pa=za.left,Yc=za.top;j.x=Fa;j.y=oa;j.width=Q.width;j.height=Q.height;Vb.Dc(Pa+j.x,Yc+j.y,j.width,j.height);var xc=Mk(Vb),ld=Nk(Vb),xb=(new F).Bo(ha,xc),Zc=(new F).Bo(ha,ld);zb.x=xb.x;zb.y=xb.y;zb.dw(Zc);zb.x+=Fa+Pa;zb.y+=oa+Yc;for(var Gb=0;Gb<i;Gb++){var eb=g.n[Gb];if(eb!==Vb){var yc=eb.xa,Db=eb.margin,Qe=Math.max(yc.width+Db.right+Db.left,0),re=Math.max(yc.height+Db.top+Db.bottom,0),xd=eb.Db;Cb(xd)&&(xd=this.xj);sb(xd)||(xd=Ob);j.x=zb.width*xd.x+xd.offsetX-Qe*xd.x+Db.left+zb.x;j.y=zb.height*xd.y+
xd.offsetY-re*xd.y+Db.top+zb.y;j.width=zb.width;j.height=zb.height;eb.visible&&(jb(zb.x,zb.y,zb.width,zb.height,j.x,j.y,yc.width,yc.height)?eb.Dc(j.x,j.y,yc.width,yc.height):eb.Dc(j.x,j.y,yc.width,yc.height,new G(zb.x,zb.y,zb.width,zb.height)))}}break;case "Table":for(var rf=this.padding,Wf=rf.left,mg=rf.top,se=this.iF,Pd,te,yd=se.length,Re=0,Wb=0;Wb<yd;Wb++)se[Wb]&&(Re=Math.max(Re,se[Wb].length));for(var Oc=Math.min(this.rn,yd-1);Oc!==yd&&(this.nf[Oc]===f||0===this.nf[Oc].Wa);)Oc++;for(var Oc=Math.min(Oc,
yd-1),ue=-this.nf[Oc].rb,$c=Math.min(this.Vm,Re-1);$c!==Re&&(this.Ze[$c]===f||0===this.Ze[$c].Wa);)$c++;for(var $c=Math.min($c,Re-1),Se=-this.Ze[$c].rb,Wb=0;Wb<yd;Wb++)if(se[Wb]){var Re=se[Wb].length,ve=this.$d(Wb);te=ve.rb+ue+mg;for(var Qd=0;Qd<Re;Qd++)if(se[Wb][Qd]){var Rd=this.Zd(Qd);Pd=Rd.rb+Se+Wf;for(var we=se[Wb][Qd],Eb=we.length,zd=0;zd<Eb;zd++){var lb=we[zd],Ab=lb.xa;if(lb instanceof x&&(lb.type===vj||lb.type===wj)){lb.Ib.Ia();var zc=lb.Ib;zc.x=lb.type===vj?Wf:Pd;zc.y=lb.type===wj?mg:te;zc.width=
Ab.width;zc.height=Ab.height;lb.Ib.freeze();lb.Jc=q}else{for(var Ba=new bb(0,0),ya=1;ya<lb.rowSpan&&!(Wb+ya>=this.Sv);ya++){var zj=this.$d(Wb+ya);Ba.height+=zj.Wa}for(ya=1;ya<lb.lC&&!(Qd+ya>=this.bv);ya++){var xl=this.Zd(Qd+ya);Ba.width+=xl.Wa}var Pc=Rd.Wa+Ba.width,Hg=ve.Wa+Ba.height;j.x=Pd;j.y=te;j.width=Pc;j.height=Hg;var Fc=Pd,li=te,vh=Pc,Ig=Hg,Xb=lb.Db.copy();if(Cb(Xb)){Xb.Xa(this.xj);sb(Xb)||Xb.Xa(Ob);var Te=Rd.Db;sb(Te)&&(Xb.x=Te.x,Xb.offsetX=Te.offsetX);var Sd=ve.Db;sb(Sd)&&(Xb.y=Sd.y,Xb.offsetY=
Sd.offsetY)}sb(Xb)||(Xb=Ob);var Ac=Ab.width,Aa=Ab.height,ad=lb.ce,Aj=lb.ve,Ac=Math.min(ad.width,Ac),Aa=Math.min(ad.height,Aa),Ac=Math.max(Aj.width,Ac),Aa=Math.max(Aj.height,Aa),ng=lb.margin,ub=ng.left+ng.right,vb=ng.top+ng.bottom,Jg=Pj(lb,ve,Rd);if(isNaN(lb.wa.width)&&Jg===kd||Jg===kj)Ac=Math.max(Pc-ub,0);if(isNaN(lb.wa.height)&&Jg===kd||Jg===jj)Aa=Math.max(Hg-vb,0);var yl=Aa+vb;j.x+=j.width*Xb.x-(Ac+ub)*Xb.x+Xb.offsetX+ng.left;j.y+=j.height*Xb.y-yl*Xb.y+Xb.offsetY+ng.top;lb.visible&&(jb(Fc,li,vh,
Ig,j.x,j.y,Ac,Aa)?lb.Dc(j.x,j.y,Ac,Aa):lb.Dc(j.x,j.y,Ac,Aa,new G(Fc,li,vh,Ig)))}}}}for(Wb=0;Wb<i;Wb++)if(lb=g.n[Wb],lb instanceof x&&(lb.type===vj||lb.type===wj))zc=lb.Ib,lb.Kc.Ia(),lb.Kc.Co(0,0,zc.width,zc.height),lb.Kc.freeze();break;case "Viewbox":var og=g.n[0],ce=og.xa,Ue=og.margin,pg=Ue.top+Ue.bottom,Yb=Math.max(ce.width+(Ue.right+Ue.left),0),tc=Math.max(ce.height+pg,0),Qc=og.Db;Cb(Qc)&&(Qc=this.xj);sb(Qc)||(Qc=Ob);j.x=e.width*Qc.x-Yb*Qc.x+Qc.offsetX;j.y=e.height*Qc.y-tc*Qc.y+Qc.offsetY;j.width=
ce.width;j.height=ce.height;og.Dc(j.x,j.y,j.width,j.height);break;case "Link":var Ve=this.Bp(),Ad=0;if(Ve!==n&&Ad<this.Lh.count){var md=this.Lh.n[Ad];Ad++;Ve.Dc(md.x-this.Xb.x,md.y-this.Xb.y,md.width,md.height)}for(var sf=0;sf<i;sf++){var We=g.n[sf];We!==Ve&&Ad<this.Lh.count&&(md=this.Lh.n[Ad],Ad++,We.Dc(md.x-this.Xb.x,md.y-this.Xb.y,md.width,md.height))}var Xe=this.ix(),mi=Xe.count;if(2<=mi&&this.De)for(var wh=this.Fj;wh.next();){var nd=wh.value,Xf=mi,Ye=Xe,Hb=nd.Eh,Kg=nd.Nz,de=nd.pj;yb(de)&&(de=
Ob);var Ud=nd.zs,xh=nd.Oz,xe=f,ye=f,Yf=0;if(Hb<-Xf||Hb>=Xf){var ni=this.FD,tf=this.ED;Ud!==hj&&(Yf=Sk(Ud,tf),nd.angle=Yf);xe=ni.x;ye=ni.y}else{var od=f,uf=f;if(0<=Hb)od=Ye.n[Hb],uf=Hb<Xf-1?Ye.n[Hb+1]:od;else var Mg=Xf+Hb,od=Ye.n[Mg],uf=0<Mg?Ye.n[Mg-1]:od;tf=0<=Hb?od.vi(uf):uf.vi(od);Ud!==hj&&(Yf=Sk(Ud,tf),nd.angle=Yf);xe=od.x+(uf.x-od.x)*Kg;ye=od.y+(uf.y-od.y)*Kg}var Gc=new Wa;Gc.scale(nd.scale,nd.scale);Gc.rotate(nd.angle,0,0);var Ng=nd.Sa,Zf=new G(0,0,Ng.width,Ng.height),vf=new F;vf.Bo(Zf,de);Gc.Ta(vf);
var yh=-vf.x,bd=-vf.y,ee=xh.copy();isNaN(ee.x)&&(ee.x=0<=Hb?vf.x+3:-(vf.x+3));isNaN(ee.y)&&(ee.y=-(vf.y+3));ee.rotate(tf);xe+=ee.x;ye+=ee.y;Gc.LE(Zf);yh+=Zf.x;bd+=Zf.y;nd.position=new F(xe+yh,ye+bd)}this.Iv();break;case "Grid":break;case "TableRow":case "TableColumn":w.m(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:w.m("Unknown panel type: "+C)}}};
x.prototype.uj=function(a){var b=this.Sa;if(jb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.Fa.length,b=new F;c--;){var d=this.Fa.n[0];if(d.visible||d===this.Yb)if(Za(b.set(a),d.transform),d.ua(b))return h}return this.xe===n&&this.we===n?q:h}return q};function Tk(a,b,c){c(a,b);if(b instanceof x)for(b=b.elements;b.next();)Tk(a,b.value,c)}function Li(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof x&&Li(a,d,c)}}
function Uk(a,b,c){if(c(b))return b;if(b instanceof x)for(b=b.elements;b.next();){var d=Uk(a,b.value,c);if(d!==n)return b.xg(),d}return n}x.prototype.findObject=x.prototype.Je=function(a){if(this.name===a)return this;for(var b=this.elements;b.next();){var c=b.value;if(c.name===a)return c;if(c instanceof x&&!c.SG()&&(c=c.Je(a),c!==n))return c}return n};function Bf(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof x&&(d=Bf(d,b),d!==n))return d}return n}da=x.prototype;
da.Ih=function(){return!(this.type===vj||this.type===wj)};
da.xd=function(a,b,c){if(this.Nf===q)return n;b===f&&(b=n);c===f&&(c=n);if(this.Jc)return n;var d=this.Sa,e=1/this.Yl(),g=this.Ih()?a:Za((new F).set(a),this.transform);if(jb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,g.x,g.y)){if(!this.eh)for(var i=this.Fa.length,e=new F;i--;){var j=this.Fa.n[i];if(j.visible||j===this.Yb){j.Ih()?Za(e.set(a),j.transform):e.set(a);var k=n;j instanceof x?k=j.xd(e,b,c):j.Nf===h&&j.ua(e)&&(k=j);if(k!==n&&(b!==n&&(k=b(k)),k&&(c===n||c(k))))return k}}return this.background===
n&&this.Gk===n?n:jb(0,0,d.width,d.height,g.x,g.y)?this:n}return n};
da.Vn=function(a,b,c,d){if(this.Nf===q)return q;b===f&&(b=n);c===f&&(c=n);!(d instanceof z)&&!(d instanceof ma)&&(d=new z(P));var e=this.Sa,g=this.Ih()?a:Za((new F).set(a),this.transform);if(jb(0,0,e.width,e.height,g.x,g.y)){if(!this.eh){g=this.Fa.length;for(e=new F;g--;){var i=this.Fa.n[g];if(i.visible||i===this.Yb)if(i.Ih()?Za(e.set(a),i.transform):e.set(a),(i instanceof x?i.Vn(e,b,c,d):i.ua(e))&&i.Nf!==q)b!==n&&(i=b(i)),i&&(c===n||c(i))&&d.add(i)}}return this.background!==n||this.Gk!==n}return q};
da.Xl=function(a,b,c,d,e,g){if(this.Nf===q)return q;g===f&&(g=new Wa);b===f&&(b=n);c===f&&(c=n);g.multiply(this.transform);if(this.gv(a,g))return nj(this,b,c,e),h;if(this.Me(a,g)){if(!this.eh)for(var i=this.Fa.length;i--;){var j=this.Fa.n[i];if(j.visible||j===this.Yb){var k=j.va,l=this.va;if(!(k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height)){if(j instanceof x)k=j.Xl(a,b,c,d,e,g.copy());else{var k=j,l=a,m=d,p=g.copy();k.Nf===q?k=q:(p===f&&(p=new Wa),p.multiply(k.transform),k=m?k.Me(l,p):
k.gv(l,p))}k&&(b!==n&&(j=b(j)),j&&(c===n||c(j))&&e.add(j))}}}return d}return q};
da.Wn=function(a,b,c,d,e){if(this.Nf===q)return q;c===f&&(c=n);d===f&&(d=n);var g=this.Sa,i=this.Ih()?a:Za((new F).set(a),this.transform),j=this.Ih()?b:Za((new F).set(b),this.transform),j=i.Sl(j);if(0<i.x&&i.x<g.width&&0<i.y&&i.y<g.height||$a(i.x,i.y,0,0,0,g.height)<j||$a(i.x,i.y,0,g.height,g.width,g.height)<j||$a(i.x,i.y,g.width,g.height,g.width,0)<j||$a(i.x,i.y,g.width,0,0,0)<j){if(!this.eh){g=new F;i=new F;for(j=this.Fa.length;j--;){var k=this.Fa.n[j];if(k.visible||k===this.Yb){var l=k.va,m=this.va;
if(!(l.x>m.width||l.y>m.height||0>l.x+l.width||0>l.y+l.height))if(l=k.transform,k.Ih()?(Za(g.set(a),l),Za(i.set(b),l)):(g.set(a),i.set(b)),k instanceof x?k.Wn(g,i,c,d,e):k.MC(g,i))c!==n&&(k=c(k)),k&&(d===n||d(k))&&e.add(k)}}}return h}return q};function Mk(a){var b=a.v;if(b===f||b===Ib)b=n;b===n&&a instanceof V&&(a=a.Ga,a!==n&&(b=a.v));b===n&&(b=Jb);return b}function Nk(a){var b=a.w;if(b===f||b===Ib)b=n;b===n&&a instanceof V&&(a=a.Ga,a!==n&&(b=a.w));b===n&&(b=Rb);return b}
x.prototype.add=x.prototype.add=function(a){w.i(a,P,x,"add:element");this.yc(this.Fa.count,a)};x.prototype.elt=x.prototype.oa=function(a){return this.Fa.oa(a)};
x.prototype.insertAt=x.prototype.yc=function(a,b){b instanceof S&&w.m("Cannot add a Part to a Panel: "+b);if(this===b||this.Ei(b))this===b&&w.m("Cannot make a Panel contain itself: "+this.toString()),w.m("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.fa;c!==n&&c!==this&&w.m("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.S===ti&&!(b instanceof V)&&w.m("Can only add Shapes to a Grid Panel, not: "+b);b.Zk(this);b.Dl=n;if(this.oz!==n){var d=b.data;d!==n&&"object"===typeof d&&(this.Jf===n&&(this.Jf=new la(Object,x)),this.Jf.add(d,b))}var e=this.Fa,d=-1;if(c===this){for(var g=-1,i=e.count,j=0;j<i;j++)if(e.n[j]===b){g=j;break}if(-1!==g){if(g===a||g+1>=e.count&&a>=e.count)return;e.Te(g);d=g}else w.m("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>a||a>e.count)a=
e.count;e.yc(a,b);this.R();b.R();c=this.ca;c!==n&&(e=this.h,e!==n&&e.sa.tb||(-1!==d&&c.Pc(ke,"elements",this,b,n,d,n),c.Pc(je,"elements",this,n,b,n,a)))};x.prototype.remove=x.prototype.remove=function(a){w.i(a,P,x,"remove:element");for(var b=this.Fa,c=b.count,d=-1,e=0;e<c;e++)if(b.n[e]===a){d=e;break}-1!==d&&this.Od(d)};x.prototype.removeAt=x.prototype.Te=function(a){u&&w.o(a,x,"removeAt:idx");0<=a&&this.Od(a)};
x.prototype.Od=function(a){var b=this.Fa,c=b.oa(a);c.Dl=n;c.Zk(n);if(this.Jf!==n){var d=c.data;"object"===typeof d&&this.Jf.remove(d)}b.Te(a);this.ac=q;this.R();b=this.ca;b!==n&&(d=this.h,d!==n&&d.sa.tb||b.Pc(ke,"elements",this,c,n,a,n))};w.u(x,{Sv:"rowCount"},function(){return this.nf.length});
x.prototype.getRowDefinition=x.prototype.$d=function(a){u&&w.o(a,x,"getRowDefinition:idx");0>a&&w.ra(a,">= 0",x,"getRowDefinition:idx");var a=Math.round(a),b=this.nf;if(b[a]===f){var c=new dk;c.Zk(this);c.sl=h;c.ea=a;b[a]=c}return b[a]};x.prototype.removeRowDefinition=x.prototype.RL=function(a){u&&w.o(a,x,"removeRowDefinition:idx");0>a&&w.ra(a,">= 0",x,"removeRowDefinition:idx");var a=Math.round(a),b=this.nf;b[a]&&(b[a]=f)};w.u(x,{bv:"columnCount"},function(){return this.Ze.length});
x.prototype.getColumnDefinition=x.prototype.Zd=function(a){u&&w.o(a,x,"getColumnDefinition:idx");0>a&&w.ra(a,">= 0",x,"getColumnDefinition:idx");var a=Math.round(a),b=this.Ze;if(b[a]===f){var c=new dk;c.Zk(this);c.sl=h;c.ea=a;b[a]=c}return b[a]};x.prototype.removeColumnDefinition=x.prototype.QL=function(a){u&&w.o(a,x,"removeColumnDefinition:idx");0>a&&w.ra(a,">= 0",x,"removeColumnDefinition:idx");var a=Math.round(a),b=this.Ze;b[a]&&(b[a]=f)};w.g(x,"rowSizing",x.prototype.lE);
w.defineProperty(x,{lE:"rowSizing"},t("Rq"),function(a){var b=this.Rq;b!==a&&(a!==Kk&&a!==Qk&&w.m("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Rq=a,this.R(),this.j("rowSizing",b,a))});w.g(x,"columnSizing",x.prototype.kC);
w.defineProperty(x,{kC:"columnSizing"},t("Wo"),function(a){var b=this.Wo;b!==a&&(a!==Kk&&a!==Qk&&w.m("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Wo=a,this.R(),this.j("columnSizing",b,a))});w.g(x,"topIndex",x.prototype.iI);w.defineProperty(x,{iI:"topIndex"},t("rn"),function(a){var b=this.rn;b!==a&&((!isFinite(a)||0>a)&&w.m("topIndex must be greater than zero and a real number. Was "+a),this.rn=a,Bj(this),this.j("topIndex",b,a))});
w.g(x,"leftIndex",x.prototype.aH);w.defineProperty(x,{aH:"leftIndex"},t("Vm"),function(a){var b=this.Vm;b!==a&&((!isFinite(a)||0>a)&&w.m("leftIndex must be greater than zero and a real number. Was "+a),this.Vm=a,Bj(this),this.j("leftIndex",b,a))});w.g(x,"data",x.prototype.data);
w.defineProperty(x,{data:"data"},t("Am"),function(a){var b=this.Am;if(b!==a){var c=this instanceof S&&!(this instanceof of);c&&w.k(a,"object",x,"data");zf(this);this.Am=a;var d=this.h;d!==n&&(c?this instanceof U?(b!==n&&d.fk.remove(b),a!==n&&d.fk.add(a,this)):(b!==n&&d.Ph.remove(b),a!==n&&d.Ph.add(a,this)):(c=this.fa,c!==n&&c.Jf!==n&&(b!==n&&c.Jf.remove(b),a!==n&&c.Jf.add(a,this))));this.j("data",b,a);d!==n&&d.sa.tb||a!==n&&this.vb()}});function Zj(a){a=a.gl;return a!==n&&a.$a}
function zf(a){var b=a.gl;if(b===n)a.data!==n&&w.m("Template cannot have .data be non-null: "+a),a.gl=b=new z(df);else if(b.$a)return;var c=new z(P);Tk(a,a,function(a,d){var e=d.pc;if(e!==n){d.um=q;for(var g=e.l;g.next();){e=g.value;e.mode===ff&&(d.um=h);var i=e.Eo;if(i!==n){var r=a;""!==i&&(r=a.Je(i));r!==n&&(c.add(r),r.er===f&&(r.er=new z(df)),r.er.add(e))}b.add(e)}}if(d instanceof x){if(0<d.nf.length){g=d.nf;i=g.length;for(r=0;r<i;r++){var s=g[r];if(s!==f&&s.pc!==n)for(var v=s.pc.l;v.next();)e=
v.value,e.Sf=s,e.ey=2,e.Hu=s.index,b.add(e)}}if(0<d.Ze.length){g=d.Ze;i=g.length;for(r=0;r<i;r++)if(s=g[r],s!==f&&s.pc!==n)for(v=s.pc.l;v.next();)e=v.value,e.Sf=s,e.ey=1,e.Hu=s.index,b.add(e)}}});for(var d=c.l;d.next();){var e=d.value;if(e.er!==f){e.um=h;for(var g=e.er.l;g.next();){var i=g.value;e.pc===n&&(e.pc=new z(df));e.pc.add(i)}}delete e.er}for(d=b.l;d.next();)e=d.value,g=e.Sf,g!==n&&(e.Sf=n,g===a?e.km="":(g instanceof dk&&(g=g.fa),e.km=""!==g.name?g.name:g.name="_"+w.ec(g)));b.freeze();a instanceof
S&&a.be()&&(Gh(a,Infinity,Infinity),a.Dc())}
x.prototype.updateTargetBindings=x.prototype.vb=function(a){var b=this.gl;if(b!==n){a===f&&(a="");for(b=b.l;b.next();){var c=b.value,d=c.Uz;if(!(""!==a&&d!==a)&&(d=c.Wz,!(c.oC===n&&""===d))){var d=this.data,e=c.Eo;e!==n&&(d=this.Je(e));if(d===n)u&&w.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.km;if(""!==g){if(e=this.Je(g),e===n)continue}else c.Sf!==n&&(e=c.Sf);g=c.ey;if(0!==g){if(!(e instanceof x))continue;1===g?e=e.Zd(c.Hu):2===g&&(e=e.$d(c.Hu))}e!==
f&&c.QE(e,d)}}}}};w.g(x,"itemArray",x.prototype.oz);w.defineProperty(x,{oz:"itemArray"},t("sk"),function(a){var b=this.sk;if(b!==a){u&&(a!==n&&!w.isArray(a))&&w.m("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.h;c!==n&&b!==n&&Oi(c,this);this.sk=a;c!==n&&a!==n&&Mi(c,this);this.j("itemArray",b,a);c!==n&&c.sa.tb||this.Iz()}});
x.prototype.rebuildItemElements=x.prototype.Iz=function(){var a=0;if(this.type===ah||this.type===Wh||this.type===Sg)a=1;for(;this.Fa.length>a;)this.Od(a);a=this.oz;if(a!==n)for(var b=w.Sb(a),c=0;c<b;c++)Xh(this,w.Eb(a,c))};
function Xh(a,b,c){if(!(b===f||b===n)){var d=a.getCategoryForItemData(b),e=a.findTemplateForItemData(b,d);e instanceof x&&(zf(e),e=e.copy(),"object"===typeof b&&(a.Jf===n&&(a.Jf=new la(Object,x)),a.Jf.add(b,e)),"number"===typeof c?((a.type===ah||a.type===Wh)&&c++,a.yc(c,e),Vk(e,c),Yh(a,c)):(a.add(e),Vk(e,a.Fa.count-1)),e.vx=d,e.data=b)}}function Yh(a,b){for(var c=a.Fa,d=b+1;d<c.length;){var e=c.oa(d);e instanceof x&&Vk(e,d);d++}}function Vk(a,b){a.type===vj?a.nc=b:a.type===wj&&(a.Ec=b)}
x.prototype.isItemPanel=x.prototype.SG=function(){return this.sk!==n||this.Ag!==n};w.g(x,"itemTemplate",x.prototype.XG);w.defineProperty(x,{XG:"itemTemplate"},function(){return this.Ag===n?n:this.Ag.qa("")},function(a){this.Ag===n&&(this.Ag=new la("string",x));var b=this.Ag.qa("");b!==a&&(w.i(a,x,x,"itemTemplate"),a instanceof S&&w.m("itemTemplate must not be a Part: "+a),this.Ag.add("",a),this.j("itemTemplate",b,a),a=this.h,a!==n&&a.sa.tb||this.Iz())});w.g(x,"itemTemplateMap",x.prototype.rD);
w.defineProperty(x,{rD:"itemTemplateMap"},t("Ag"),function(a){var b=this.Ag;if(b!==a){w.i(a,la,x,"itemTemplateMap");for(var c=a.l;c.next();){var d=c.value;d instanceof S&&w.m("Template in itemTemplateMap must not be a Part: "+d)}this.Ag=a;this.j("itemTemplateMap",b,a);a=this.h;a!==n&&a.sa.tb||this.Iz()}});w.g(x,"itemCategoryProperty",x.prototype.WG);
w.defineProperty(x,{WG:"itemCategoryProperty"},t("Qm"),function(a){var b=this.Qm;b!==a&&("string"!==typeof a&&"function"!==typeof a&&w.ic(a,"string or function",x,"itemCategoryProperty"),this.Qm=a,this.j("itemCategoryProperty",b,a))});
x.prototype.getCategoryForItemData=x.prototype.DK=function(a){if(a===n)return"";var b=this.Qm;if("function"===typeof b)b=b(a);else if("string"===typeof b&&"object"===typeof a){if(""===b)return"";b=w.Va(a,b)}else return"";if(b===f)return"";if("string"===typeof b)return b;u&&w.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};
x.prototype.findTemplateForItemData=x.prototype.tK=function(a,b){var c=this.rD,d=n;c!==n&&(d=c.qa(b));d===n&&(w.sF||(w.sF=h,w.trace('No item template Panel found for category "'+b+'" on '+this),w.trace("  Using default item template."),c=new x,d=new na,d.bind(new df("text","",le)),c.add(d),w.bF=c),d=w.bF);return d instanceof x?d:n};w.g(x,"isAtomic",x.prototype.QG);
w.defineProperty(x,{QG:"isAtomic"},t("eh"),function(a){var b=this.eh;b!==a&&(w.k(a,"boolean",x,"isAtomic"),this.eh=a,this.j("isAtomic",b,a))});w.g(x,"opacity",x.prototype.opacity);w.defineProperty(x,{opacity:"opacity"},t("gi"),function(a){var b=this.gi;b!==a&&(w.k(a,"number",x,"opacity"),(0>a||1<a)&&w.ra(a,"0 <= val <= 1",x,"opacity"),this.gi=a,this.j("opacity",b,a),a=this.h,a!==n&&Lh(a))});
function dk(){w.jc(this);this.xk=n;this.sl=h;this.ea=0;this.of=NaN;this.zl=0;this.yl=Infinity;this.Aa=Ib;this.rb=this.Wa=0;this.pc=n;this.br=Wk;this.oh=ch}w.P("RowColumnDefinition",dk);dk.prototype.copy=function(){var a=new dk;a.sl=this.sl;a.ea=this.ea;a.of=this.of;a.zl=this.zl;a.yl=this.yl;a.Aa=this.Aa;a.Wa=this.Wa;a.rb=this.rb;a.oh=this.oh;a.br=this.br;a.pc=this.pc;return a};var Wk;dk.Default=Wk=w.s(dk,"Default",0);var Qk;dk.None=Qk=w.s(dk,"None",1);var Kk;
dk.ProportionalExtra=Kk=w.s(dk,"ProportionalExtra",2);dk.prototype.Zk=ba("xk");function Ok(a,b){a.Wa=isNaN(a.of)?Math.max(Math.min(a.yl,b),a.zl):Math.max(Math.min(a.yl,a.of),a.zl)}dk.prototype.Ud=function(a,b,c,d,e){var g=this.xk;if(g!==n){g.R();for(var i=this.Fv,j=g.Fa,k=j.length,l=0;l<k;l++){var m=j.n[l];(i?m.nc:m.Ec)===this.index&&m.R()}g.Pc(ie,a,this,b,c,d,e);if(this.pc!==n&&(b=g.Tr(),b!==n&&(b=b.data,b!==n)))for(c=this.pc.l;c.next();)c.value.PE(this,b,a)}};w.u(dk,{fa:"panel"},t("xk"));
w.u(dk,{Fv:"isRow"},t("sl"));w.u(dk,{index:"index"},t("ea"));w.g(dk,"height",dk.prototype.height);w.defineProperty(dk,{height:"height"},t("of"),function(a){var b=this.of;b!==a&&(u&&w.k(a,"number",dk,"height"),0>a&&w.ra(a,">= 0",dk,"height"),this.of=a,Ok(this,this.Wa),this.Ud("size",b,a))});w.g(dk,"width",dk.prototype.width);
w.defineProperty(dk,{width:"width"},t("of"),function(a){var b=this.of;b!==a&&(u&&w.k(a,"number",dk,"width"),0>a&&w.ra(a,">= 0",dk,"width"),this.of=a,Ok(this,this.Wa),this.Ud("size",b,a))});w.g(dk,"minimum",dk.prototype.bg);w.defineProperty(dk,{bg:"minimum"},t("zl"),function(a){var b=this.zl;b!==a&&(u&&w.k(a,"number",dk,"minimum"),(0>a||!isFinite(a))&&w.ra(a,">= 0",dk,"minimum"),this.zl=a,Ok(this,this.Wa),this.Ud("minimum",b,a))});w.g(dk,"maximum",dk.prototype.de);
w.defineProperty(dk,{de:"maximum"},t("yl"),function(a){var b=this.yl;b!==a&&(u&&w.k(a,"number",dk,"maximum"),0>a&&w.ra(a,">= 0",dk,"maximum"),this.yl=a,Ok(this,this.Wa),this.Ud("maximum",b,a))});w.g(dk,"alignment",dk.prototype.Db);w.defineProperty(dk,{Db:"alignment"},t("Aa"),function(a){var b=this.Aa;b.I(a)||(u&&w.i(a,H,dk,"alignment"),this.Aa=a.O(),this.Ud("alignment",b,a))});w.g(dk,"stretch",dk.prototype.Gh);
w.defineProperty(dk,{Gh:"stretch"},t("oh"),function(a){var b=this.oh;b!==a&&(u&&w.jb(a,P,dk,"stretch"),this.oh=a,this.Ud("stretch",b,a))});w.g(dk,"sizing",dk.prototype.Ds);w.defineProperty(dk,{Ds:"sizing"},t("br"),function(a){var b=this.br;b!==a&&(u&&w.jb(a,dk,dk,"sizing"),this.br=a,this.Ud("sizing",b,a))});function Pk(a){if(a.Ds===Wk){var b=a.xk;return a.Fv?b.lE:b.kC}return a.Ds}w.u(dk,{ed:"actual"},t("Wa"));w.u(dk,{position:"position"},t("rb"));
dk.prototype.bind=dk.prototype.bind=function(a){a.Sf=this;var b=this.fa;b!==n&&(b=b.Tr(),b!==n&&Zj(b)&&w.m("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a));this.pc===n&&(this.pc=new z(df));this.pc.add(a)};
function V(){P.call(this);this.Ga=n;this.sp="None";this.lh=q;this.Ap=ch;this.ck=n;this.lc=this.Ce="black";this.ph=1;this.mn="butt";this.nn="miter";this.on=10;this.gr=n;this.pf=0;this.mi=this.li=Ib;this.zq=this.yq=0;this.Jp=q;this.Pp=h;this.lF=new G;this.Hm=this.qn="None";this.Gp=1}w.P("Shape",V);w.Da(V,P);
V.prototype.xb=function(a){P.prototype.xb.call(this,a);a.Ga=this.Ga;a.sp=this.sp;a.lh=this.lh;a.Ap=this.Ap;a.ck=this.ck;a.Ce=this.Ce;a.lc=this.lc;a.ph=this.ph;a.mn=this.mn;a.nn=this.nn;a.on=this.on;a.gr=this.gr;a.pf=this.pf;a.li=this.li.O();a.mi=this.mi.O();a.yq=this.yq;a.zq=this.zq;a.Jp=this.Jp;a.Pp=this.Pp;a.qn=this.qn;a.Hm=this.Hm;a.Gp=this.Gp};V.prototype.toString=function(){return"Shape("+("None"!==this.gb?this.gb:"None"!==this.nm?this.nm:this.wv)+")#"+w.ec(this)};
V.prototype.Sn=function(a){if(!(this.lc===n&&this.Ce===n)){this.Ce!==n&&xj(this,a,this.Ce,h);this.lc!==n&&xj(this,a,this.lc,q);var b=this.ph;if(0===b){var c=this.ca;c instanceof of&&(c.type===Sg&&c.Cc instanceof V)&&(b=c.Cc.eb)}a.lineWidth=b;a.lineJoin=this.nn;a.lineCap=this.mn;a.miterLimit=this.on;var d=q;this.ca&&(d=this.ca.co);var e=h;this.lc!==n&&this.Ce===n&&(e=q);b=q;c=this.AE;if(c!==n){var g=b=h;a.setLineDash!==f?(a.setLineDash(c),a.lineDashOffset=this.pf):a.webkitLineDash!==f?(a.webkitLineDash=
c,a.webkitLineDashOffset=this.pf):a.mozDash!==f?(a.mozDash=c,a.mozDashOffset=this.pf):g=q}var i=this.Ga;if(i!==n){if(i.S===pd)a.beginPath(),b&&!g?Xk(a,i.Cb,i.Ob,i.Bc,i.Ic,c,this.pf):(a.moveTo(i.Cb,i.Ob),a.lineTo(i.Bc,i.Ic)),this.Ce!==n&&a.fill(),this.lc!==n&&a.stroke();else if(i.S===qd){var j=i.Cb,k=i.Ob,l=i.Bc,i=i.Ic,m=Math.min(j,l),p=Math.min(k,i),j=Math.abs(l-j),k=Math.abs(i-k);this.Ce!==n&&a.fillRect(m,p,j,k);if(this.lc!==n){if(e&&d){var r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=
0;a.shadowOffsetY=0;a.shadowBlur=0}b&&!g?(g=[[m,p],[m+j,p],[m+j,p+k],[m,p+k],[m,p]],a.beginPath(),Yk(a,g,c,this.pf),a.stroke()):a.strokeRect(m,p,j,k);e&&d&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2])}}else if(i.S===rd)j=i.Cb,k=i.Ob,l=i.Bc,i=i.Ic,m=Math.abs(l-j)/2,p=Math.abs(i-k)/2,j=Math.min(j,l)+m,k=Math.min(k,i)+p,a.beginPath(),a.moveTo(j,k-p),a.bezierCurveTo(j+ic*m,k-p,j+m,k-ic*p,j+m,k),a.bezierCurveTo(j+m,k+ic*p,j+ic*m,k+p,j,k+p),a.bezierCurveTo(j-ic*m,k+p,j-m,k+ic*p,j-m,k),
a.bezierCurveTo(j-m,k-ic*p,j-ic*m,k-p,j,k-p),a.closePath(),this.Ce!==n&&a.fill(),b&&!g&&(g=[],Bc(j,k-p,j+ic*m,k-p,j+m,k-ic*p,j+m,k,0.5,g),Bc(j+m,k,j+m,k+ic*p,j+ic*m,k+p,j,k+p,0.5,g),Bc(j,k+p,j-ic*m,k+p,j-m,k+ic*p,j-m,k,0.5,g),Bc(j-m,k,j-m,k-ic*p,j-ic*m,k-p,j,k-p,0.5,g),a.beginPath(),Yk(a,g,c,this.pf)),this.lc!==n&&(e&&d&&(r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),e&&d&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2]));
else if(i.S===id){for(var m=i.ik,p=m.length,s=0;s<p;s++){var v=m.n[s];a.beginPath();a.moveTo(v.ma,v.na);for(var y=v.za.n,C=y.length,E=n,I=0;I<C;I++){var D=y[I];switch(D.S){case Jd:a.moveTo(D.C,D.D);break;case td:a.lineTo(D.C,D.D);break;case Ld:a.bezierCurveTo(D.gf,D.hf,D.ii,D.ji,D.Of,D.Pf);break;case Md:a.quadraticCurveTo(D.gf,D.hf,D.Of,D.Pf);break;case Nd:if(D.radiusX===D.radiusY)E=Math.PI/180,a.arc(D.vm,D.wm,D.radiusX,D.mg*E,(D.mg+D.Hh)*E,0>D.Hh?h:q);else for(var E=Td(D,v),M=E.length,N=0;N<M;N++){var Z=
E[N];0===N&&a.lineTo(Z.x1,Z.y1);a.bezierCurveTo(Z.x2,Z.y2,Z.Df,Z.Ef,Z.Wc,Z.Xc)}break;case Fd:E&&E.type===Nd?(E=Td(E,v),E=E[E.length-1]||n,E!==n&&(j=E.Wc,l=E.Xc)):(j=E?E.C:v.ma,l=E?E.D:v.na);E=Wd(D,v,j,l);M=E.length;for(N=0;N<M;N++)Z=E[N],a.bezierCurveTo(Z.x2,Z.y2,Z.Df,Z.Ef,Z.Wc,Z.Xc);break;default:w.m("Segment not of valid type")}D.Vh&&a.closePath();E=D}d?v.If?(v.ql===h&&this.Ce!==n?(a.fill(),e=h):e=q,this.lc!==n&&(e&&(r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=
0,a.shadowBlur=0),(!b||g)&&a.stroke(),e&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2]))):(e&&(r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),v.ql===h&&this.Ce!==n&&a.fill(),this.lc!==n&&(!b||g)&&a.stroke(),e&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2])):(v.ql===h&&this.Ce!==n&&a.fill(),this.lc!==n&&(!b||g)&&a.stroke())}if(b&&!g){r=e;g=i.ik;e=g.length;for(i=0;i<e;i++){j=g.n[i];a.beginPath();l=[];l.push([j.ma,j.na]);
m=j.ma;p=j.na;s=m;v=p;y=j.za.n;C=y.length;for(I=0;I<C;I++){D=y[I];switch(D.S){case Jd:Yk(a,l,c,this.pf);l=[];l.push([D.C,D.D]);m=D.C;p=D.D;s=m;v=p;break;case td:l.push([D.C,D.D]);m=D.C;p=D.D;break;case Ld:E=[];Bc(m,p,D.gf,D.hf,D.ii,D.ji,D.Of,D.Pf,0.5,E);l=l.concat(E);m=D.C;p=D.D;break;case Md:E=[];Hc(m,p,D.gf,D.hf,D.Of,D.Pf,0.5,E);l=l.concat(E);m=D.C;p=D.D;break;case Nd:M=Td(D,j);N=M.length;for(Z=0;Z<N;Z++){var va=M[Z],E=[];Bc(m,p,va.x2,va.y2,va.Df,va.Ef,va.Wc,va.Xc,0.5,E);l=l.concat(E);m=va.Wc;p=
va.Xc}break;case Fd:M=Wd(D,j,m,p);N=M.length;for(Z=0;Z<N;Z++)va=M[Z],E=[],Bc(m,p,va.x2,va.y2,va.Df,va.Ef,va.Wc,va.Xc,0.5,E),l=l.concat(E),m=va.Wc,p=va.Xc;break;default:w.m("Segment not of valid type")}D.Vh&&(l.push([s,v]),Yk(a,l,c,this.pf))}Yk(a,l,c,this.pf);this.lc!==n&&(r&&d&&(k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),a.stroke(),r&&d&&(a.shadowOffsetX=k[0],a.shadowOffsetY=k[1],a.shadowBlur=k[2]))}}}b&&(a.setLineDash!==f?(a.setLineDash(n),
a.lineDashOffset=0):a.webkitLineDash!==f?(a.webkitLineDash=[],a.webkitLineDashOffset=0):a.mozDash!==f&&(a.mozDash=n,a.mozDashOffset=0))}}};function Xk(a,b,c,d,e,g,i){var j=0.0010,k=g.length;a.moveTo(b,c);d-=b;j=e-c;0===d&&(d=0.0010);for(var e=j/d,l=Math.sqrt(d*d+j*j),m=0,p=h,r=0===i?q:h;0.1<=l;){r?(j=g[m++%k],i%=j,j-=i,r=q):j=g[m++%k];j>l&&(j=l);var s=Math.sqrt(j*j/(1+e*e));0>d&&(s=-s);b+=s;c+=e*s;p?a.lineTo(b,c):a.moveTo(b,c);l-=j;p=!p}}
function Yk(a,b,c,d){var e=0.0010,g=c.length,i,j,k,l=b.length;if(!(2>l))if(i=b[0][0],j=b[0][1],2===l)Xk(a,i,j,b[1][0],b[1][1],c,d);else{a.moveTo(i,j);for(var m,p,r,s=0,v=[],y=1;y<l;y++)m=b[y],e=m[0],k=m[1],m=e-i,i=k-j,0===m&&(m=0.0010),p=i/m,i=Math.sqrt(m*m+i*i),v.push([m,p,i]),s+=i,i=e,j=k;i=b[0][0];j=b[0][1];b=0;l=h;e=c[b%g];y=0===d?q:h;k=0;r=v[k];m=r[0];p=r[1];r=r[2];for(var C=0;0.1<=s;){0===C&&(y?(e=c[b%g],b++,d%=e,e-=d,y=q):(e=c[b%g],b++));e>s&&(e=s);e>r?(C=e-r,e=r):C=0;var E=Math.sqrt(e*e/(1+
p*p));0>m&&(E=-E);i+=E;j+=p*E;l?a.lineTo(i,j):a.moveTo(i,j);s-=e;r-=e;if(0!==C){k++;if(k===v.length)break;r=v[k];m=r[0];p=r[1];r=r[2];e=C}else l=!l}}}V.prototype.getDocumentPoint=V.prototype.Ab=function(a){yb(a)&&w.m("Spot must be real");var b=this.Sa,c=this.eb,a=new F(a.x*(b.width+c)-c/2+b.x+a.offsetX,a.y*(b.height+c)-c/2+b.y+a.offsetY);this.je.Ta(a);return a};
V.prototype.uj=function(a,b){var c=this.Ga;if(c===n||this.fill===n&&this.stroke===n)return q;var d=c.Fb,e=this.eb/2;c.type===pd&&!b&&(e+=2);var g=this.lF;g.set(d);g.Ng(e+2,e+2);if(!g.ua(a))return q;d=e+1E-4;if(c.type===pd){if(this.stroke===n)return q;d=(c.C-c.ma)*(a.x-c.ma)+(c.D-c.na)*(a.y-c.na);return 0>(c.ma-c.C)*(a.x-c.C)+(c.na-c.D)*(a.y-c.D)||0>d?q:uc(c.ma,c.na,c.C,c.D,e,a.x,a.y)}if(c.type===qd){var i=c.ma,j=c.na,k=c.C,l=c.D,c=Math.min(i,k),m=Math.min(j,l),i=Math.abs(k-i),j=Math.abs(l-j);g.x=
c;g.y=m;g.width=i;g.height=j;if(this.fill===n){g.Ng(-d,-d);if(g.ua(a))return q;g.Ng(d,d)}this.stroke!==n&&g.Ng(e,e);return g.ua(a)}if(c.type===rd){i=c.ma;j=c.na;k=c.C;l=c.D;c=Math.min(i,k);m=Math.min(j,l);i=Math.abs(k-i);j=Math.abs(l-j);g=i/2;j/=2;c=a.x-(c+g);m=a.y-(m+j);if(this.fill===n){g-=d;j-=d;if(0>=g||0>=j||1>=c*c/(g*g)+m*m/(j*j))return q;g+=d;j+=d}this.stroke!==n&&(g+=e,j+=e);return 0>=g||0>=j?q:1>=c*c/(g*g)+m*m/(j*j)}if(c.type===id)return this.fill===n?Yd(c,a.x,a.y,e):c.ua(a,e,1<this.eb,b);
w.m("Unknown Geometry type");return q};
V.prototype.js=function(a,b,c,d){var e=this.wa,g=this.ph,a=Math.max(a,0),b=Math.max(b,0),i;this.lh?i=this.Ga.Fb:(Zk[this.gb]===f&&w.m("Unsupported Figure:"+this.gb),i=Zk[this.gb].Fb);var j=i.width,k=i.height,l=i.width,m=i.height;switch(oj(this)){case ij:d=c=0;break;case kd:l=Math.max(a-g,0);m=Math.max(b-g,0);break;case kj:l=Math.max(a-g,0);d=0;break;case jj:c=0,m=Math.max(b-g,0)}isFinite(e.width)&&(l=e.width);isFinite(e.height)&&(m=e.height);e=this.ce;i=this.ve;c=Math.max(c/this.scale,i.width)-g;
d=Math.max(d/this.scale,i.height)-g;l=Math.min(e.width,l);m=Math.min(e.height,m);l=isFinite(l)?Math.max(c,l):Math.max(j,c);m=isFinite(m)?Math.max(d,m):Math.max(k,d);c=this.xv;c=this.lh?c===ch?kd:c:c===ch?Zk[this.gb].$b:c;switch(c){case ij:break;case kd:j=l;k=m;break;case dh:c=Math.min(l/j,m/k);isFinite(c)||(c=1);j*=c;k*=c;break;default:w.m(c+" is not a valid geometryStretch.")}if(this.lh){i=this.Vc;d=j;e=k;c=i.copy();i=i.Fb;d/=i.width;e/=i.height;isFinite(d)||(d=1);isFinite(e)||(e=1);if(!(1===d&&
1===e)){switch(c.type){case pd:case qd:case rd:c.Cb*=d;c.Ob*=e;c.Bc*=d;c.Ic*=e;break;case id:i=c.sb;for(var p=i.length,r=0;r<p;r++){var s=i.n[r];s.ma*=d;s.na*=e;for(var s=s.za,v=s.length,y=0;y<v;y++){var C=s.n[y];switch(C.type){case td:case Jd:C.C*=d;C.D*=e;break;case Ld:C.gf*=d;C.hf*=e;C.ii*=d;C.ji*=e;C.C*=d;C.D*=e;break;case Md:C.Ub*=d;C.Ac*=e;C.C*=d;C.D*=e;break;case Nd:C.pa*=d;C.ta*=e;C.radiusX*=d;C.radiusY!==f&&(C.radiusY*=e);break;case Fd:C.C*=d;C.D*=e;C.radiusX*=d;C.radiusY*=e;break;default:w.m("Unknown Segment type: "+
C.type)}}}}c.Na=h}this.Ga=c}else if(this.Ga===n||this.Ga.Et!==a||this.Ga.Dt!==b)c=j,d=k,i=this.wa,e=i.width,i=i.height,c!==f&&(!isNaN(c)&&isFinite(c))&&(e=c),d!==f&&(!isNaN(d)&&isFinite(d))&&(i=d),isFinite(e)||(e=100),isFinite(i)||(i=100),p=f,"None"!==this.nm?p=$k(this.nm):"None"!==this.wv?p=$k(this.wv):(r=al[this.gb],"string"===typeof r&&(r=al[r]),r===f&&w.m("Unknown Shape.figure: "+this.gb),p=r(this,e,i),p.Td=new bb(e,i)),p===f&&(r=al.Rectangle)&&(p=r(this,e,i)),p.Et=c,p.Dt=d,this.Ga=p;i=this.Ga.Fb;
Infinity===a||Infinity===b?lj(this,i.x-g/2,i.y-g/2,0===a&&0===j?0:i.width+g,0===b&&0===k?0:i.height+g):lj(this,-(g/2),-(g/2),l+g,m+g)};
function Rk(a,b,c){if(a.ac!==q){a.Tc.Ia();var d=a.ph;if(0===d){var e=a.ca;e instanceof of&&(e.type===Sg&&e.Cc instanceof V)&&(d=e.Cc.eb)}d*=a.Wb;lj(a,-(d/2),-(d/2),b+d,c+d);b=a.Tc;c=a.ce;d=a.ve;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.Tc.freeze();a.Tc.T()||w.m("Non-real measuredBounds has been set");a.ac=q}}V.prototype.tj=function(a,b,c,d){rj(this,a,b,c,d)};
V.prototype.getNearestIntersectionPoint=V.prototype.VC=function(a,b,c){return this.Xr(a.x,a.y,b.x,b.y,c)};
V.prototype.Xr=function(a,b,c,d,e){var g=this.transform,i=1/(g.m11*g.m22-g.m12*g.m21),j=g.m22*i,k=-g.m12*i,l=-g.m21*i,m=g.m11*i,p=i*(g.m21*g.dy-g.m22*g.dx),r=i*(g.m12*g.dx-g.m11*g.dy),g=a*j+b*l+p,i=a*k+b*m+r,j=c*j+d*l+p,k=c*k+d*m+r,l=this.eb/2,p=this.Ga;p===n&&(Gh(this,Infinity,Infinity),p=this.Ga);r=p.Fb;m=q;if(p.type===pd)if(1.5>=this.eb)m=Lc(p.Cb,p.Ob,p.Bc,p.Ic,g,i,j,k,e);else{var s;p.Cb===p.Bc?(s=l,r=0):(b=(p.Ic-p.Ob)/(p.Bc-p.Cb),r=l/Math.sqrt(1+b*b),s=r*b);b=[];d=new F;Lc(p.Cb+s,p.Ob+r,p.Bc+
s,p.Ic+r,g,i,j,k,d)&&b.push(d);d=new F;Lc(p.Cb-s,p.Ob-r,p.Bc-s,p.Ic-r,g,i,j,k,d)&&b.push(d);d=new F;Lc(p.Cb+s,p.Ob+r,p.Cb-s,p.Ob-r,g,i,j,k,d)&&b.push(d);d=new F;Lc(p.Bc+s,p.Ic+r,p.Bc-s,p.Ic-r,g,i,j,k,d)&&b.push(d);d=b.length;if(0===d)return q;m=h;r=Infinity;for(s=0;s<d;s++){var j=b[s],v=(j.x-g)*(j.x-g)+(j.y-i)*(j.y-i);v<r&&(r=v,e.x=j.x,e.y=j.y)}}else if(p.type===qd)d=r.x-l,m=Sc(d,r.y-l,r.x+r.width+l,r.y+r.height+l,g,i,j,k,e);else if(p.type===rd)a:if(b=r.copy().Ng(l,l),0===b.width)m=Lc(b.x,b.y,b.x,
b.y+b.height,g,i,j,k,e);else if(0===b.height)m=Lc(b.x,b.y,b.x+b.width,b.y,g,i,j,k,e);else{var a=b.width/2,y=b.height/2,d=b.x+a,b=b.y+y,c=9999;g!==j&&(c=(i-k)/(g-j));if(9999>Math.abs(c)){m=i-b-c*(g-d);if(0>a*a*c*c+y*y-m*m){e.x=NaN;e.y=NaN;m=q;break a}l=Math.sqrt(a*a*c*c+y*y-m*m);j=(-(a*a*c*m)+a*y*l)/(y*y+a*a*c*c)+d;a=(-(a*a*c*m)-a*y*l)/(y*y+a*a*c*c)+d;k=c*(j-d)+m+b;b=c*(a-d)+m+b;d=Math.abs((g-j)*(g-j))+Math.abs((i-k)*(i-k));i=Math.abs((g-a)*(g-a))+Math.abs((i-b)*(i-b));d<i?(e.x=j,e.y=k):(e.x=a,e.y=
b)}else{j=y*y;k=g-d;j-=j/(a*a)*k*k;if(0>j){e.x=NaN;e.y=NaN;m=q;break a}l=Math.sqrt(j);k=b+l;b-=l;d=Math.abs(k-i);i=Math.abs(b-i);d<i?(e.x=g,e.y=k):(e.x=g,e.y=b)}m=h}else if(p.type===id){var C,E,I,D=new F;s=j-g;r=k-i;r=s*s+r*r;e.x=j;e.y=k;for(s=0;s<p.sb.count;s++){var M=p.sb.n[s],N=M.za;C=M.ma;E=M.na;for(var Z=C,va=E,ka,ta,Da=0;Da<N.count;Da++){ka=N.n[Da];ta=ka.type;v=ka.C;I=ka.D;var Ha=q;switch(ta){case Jd:Z=v;va=I;break;case td:Ha=bl(C,E,v,I,g,i,j,k,D);break;case Ld:Ha=ka.Ub;ta=ka.Ac;var cb=ka.jg,
rb=ka.kg,Ha=Ic(C,E,Ha,ta,cb,rb,v,I,g,i,j,k,0.5,D);break;case Md:Ha=(C+2*ka.Ub)/3;ta=(E+2*ka.Ac)/3;cb=(2*ka.Ub+v)/3;rb=(2*ka.Ub+v)/3;Ha=Ic(C,E,Ha,ta,cb,rb,v,I,g,i,j,k,0.5,D);break;case Nd:case Fd:I=ka.type===Nd?Td(ka,M):Wd(ka,M,C,E);ta=I.length;for(s=0;s<ta;s++)y=I[s],0===s&&bl(C,E,y.x1,y.y1,g,i,j,k,D)&&(v=cl(g,i,D,r,e),v<r&&(r=v,m=h)),Ic(y.x1,y.y1,y.x2,y.y2,y.Df,y.Ef,y.Wc,y.Xc,g,i,j,k,0.5,D)&&(v=cl(g,i,D,r,e),v<r&&(r=v,m=h));v=y.Wc;I=y.Xc;break;default:w.m("Unknown Segment type: "+ka.type)}C=v;E=
I;Ha&&(v=cl(g,i,D,r,e),v<r&&(r=v,m=h));ka.Bv&&(v=Z,I=va,bl(C,E,v,I,g,i,j,k,D)&&(v=cl(g,i,D,r,e),v<r&&(r=v,m=h)))}}g=c-a;i=d-b;d=Math.sqrt(g*g+i*i);e.x-=g/d*l;e.y-=i/d*l}else w.m("Invalid Geometry type");if(!m)return q;d=kb(this.transform,e);e.x=d.x;e.y=d.y;return h};function cl(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function bl(a,b,c,d,e,g,i,j,k){var l=q,m=(e-i)*(b-d)-(g-j)*(a-c);if(0===m)return q;k.x=((e*j-g*i)*(a-c)-(e-i)*(a*d-b*c))/m;k.y=((e*j-g*i)*(b-d)-(g-j)*(a*d-b*c))/m;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){if(e=b<d?b:d,a=b<d?d:b,(k.y>e||Ta(k.y,e))&&(k.y<a||Ta(k.y,a)))l=h}else if(e=a<c?a:c,a=a<c?c:a,(k.x>e||Ta(k.x,e))&&(k.x<a||Ta(k.x,a)))l=h;return l}
V.prototype.containedInRect=V.prototype.gv=function(a,b){if(b===f)return a.Ol(this.va);var c=this.Ga;c===n&&(Gh(this,Infinity,Infinity),c=this.Ga);var c=c.Fb,d=this.eb/2;return!a.ua(b.Ta(new F(c.x-d,c.y-d)))||!a.ua(b.Ta(new F(c.x-d,c.bottom+d)))||!a.ua(b.Ta(new F(c.right+d,c.bottom+d)))||!a.ua(b.Ta(new F(c.right+d,c.y-d)))?q:h};
V.prototype.intersectsRect=V.prototype.Me=function(a,b){function c(a,b){k.x=a*d.m11+b*d.m21+d.dx;k.y=a*d.m12+b*d.m22+d.dy}if(this.gv(a,b)||b===f&&(b=this.transform,a.Ol(this.va)))return h;var d=b.copy();d.kD();var e=a.left,g=a.right,i=a.top,j=a.bottom,k=new F;c(e,i);if(this.uj(k,h))return h;c(g,i);if(this.uj(k,h))return h;c(e,j);if(this.uj(k,h))return h;c(g,j);if(this.uj(k,h))return h;var l=new F,m=new F;d.set(b);d.mH(this.transform);d.kD();l.x=g;l.y=i;l.transform(d);k.x=e;k.y=i;k.transform(d);if(dl(this,
k,l,m))return h;k.x=g;k.y=j;k.transform(d);if(dl(this,k,l,m))return h;l.x=e;l.y=j;l.transform(d);if(dl(this,k,l,m))return h;k.x=e;k.y=i;k.transform(d);return dl(this,k,l,m)?h:q};function dl(a,b,c,d){if(!a.VC(b,c,d))return q;var a=b.x,b=b.y,e=c.x,g=c.y,c=d.x,d=d.y;if(a===e){var i;b<g?(i=b,a=g):(i=g,a=b);return d>=i&&d<=a}a<e?(i=a,a=e):i=e;return c>=i&&c<=a}
V.prototype.MC=function(a,b){if(this.fill!==n&&this.uj(a,h))return h;var c=a.Sl(b),d=c;1.5<this.eb&&(c=this.eb/2+Math.sqrt(c),c*=c);var e=this.Ga;e===n&&(Gh(this,Infinity,Infinity),e=this.Ga);var g=e.Cb,i=e.Ob,j=e.Bc,k=e.Ic;if(e.type===pd){var e=$a(a.x,a.y,g,i,j,k),l=(g-j)*(a.x-j)+(i-k)*(a.y-k);if(e<=(0<=(j-g)*(a.x-g)+(k-i)*(a.y-i)&&0<=l?c:d))return h}else if(e.type===qd){if($a(a.x,a.y,g,i,g,k)<=c||$a(a.x,a.y,g,i,j,i)<=c||$a(a.x,a.y,j,i,j,k)<=c||$a(a.x,a.y,g,k,j,k)<=c)return h}else if(e.type===rd){var e=
a.x-(g+j)/2,d=a.y-(i+k)/2,l=Math.abs(j-g)/2,m=Math.abs(k-i)/2;if(0===l||0===m)return e=$a(a.x,a.y,g,i,j,k),e<=c?h:q;g=new F(Infinity,Infinity);Rc(e,d,0,0,-l,-m,l,m,g);Rc(e,d,0,m,-l,-m,l,m,g);Rc(e,d,0,-m,-l,-m,l,m,g);Rc(e,d,0,l,-l,-m,l,m,g);Rc(e,d,0,-l,-l,-m,l,m,g);Rc(e,d,l/2,m/2,-l,-m,l,m,g);Rc(e,d,-l/2,m/2,-l,-m,l,m,g);Rc(e,d,l/2,-m/2,-l,-m,l,m,g);Rc(e,d,-l/2,-m/2,-l,-m,l,m,g);if((g.x-e)*(g.x-e)+(g.y-d)*(g.y-d)<c)return h}else if(e.type===id){k=e.Fb;g=k.x;i=k.y;j=k.x+k.width;k=k.y+k.height;if(a.x>
j&&a.x<g&&a.y>k&&a.y<i&&$a(a.x,a.y,g,i,g,k)>c&&$a(a.x,a.y,g,i,j,i)>c&&$a(a.x,a.y,j,k,g,k)>c&&$a(a.x,a.y,j,k,j,i)>c)return q;c=Math.sqrt(c);if(this.fill===n?Yd(e,a.x,a.y,c):e.ua(a,c,h))return h}return q};w.g(V,"geometry",V.prototype.Vc);w.defineProperty(V,{Vc:"geometry"},function(){return this.ck?this.ck:this.Ga},function(a){var b=this.Ga;b!==a&&(a!==n?(u&&w.i(a,hd,V,"geometry"),this.ck=this.Ga=a.freeze()):this.ck=this.Ga=n,this.lh=h,this.R(),this.j("geometry",b,a))});w.g(V,"geometryString",V.prototype.RC);
w.defineProperty(V,{RC:"geometryString"},function(){return this.Vc.toString()},function(a){var b=Cd(a),a=b.normalize();this.Vc=b;b=this.position;this.position=b.T()?new F(b.x-a.x,b.y-a.y):new F(-a.x,-a.y)});w.defineProperty(V,{jz:"isGeometryPositioned"},t("Jp"),function(a){u&&w.k(a,"boolean",V,"isGeometryPositioned");var b=this.Jp;b!==a&&(this.Jp=a,this.R(),this.j("isGeometryPositioned",b,a))});V.prototype.Zf=function(){this.lh?this.ck=n:this.Ga=n;this.R()};w.g(V,"fill",V.prototype.fill);
w.defineProperty(V,{fill:"fill"},t("Ce"),function(a){var b=this.Ce;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.Ce=a,uj(this),this.j("fill",b,a)});w.g(V,"stroke",V.prototype.stroke);w.defineProperty(V,{stroke:"stroke"},t("lc"),function(a){var b=this.lc;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.lc=a,uj(this),this.j("stroke",b,a)});w.g(V,"strokeWidth",V.prototype.eb);
w.defineProperty(V,{eb:"strokeWidth"},t("ph"),function(a){var b=this.ph;b!==a&&(u&&w.o(a,V,"strokeWidth"),0<=a&&(this.ph=a,this.R(),this.j("strokeWidth",b,a)))});w.g(V,"strokeCap",V.prototype.zE);w.defineProperty(V,{zE:"strokeCap"},t("mn"),function(a){var b=this.mn;b!==a&&("string"===typeof a&&("butt"===a||"round"===a||"square"===a)?(this.mn=a,uj(this),this.j("strokeCap",b,a)):w.ra(a,'"butt", "round", or "square"',V,"strokeCap"))});w.g(V,"strokeJoin",V.prototype.$H);
w.defineProperty(V,{$H:"strokeJoin"},t("nn"),function(a){var b=this.nn;b!==a&&("string"===typeof a&&("miter"===a||"bevel"===a||"round"===a)?(this.nn=a,uj(this),this.j("strokeJoin",b,a)):w.ra(a,'"miter", "bevel", or "round"',V,"strokeJoin"))});w.g(V,"strokeMiterLimit",V.prototype.aI);w.defineProperty(V,{aI:"strokeMiterLimit"},t("on"),function(a){var b=this.on;b!==a&&(u&&w.o(a,V,"strokeMiterLimit"),0<a&&(this.on=a,uj(this),this.j("strokeMiterLimit",b,a)))});w.g(V,"strokeDashArray",V.prototype.AE);
w.defineProperty(V,{AE:"strokeDashArray"},t("gr"),function(a){var b=this.gr;b!==a&&(this.gr=a,uj(this),this.j("strokeDashArray",b,a))});w.g(V,"strokeDashOffset",V.prototype.ZH);w.defineProperty(V,{ZH:"strokeDashOffset"},t("pf"),function(a){var b=this.pf;b!==a&&(u&&w.o(a,V,"strokeDashOffset"),0<a&&(this.pf=a,uj(this),this.j("strokeDashOffset",b,a)))});w.g(V,"figure",V.prototype.gb);
w.defineProperty(V,{gb:"figure"},t("sp"),function(a){var b=this.sp;if(b!==a){u&&w.k(a,"string",V,"figure");var c=al[a];"function"===typeof c?c=a:(c=al[a.toLowerCase()])||w.m("Unknown Shape.figure: "+a);b!==c&&(this.sp=c,this.lh=q,this.Zf(),this.j("figure",b,c))}});w.g(V,"toArrow",V.prototype.nm);
w.defineProperty(V,{nm:"toArrow"},t("qn"),function(a){var b=this.qn;a===h?a="Standard":a===q&&(a="None");if(b!==a){u&&w.k(a,"string",V,"toArrow");var c=$k(a);c instanceof hd?c=a:(c=$k(a.toLowerCase()))||w.m("Unknown Shape.toArrow: "+a);b!==c&&(this.qn=c,this.lh=q,this.Zf(),el(this,c),this.j("toArrow",b,c))}});w.g(V,"fromArrow",V.prototype.wv);
w.defineProperty(V,{wv:"fromArrow"},t("Hm"),function(a){var b=this.Hm;a===h?a="Standard":a===q&&(a="None");if(b!==a){u&&w.k(a,"string",V,"fromArrow");var c=$k(a);c instanceof hd?c=a:(c=$k(a.toLowerCase()))||w.m("Unknown Shape.fromArrow: "+a);b!==c&&(this.Hm=c,this.lh=q,this.Zf(),el(this,c),this.j("fromArrow",b,c))}});
function el(a,b){var c=a.h;if(!(c!==n&&c.sa.tb)){a.zs=fl;c=Zb;switch(b){case "halfarrowtop":c=Rb;break;case "halftriangletop":c=Rb;break;case "openrighttriangletop":c=Rb;break;case "opentriangletop":c=Rb}"None"!==a.qn?(a.Eh=-1,a.pj=c):"None"!==a.Hm&&(a.Eh=0,a.pj=new H(1-c.x,c.y))}}w.defineProperty(V,{v:"spot1"},t("li"),function(a){w.i(a,H,V,"spot1");var b=this.li;b.I(a)||(this.li=a=a.O(),this.R(),this.j("spot1",b,a))});
w.defineProperty(V,{w:"spot2"},t("mi"),function(a){w.i(a,H,V,"spot2");var b=this.mi;b.I(a)||(this.mi=a=a.O(),this.R(),this.j("spot2",b,a))});w.defineProperty(V,{gc:"parameter1"},t("yq"),function(a){var b=this.yq;b!==a&&(this.yq=a,this.R(),this.j("parameter1",b,a))});w.defineProperty(V,{ts:"parameter2"},t("zq"),function(a){var b=this.zq;b!==a&&(this.zq=a,this.R(),this.j("parameter2",b,a))});
w.u(V,{Sa:"naturalBounds"},function(){if(this.Ga!==n)return this.Kc.Xa(this.Ga.Fb),this.Kc;var a=this.wa;return new G(0,0,a.width,a.height)});w.g(V,"isRectangular",V.prototype.UG);w.defineProperty(V,{UG:"isRectangular"},t("Pp"),function(a){var b=this.Pp;b!==a&&(u&&w.k(a,"boolean",V,"isRectangular"),this.Pp=a,this.R(),this.j("isRectangular",b,a))});w.g(V,"geometryStretch",V.prototype.xv);
w.defineProperty(V,{xv:"geometryStretch"},t("Ap"),function(a){var b=this.Ap;b!==a&&(w.jb(a,P,V,"geometryStretch"),this.Ap=a,this.j("geometryStretch",b,a))});w.g(V,"interval",V.prototype.Bi);w.defineProperty(V,{Bi:"interval"},t("Gp"),function(a){var b=this.Gp;u&&w.o(a,V,"interval");a=Math.floor(a);b!==a&&0<=a&&(this.Gp=a,this.R(),this.j("interval",b,a))});
function na(){P.call(this);this.Ld="";this.lc="black";this.Wi="13px sans-serif";this.qf="start";this.Mp=h;this.Jt=q;this.Il=gl;this.Tt=this.wl=0;this.jk=this.zx=this.Ax=n;this.Zp={};this.qp=q;this.Be=this.oj=this.kr=n}w.P("TextBlock",na);w.Da(na,P);
na.prototype.xb=function(a){P.prototype.xb.call(this,a);a.Ld=this.Ld;a.lc=this.lc;a.Wi=this.Wi;a.qf=this.qf;a.Mp=this.Mp;a.Jt=this.Jt;a.Il=this.Il;a.wl=this.wl;a.Tt=this.Tt;a.Ax=this.Ax;a.zx=this.zx;a.jk=this.jk;a.Zp=this.Zp;a.qp=this.qp;a.kr=this.kr;a.oj=this.oj;a.Be=this.Be};na.prototype.toString=function(){return 22<this.Ld.length?'TextBlock("'+this.Ld.substring(0,20)+'"...)':'TextBlock("'+this.Ld+'")'};var hl;na.None=hl=w.s(na,"None",0);var il;na.WrapFit=il=w.s(na,"WrapFit",1);var gl;
na.WrapDesiredSize=gl=w.s(na,"WrapDesiredSize",2);na.prototype.R=function(){P.prototype.R.call(this);this.jk=this.zx=this.Ax=n};w.g(na,"font",na.prototype.font);w.defineProperty(na,{font:"font"},t("Wi"),function(a){var b=this.Wi;b!==a&&(u&&w.k(a,"string",na,"font"),this.Wi=a,this.R(),this.j("font",b,a))});w.g(na,"text",na.prototype.text);w.defineProperty(na,{text:"text"},t("Ld"),function(a){var b=this.Ld,a=a!==n&&a!==f?a.toString():"";b!==a&&(this.Ld=a,this.R(),this.j("text",b,a))});
w.g(na,"textAlign",na.prototype.textAlign);w.defineProperty(na,{textAlign:"textAlign"},t("qf"),function(a){var b=this.qf;b!==a&&(u&&w.k(a,"string",na,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.qf=a,uj(this),this.j("textAlign",b,a)):w.ra(a,'"start", "end", "left", "right", or "center"',na,"textAlign"))});
w.u(na,{Sa:"naturalBounds"},function(){if(!this.Kc.T()){var a=jl(this,this.Ld,this.font,{},999999).width,b=kl(this,a,{}),c=this.wa;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);db(this.Kc,a,b)}return this.Kc});w.g(na,"isMultiline",na.prototype.Ev);w.defineProperty(na,{Ev:"isMultiline"},t("Mp"),function(a){var b=this.Mp;b!==a&&(u&&w.k(a,"boolean",na,"isMultiline"),this.Mp=a,this.R(),this.j("isMultiline",b,a))});w.g(na,"wrap",na.prototype.eA);
w.defineProperty(na,{eA:"wrap"},t("Il"),function(a){var b=this.Il;b!==a&&(u&&w.jb(a,na,na,"wrap"),this.Il=a,this.R(),this.j("wrap",b,a))});w.g(na,"stroke",na.prototype.stroke);w.defineProperty(na,{stroke:"stroke"},t("lc"),function(a){var b=this.lc;if(b!==a&&(a===n||"string"===typeof a||a instanceof Fe))a instanceof Fe&&a.freeze(),this.lc=a,uj(this),this.j("stroke",b,a)});w.u(na,{oL:"lineCount"},t("wl"));w.g(na,"editable",na.prototype.mv);
w.defineProperty(na,{mv:"editable"},t("qp"),function(a){var b=this.qp;b!==a&&(u&&w.k(a,"boolean",na,"editable"),this.qp=a,this.j("editable",b,a))});w.g(na,"textEditor",na.prototype.Xz);w.defineProperty(na,{Xz:"textEditor"},t("kr"),function(a){var b=this.kr;b!==a&&(a instanceof HTMLElement||w.m("textEditor must be an HTMLElement"),this.kr=a,this.j("textEditor",b,a))});w.g(na,"errorFunction",na.prototype.Nr);
w.defineProperty(na,{Nr:"errorFunction"},t("Be"),function(a){var b=this.Be;b!==a&&(a!==n&&w.k(a,"function",na,"errorFunction"),this.Be=a,this.j("errorFunction",b,a))});
na.prototype.Sn=function(a,b){if(this.lc!==n&&0!==this.Ld.length){var c=this.Wi;if(c!==n){var d=this.Sa.width,e=Hh(this,c);a.Fw!==c&&(a.font=c,a.Fw=c);a.textAlign=this.qf;xj(this,a,this.lc,h);this.Jt&&(xj(this,a,this.lc,q),a.lineWidth=0.05*e);var c=this.Zp,g=0,i=q,j=this.je.Ta(new F(0,0)),k=this.je.Ta(new F(0,e)),j=j.Sl(k),k=b.scale;8>j*k*k&&(i=h);j=c.sj.length;for(k=0;k<j;k++){var l=c.sj[k],m=c.Ln[k];l>d&&(l=d);var p=a,r=g,s=e,v=i,y=0;"start"===this.qf||"left"===this.qf?y=0:"end"===this.qf||"right"===
this.qf?y=d:"center"===this.qf?y=d/2:w.m("textAlign must be start, end, left, right, or center");v?p.fillRect(0+y,r+0.25*s,l,1):(p.fillText(m,0+y,r+s-0.25*s),this.Jt&&("end"===this.qf||"right"===this.qf?y-=l:"center"===this.qf&&(y-=l/2),p.moveTo(0+y,r+s-0.2*s),p.lineTo(0+y+l,r+s-0.2*s),p.stroke()));g+=e}}}};
na.prototype.js=function(a,b,c,d){var e={},g=0,i=0;if(isNaN(this.wa.width)){g=this.Ld;if(0===g.length)g=0;else if(this.Ev){for(var j=i=0,k=q,l={Kh:0};!k;){var m=ll(g,j,l);-1===m&&(m=g.length,k=h);j=ml(g.substr(j,m-j).replace(/^\s+|\s+$/g,""),this.Wi);j>i&&(i=j);j=l.Kh}g=i}else i=ll(g,0,{}),0<=i&&(g=g.substr(0,i)),g=j=ml(g,this.Wi);g=Math.min(g,a/this.scale);g=Math.max(8,g)}else g=this.wa.width;this.fa&&(g=Math.min(g,this.fa.ce.width),g=Math.max(g,this.fa.ve.width));i=kl(this,g,e);i=isNaN(this.wa.height)?
Math.min(i,b/this.scale):this.wa.height;if(this.eA===il||isNaN(this.wa.width))g=e.Hi,isNaN(this.wa.width)&&(g=Math.max(8,g));g=Math.max(c,g);i=Math.max(d,i);db(this.Kc,g,i);lj(this,0,0,g,i);this.Zp=e};na.prototype.tj=function(a,b,c,d){rj(this,a,b,c,d)};
function jl(a,b,c,d,e){b=b.replace(/^\s+|\s+$/g,"");d.Hi===f&&(d.Hi=0);d.sj===f&&(d.sj=[]);d.Ln===f&&(d.Ln=[]);var g=0,i;if(a.Il===hl)return d.Kh=1,d.Hi=ml(b,c),d.sj.push(d.Hi),d.Ln.push(b),new bb(d.Hi,Hh(a,c));a.jk===n&&(a.jk=Hh(a,c));var a=a.jk,j=b,k=0;0===j.length&&(k=1,d.sj.push(0),d.Ln.push(j));for(;0<j.length;){for(var l=nl(j),j=j.substr(l.length);ml(l,c)>e;){var m=1,b=ml(l.substr(0,m),c);for(i=0;b<=e;)m++,i=b,b=ml(l.substr(0,m),c);1===m?(d.sj[k]=b,g=Math.max(g,b)):(d.sj[k]=i,g=Math.max(g,i));
m--;1>m&&(m=1);d.Ln[k]=l.substr(0,m);k++;l=l.substr(m)}i=nl(j);for(b=ml(l+i,c);0<i.length&&b<=e;)l+=i,j=j.substr(i.length),i=nl(j),b=ml((l+i).replace(/^\s+|\s+$/g,""),c);l=l.replace(/^\s+|\s+$/g,"");""!==l&&(0===i.length?(d.sj.push(b),g=Math.max(g,b)):(i=ml(l,c),d.sj.push(i),g=Math.max(g,i)),d.Ln.push(l),k++)}d.Kh=k;d.Hi=Math.max(d.Hi,g);return new bb(d.Hi,a*d.Kh)}function nl(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}
function ml(a,b){w.zu!==b&&(w.yu.font=b,w.zu=b);return w.yu.measureText(a).width}function Hh(a,b){if(a.jk!==n)return a.jk;w.zu!==b&&(w.yu.font=b,w.zu=b);var c=0;w.hx[b]!==f&&5E3>w.QA?c=w.hx[b]:(c=1.3*w.yu.measureText("M").width,w.hx[b]=c,w.QA++);return c}function ll(a,b,c){c.Kh===f&&(c.Kh=0);var d=a.indexOf("\r",b);-1===d&&(d=a.indexOf("\n",b));0<=d&&(c.Kh="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1);return d}
function kl(a,b,c){var d=a.Ld,e=a.Wi,g=Hh(a,e);if(0===d.length)return c.Hi=0,a.wl=1,g;if(!a.Ev){var i=ll(d,0,{});0<=i&&(d=d.substr(0,i))}for(var j=i=0,k=0,l=-1,m={Kh:0},p=q;!p;)l=ll(d,k,m),-1===l&&(l=d.length,p=h),k<=l&&(k=d.substr(k,l-k),a.Il!==hl?(c.Kh=0,k=jl(a,k,e,c,b),i+=k.height,j+=c.Kh):(jl(a,k,e,c,Infinity),i+=g,j++)),k=m.Kh;a.wl=j;return a.Tt=i}w.g(na,"textValidation",na.prototype.Gs);
w.defineProperty(na,{Gs:"textValidation"},t("oj"),function(a){var b=this.oj;b!==a&&(a!==n&&w.k(a,"function",na,"textValidation"),this.oj=a,this.j("textValidation",b,a))});function ck(){P.call(this);this.Sh=n;this.dr="";this.nj=(new G(NaN,NaN,NaN,NaN)).freeze();this.Mm=kd;this.Fu=this.Be=n;this.Ft=this.xl=q}w.P("Picture",ck);w.Da(ck,P);ck.prototype.xb=function(a){P.prototype.xb.call(this,a);a.element=this.Sh;a.dr=this.dr;a.nj.Xa(this.nj);a.Mm=this.Mm;a.Be=this.Be};
ck.prototype.toString=function(){return"Picture("+this.source+")#"+w.ec(this)};w.g(ck,"element",ck.prototype.element);
w.defineProperty(ck,{element:"element"},t("Sh"),function(a){var b=this.Sh;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||w.m("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a instanceof HTMLCanvasElement?this.Ft=h:(this.Ft=q,a.onerror=function(a){c.Be!==n&&c.Be(c,a)});this.Sh=a;this.j("element",b,a);a.complete===h||a.complete===f?(this.xl=h,this.wa.T()||(this.ac=q,this.R())):(w.py.push(this),w.pu===n&&(w.pu=setInterval(function(){for(var a=
[],b=w.py,c=b.length,i=0;i<c;i++){var j=b[i];ol(j)||a.push(j)}0===a.length&&(clearInterval(w.pu),w.pu=n);w.py=a},600)))}});function ol(a){var b=a.Sh;if(!b)return h;if(!b.complete)return q;if(a.xl===h)return h;a.xl=h;if(a.h)a.wa.T()||(a.ac=q,a.R(),a.h.Ci()),Lh(a.h);else{var a=w.HA,c=a.length;if(0===c)for(var c=document.getElementsByTagName("canvas"),d=c.length,b=0;b<d;b++){var e=c[b];e.parentElement&&e.parentElement.aa&&a.push(e.parentElement.aa)}c=a.length;for(b=0;b<c;b++)Lh(a[b])}return h}
w.g(ck,"source",ck.prototype.source);w.defineProperty(ck,{source:"source"},t("dr"),function(a){var b=this.dr;if(b!==a)if(w.k(a,"string",ck,"source"),this.dr=a,this.j("source",b,a),b=w.dF,b[a]!==f)this.element=b[a];else{var c=document.createElement("img");c.src=a;b[a]=c;c instanceof HTMLImageElement&&(this.element=c)}});w.g(ck,"sourceRect",ck.prototype.Fh);
w.defineProperty(ck,{Fh:"sourceRect"},t("nj"),function(a){var b=this.nj;b.I(a)||(w.i(a,G,ck,"sourceRect"),this.nj=a=a.O(),this.j("sourceRect",b,a))});w.g(ck,"imageStretch",ck.prototype.KG);w.defineProperty(ck,{KG:"imageStretch"},t("Mm"),function(a){var b=this.Mm;b!==a&&(w.jb(a,P,ck,"imageStretch"),this.Mm=a,this.j("imageStretch",b,a))});w.g(ck,"errorFunction",ck.prototype.Nr);
w.defineProperty(ck,{Nr:"errorFunction"},t("Be"),function(a){var b=this.Be;if(b!==a){a!==n&&w.k(a,"function",ck,"errorFunction");this.Be=a;if(this.Sh){var c=this;this.Sh.onerror=function(a){c.Be!==n&&c.Be(c,a)}}this.j("errorFunction",b,a)}});
ck.prototype.Sn=function(a,b){if(!b.qt){if(this.Fu===n){var c=document.createElement("canvas").getContext("2d");c.drawImage(this.Sh,0,0);try{c.getImageData(0,0,1,1),this.Fu=q}catch(d){this.Fu=h}}if(this.Fu)return}c=this.Sh;if(c!==n){var e=c.src;(e===n||""===e)&&w.m("Element has no source attribute: "+c);var e=this.Sa,g=0,i=0,j=this.Ft,k=j?+c.width:c.naturalWidth,j=j?+c.height:c.naturalHeight;if(!(0===k||0===j)){k===f&&c.videoWidth&&(k=c.videoWidth||e.width);j===f&&c.videoHeight&&(j=c.videoHeight||
e.height);this.Fh.T()&&(g=this.nj.x,i=this.nj.y,k=this.nj.width,j=this.nj.height);var l=k,m=j,p=this.Mm;switch(p){case ij:if(this.Fh.T())break;g+=Math.max((l-e.width)/2,0);i+=Math.max((m-e.height)/2,0);k=Math.min(e.width,l);j=Math.min(e.height,m);break;case kd:l=e.width;m=e.height;break;case dh:case eh:p===dh?(p=Math.min(e.height/m,e.width/l),l*=p,m*=p):p===eh&&(p=Math.max(e.height/m,e.width/l),l*=p,m*=p,g+=(l-e.width)/2,i+=(m-e.height)/2,k*=1/(l/e.width),j*=1/(m/e.height),l=e.width,m=e.height)}a.drawImage(c,
g,i,k,j,Math.max((e.width-l)/2,0),Math.max((e.height-m)/2,0),Math.min(e.width,l),Math.min(e.height,m))}}};w.u(ck,{Sa:"naturalBounds"},t("Kc"));
ck.prototype.js=function(a,b,c,d){var e=this.wa,g=oj(this),i=this.Sh,j=this.Ft;if(j||!this.xl&&i&&i.complete)this.xl=h;i===n&&(b=a=0);g!==kd&&g!==kj?isFinite(e.width)?a=e.width:i!==n&&this.xl!==q&&(a=this.Fh.T()?this.Fh.width:j?+i.width:i.naturalWidth):(isFinite(a)||(a=this.Fh.T()?this.Fh.width:j?+i.width:i.naturalWidth),c=0);g!==kd&&g!==jj?isFinite(e.height)?b=e.height:i!==n&&this.xl!==q&&(b=this.Fh.T()?this.Fh.height:j?+i.height:i.naturalHeight):(isFinite(b)||(b=this.Fh.T()?this.Fh.height:j?+i.height:
i.naturalHeight),d=0);e=this.ce;g=this.ve;c=Math.max(c/this.scale,g.width);d=Math.max(d/this.scale,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);i!==n&&!i.complete&&(isFinite(a)||(a=0),isFinite(b)||(b=0));db(this.Kc,a,b);lj(this,0,0,a,b)};ck.prototype.tj=function(a,b,c,d){rj(this,a,b,c,d)};function J(){this.q=new hd;this.Mb=n}
function K(a,b,c,d,e,g){a.q===n&&w.m("StreamGeometryContext has been closed");e!==f&&e===h?(a.Mb===n&&w.m("Need to call beginFigure first"),d=new Ed(Jd),d.C=b,d.D=c,a.Mb.za.add(d)):(a.Mb=new jd,a.Mb.ma=b,a.Mb.na=c,a.Mb.ao=d,a.q.sb.add(a.Mb));g!==f&&(a.Mb.If=g)}function Gd(a){a.q===n&&w.m("StreamGeometryContext has been closed");a.Mb===n&&w.m("Need to call beginFigure first");var b=a.Mb.za.length;0<b&&a.Mb.za.n[b-1].close()}
function Hd(a){a.q===n&&w.m("StreamGeometryContext has been closed");a.Mb===n&&w.m("Need to call beginFigure first");a.Mb.co=q}J.prototype.moveTo=function(a,b,c){this.q===n&&w.m("StreamGeometryContext has been closed");this.Mb===n&&w.m("Need to call beginFigure first");var d=new Ed(Jd);d.C=a;d.D=b;c&&d.close();this.Mb.za.add(d)};
J.prototype.lineTo=function(a,b,c){this.q===n&&w.m("StreamGeometryContext has been closed");this.Mb===n&&w.m("Need to call beginFigure first");var d=new Ed(td);d.C=a;d.D=b;c&&d.close();this.Mb.za.add(d)};function L(a,b,c,d,e,g,i,j){a.q===n&&w.m("StreamGeometryContext has been closed");a.Mb===n&&w.m("Need to call beginFigure first");var k=new Ed(Ld);k.Ub=b;k.Ac=c;k.jg=d;k.kg=e;k.C=g;k.D=i;j&&k.close();a.Mb.za.add(k)}
function Dd(a,b,c,d,e){a.q===n&&w.m("StreamGeometryContext has been closed");a.Mb===n&&w.m("Need to call beginFigure first");var g=new Ed(Md);g.Ub=b;g.Ac=c;g.C=d;g.D=e;a.Mb.za.add(g)}J.prototype.arcTo=function(a,b,c,d,e,g,i){this.q===n&&w.m("StreamGeometryContext has been closed");this.Mb===n&&w.m("Need to call beginFigure first");var j=new Ed(Nd);j.mg=a;j.Hh=b;j.pa=c;j.ta=d;j.radiusX=e;j.radiusY=g?g:e;i&&j.close();this.Mb.za.add(j)};
function pl(a,b,c,d,e,g,i,j,k,l,m,p,r,s){var v=1-k,a=a*v+c*k,b=b*v+d*k,c=c*v+e*k,d=d*v+g*k,e=e*v+i*k,g=g*v+j*k,j=a*v+c*k,i=b*v+d*k,c=c*v+e*k,d=d*v+g*k;l.x=a;l.y=b;m.x=j;m.y=i;p.x=j*v+c*k;p.y=i*v+d*k;r.x=c;r.y=d;s.x=e;s.y=g}function ql(a){var a=rl(a),b=[];b[0]=a[0];for(var c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];return b}
function rl(a){for(var b=sl(a),c=[],d=Math.floor(b.length/2),e=b.length-1,a=0===a%2?2:1,g=0;g<e;g++){var i=b[g],j=b[g+1],k=b[(d+g-1)%e],l=b[(d+g+a)%e];c[2*g]=i;c[2*g+1]=tl(i.x,i.y,k.x,k.y,j.x,j.y,l.x,l.y)}c[c.length]=c[0];return c}function tl(a,b,c,d,e,g,i,j){c=a-c;i=e-i;0===c||0===i?0===c?(i=(g-j)/i,j=a,e=i*j+(g-i*e)):(d=(b-d)/c,j=e,e=d*j+(b-d*a)):(d=(b-d)/c,i=(g-j)/i,a=b-d*a,j=(g-i*e-a)/(d-i),e=d*j+a);return new F(j,e)}
function sl(a){for(var b=[],c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new F(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d));b.push(b[0]);return b}
var al={None:"Rectangle",Rectangle:function(a,b,c){a=new hd;a.type=qd;a.ma=0;a.na=0;a.C=b;a.D=c;return a},Square:function(a,b,c){a=new hd;a.$b=dh;a.type=qd;a.ma=0;a.na=0;a.C=b;a.D=c;return a},Ellipse:function(a,b,c){a=new hd;a.type=rd;a.ma=0;a.na=0;a.C=b;a.D=c;a.v=new H(0.156,0.156);a.w=new H(0.844,0.844);return a},Circle:function(a,b,c){a=new hd;a.$b=dh;a.type=rd;a.ma=0;a.na=0;a.C=b;a.D=c;a.v=new H(0.156,0.156);a.w=new H(0.844,0.844);return a},Connector:"Ellipse",TriangleRight:function(a,b,c){var a=
new hd,d=new jd,e=new Ed;e.C=b;e.D=0.5*c;d.za.add(e);b=new Ed;b.C=0;b.D=c;d.za.add(b.close());a.sb.add(d);a.v=new H(0,0.25);a.w=new H(0.5,0.75);return a},TriangleDown:function(a,b,c){var a=new hd,d=new jd,e=new Ed;e.C=b;e.D=0;d.za.add(e);e=new Ed;e.C=0.5*b;e.D=c;d.za.add(e.close());a.sb.add(d);a.v=new H(0.25,0);a.w=new H(0.75,0.5);return a},TriangleLeft:function(a,b,c){var a=new hd,d=new jd;d.ma=b;d.na=c;var e=new Ed;e.C=0;e.D=0.5*c;d.za.add(e);c=new Ed;c.C=b;c.D=0;d.za.add(c.close());a.sb.add(d);
a.v=new H(0.5,0.25);a.w=new H(1,0.75);return a},TriangleUp:function(a,b,c){var a=new hd,d=new jd;d.ma=b;d.na=c;var e=new Ed;e.C=0;e.D=c;d.za.add(e);c=new Ed;c.C=0.5*b;c.D=0;d.za.add(c.close());a.sb.add(d);a.v=new H(0.25,0.5);a.w=new H(0.75,1);return a},Line1:function(a,b,c){a=new hd;a.type=pd;a.ma=0;a.na=0;a.C=b;a.D=c;return a},Line2:function(a,b,c){a=new hd;a.type=pd;a.ma=b;a.na=0;a.C=0;a.D=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new hd;a.type=pd;a.ma=0;a.na=c/2;a.C=b;a.D=c/2;return a},
LineV:function(a,b,c){a=new hd;a.type=pd;a.ma=b/2;a.na=0;a.C=b/2;a.D=c;return a},Curve1:function(a,b,c){a=new J;K(a,0,0,q);L(a,ic*b,0,1*b,(1-ic)*c,b,c);return a.q},Curve2:function(a,b,c){a=new J;K(a,0,0,q);L(a,0,ic*c,(1-ic)*b,c,b,c);return a.q},Curve3:function(a,b,c){a=new J;K(a,1*b,0,q);L(a,1*b,ic*c,ic*b,1*c,0,1*c);return a.q},Curve4:function(a,b,c){a=new J;K(a,1*b,0,q);L(a,(1-ic)*b,0,0,(1-ic)*c,0,1*c);return a.q},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=new J;K(a,0.5*b,
0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.q;b.v=new H(0.25,0.5);b.w=new H(0.75,1);return b},Decision:"Diamond",Diamond:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.q;b.v=new H(0.25,0.25);b.w=new H(0.75,0.75);return b},Pentagon:function(a,b,c){var a=sl(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;5>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.2,0.22);b.w=new H(0.8,0.9);return b},DataTransmission:"Hexagon",Hexagon:function(a,
b,c){var a=sl(6),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;6>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.07,0.25);b.w=new H(0.93,0.75);return b},Heptagon:function(a,b,c){var a=sl(7),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;7>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.2,0.15);b.w=new H(0.8,0.85);return b},Octagon:function(a,b,c){var a=sl(8),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;8>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.15,0.15);b.w=new H(0.85,
0.85);return b},Nonagon:function(a,b,c){var a=sl(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;9>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.17,0.13);b.w=new H(0.82,0.82);return b},Decagon:function(a,b,c){var a=sl(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.16,0.16);b.w=new H(0.84,0.84);return b},Dodecagon:function(a,b,c){var a=sl(12),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);
Gd(d);b=d.q;b.v=new H(0.16,0.16);b.w=new H(0.84,0.84);return b},FivePointedStar:function(a,b,c){var a=rl(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;10>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.312,0.383);b.w=new H(0.693,0.765);return b},SixPointedStar:function(a,b,c){var a=rl(6),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;12>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.17,0.251);b.w=new H(0.833,0.755);return b},SevenPointedStar:function(a,b,c){var a=rl(7),d=new J;
K(d,a[0].x*b,a[0].y*c,h);for(var e=1;14>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.363,0.361);b.w=new H(0.641,0.709);return b},EightPointedStar:function(a,b,c){var a=rl(8),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;16>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.252,0.255);b.w=new H(0.75,0.75);return b},NinePointedStar:function(a,b,c){var a=rl(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;18>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.355,0.361);b.w=new H(0.645,
0.651);return b},TenPointedStar:function(a,b,c){var a=rl(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;20>e;e++)d.lineTo(a[e].x*b,a[e].y*c);Gd(d);b=d.q;b.v=new H(0.281,0.261);b.w=new H(0.723,0.748);return b},FivePointedBurst:function(a,b,c){var a=ql(5),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.312,0.383);b.w=new H(0.693,0.765);return b},SixPointedBurst:function(a,b,c){var a=ql(6),d=new J;
K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.17,0.251);b.w=new H(0.833,0.755);return b},SevenPointedBurst:function(a,b,c){var a=ql(7),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.363,0.361);b.w=new H(0.641,0.709);return b},EightPointedBurst:function(a,b,c){var a=ql(8),d=new J;K(d,a[0].x*b,a[0].y*
c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.252,0.255);b.w=new H(0.75,0.75);return b},NinePointedBurst:function(a,b,c){var a=ql(9),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.355,0.361);b.w=new H(0.645,0.651);return b},TenPointedBurst:function(a,b,c){var a=ql(10),d=new J;K(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e+=
3)L(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);Gd(d);b=d.q;b.v=new H(0.281,0.261);b.w=new H(0.723,0.748);return b},Cloud:function(a,b,c){a=new J;K(a,0.08034461*b,0.1944299*c,h);L(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);L(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);L(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);L(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*
c);L(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*c,0.9147671*b,0.3194596*c);L(a,1.04448*b,0.360238*c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*c);L(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);L(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);L(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);L(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);L(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*
b,0.870098*c);L(a,-0.02812061*b,0.9032597*c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*c);L(a,-0.01812061*b,0.6089503*c,-0.00606892*b,0.4555777*c,0.06427569*b,0.4265613*c);L(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);Gd(a);b=a.q;b.v=new H(0.1,0.1);b.w=new H(0.9,0.9);return b},Gate:"Crescent",Crescent:function(a,b,c){a=new J;K(a,0,0,h);L(a,1*b,0,1*b,1*c,0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Gd(a);b=a.q;b.v=new H(0.511,0.19);b.w=new H(0.776,0.76);return b},
FramedRectangle:function(a,b,c){var d=new J,e=a?a.gc:0,a=a?a.ts:0;0===e&&(e=0.1);0===a&&(a=0.1);K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);K(d,e*b,a*c,q,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.q;b.v=new H(e,a);b.w=new H(1-e,1-a);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=new J;K(a,0,0,h);L(a,ic*b,0,1*b,(0.5-ic/2)*c,1*b,0.5*c);L(a,1*b,(0.5+ic/2)*c,ic*b,1*c,0,1*c);Gd(a);b=a.q;b.v=new H(0,0.2);b.w=new H(0.75,0.8);return b},Heart:function(a,
b,c){a=new J;K(a,0.5*b,1*c,h);L(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);L(a,0*b,0,0.45*b,0,0.5*b,0.3*c);L(a,0.55*b,0,1*b,0,1*b,0.3*c);L(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);Gd(a);b=a.q;b.v=new H(0.15,0.29);b.w=new H(0.86,0.68);return b},Spade:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);L(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);L(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);L(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);L(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);L(a,0.4*b,0.8*c,0,0.8*c,0,0.5*
c);L(a,0,0.25*c,0.4*b,0.2*c,0.49*b,0.01*c);Gd(a);b=a.q;b.v=new H(0.19,0.26);b.w=new H(0.8,0.68);return b},Club:function(a,b,c){a=new J;K(a,0.4*b,0.6*c,h);L(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);L(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+
g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*b,(0.5-i+g-0.02)*c,0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;i=d*(4*(Math.SQRT2-1)/3);L(a,(0.5+
d+e-0.05)*b,(0.5-i+g-0.02)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,0.4*b,0.6*c);Gd(a);b=a.q;b.v=new H(0.06,0.39);b.w=new H(0.93,0.58);return b},YinYang:function(a,b,c){var a=0.5,d=new J,a=0.5;K(d,0.5*b,0,h);d.arcTo(270,180,0.5*b,0.5*b,0.5*b);L(d,1*b,a*c,0,a*c,a*b,0,h);var a=0.1,e=0.25;K(d,
(0.5+a)*b,e*c,h,h);d.arcTo(0,-360,0.5*b,c*e,a*b);Gd(d);K(d,0.5*b,0,q);d.arcTo(270,-180,0.5*b,0.5*b,0.5*b);Hd(d);e=0.75;K(d,(0.5+a)*b,e*c,h);d.arcTo(0,360,0.5*b,c*e,a*b);Gd(d);b=d.q;b.$b=dh;return b},Peace:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,b,0.5*c,h);L(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);L(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);L(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);L(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);K(a,0.5*b,0.1*c,h,h);L(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-
d)*c,0.9*b,0.5*c);L(a,0.9*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.5*b,0.9*c);L(a,(0.5-d)*b,0.9*c,0.1*b,(0.5+d)*c,0.1*b,0.5*c);L(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,
(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=-0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);K(a,(0.5+
d+e)*b,(0.5+g)*c,h);L(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.q;b.v=new H(0.146,0.146);b.w=new H(0.853,0.853);b.$b=dh;return b},NotAllowed:function(a,b,c){var a=0.5*ic,d=0.5,e=new J;K(e,0.5*b,(0.5-d)*c,h);L(e,(0.5-a)*b,(0.5-d)*c,(0.5-d)*b,
(0.5-a)*c,(0.5-d)*b,0.5*c);L(e,(0.5-d)*b,(0.5+a)*c,(0.5-a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);L(e,(0.5+a)*b,(0.5+d)*c,(0.5+d)*b,(0.5+a)*c,(0.5+d)*b,0.5*c);L(e,(0.5+d)*b,(0.5-a)*c,(0.5+a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);var d=0.4,a=0.4*ic,g=new F(0,0),i=new F(0,0),j=new F(0,0),k=new F(0,0);pl(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.42,g,i,j,k,k);var l=new F(0,0),m=new F(0,0),p=new F(0,0);pl(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.58,k,k,p,l,m);var r=new F(0,0),s=new F(0,0),v=new F(0,0);pl(0.5,0.5+
d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.42,r,s,v,k,k);var y=new F(0,0),C=new F(0,0),E=new F(0,0);pl(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.58,k,k,E,y,C);K(e,E.x*b,E.y*c,h,h);L(e,y.x*b,y.y*c,C.x*b,C.y*c,(0.5-d)*b,0.5*c);L(e,(0.5-d)*b,(0.5-a)*c,(0.5-a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);L(e,g.x*b,g.y*c,i.x*b,i.y*c,j.x*b,j.y*c);e.lineTo(E.x*b,E.y*c);Gd(e);K(e,v.x*b,v.y*c,h,h);e.lineTo(p.x*b,p.y*c);L(e,l.x*b,l.y*c,m.x*b,m.y*c,(0.5+d)*b,0.5*c);L(e,(0.5+d)*b,(0.5+a)*c,(0.5+a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);
L(e,r.x*b,r.y*c,s.x*b,s.y*c,v.x*b,v.y*c);Gd(e);e.q.$b=dh;return e.q},Fragile:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);L(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);L(a,0.25*b,0.5*c,0,0.25*
c,0,0);Gd(a);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,0.4);return b},HourGlass:function(a,b,c){a=new J;K(a,0.65*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);Gd(a);return a.q},Lightning:function(a,b,c){a=new J;K(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);Gd(a);return a.q},Parallelogram1:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,a*b,0,h);d.lineTo(1*b,
0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},Input:"Output",Output:function(a,b,c){a=new J;K(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);Gd(a);b=a.q;b.v=new H(0.1,0);b.w=new H(0.9,1);return b},Parallelogram2:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.25);var d=new J;K(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},ThickCross:function(a,b,c){a=a?a.gc:0;0===a&&(a=
0.25);var d=new J;K(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);Gd(d);b=d.q;b.v=new H(0.5-a/2,0.5-a/2);b.w=new H(0.5+a/2,0.5+a/2);return b},ThickX:function(a,b,c){var a=0.25/Math.SQRT2,d=new J;K(d,0.3*b,0,h);d.lineTo(0.5*
b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);Gd(d);b=d.q;b.v=new H(0.5-a,0.5-a);b.w=new H(0.5+a,0.5+a);return b},ThinCross:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*
c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);Gd(d);return d.q},ThinX:function(a,b,c){a=new J;K(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,0.1*c);Gd(a);return a.q},RightTriangle:function(a,b,
c){a=new J;K(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0.5);b.w=new H(0.5,1);return b},RoundedIBeam:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0);L(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Gd(a);return a.q},RoundedRectangle:function(a,b,c){var d=a?a.gc:0;0>=d&&(d=5);var d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*ic,e=new J;K(e,d,0,h);e.lineTo(b-d,0);L(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);L(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);L(e,
a,c,0,c-a,0,c-d);e.lineTo(0,d);L(e,0,a,a,0,d,0);Gd(e);b=e.q;1<a?(b.v=new H(0,0,a,a),b.w=new H(1,1,-a,-a)):(b.v=Jb,b.w=Rb);return b},Border:function(a,b,c){a=a?a.gc:0;0>=a&&(a=5);var a=Math.min(a,b/3),a=Math.min(a,c/3),d=new J;K(d,a,0,h);d.lineTo(b-a,0);L(d,b-0,0,b,0,b,a);d.lineTo(b,c-a);L(d,b,c-0,b-0,c,b-a,c);d.lineTo(a,c);L(d,0,c,0,c-0,0,c-a);d.lineTo(0,a);L(d,0,0,0,0,a,0);Gd(d);b=d.q;b.v=Jb;b.w=Rb;return b},SquareIBeam:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.2);var d=new J;K(d,0,0,h);d.lineTo(1*
b,0);d.lineTo(1*b,a*c);d.lineTo((0.5+a/2)*b,a*c);d.lineTo((0.5+a/2)*b,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);d.lineTo(0,(1-a)*c);d.lineTo((0.5-a/2)*b,(1-a)*c);d.lineTo((0.5-a/2)*b,a*c);d.lineTo(0,a*c);Gd(d);return d.q},Trapezoid:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.2);var d=new J;K(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var a=a?a.gc:
0,d=new J;K(d,a,0,h);d.lineTo(0,0);d.lineTo(1*b,0);d.lineTo(0.9*b,1*c);d.lineTo(0.1*b,1*c);Gd(d);b=d.q;b.v=new H(0.1,0);b.w=new H(0.9,1);return b},GenderMale:function(a,b,c){var a=new J,d=0.4*ic,e=0.4,g=new F(0,0),i=new F(0,0),j=new F(0,0),k=new F(0,0);K(a,(0.5-e)*b,0.5*c,h);L(a,(0.5-e)*b,(0.5-d)*c,(0.5-d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);pl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.44,j,k,i,g,g);L(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);var l=new F(i.x,i.y);pl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+
e,0.5,0.56,g,g,i,j,k);g=new F(i.x,i.y);a.lineTo((0.1*l.x+0.855)*b,0.1*l.y*c);a.lineTo(0.85*b,0.1*l.y*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((0.1*g.x+0.9)*b,0.15*c);a.lineTo((0.1*g.x+0.9)*b,(0.1*g.y+0.05*0.9)*c);a.lineTo(g.x*b,g.y*c);L(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);e=0.35;d=0.35*ic;K(a,0.5*b,(0.5-e)*c,h,h);L(a,(0.5-d)*b,(0.5-e)*c,(0.5-e)*
b,(0.5-d)*c,(0.5-e)*b,0.5*c);L(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5-d)*c,(0.5+d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);K(a,(0.5-e)*b,0.5*c,h);b=a.q;b.v=new H(0.202,0.257);b.w=new H(0.692,0.839);b.$b=dh;return b},GenderFemale:function(a,b,c){var a=new J,d=0.375,e=0,g=-0.125,i=d*(4*(Math.SQRT2-1)/3);K(a,(0.525+e)*b,(0.5+d+g)*c,h);L(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);L(a,
(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);Gd(a);d=0.325;e=0;g=-0.125;i=d*(4*(Math.SQRT2-
1)/3);K(a,(0.5+d+e)*b,(0.5+g)*c,h,h);L(a,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);L(a,(0.5-i+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-d+e)*b,(0.5+g)*c);L(a,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);L(a,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+d+e)*b,(0.5+g)*c);K(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.q;b.v=new H(0.232,0.136);b.w=new H(0.782,0.611);b.$b=dh;return b},PlusLine:function(a,b,c){a=new J;K(a,0,0.5*c,q);a.lineTo(1*b,0.5*
c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.q},XLine:function(a,b,c){a=new J;K(a,0,1*c,q);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);return a.q},AsteriskLine:function(a,b,c){var a=new J,d=0.2/Math.SQRT2;K(a,d*b,(1-d)*c,q);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0*c);a.lineTo(0.5*b,1*c);return a.q},CircleLine:function(a,b,c){var a=0.5*ic,d=new J;K(d,1*b,0.5*c,q);L(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(d,
(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);L(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);L(d,(0.5+a)*b,0,1*b,(0.5-a)*c,1*b,0.5*c);b=d.q;b.v=new H(0.146,0.146);b.w=new H(0.853,0.853);b.$b=dh;return b},Pie:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);L(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*c);L(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);L(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);L(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);Gd(a);
return a.q},PiePiece:function(a,b,c){var a=0.5*(ic/Math.SQRT2),d=Math.SQRT2/2,e=1-Math.SQRT2/2,g=new J;K(g,b,c,h);L(g,b,(1-a)*c,(d+a)*b,(e+a)*c,d*b,e*c);g.lineTo(0,c);Gd(g);return g.q},StopSign:function(a,b,c){var d=1/(Math.SQRT2+2),e=new J;K(e,d*b,0,h);e.lineTo((1-d)*b,0);e.lineTo(1*b,d*c);e.lineTo(1*b,(1-d)*c);e.lineTo((1-d)*b,1*c);e.lineTo(d*b,1*c);e.lineTo(0,(1-d)*c);e.lineTo(0,d*c);Gd(e);b=e.q;a&&Cb(a.v)&&(a.v=new H(d/2,d/2));a&&Cb(a.w)&&(a.w=new H(1-d/2,1-d/2));return b},LogicImplies:function(a,
b,c){a=a?a.gc:0;0===a&&(a=0.2);var d=new J;K(d,(1-a)*b,0*c,q);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);b=d.q;b.v=new H(0,0);b.w=new H(0.8,0.5);return b},LogicIff:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.2);var d=new J;K(d,(1-a)*b,0*c,q);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);d.moveTo(a*b,0);d.lineTo(0,0.5*c);d.lineTo(a*b,c);b=d.q;b.v=new H(0.2,0);b.w=new H(0.8,0.5);return b},LogicNot:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(1*
b,0);a.lineTo(1*b,1*c);return a.q},LogicAnd:function(a,b,c){a=new J;K(a,0,1*c,q);a.lineTo(0.5*b,0);a.lineTo(1*b,1*c);b=a.q;b.v=new H(0.25,0.5);b.w=new H(0.75,1);return b},LogicOr:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.q;b.v=new H(0.219,0);b.w=new H(0.78,0.409);return b},LogicXor:function(a,b,c){a=new J;K(a,0.5*b,0,q);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=0.5*ic;L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,
0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.q;b.$b=dh;return b},LogicTruth:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.q},LogicFalsity:function(a,b,c){a=new J;K(a,0,1*c,q);a.lineTo(1*b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);return a.q},LogicThereExists:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);return a.q},
LogicForAll:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,0.5);return b},LogicIsDefinedAs:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(b,0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.q;b.v=new H(0.01,0.01);b.w=new H(0.99,0.49);return b},LogicIntersect:function(a,b,c){var a=0.5*ic,d=new J;K(d,0,1*c,q);d.lineTo(0,0.5*c);L(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);L(d,(0.5+a)*
b,0,1*b,(0.5-a)*c,1*b,0.5*c);d.lineTo(1*b,1*c);b=d.q;b.v=new H(0,0.5);b.w=new H(1,1);return b},LogicUnion:function(a,b,c){var a=0.5*ic,d=new J;K(d,1*b,0,q);d.lineTo(1*b,0.5*c);L(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);d.lineTo(0,0);b=d.q;b.v=new H(0,0);b.w=new H(1,0.5);return b},Arrow:function(a,b,c){var d=a?a.gc:0,a=a?a.ts:0;0===d&&(d=0.3);0===a&&(a=0.3);var e=new J;K(e,0,(0.5-a/2)*c,h);e.lineTo((1-d)*b,(0.5-a/2)*c);e.lineTo((1-d)*b,0);e.lineTo(1*b,0.5*c);
e.lineTo((1-d)*b,1*c);e.lineTo((1-d)*b,(0.5+a/2)*c);e.lineTo(0,(0.5+a/2)*c);Gd(e);b=e.q;b.v=new H(0,0.5-a/2);d=tl(0,0.5+a/2,1,0.5+a/2,1-d,1,1,0.5);b.w=new H(d.x,d.y);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);Gd(a);return a.q},DoubleArrow:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*
c);a.lineTo(0,1*c);Gd(a);K(a,0.3*b,0.214*c,q);a.lineTo(0.3*b,0.786*c);Hd(a);return a.q},DoubleEndArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*b,0.7*c);a.lineTo(0.3*b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Gd(a);b=a.q;c=tl(0,0.5,0.3,0,0,0.3,0.3,0.3);b.v=new H(c.x,c.y);c=tl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.w=new H(c.x,c.y);return b},IBeamArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);
a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Gd(a);b=a.q;b.v=new H(0,0.3);c=tl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.w=new H(c.x,c.y);return b},Pointer:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);Gd(a);b=a.q;b.v=new H(0.2,0.35);c=tl(0.2,0.65,1,0.65,0,1,1,0.5);b.w=new H(c.x,c.y);return b},RoundedPointer:function(a,
b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);L(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);Gd(a);b=a.q;b.v=new H(0.4,0.35);c=tl(0.2,0.65,1,0.65,0,1,1,0.5);b.w=new H(c.x,c.y);return b},SplitEndArrow:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);Gd(a);b=a.q;b.v=new H(0.2,0.3);c=tl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.w=new H(c.x,c.y);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,
b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.7*b,0);Gd(a);b=a.q;b.v=new H(0,0);b.w=new H(0.7,1);return b},Cone1:function(a,b,c){var a=0.5*ic,d=0.1*ic,e=new J;K(e,0,0.9*c,h);e.lineTo(0.5*b,0);e.lineTo(1*b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);Gd(e);b=e.q;b.v=new H(0.25,0.5);b.w=new H(0.75,0.97);return b},Cone2:function(a,b,c){a=new J;K(a,0,0.9*c,h);L(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*
b,0);a.lineTo(0,0.9*c);Gd(a);K(a,0,0.9*c,q);L(a,(1-0.85/0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);Hd(a);b=a.q;b.v=new H(0.25,0.5);b.w=new H(0.75,0.82);return b},Cube1:function(a,b,c){a=new J;K(a,0.5*b,1*c,h);a.lineTo(1*b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);Gd(a);K(a,0.5*b,1*c,q);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);Hd(a);b=a.q;b.v=new H(0,0.3);b.w=new H(0.5,0.85);return b},Cube2:function(a,b,c){a=
new J;K(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*b,0*c);Gd(a);K(a,0,0.3*c,q);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);Hd(a);b=a.q;b.v=new H(0,0.3);b.w=new H(0.7,1);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var a=0.5*ic,d=0.1*ic,e=new J;K(e,0,0.1*c,h);L(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);L(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*
b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);e.lineTo(0,0.1*c);K(e,0,0.1*c,q);L(e,0,(0.1+d)*c,(0.5-a)*b,0.2*c,0.5*b,0.2*c);L(e,(0.5+a)*b,0.2*c,1*b,(0.1+d)*c,1*b,0.1*c);Hd(e);b=e.q;b.v=new H(0,0.2);b.w=new H(1,0.9);return b},Cylinder2:function(a,b,c){var a=0.5*ic,d=0.1*ic,e=new J;K(e,0,0.9*c,h);e.lineTo(0,0.1*c);L(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);L(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(1*b,0.9*c);L(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);L(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);K(e,0,0.9*
c,q);L(e,0,(0.9-d)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);L(e,(0.5+a)*b,0.8*c,1*b,(0.9-d)*c,1*b,0.9*c);Hd(e);b=e.q;b.v=new H(0,0.1);b.w=new H(1,0.8);return b},Cylinder3:function(a,b,c){var a=0.1*ic,d=0.5*ic,e=new J;K(e,0.1*b,0,h);e.lineTo(0.9*b,0);L(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);L(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);K(e,0.1*b,0,q);L(e,(0.1+a)*b,0,0.2*b,(0.5-d)*c,0.2*b,0.5*c);L(e,0.2*b,(0.5+d)*c,(0.1+
a)*b,1*c,0.1*b,1*c);Hd(e);b=e.q;b.v=new H(0.2,0);b.w=new H(0.9,1);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var a=0.1*ic,d=0.5*ic,e=new J;K(e,0.9*b,0,h);L(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);L(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);e.lineTo(0.9*b,0);K(e,0.9*b,0,q);L(e,(0.9-a)*b,0,0.8*b,(0.5-d)*c,0.8*b,0.5*c);L(e,0.8*b,(0.5+d)*c,(0.9-a)*b,1*c,0.9*b,1*c);Hd(e);b=e.q;b.v=new H(0.1,0);
b.w=new H(0.8,1);return b},Prism1:function(a,b,c){a=new J;K(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*b,c);a.lineTo(0,c);Gd(a);K(a,0.25*b,0.25*c,q);a.lineTo(0.5*b,c);Hd(a);b=a.q;b.v=new H(0.408,0.172);b.w=new H(0.833,0.662);return b},Prism2:function(a,b,c){a=new J;K(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);Gd(a);K(a,0,c,q);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*b,0.5*c);Hd(a);b=a.q;
b.v=new H(0.25,0.5);b.w=new H(0.75,0.75);return b},Pyramid1:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.75*c);Gd(a);K(a,0.5*b,0,q);a.lineTo(0.5*b,1*c);Hd(a);b=a.q;b.v=new H(0.25,0.367);b.w=new H(0.75,0.875);return b},Pyramid2:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);Gd(a);K(a,0.5*b,0,q);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,0.85*c);Hd(a);b=a.q;b.v=new H(0.25,
0.367);b.w=new H(0.75,0.875);return b},Actor:function(a,b,c){var d=0.2*ic,e=0.1*ic,a=0.5,g=0.1,i=new J;K(i,a*b,(g+0.1)*c,h);L(i,(a-d)*b,(g+0.1)*c,(a-0.2)*b,(g+e)*c,(a-0.2)*b,g*c);L(i,(a-0.2)*b,(g-e)*c,(a-d)*b,(g-0.1)*c,a*b,(g-0.1)*c);L(i,(a+d)*b,(g-0.1)*c,(a+0.2)*b,(g-e)*c,(a+0.2)*b,g*c);L(i,(a+0.2)*b,(g+e)*c,(a+d)*b,(g+0.1)*c,a*b,(g+0.1)*c);d=0.05;e=ic*d;K(i,0.5*b,0.2*c,h);i.lineTo(0.95*b,0.2*c);a=0.95;g=0.25;L(i,(a+e)*b,(g-d)*c,(a+d)*b,(g-e)*c,(a+d)*b,g*c);i.lineTo(1*b,0.6*c);i.lineTo(0.85*b,0.6*
c);i.lineTo(0.85*b,0.35*c);d=0.025;e=ic*d;a=0.825;g=0.35;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.8*b,1*c);i.lineTo(0.55*b,1*c);i.lineTo(0.55*b,0.7*c);d=0.05;e=ic*d;a=0.5;g=0.7;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.45*b,1*c);i.lineTo(0.2*b,1*c);i.lineTo(0.2*b,0.35*c);d=0.025;e=ic*d;a=0.175;g=0.35;L(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);L(i,(a-e)*b,(g-
d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.15*b,0.6*c);i.lineTo(0*b,0.6*c);i.lineTo(0*b,0.25*c);d=0.05;e=ic*d;a=0.05;g=0.25;L(i,(a-d)*b,(g-e)*c,(a-e)*b,(g-d)*c,a*b,(g-d)*c);i.lineTo(0.5*b,0.2*c);b=i.q;b.v=new H(0.2,0.2);b.w=new H(0.8,0.65);return b},Card:function(a,b,c){a=new J;K(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);Gd(a);b=a.q;b.v=new H(0,0.2);b.w=new H(1,1);return b},Collate:function(a,b,c){a=new J;K(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*
b,0);a.lineTo(0.5*b,0.5*c);K(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,0.25);return b},CreateRequest:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);K(d,0,a*c,q);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);Hd(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1-a);return b},Database:function(a,b,c){var a=new J,d=0.5*ic,e=0.1*ic;K(a,1*b,0.1*c,h);a.lineTo(1*
b,0.9*c);L(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);L(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);K(a,1*b,0.1*c,q);L(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);L(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);L(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);L(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);a.moveTo(1*b,0.3*c);L(a,1*b,(0.3+e)*c,(0.5+d)*b,0.4*c,0.5*b,0.4*c);L(a,(0.5-d)*b,0.4*c,0,(0.3+e)*c,0,
0.3*c);Hd(a);b=a.q;b.v=new H(0,0.4);b.w=new H(1,0.9);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);L(a,0.25*b,0.9*c,0.25*b,0.1*c,0,0);Gd(a);b=a.q;b.v=new H(0.226,0);b.w=new H(0.81,1);return b},DiskStorage:function(a,b,c){var a=new J,d=0.5*ic,e=0.1*ic;K(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);L(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);L(a,0,(0.1-e)*
c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);K(a,1*b,0.1*c,q);L(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);L(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);L(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);L(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);Hd(a);b=a.q;b.v=new H(0,0.3);b.w=new H(1,0.9);return b},Display:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);Gd(a);b=a.q;b.v=new H(0.25,0);b.w=
new H(0.75,1);return b},DividedEvent:function(a,b,c){a=a?a.gc:0;0===a?a=0.2:0.15>a&&(a=0.15);var d=new J,e=0.2*ic;K(d,0,0.2*c,h);L(d,0,(0.2-e)*c,(0.2-e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);L(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*b,0.8*c);L(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);L(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);K(d,0,a*c,q);d.lineTo(1*b,a*c);Hd(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1-a);return b},DividedProcess:function(a,b,c){a=a?a.gc:0;0.1>a&&(a=
0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);K(d,0,a*c,q);d.lineTo(1*b,a*c);Hd(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1);return b},Document:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Gd(a);b=a.q;b.v=new H(0,0);b.w=new H(1,0.6);return b},ExternalOrganization:function(a,b,c){a=a?a.gc:0;0.2>a&&(a=0.2);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);
K(d,a*b,0,q);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);Hd(d);b=d.q;b.v=new H(a/2,a/2);b.w=new H(1-a/2,1-a/2);return b},ExternalProcess:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);Gd(a);K(a,0.1*b,0.4*c,q);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*
c);Hd(a);b=a.q;b.v=new H(0.25,0.25);b.w=new H(0.75,0.75);return b},File:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);Gd(a);K(a,0.75*b,0,q);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*c);Hd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,1);return b},Interrupt:function(a,b,c){a=new J;K(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);K(a,1*b,0.5*c,q);a.lineTo(1*b,1*c);K(a,1*b,0.5*c,q);a.lineTo(1*b,0);b=a.q;b.v=new H(0,0.25);b.w=new H(0.5,
0.75);return b},InternalStorage:function(a,b,c){var d=a?a.gc:0,a=a?a.ts:0;0===d&&(d=0.1);0===a&&(a=0.1);var e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*b,1*c);e.lineTo(0,1*c);Gd(e);K(e,d*b,0,q);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);Hd(e);b=e.q;b.v=new H(d,a);b.w=new H(1,1);return b},Junction:function(a,b,c){var a=new J,d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=0.5*ic;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);L(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);L(a,0,(0.5-g)*c,(0.5-
g)*b,0,0.5*b,0);L(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);K(a,(e+d)*b,(e+d)*c,q);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);Hd(a);b=a.q;b.$b=dh;return b},LinedDocument:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Gd(a);K(a,0.1*b,0,q);a.lineTo(0.1*b,0.75*c);Hd(a);b=a.q;b.v=new H(0.1,0);b.w=new H(1,0.6);return b},LoopLimit:function(a,b,c){a=new J;K(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);
a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);Gd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,1);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){var a=new J,d=0.5*ic;K(a,0.5*b,1*c,h);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.q;b.v=new H(0.15,0.15);b.w=new H(0.85,0.8);return b},ManualInput:function(a,
b,c){a=new J;K(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);Gd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,1);return b},MessageFromUser:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.7);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(0,0);b.w=new H(a,1);return b},MicroformProcessing:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.25);var d=new J;K(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);
d.lineTo(0,1*c);Gd(d);b=d.q;b.v=new H(0,a);b.w=new H(1,1-a);return b},MicroformRecording:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(1,0.75);return b},MultiDocument:function(a,b,c){c/=0.8;a=new J;K(a,b,0,h);a.lineTo(b,0.5*c);L(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);L(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);L(a,
0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);Gd(a);K(a,0.1*b,0.2*c,q);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.44*c);Hd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(0.8,0.77);return b},MultiProcess:function(a,b,c){a=new J;K(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*
c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);Gd(a);K(a,0.2*b,0.1*c,q);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);Hd(a);b=a.q;b.v=new H(0,0.2);b.w=new H(0.8,1);return b},OfflineStorage:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=1-a,e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);Gd(e);K(e,0.5*a*b,a*c,q);e.lineTo((1-0.5*a)*b,a*c);Hd(e);b=e.q;b.v=new H(d/4+0.5*a,a);b.w=
new H(3*d/4+0.5*a,a+0.5*d);return b},OffPageConnector:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0);b.w=new H(0.75,1);return b},Or:function(a,b,c){var a=new J,d=0.5*ic;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);K(a,1*b,0.5*c,q);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*
b,0);Hd(a);b=a.q;b.$b=dh;return b},PaperTape:function(a,b,c){c/=0.8;a=new J;K(a,0,0.7*c,h);a.lineTo(0,0.3*c);L(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);L(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);Gd(a);b=a.q;b.v=new H(0,0.49);b.w=new H(1,0.75);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.gc:0,a=a?a.ts:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new J;K(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);Gd(e);b=e.q;b.v=new H(d,0);b.w=new H(1-a,1);return b},PrimitiveToCall:function(a,
b,c){var d=a?a.gc:0,a=a?a.ts:0;0===d&&(d=0.1);0===a&&(a=0.3);var e=new J;K(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);Gd(e);b=e.q;b.v=new H(d,0);b.w=new H(1-a,1);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);K(d,(1-a)*b,0,q);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);Hd(d);b=d.q;b.v=new H(a,0);b.w=new H(1-a,1);return b},Process:function(a,
b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);Gd(d);K(d,a*b,0,q);d.lineTo(a*b,1*c);Hd(d);b=d.q;b.v=new H(a,0);b.w=new H(1,1);return b},Sort:function(a,b,c){a=new J;K(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);Gd(a);K(a,0,0.5*c,q);a.lineTo(1*b,0.5*c);Hd(a);b=a.q;b.v=new H(0.25,0.25);b.w=new H(0.75,0.5);return b},Start:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*
b,1*c);L(a,0,1*c,0,0,0.25*b,0);K(a,0.25*b,0,q);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);Hd(a);b=a.q;b.v=new H(0.25,0);b.w=new H(0.75,1);return b},Terminator:function(a,b,c){a=new J;K(a,0.25*b,0,h);a.lineTo(0.75*b,0);L(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);L(a,0,1*c,0,0,0.25*b,0);b=a.q;b.v=new H(0.23,0);b.w=new H(0.77,1);return b},TransmittalTape:function(a,b,c){a=a?a.gc:0;0===a&&(a=0.1);var d=new J;K(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);
d.lineTo(0,(1-a)*c);Gd(d);b=d.q;b.v=new H(0,0);b.w=new H(1,1-a);return b},AndGate:function(a,b,c){var a=new J,d=0.5*ic;K(a,0,0,h);a.lineTo(0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0);b.w=new H(0.55,1);return b},Buffer:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);Gd(a);b=a.q;b.v=new H(0,0.25);b.w=new H(0.5,0.75);return b},Clock:function(a,b,c){var a=new J,d=0.5*ic;K(a,1*b,0.5*c,h);
L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);K(a,1*b,0.5*c,q);a.lineTo(1*b,0.5*c);K(a,0.8*b,0.75*c,q);a.lineTo(0.8*b,0.25*c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);Hd(a);b=a.q;b.$b=dh;return b},Ground:function(a,b,c){a=new J;K(a,0.5*b,0,q);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*
b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);return a.q},Inverter:function(a,b,c){var a=new J,d=0.1*ic;K(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);L(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);L(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);L(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.q;b.v=new H(0,0.25);b.w=new H(0.4,0.75);return b},NandGate:function(a,
b,c){var a=new J,d=0.5*ic,e=0.4*ic,g=0.1*ic;K(a,0.8*b,0.5*c,h);L(a,0.8*b,(0.5+e)*c,(0.4+d)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*b,0);L(a,(0.4+d)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);K(a,1*b,0.5*c,h);L(a,1*b,(0.5+g)*c,(0.9+g)*b,0.6*c,0.9*b,0.6*c);L(a,(0.9-g)*b,0.6*c,0.8*b,(0.5+g)*c,0.8*b,0.5*c);L(a,0.8*b,(0.5-g)*c,(0.9-g)*b,0.4*c,0.9*b,0.4*c);L(a,(0.9+g)*b,0.4*c,1*b,(0.5-g)*c,1*b,0.5*c);b=a.q;b.v=new H(0,0.05);b.w=new H(0.55,0.95);return b},NorGate:function(a,b,c){var a=new J,d=
0.5,e=ic*d,g=0,i=0.5;K(a,0.8*b,0.5*c,h);L(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0,1*c);L(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);L(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=0.1*ic;g=0.9;i=0.5;K(a,(g-d)*b,i*c,h);L(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);L(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);L(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);L(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.q;b.v=new H(0.2,0.25);b.w=new H(0.6,0.75);return b},OrGate:function(a,b,c){var a=new J,d=0.5*
ic;K(a,0,0,h);L(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);L(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);L(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);Gd(a);b=a.q;b.v=new H(0.2,0.25);b.w=new H(0.75,0.75);return b},XnorGate:function(a,b,c){var a=new J,d=0.5,e=ic*d,g=0.2,i=0.5;K(a,0.1*b,0,q);L(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);K(a,0.8*b,0.5*c,h);L(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0.2*b,1*c);L(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);L(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=0.1*ic;g=0.9;i=0.5;K(a,
(g-d)*b,i*c,h);L(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);L(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);L(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);L(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.q;b.v=new H(0.4,0.25);b.w=new H(0.65,0.75);return b},XorGate:function(a,b,c){var a=new J,d=0.5*ic;K(a,0.1*b,0,q);L(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);K(a,0.2*b,0,h);L(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);L(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);L(a,0.45*b,0.75*c,0.45*b,
0.25*c,0.2*b,0);Gd(a);b=a.q;b.v=new H(0.4,0.25);b.w=new H(0.8,0.75);return b},Capacitor:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.q},Resistor:function(a,b,c){a=new J;K(a,0,0.5*c,q);a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);return a.q},Inductor:function(a,b,c){var a=new J,d=0.1*ic,e=0.1,g=0.5;K(a,(e-0.5*d)*b,(g+0.1)*c,q);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+
d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);g=e=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);L(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;L(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+0.5*d)*b,(g+0.1)*c);return a.q},ACvoltageSource:function(a,
b,c){var a=new J,d=0.5*ic;K(a,0*b,0.5*c,q);L(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);L(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*b,0.5*c);L(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.q;b.$b=dh;return b},DCvoltageSource:function(a,b,c){a=new J;K(a,0,0.75*c,q);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.q},Diode:function(a,b,c){a=new J;K(a,1*b,0,q);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,
0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.q;b.v=new H(0,0.25);b.w=new H(0.5,0.75);return b},Wifi:function(a,b,c){var d=b,e=c,b=0.38*b,c=0.6*c,a=new J,g=0.8*ic,i=0.8,j=0,k=0.5,d=(d-b)/2,e=(e-c)/2;K(a,j*b+d,(k+i)*c+e,h);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);L(a,(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);Gd(a);g=0.4*ic;i=0.4;j=0.2;
k=0.5;K(a,j*b+d,(k+i)*c+e,h);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,j*b+d,(k-i)*c+e,(j-i+0.5*g)*b+d,(k-g)*c+e,(j-i+0.5*g)*b+d,k*c+e);L(a,(j-i+0.5*g)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);Gd(a);g=0.2*ic;i=0.2;k=j=0.5;K(a,(j-i)*b+d,k*c+e,h);L(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,
j*b+d,(k+i)*c+e);L(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);g=0.4*ic;i=0.4;j=0.8;k=0.5;K(a,j*b+d,(k-i)*c+e,h);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);L(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);L(a,(j+i-0.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);Gd(a);g=0.8*ic;i=0.8;j=1;k=0.5;K(a,j*b+d,(k-i)*c+e,h);L(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);L(a,
(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);L(a,j*b+d,(k+i)*c+e,(j+i-0.5*g)*b+d,(k+g)*c+e,(j+i-0.5*g)*b+d,k*c+e);L(a,(j+i-0.5*g)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);Gd(a);return a.q},Email:function(a,b,c){a=new J;K(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);Gd(a);K(a,0,0,q);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);Hd(a);return a.q},Ethernet:function(a,b,c){a=new J;K(a,
0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);Gd(a);K(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);a.lineTo(0.4*b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);Gd(a);K(a,0.6*b,1*c,h,h);a.lineTo(0.9*b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);Gd(a);K(a,0,0.5*c,q);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);Hd(a);return a.q},
Power:function(a,b,c){var a=new J,d=0.4*ic,e=0.4,g=new F(0,0),i=new F(0,0),j=new F(0,0),k=new F(0,0);new F(0,0);pl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);new F(i.x,i.y);K(a,i.x*b,i.y*c,h);L(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);L(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);pl(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);L(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);d=0.3*ic;e=0.3;pl(0.5-e,
0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);a.lineTo(i.x*b,i.y*c);L(a,k.x*b,k.y*c,j.x*b,j.y*c,(0.5-e)*b,0.5*c);L(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);L(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);pl(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);L(a,k.x*b,k.y*c,j.x*b,j.y*c,i.x*b,i.y*c);Gd(a);K(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);Gd(a);b=a.q;b.v=new H(0.25,0.55);b.w=new H(0.75,0.8);return b},Fallout:function(a,
b,c){var a=new J,d=0.5*ic;K(a,0*b,0.5*c,h);L(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);L(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;K(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;Gd(a);K(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;Gd(a);K(a,
(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);Gd(a);b=a.q;b.$b=dh;return b},IrritationHazard:function(a,b,c){a=new J;K(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);Gd(a);b=a.q;b.v=new H(0.3,0.3);b.w=new H(0.7,0.7);return b},ElectricalHazard:function(a,
b,c){a=new J;K(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*c);a.lineTo(0.63*b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);Gd(a);return a.q},FireHazard:function(a,b,c){a=new J;K(a,0.1*b,1*c,h);L(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);L(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);L(a,0.59*b,0.29*c,0.58*b,0.28*c,0.59*b,0.18*c);L(a,0.8*b,
0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);L(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);L(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,1*c);Gd(a);b=a.q;b.v=new H(0.05,0.645);b.w=new H(0.884,0.908);return b},BpmnActivityLoop:function(a,b,c){var a=new J,d=0.5*(4*(Math.SQRT2-1)/3);K(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,q);L(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);L(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);L(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);L(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*
c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);return a.q},BpmnActivityParallel:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(0,1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.q},BpmnActivitySequential:function(a,b,c){a=new J;K(a,0,0,q);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);return a.q},BpmnActivityAdHoc:function(a,b,c){a=new J;K(a,0,0,q);K(a,1*b,1*c,q);K(a,0,0.5*c,q);L(a,0.2*b,0.35*c,0.3*b,0.35*
c,0.5*b,0.5*c);L(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);return a.q},BpmnActivityCompensation:function(a,b,c){a=new J;K(a,0,0.5*c,h);a.lineTo(0.5*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*b,1*c);Gd(a);return a.q},BpmnTaskMessage:function(a,b,c){a=new J;K(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);Gd(a);K(a,0,0.2*c,q);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);Hd(a);return a.q},BpmnTaskScript:function(a,
b,c){a=new J;K(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);L(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);L(a,0.4*b,0.5*c,1*b,0.5*c,0.7*b,1*c);Gd(a);K(a,0.45*b,0.73*c,q);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*b,0.27*c);a.lineTo(0.56*b,0.27*c);Hd(a);return a.q},BpmnTaskUser:function(a,b,c){a=new J;K(a,0,0,q);K(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);L(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);
a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);L(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,0.405*c);var d=0.5-0.285,e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;L(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*b,(d+g)*c,(0.5-d)*b,d*c);L(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);L(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);L(a,(0.5+d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*
c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);K(a,0.2*b,1*c,q);a.lineTo(0.2*b,0.8*c);K(a,0.8*b,1*c,q);a.lineTo(0.8*b,0.8*c);return a.q},BpmnEventConditional:function(a,b,c){a=new J;K(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);Gd(a);K(a,0.2*b,0.2*c,q);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);Hd(a);return a.q},BpmnEventError:function(a,b,c){a=new J;K(a,
0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);Gd(a);return a.q},BpmnEventEscalation:function(a,b,c){a=new J;K(a,0,0,q);K(a,1*b,1*c,q);K(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.5*c);Gd(a);return a.q},BpmnEventTimer:function(a,b,c){var a=new J,d=0.5*ic;K(a,1*b,0.5*c,h);L(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);L(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);L(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);L(a,(0.5+d)*b,0,1*b,
(0.5-d)*c,1*b,0.5*c);K(a,0.5*b,0,q);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*b,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*b,0.54*c);Hd(a);b=a.q;b.$b=dh;return b}},ul;for(ul in al)al[ul.toLowerCase()]=ul;
var vl={Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",None:""},Zk,wl={},Bl;for(Bl in al){var Cl=al[Bl];"string"===typeof Cl&&(Cl=al[Cl]);"string"===typeof Cl&&(Cl=al[Cl]);Cl&&(wl[Bl]=Cl(n,100,100));wl[Bl].oe()}Zk=wl;var Dl={};
function $k(a){if(vl){for(var b in vl){var c=Cd(vl[b],q);Dl[b]=c;Dl[b.toLowerCase()]=b}vl=f}return Dl[a]}V.FigureGenerators=al;V.ArrowheadGeometries=Dl;
function S(a){0===arguments.length?x.call(this):x.call(this,a);this.Tm=this.Pi="";this.Wp=n;this.Cq=this.tq=this.Ep=this.jr=this.lp=this.Zo=h;this.Nq=this.Iq=this.Hq=q;this.fn=h;this.$q="";this.Xq=h;this.Bk=this.Oq=this.Jq=this.Yq=n;this.Ht=q;this.Li=this.Zq=n;this.Lq="";this.El=n;this.Kq=(new bb(NaN,NaN)).freeze();this.Pq="";this.Fl=n;this.Ld="";this.Kp=h;this.G=this.Yo=this.dk=n;this.bj=(new F(NaN,NaN)).freeze();this.Pt=new F(NaN,NaN);this.eq="";this.cj=n;this.fq=Jb;this.oq=nc;this.hq=oc;this.mp=
n;this.Lp=h;this.Xp=El;this.If=q;this.jn=(new F(6,6)).freeze();this.hn="gray";this.gn=4;this.aB=-1;this.Xi=h;this.hu=this.he=q}w.P("Part",S);w.Da(S,x);
S.prototype.xb=function(a){x.prototype.xb.call(this,a);a.Pi=this.Pi;a.Tm=this.Tm;a.Wp=this.Wp;a.Zo=this.Zo;a.lp=this.lp;a.jr=this.jr;a.Ep=this.Ep;a.tq=this.tq;a.Cq=this.Cq;a.Hq=this.Hq;a.Iq=this.Iq;a.Nq=this.Nq;a.fn=this.fn;a.$q=this.$q;a.Xq=this.Xq;a.Yq=this.Yq;a.Jq=this.Jq;a.Oq=this.Oq;a.Ht=q;a.Zq=this.Zq;a.Li=n;a.Lq=this.Lq;a.Kq.Xa(this.Kq);a.Pq=this.Pq;a.Ld=this.Ld;a.Kp=this.Kp;a.Yo=this.Yo;a.bj.Xa(this.bj);a.eq=this.eq;a.fq=this.fq.O();a.oq=this.oq.O();a.hq=this.hq.O();a.mp=this.mp;a.Lp=this.Lp;
a.Xp=this.Xp;a.If=this.If;a.jn.Xa(this.jn);a.hn=this.hn;a.gn=this.gn};S.prototype.yh=function(a){x.prototype.yh.call(this,a);sj(a);a.Bk=n;a.El=n;a.Fl=n;a.cj=n};S.prototype.toString=function(){var a=w.Pk(Object.getPrototypeOf(this))+"#"+w.ec(this);this.data&&(a+="("+le(this.data)+")");return a};S.LayoutNone=0;var Ki;S.LayoutAdded=Ki=1;var Pi;S.LayoutRemoved=Pi=2;var Qj;S.LayoutShown=Qj=4;var Rj;S.LayoutHidden=Rj=8;S.LayoutNodeSized=16;var Wi;S.LayoutGroupLayout=Wi=32;var El;
S.LayoutStandard=El=Ki|Pi|Qj|Rj|16|Wi;S.prototype.fm=function(a,b,c,d,e,g,i){var j=this.h;j!==n&&(a===je&&"elements"===b?e instanceof x&&Li(e,e,function(a){Mi(j,a)}):a===ke&&"elements"===b&&e instanceof x&&Li(e,e,function(a){Oi(j,a)}),j.Pc(a,b,c,d,e,g,i))};S.prototype.updateTargetBindings=S.prototype.vb=function(a){x.prototype.vb.call(this,a);if(this.data!==n)for(a=this.elements;a.next();){var b=a.value;b instanceof x&&Li(b,b,function(a){a.data!==n&&a.vb()})}};
w.u(S,{CF:"adornments"},function(){return this.Li===n?n:this.Li.l});S.prototype.findAdornment=S.prototype.Un=function(a){u&&w.k(a,"string",S,"findAdornment:category");var b=this.Li;return b===n?n:b.qa(a)};
S.prototype.addAdornment=S.prototype.yn=function(a,b){if(b!==n){u&&(w.k(a,"string",S,"addAdornment:category"),w.i(b,of,S,"addAdornment:ad"));var c=n,d=this.Li;d!==n&&(c=d.qa(a));if(c!==b){if(c!==n){var e=c.Ja;e!==n&&e.Od(-1,c)}d===n&&(this.Li=d=new la("string",of));d.add(a,b);c=this.h;c!==n&&(d=c.Wl("Adornment"),d===n&&(d=c.Wl("")),d!==n&&(d.Rk(99999999,b),b.data=this.data))}}};
S.prototype.removeAdornment=S.prototype.hm=function(a){u&&w.k(a,"string",S,"removeAdornment:category");var b=this.Li;if(b!==n){var c=b.qa(a);if(c!==n){var d=c.Ja;d!==n&&d.Od(-1,c)}b.remove(a);0===b.count&&(this.Li=n)}};S.prototype.clearAdornments=S.prototype.wh=function(){var a=this.Li;if(a!==n){for(var b=[],a=a.l;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.hm(b[c])}};
S.prototype.updateAdornments=S.prototype.Ki=function(){a:{var a=this.h;if(a!==n){var b=n;if(this.Qa&&this.oE){var c=this.Vv;if(this.va.T()&&c!==n&&this.nb()&&c.Tk()&&c.va.T()){b=this.Un("Selection");if(b===n){b=this.pE;b===n&&(this instanceof U?b=a.yD:this instanceof S&&(b=this instanceof xf?a.ZC:a.ND));if(!(b instanceof of))break a;zf(b);b=b.copy();if(!(b instanceof of))break a;b.vd="Selection";b.Cc=c}if(b!==n){a=b.placeholder;if(a!==n){var d=c.Yl(),e=0;c instanceof V&&(e=c.eb);a.wa=new bb((c.Sa.width+
e)*d,(c.Sa.height+e)*d)}b.angle=c.Xn();b.type!==Sg?b.location=c.Ab(Jb):b.R()}}this.yn("Selection",b)}else this.hm("Selection")}}c=this.h;if(c!==n){c=c.Rb.Re.n;b=c.length;for(a=0;a<b;a++)d=c[a],d.isEnabled&&d.updateAdornments(this)}};w.u(S,{Ja:"layer"},t("G"));w.u(S,{h:"diagram"},function(){var a=this.G;return a!==n?a.h:n});w.g(S,"layerName",S.prototype.Pd);
w.defineProperty(S,{Pd:"layerName"},t("Tm"),function(a){var b=this.Tm;if(b!==a){w.k(a,"string",S,"layerName");var c=this.h;if(!(c!==n&&c.Wl(a)==n)&&(this.Tm=a,this.j("layerName",b,a),b=this.Ja,b!==n&&b.name!==a&&(c=b.h,c!==n&&(a=c.Wl(a),a!==n&&a!==b)))){var d=b.Od(-1,this,h);0<=d&&c.Pc(ke,"parts",b,this,n,d,h);d=a.Rk(99999999,this,h);0<=d&&c.Pc(je,"parts",a,n,this,h,d);d=this.fo;if(d!==n){var e=c.Ma;c.Ma=h;d(this,b,a);c.Ma=e}}}});w.g(S,"layerChanged",S.prototype.fo);
w.defineProperty(S,{fo:"layerChanged"},t("Wp"),function(a){var b=this.Wp;b!==a&&(a!==n&&w.k(a,"function",S,"layerChanged"),this.Wp=a,this.j("layerChanged",b,a))});w.g(S,"location",S.prototype.location);w.defineProperty(S,{location:"location"},t("bj"),function(a){var b=this.bj;if(!b.I(a)){u&&w.i(a,F,S,"location");this.bj=a=a.O();if(this.Jc===q){var c=this.rb,d=this.Pt,e=c.copy();c.V(a.x-d.x,a.y-d.y);c.I(e)||this.j("position",e,c);Tj(this)}this.j("location",b,a)}});
function Tj(a){if(a.Xi===q){var b=a.h;b!==n&&(b.dh.add(a),a instanceof T&&!b.sa.tb&&a.Og(),b.yb());a.Xi=h}}function Fl(a){if(a.Xi!==q){var b=a.rb,c=a.Ib,d=c.copy();c.Ia();c.x=b.x;c.y=b.y;c.freeze();qj(a,d,c);a.Xi=q}}w.u(S,{Yb:"locationObject"},function(){if(this.cj===n){var a=this.Hv;a!==f&&a!==n&&""!==a?(a=this.Je(a),this.cj=a!==n?a:this):this.cj=this}return this.cj.visible?this.cj:this});w.g(S,"minLocation",S.prototype.GD);
w.defineProperty(S,{GD:"minLocation"},t("oq"),function(a){var b=this.oq;b.I(a)||(u&&w.i(a,F,S,"minLocation"),this.oq=a=a.O(),this.j("minLocation",b,a))});w.g(S,"maxLocation",S.prototype.AD);w.defineProperty(S,{AD:"maxLocation"},t("hq"),function(a){var b=this.hq;b.I(a)||(u&&w.i(a,F,S,"maxLocation"),this.hq=a=a.O(),this.j("maxLocation",b,a))});w.g(S,"locationObjectName",S.prototype.Hv);
w.defineProperty(S,{Hv:"locationObjectName"},t("eq"),function(a){var b=this.eq;b!==a&&(u&&w.k(a,"string",S,"locationObjectName"),this.eq=a,this.cj=n,Bj(this),this.j("locationObjectName",b,a))});w.g(S,"locationSpot",S.prototype.ag);w.defineProperty(S,{ag:"locationSpot"},t("fq"),function(a){var b=this.fq;b.I(a)||(u&&(w.i(a,H,S,"locationSpot"),sb(a)||w.m("Part.locationSpot must be a specific Spot value, not: "+a)),this.fq=a=a.O(),Bj(this),this.j("locationSpot",b,a))});
S.prototype.move=S.prototype.move=function(a){this.position=a;this.Jc===q&&Fl(this)};S.prototype.isVisible=S.prototype.nb=function(){if(!this.Kg)return q;var a=this.Ja;if(a!==n&&!a.visible)return q;a=this.bb;if(a!==n&&!a.Ne)return q;if(this instanceof T){a=this.NC();if(a!==n&&!a.Oe)return q;a=this.yd;if(a!==n){var b={};b[w.ec(this)]=h;return Gl(a,b)}}else if(this instanceof U){a=this.ga;if(a!==n&&Hl(a)===n)return q;a=this.la;if(a!==n&&Hl(a)===n)return q}return h};
function Gl(a,b){var c=a.ga;if(c!==n){var d=c.yd;if(d!==n)b[w.ec(c)]||(b[w.ec(c)]=h,Gl(d,b));else if(!c.nb())return q}c=a.la;if(c!==n)if(d=c.yd,d!==n)b[w.ec(c)]||(b[w.ec(c)]=h,Gl(d,b));else if(!c.nb())return q;return h}
function Il(a,b,c){yb(c)&&(c=Ob);var d=b.Sa;if(b===n||b===a)return new F(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);c=new F(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);b.transform.Ta(c);for(b=b.fa;b!==n&&b!==a;)b.transform.Ta(c),b=b.fa;a.uk.Ta(c);c.offset(-a.Tc.x,-a.Tc.y);return c}S.prototype.ensureBounds=S.prototype.yi=function(){Gh(this,Infinity,Infinity);this.Dc()};
S.prototype.Dc=function(){pj(this);if(this.Jc===q){var a=this.position,b=this.location;if(!b.T()||!a.T())Jl(this,a,b),pj(this);Fl(this)}else{this instanceof of&&(this.S!==Sg&&this.qb!==n)&&(this.cj=this.qb,a=this.Cc,this.type!==Sg&&a!==n&&(this.location=a.Ab(Jb)));var c=this.GB;c.set(this.Ib);yj(this);this.Ib.Ia();var d=this.he;this.tj(0,0,this.Tc.width,this.Tc.height);a=this.position;b=this.location;Jl(this,a,b);b=this.Ib;b.x=a.x;b.y=a.y;b.freeze();pj(this);qj(this,c,b);c.I(b)?this.he=d:this.be()&&
(!Ua(c.width,b.width)||!Ua(c.height,b.height))&&this.F(16);this.Xi=q}};function Jl(a,b,c){var d=NaN,e=NaN,g=a.ag,e=a.Yb;yb(g)&&w.m("Spot must be real: "+g.toString());var i=e.Sa,d=a.Pt;d.im(0,0,i.width,i.height,g);if(e!==a){e.transform.Ta(d);e.eb&&(g=e.ph/2,d.offset(-g,-g));for(e=e.fa;e!==n&&e!==a;)e.transform.Ta(d),e=e.fa}a.uk.Ta(d);d.offset(-a.Tc.x,-a.Tc.y);a=a.Pt;c.T()?(d=c.x-a.x,e=c.y-a.y,b.copy(),b.V(d,e)):b.T()&&(d=b.x,e=b.y,c.copy(),c.V(d+a.x,e+a.y))}
function Ni(a,b){a.hu=q;var c=a.h;if(c!==n){a.updateAdornments();var d=a.CF;if(d!==n){pj(a);for(yj(a);d.next();)Gh(d.value,Infinity,Infinity),d.value.Dc()}a instanceof T&&aj(c,a);!a.Ja.zc&&!b&&Bi(c);var d=a.Ib,e=c.Ua;e.T()?a.he?d.Me(e)||(a.he=q,Lh(c)):d.Me(e)&&(a.he=h):c.qk=h;a.Ib.T()&&Lh(c,a.Ib)}}S.prototype.Sk=ca(h);
function Kh(a,b){if(a.Kg){var c=a.Ib;if(!(0===c.width||0===c.height||isNaN(c.x)||isNaN(c.y))){var d=a.transform,e=a.fa,g=a.sm;g.reset();e!==n&&(e.Ih()?g.multiply(e.je):e.fa!==n&&g.multiply(e.fa.je));g.multiply(a.Md);a.we!==n&&(xj(a,b,a.we,h,h),b.fillRect(c.x,c.y,c.width,c.height));a.we===n&&a.xe===n&&(b.fillStyle="rgba(0,0,0,0.4)",b.fillRect(c.x,c.y,c.width,c.height));if(a.xe!==n){d.ds()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);var i=a.Sa,e=c=0,g=i.width,i=i.height,j=0;a instanceof V&&(i=a.Ga.Fb,
c=i.x,e=i.y,g=i.width,i=i.height,j=a.ph);xj(a,b,a.xe,h);b.fillRect(c-j/2,e-j/2,g+j,i+j);d.ds()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy)))}}}}S.prototype.be=ca(h);w.g(S,"isInDocumentBounds",S.prototype.Cv);w.defineProperty(S,{Cv:"isInDocumentBounds"},t("Kp"),function(a){var b=this.Kp;b!==a&&(u&&w.k(a,"boolean",S,"isInDocumentBounds"),this.Kp=a,this.j("isInDocumentBounds",b,a))});w.g(S,"category",S.prototype.vd);
w.defineProperty(S,{vd:"category"},t("Pi"),function(a){var b=this.Pi;if(b!==a){w.k(a,"string",S,"category");this.Pi=a;this.j("category",b,a);var b=this.h,c=this.data;if(b!==n&&c!==n){var d=b.ba;this instanceof U?(d instanceof O?d.rE(c,a):d instanceof De&&d.SH(c,a),b=b.findTemplateForLinkData(c,a),b instanceof U&&(zf(b),b=b.copy(),b instanceof U&&Kl(this,b,a))):this instanceof of||(d!==n&&d.Wv(c,a),b=b.findTemplateForNodeData(c,a),b instanceof S&&(zf(b),b=b.copy(),b instanceof S&&Kl(this,b,a)))}}});
function Kl(a,b,c){a.wh();var d=a.data,e=a.Pd,g=a.Qa;b.yh(a);b.xb(a);a.Pi=c;a.R();uj(a);b=a.h;c=h;b!==n&&(c=b.ub,b.ub=h);a.Am=d;d!==n&&a.vb();b!==n&&(b.ub=c);d=a.Pd;d!==e&&(a.Tm=e,a.Pd=d);a.Qa=g}S.prototype.canCopy=S.prototype.II=function(){if(!this.sC)return q;var a=this.Ja;if(a===n)return h;if(!a.qj)return q;a=a.h;return a===n?h:!a.qj?q:h};S.prototype.canDelete=S.prototype.MI=function(){if(!this.CC)return q;var a=this.Ja;if(a===n)return h;if(!a.Ek)return q;a=a.h;return a===n?h:!a.Ek?q:h};
S.prototype.canEdit=S.prototype.OI=function(){if(!this.CE)return q;var a=this.Ja;if(a===n)return h;if(!a.In)return q;a=a.h;return a===n?h:!a.In?q:h};S.prototype.canGroup=S.prototype.TI=function(){if(!this.$C)return q;var a=this.Ja;if(a===n)return h;if(!a.Dn)return q;a=a.h;return a===n?h:!a.Dn?q:h};S.prototype.canMove=S.prototype.WI=function(){if(!this.KD)return q;var a=this.Ja;if(a===n)return h;if(!a.Fk)return q;a=a.h;return a===n?h:!a.Fk?q:h};
S.prototype.canPrint=S.prototype.YI=function(){if(!this.TD)return q;var a=this.Ja;if(a===n)return h;if(!a.Dr)return q;a=a.h;return a===n?h:!a.Dr?q:h};S.prototype.canReshape=S.prototype.bJ=function(){if(!this.bE)return q;var a=this.Ja;if(a===n)return h;if(!a.Fn)return q;a=a.h;return a===n?h:!a.Fn?q:h};S.prototype.canResize=S.prototype.cJ=function(){if(!this.cE)return q;var a=this.Ja;if(a===n)return h;if(!a.Gn)return q;a=a.h;return a===n?h:!a.Gn?q:h};
S.prototype.canRotate=S.prototype.dJ=function(){if(!this.hE)return q;var a=this.Ja;if(a===n)return h;if(!a.Hn)return q;a=a.h;return a===n?h:!a.Hn?q:h};S.prototype.canSelect=S.prototype.Ik=function(){if(!this.Hj)return q;var a=this.Ja;if(a===n)return h;if(!a.ke)return q;a=a.h;return a===n?h:!a.ke?q:h};w.g(S,"copyable",S.prototype.sC);w.defineProperty(S,{sC:"copyable"},t("Zo"),function(a){var b=this.Zo;b!==a&&(u&&w.k(a,"boolean",S,"copyable"),this.Zo=a,this.j("copyable",b,a))});w.g(S,"deletable",S.prototype.CC);
w.defineProperty(S,{CC:"deletable"},t("lp"),function(a){var b=this.lp;b!==a&&(u&&w.k(a,"boolean",S,"deletable"),this.lp=a,this.j("deletable",b,a))});w.g(S,"textEditable",S.prototype.CE);w.defineProperty(S,{CE:"textEditable"},t("jr"),function(a){var b=this.jr;b!==a&&(u&&w.k(a,"boolean",S,"textEditable"),this.jr=a,this.j("textEditable",b,a),this.updateAdornments())});w.g(S,"groupable",S.prototype.$C);
w.defineProperty(S,{$C:"groupable"},t("Ep"),function(a){var b=this.Ep;b!==a&&(u&&w.k(a,"boolean",S,"groupable"),this.Ep=a,this.j("groupable",b,a))});w.g(S,"movable",S.prototype.KD);w.defineProperty(S,{KD:"movable"},t("tq"),function(a){var b=this.tq;b!==a&&(u&&w.k(a,"boolean",S,"movable"),this.tq=a,this.j("movable",b,a))});w.g(S,"printable",S.prototype.TD);
w.defineProperty(S,{TD:"printable"},t("Cq"),function(a){var b=this.Cq;b!==a&&(u&&w.k(a,"boolean",S,"printable"),this.Cq=a,this.j("printable",b,a))});w.g(S,"reshapable",S.prototype.bE);w.defineProperty(S,{bE:"reshapable"},t("Hq"),function(a){var b=this.Hq;b!==a&&(u&&w.k(a,"boolean",S,"reshapable"),this.Hq=a,this.j("reshapable",b,a),this.updateAdornments())});w.g(S,"resizable",S.prototype.cE);
w.defineProperty(S,{cE:"resizable"},t("Iq"),function(a){var b=this.Iq;b!==a&&(u&&w.k(a,"boolean",S,"resizable"),this.Iq=a,this.j("resizable",b,a),this.updateAdornments())});w.g(S,"rotatable",S.prototype.hE);w.defineProperty(S,{hE:"rotatable"},t("Nq"),function(a){var b=this.Nq;b!==a&&(u&&w.k(a,"boolean",S,"rotatable"),this.Nq=a,this.j("rotatable",b,a),this.updateAdornments())});w.g(S,"selectable",S.prototype.Hj);
w.defineProperty(S,{Hj:"selectable"},t("fn"),function(a){var b=this.fn;b!==a&&(u&&w.k(a,"boolean",S,"selectable"),this.fn=a,this.j("selectable",b,a),this.updateAdornments())});w.g(S,"selectionObjectName",S.prototype.As);w.defineProperty(S,{As:"selectionObjectName"},t("$q"),function(a){var b=this.$q;b!==a&&(u&&w.k(a,"string",S,"selectionObjectName"),this.$q=a,this.Bk=n,this.j("selectionObjectName",b,a))});w.g(S,"selectionAdorned",S.prototype.oE);
w.defineProperty(S,{oE:"selectionAdorned"},t("Xq"),function(a){var b=this.Xq;b!==a&&(u&&w.k(a,"boolean",S,"selectionAdorned"),this.Xq=a,this.j("selectionAdorned",b,a),this.updateAdornments())});w.g(S,"selectionAdornmentTemplate",S.prototype.pE);w.defineProperty(S,{pE:"selectionAdornmentTemplate"},t("Yq"),function(a){var b=this.Yq;b!==a&&(u&&w.i(a,of,S,"selectionAdornmentTemplate"),this instanceof U&&(a.type=Sg),this.Yq=a,this.j("selectionAdornmentTemplate",b,a))});
w.u(S,{Vv:"selectionObject"},function(){if(this.Bk===n){var a=this.As;a!==n&&""!==a?(a=this.Je(a),this.Bk=a!==n?a:this):this instanceof U?(a=this.path,this.Bk=a!==n?a:this):this.Bk=this}return this.Bk});w.g(S,"isSelected",S.prototype.Qa);
w.defineProperty(S,{Qa:"isSelected"},t("Ht"),function(a){var b=this.Ht;if(b!==a){u&&w.k(a,"boolean",S,"isSelected");var c=this.h;if(!a||this.Ik()&&!(c!==n&&c.selection.count>=c.BD)){this.Ht=a;var d=q;if(c!==n){d=c.ub;c.ub=h;var e=c.selection;e.Ia();a?e.add(this):e.remove(this);e.freeze()}this.j("isSelected",b,a);this.updateAdornments();a=this.qE;a!==n&&a(this);c!==n&&(c.yb(),c.ub=d)}}});w.g(S,"selectionChanged",S.prototype.qE);
w.defineProperty(S,{qE:"selectionChanged"},t("Zq"),function(a){var b=this.Zq;b!==a&&(a!==n&&w.k(a,"function",S,"selectionChanged"),this.Zq=a,this.j("selectionChanged",b,a))});w.g(S,"resizeAdornmentTemplate",S.prototype.dE);w.defineProperty(S,{dE:"resizeAdornmentTemplate"},t("Jq"),function(a){var b=this.Jq;b!==a&&(u&&w.i(a,of,S,"resizeAdornmentTemplate"),this.Jq=a,this.j("resizeAdornmentTemplate",b,a))});w.g(S,"resizeObjectName",S.prototype.fE);
w.defineProperty(S,{fE:"resizeObjectName"},t("Lq"),function(a){var b=this.Lq;b!==a&&(u&&w.k(a,"string",S,"resizeObjectName"),this.Lq=a,this.El=n,this.j("resizeObjectName",b,a))});w.u(S,{KH:"resizeObject"},function(){if(this.El===n){var a=this.fE;a!==n&&""!==a?(a=this.Je(a),this.El=a!==n?a:this):this.El=this}return this.El});w.g(S,"resizeCellSize",S.prototype.eE);
w.defineProperty(S,{eE:"resizeCellSize"},t("Kq"),function(a){var b=this.Kq;b.I(a)||(u&&w.i(a,bb,S,"resizeCellSize"),this.Kq=a=a.O(),this.j("resizeCellSize",b,a))});w.g(S,"rotateAdornmentTemplate",S.prototype.iE);w.defineProperty(S,{iE:"rotateAdornmentTemplate"},t("Oq"),function(a){var b=this.Oq;b!==a&&(u&&w.i(a,of,S,"rotateAdornmentTemplate"),this.Oq=a,this.j("rotateAdornmentTemplate",b,a))});w.g(S,"rotateObjectName",S.prototype.jE);
w.defineProperty(S,{jE:"rotateObjectName"},t("Pq"),function(a){var b=this.Pq;b!==a&&(u&&w.k(a,"string",S,"rotateObjectName"),this.Pq=a,this.Fl=n,this.j("rotateObjectName",b,a))});w.u(S,{OH:"rotateObject"},function(){if(this.Fl===n){var a=this.jE;a!==n&&""!==a?(a=this.Je(a),this.Fl=a!==n?a:this):this.Fl=this}return this.Fl});w.g(S,"text",S.prototype.text);w.defineProperty(S,{text:"text"},t("Ld"),function(a){var b=this.Ld;b!==a&&(u&&w.k(a,"string",S,"text"),this.Ld=a,this.j("text",b,a))});
w.g(S,"containingGroup",S.prototype.bb);
w.defineProperty(S,{bb:"containingGroup"},t("dk"),function(a){if(this.be()){var b=this.dk;if(b!==a){u&&a!==n&&w.i(a,xf,S,"containingGroup");if(a!==n&&(this===a||a.es(this)))this===a&&w.m("Cannot make a Group a member of itself: "+this.toString()),w.m("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString());this.F(Pi);var c=this.h;b!==n?Ll(b,this):this instanceof xf&&c!==n&&c.Hl.remove(this);this.dk=a;a!==n?Ml(a,this):this instanceof xf&&c!==n&&c.Hl.add(this);
this.F(Ki);if(c!==n){var d=this.data,e=c.ba;d!==n&&e instanceof O&&e.Rz(d,e.lb(a!==n?a.data:n))}d=this.Ry;d!==n&&(e=h,c!==n&&(e=c.Ma,c.Ma=h),d(this,b,a),c!==n&&(c.Ma=e));if(this instanceof xf){c=new ma(S);nf(c,this,h,q);for(c=c.l;c.next();)if(d=c.value,d instanceof T)for(d=d.ue;d.next();)e=d.value,Si(e)}if(this instanceof T)for(d=this.ue;d.next();)e=d.value,Si(e);this.j("containingGroup",b,a);a!==n&&a.$v()}}else w.m("cannot set the Part.containingGroup of a Link or Adornment")});
function sj(a){a=a.bb;a!==n&&(a.R(),a.qb!==n&&a.qb.R(),a.Og())}S.prototype.as=function(){var a=this.dk;a!==n&&Ml(a,this)};S.prototype.bs=function(){var a=this.dk;a!==n&&Ll(a,this)};S.prototype.Rl=function(){var a=this.data;if(a!==n){var b=this.h;b!==n&&(b=b.ba,b!==n&&b.$D(a))}};w.g(S,"containingGroupChanged",S.prototype.Ry);
w.defineProperty(S,{Ry:"containingGroupChanged"},t("Yo"),function(a){var b=this.Yo;b!==a&&(a!==n&&w.k(a,"function",S,"containingGroupChanged"),this.Yo=a,this.j("containingGroupChanged",b,a))});w.u(S,{nM:"topLevelPart"},function(){return Nl(this,this)});S.prototype.findTopLevelPart=S.prototype.xK=function(){return Nl(this,this)};function Nl(a,b){var c=b.bb;return c!==n?Nl(a,c):b instanceof T&&(c=b.yd,c!==n)?Nl(a,c):b}
w.u(S,{gs:"isTopLevel"},function(){return this.bb!==n||this instanceof T&&this.Fi?q:h});S.prototype.isMemberOf=S.prototype.es=function(a){return!(a instanceof xf)?q:Ol(this,this,a)};function Ol(a,b,c){if(b===c||c===n)return q;var d=b.bb;return d!==n&&(d===c||Ol(a,d,c))?h:b instanceof T&&(b=b.yd,b!==n)?Ol(a,b,c):q}S.prototype.findCommonContainingGroup=S.prototype.uG=function(a){return Pl(this,this,a)};
function Pl(a,b,c){if(b===n||c===n)return n;var d=b.bb;if(d===n)return n;if(b===c)return d;var e=c.bb;return e===n?n:d===e?e:Ol(a,c,d)?d:Ol(a,b,e)?e:Pl(a,d,e)}w.g(S,"isLayoutPositioned",S.prototype.mz);w.defineProperty(S,{mz:"isLayoutPositioned"},t("Lp"),function(a){var b=this.Lp;b!==a&&(u&&w.k(a,"boolean",S,"isLayoutPositioned"),this.Lp=a,this.j("isLayoutPositioned",b,a),this.F(a?Qj:Rj))});w.g(S,"layoutConditions",S.prototype.uD);
w.defineProperty(S,{uD:"layoutConditions"},t("Xp"),function(a){var b=this.Xp;b!==a&&(u&&w.k(a,"number",S,"layoutConditions"),this.Xp=a,this.j("layoutConditions",b,a))});S.prototype.canLayout=S.prototype.Fr=function(){if(!this.mz||!this.nb())return q;var a=this.Ja;return a!==n&&a.zc||this instanceof T&&this.Fi?q:h};
S.prototype.invalidateLayout=S.prototype.F=function(a){a===f&&(a=16777215);var b;!this.mz||0===(a&this.uD)?b=q:(b=this.Ja,b!==n&&b.zc||this instanceof T&&this.Fi?b=q:(b=this.h,b=b!==n&&b.sa.tb?q:h));if(b)if(b=this.dk,b!==n){var c=b.Pb;c!==n?c.F():b.F(a)}else a=this.h,a!==n&&(c=a.Pb,c!==n&&c.F())};w.g(S,"dragComputation",S.prototype.Yy);
w.defineProperty(S,{Yy:"dragComputation"},t("mp"),function(a){var b=this.mp;b!==a&&(a!==n&&w.k(a,"function",S,"dragComputation"),this.mp=a,this.j("dragComputation",b,a))});w.g(S,"isShadowed",S.prototype.co);w.defineProperty(S,{co:"isShadowed"},t("If"),function(a){var b=this.If;b!==a&&(u&&w.k(a,"boolean",S,"isShadowed"),this.If=a,uj(this),this.j("isShadowed",b,a))});w.g(S,"shadowOffset",S.prototype.UH);
w.defineProperty(S,{UH:"shadowOffset"},t("jn"),function(a){var b=this.jn;b.I(a)||(u&&w.i(a,F,S,"shadowOffset"),this.jn=a=a.O(),uj(this),this.j("shadowOffset",b,a))});w.g(S,"shadowColor",S.prototype.shadowColor);w.defineProperty(S,{shadowColor:"shadowColor"},t("hn"),function(a){var b=this.hn;b!==a&&(u&&w.k(a,"string",S,"shadowColor"),this.hn=a,uj(this),this.j("shadowColor",b,a))});w.g(S,"shadowBlur",S.prototype.shadowBlur);
w.defineProperty(S,{shadowBlur:"shadowBlur"},t("gn"),function(a){var b=this.gn;b!==a&&(u&&w.k(a,"number",S,"shadowBlur"),this.gn=a,uj(this),this.j("shadowBlur",b,a))});function of(a){0===arguments.length?S.call(this,hh):S.call(this,a);this.Pd="Adornment";this.La=n;this.fn=q;this.bj=new F(NaN,NaN);this.Lh=new z(G);this.kh=n;this.Uc=(new z(F)).freeze();this.Ku=new F;this.qb=n}w.P("Adornment",of);w.Da(of,S);da=of.prototype;
da.toString=function(){var a=this.Cn;return"Adornment("+this.vd+")"+(a!==n?a.toString():"")};da.Th=function(){return this.La&&this.La.ca instanceof U?this.La.ca.Th():n};da.Bp=ca(n);da.Iv=function(){var a=this.Cc.ca,b=this.Cc;if(a instanceof U&&b instanceof V){var c=a.path,b=c.Ga;a.Iv();for(var b=c.Ga,a=this.Fa,c=a.length,d=0;d<c;d++){var e=a.n[d];e.Gi&&e instanceof V&&(e.Ga=b)}}};da.ix=function(){var a=this.Cn;return a instanceof U?a.Uc:n};w.u(of,{placeholder:"placeholder"},t("qb"));
w.g(of,"adornedObject",of.prototype.Cc);w.defineProperty(of,{Cc:"adornedObject"},t("La"),ba("La"));w.u(of,{Cn:"adornedPart"},function(){var a=this.La;return a!==n?a.ca:n});of.prototype.Sk=function(){var a=this.La;if(a===n)return h;a=a.ca;return a===n||!a.Jc};of.prototype.be=ca(q);w.u(of,{bb:"containingGroup"},ca(n));
of.prototype.fm=function(a,b,c,d,e,g,i){if(a===je&&"elements"===b)if(e instanceof bh)this.qb===n?this.qb=e:this.qb!==e&&w.m("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof x){var j=Uk(e,e,function(a){return a instanceof bh});j instanceof bh&&(this.qb===n?this.qb=j:this.qb!==j&&w.m("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===ke&&"elements"===b&&(d===this.qb?this.qb=n:d instanceof x&&this.qb.Ei(d)&&(this.qb=
n));S.prototype.fm.call(this,a,b,c,d,e,g,i)};of.prototype.updateAdornments=of.prototype.Ki=aa();of.prototype.Rl=aa();function T(a){0===arguments.length?S.call(this,hh):S.call(this,a);this.ad=new z(U);this.Rm=this.bq=this.aq=n;this.Rp=h;this.vr=q;this.qr=n;this.Uo=this.Sp=h;this.Vo=(new hb(2)).freeze();this.bd=this.Vg=n}w.P("Node",T);w.Da(T,S);T.prototype.xb=function(a){S.prototype.xb.call(this,a);a.aq=this.aq;a.bq=this.bq;a.Rp=this.Rp;a.vr=this.vr;a.qr=this.qr;a.Sp=this.Sp;a.Uo=this.Uo;a.Vo.Xa(this.Vo)};
T.prototype.yh=function(a){S.prototype.yh.call(this,a);a.Og();a.Vg=this.Vg;a.bd=n};var Ql;T.DirectionDefault=Ql=w.s(T,"DirectionDefault",0);T.DirectionAbsolute=w.s(T,"DirectionAbsolute",1);var Rl;T.DirectionRotatedNode=Rl=w.s(T,"DirectionRotatedNode",2);var gj;T.DirectionRotatedNodeOrthogonal=gj=w.s(T,"DirectionRotatedNodeOrthogonal",3);function Sl(a,b){b!==n&&(a.Vg==n&&(a.Vg=new ma(Tl)),a.Vg.add(b))}
T.prototype.fm=function(a,b,c,d,e,g,i){a===je&&"elements"===b?this.bd=n:a===ke&&"elements"===b&&(this.h===n?this.bd=n:d instanceof P&&Tk(this,d,function(a,b){Uj(a,b,h)}));S.prototype.fm.call(this,a,b,c,d,e,g,i)};T.prototype.invalidateConnectedLinks=T.prototype.Og=function(a){a===f&&(a=n);for(var b=this.ue;b.next();){var c=b.value;if(!(a!==n&&a.contains(c))){var d=c.Nc;d!==n&&(d.Kd=n);var e=c.Bd;e!==n&&e!==d&&(e.Kd=n);c.Tb()}}};T.prototype.Sk=ca(h);w.g(T,"avoidable",T.prototype.Fy);
w.defineProperty(T,{Fy:"avoidable"},t("Uo"),function(a){var b=this.Uo;if(b!==a){u&&w.k(a,"boolean",T,"avoidable");this.Uo=a;var c=this.h;c!==n&&aj(c,this);this.j("avoidable",b,a)}});w.g(T,"avoidableMargin",T.prototype.eC);w.defineProperty(T,{eC:"avoidableMargin"},t("Vo"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,T,"avoidableMargin");var b=this.Vo;if(!b.I(a)){this.Vo=a=a.O();var c=this.h;c!==n&&aj(c,this);this.j("avoidableMargin",b,a)}});
T.prototype.canAvoid=T.prototype.FI=function(){return this.Fy&&!this.Fi};T.prototype.getAvoidableRectangle=T.prototype.CK=function(a){a===f&&(a=new G);a.set(this.va);a.zr(this.eC);return a};function Hl(a){for(;a!==n&&!a.nb();)a=a.bb;return a}w.u(T,{ue:"linksConnected"},function(){return this.ad.l});
T.prototype.findLinksConnected=T.prototype.vG=function(a){a===f&&(a=n);if(a===n)return this.ad.l;u&&w.k(a,"string",T,"findLinksConnected:pid");var b=new Ja(this.ad),c=this;b.Pv=function(b){return b.ga===c&&b.Ai===a||b.la===c&&b.Mj===a};return b};T.prototype.findLinksOutOf=T.prototype.Pr=function(a){a===f&&(a=n);var b=new Ja(this.ad),c=this;b.Pv=function(b){return b.ga!==c?q:a===n?h:b.Ai===a};return b};
T.prototype.findLinksInto=T.prototype.zf=function(a){a===f&&(a=n);var b=new Ja(this.ad),c=this;b.Pv=function(b){return b.la!==c?q:a===n?h:b.Mj===a};return b};
T.prototype.findNodesConnected=T.prototype.JC=function(a){a===f&&(a=n);for(var b=n,c=n,d=this.ad.l;d.next();){var e=d.value;if(e.ga===this){if(a===n||e.Ai===a)e=e.la,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}else if(e.la===this&&(a===n||e.Mj===a))e=e.ga,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}return b!==n?b.l:c!==n?new Ia(c):w.Ff};
T.prototype.findNodesOutOf=T.prototype.LC=function(a){a===f&&(a=n);for(var b=n,c=n,d=this.ad.l;d.next();){var e=d.value;if(e.ga===this&&(a===n||e.Ai===a))e=e.la,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}return b!==n?b.l:c!==n?new Ia(c):w.Ff};
T.prototype.findNodesInto=T.prototype.KC=function(a){a===f&&(a=n);for(var b=n,c=n,d=this.ad.l;d.next();){var e=d.value;if(e.la===this&&(a===n||e.Mj===a))e=e.ga,b!==n?b.add(e):c!==n&&c!==e?(b=new ma(T),b.add(c),b.add(e)):c=e}return b!==n?b.l:c!==n?new Ia(c):w.Ff};w.g(T,"linkConnected",T.prototype.vD);w.defineProperty(T,{vD:"linkConnected"},t("aq"),function(a){var b=this.aq;b!==a&&(a!==n&&w.k(a,"function",T,"linkConnected"),this.aq=a,this.j("linkConnected",b,a))});w.g(T,"linkDisconnected",T.prototype.wD);
w.defineProperty(T,{wD:"linkDisconnected"},t("bq"),function(a){var b=this.bq;b!==a&&(a!==n&&w.k(a,"function",T,"linkDisconnected"),this.bq=a,this.j("linkDisconnected",b,a))});function Ul(a,b,c){if(!a.ad.contains(b)){a.ad.add(b);var d=a.vD;if(d!==n){var e=h,g=a.h;g!==n&&(e=g.Ma,g.Ma=h);d(a,b,c);g!==n&&(g.Ma=e)}a.Ej&&(c=h,g=a.h,g!==n&&(c=g.jd),c?b.ga===a&&(a.Ej=q):b.la===a&&(a.Ej=q))}}
function Vl(a,b,c){if(a.ad.remove(b)){var d=a.wD,e=a.h;if(d!==n){var g=h;e!==n&&(g=e.Ma,e.Ma=h);d(a,b,c);e!==n&&(e.Ma=g)}!a.Ej&&!(e!==n&&e.sa.tb)&&(b=a.ad.count,0===b?a.Ej=h:1===b&&Xi(a))}}function Xi(a){if(0!==a.ad.count){var b=h,c=a.h;c!==n&&(b=c.jd);for(c=a.ad.l;c.next();){var d=c.value;if(b){if(d.ga===a){a.Ej=q;return}}else if(d.la===a){a.Ej=q;return}}a.Ej=h}}T.prototype.as=function(){S.prototype.as.call(this);Xi(this);var a=this.Rm;a!==n&&Wl(a,this)};
T.prototype.bs=function(){S.prototype.bs.call(this);var a=this.Rm;a!==n&&a.De!==n&&(a.De.remove(this),a.R())};T.prototype.Rl=function(){if(0<this.ad.count){var a=this.h;if(a===n)return;for(var b=this.ad.copy().l;b.next();)a.remove(b.value)}S.prototype.Rl.call(this)};w.u(T,{Fi:"isLinkLabel"},function(){return this.Rm!==n});w.g(T,"labeledLink",T.prototype.yd);
w.defineProperty(T,{yd:"labeledLink"},t("Rm"),function(a){var b=this.Rm;if(b!==a){u&&a!==n&&w.i(a,U,T,"labeledLink");var c=this.h,d=this.data;if(b!==n&&(b.De!==n&&(b.De.remove(this),b.R()),c!==n&&d!==n)){var e=b.data,g=c.ba;if(e!==n&&g instanceof O){var i=g.lb(d);i!==f&&g.GH(e,i)}}this.Rm=a;a!==n&&(Wl(a,this),c!==n&&d!==n&&(e=a.data,g=c.ba,e!==n&&g instanceof O&&(i=g.lb(d),i!==f&&g.UB(e,i))));Bj(this);this.j("labeledLink",b,a)}});
T.prototype.findPort=T.prototype.Sr=function(a){u&&w.k(a,"string",T,"findPort:pid");this.bd===n&&Vj(this);if(this.bd!==n){var b=this.bd.qa(a);if(b!==n)return b}if(""!==a&&this.bd!==n&&(b=this.bd.qa(""),b!==n))return b;this.bd===n&&Vj(this);return this};w.u(T,{port:"port"},function(){return this.Sr("")});w.u(T,{ports:"ports"},function(){this.bd===n&&Vj(this);return this.bd!==n?this.bd.l:w.Ff});function Vj(a){a.bd!==n&&a.bd.clear();Tk(a,a,function(a,c){Wj(a,c)})}
function Wj(a,b){var c=b.Se;c!==n&&(a.bd===n&&(a.bd=new la("string",P)),a.bd.add(c,b))}function Uj(a,b,c){var d=b.Se;if(d!==n&&(a.bd!==n&&a.bd.remove(d),b=a.h,b!==n&&c)){c=n;for(a=a.vG(d);a.next();)c===n&&(c=[]),c.push(a.value);if(c!==n)for(a=0;a<c.length;a++)b.remove(c[a])}}
T.prototype.isInTreeOf=T.prototype.eL=function(a){if(a===n||a===this)return q;var b=h,c=this.h;c!==n&&(b=c.jd);if(b)a:{for(b=this;b!==a;){for(var c=n,d=b.zf();d.next()&&!(c=d.value.ga,c!==b););if(c===n){a=q;break a}b=c}a=h}else a:{for(b=this;b!==a;){c=n;for(d=b.Pr();d.next()&&!(c=d.value.la,c!==b););if(c===n){a=q;break a}b=c}a=h}return a};
T.prototype.findTreeParentLink=T.prototype.uv=function(){var a=h,b=this.h;b!==n&&(a=b.jd);b=this.ad.l;if(a)for(;b.next();){if(a=b.value,a.ga!==this)return a}else for(;b.next();)if(a=b.value,a.la!==this)return a;return n};T.prototype.findTreeParentNode=T.prototype.NC=function(){var a=h,b=this.h;b!==n&&(a=b.jd);b=this.ad.l;if(a)for(;b.next();){if(a=b.value,a=a.ga,a!==this)return a}else for(;b.next();)if(a=b.value,a=a.la,a!==this)return a;return n};
T.prototype.findTreeChildrenLinks=T.prototype.tv=function(){var a=h,b=this.h;b!==n&&(a=b.jd);return a?this.Pr():this.zf()};
T.prototype.findTreeChildrenNodes=T.prototype.yK=function(){var a=h,b=this.h;b!==n&&(a=b.jd);var c=b=n,d=this.ad.l;if(a)for(;d.next();)a=d.value,a.ga===this&&(a=a.la,b!==n?b.add(a):c!==n&&c!==a?(b=new z(T),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.la===this&&(a=a.ga,b!==n?b.add(a):c!==n&&c!==a?(b=new z(T),b.add(c),b.add(a)):c=a);return b!==n?b.l:c!==n?new Ia(c):w.Ff};T.prototype.findTreeParts=T.prototype.zK=function(){var a=new ma(S);nf(a,this,q,h);return a};
T.prototype.collapseTree=T.prototype.av=function(){var a=this.h;if(a!==n&&!a.$f){a.$f=h;var b=a.jd,c=new ma(T);c.add(this);Xl(this,c,b);a.$f=q}};function Xl(a,b,c){a.Oe=q;for(var d=c?a.Pr():a.zf();d.next();){var e=d.value,g=e.WC(a);g!==n&&(g!==a&&!b.contains(g))&&(b.add(g),uj(e),e.wh(),uj(g),g.wh(),sj(g),g.F(Rj),g.Oe&&(g.gw=g.Oe,Xl(g,b,c)))}}T.prototype.expandTree=T.prototype.pv=function(){var a=this.h;if(a!==n&&!a.$f){a.$f=h;var b=a.jd,c=new ma(T);c.add(this);Yl(this,c,b);a.$f=q}};
function Yl(a,b,c){a.Oe=h;for(var d=c?a.Pr():a.zf();d.next();){var e=d.value,g=e.WC(a);g!==n&&(g!==a&&!b.contains(g))&&(b.add(g),uj(e),e.Ki(),uj(g),g.Ki(),sj(g),g.F(Qj),g.gw&&(g.gw=q,Yl(g,b,c)))}}w.g(T,"isTreeExpanded",T.prototype.Oe);
w.defineProperty(T,{Oe:"isTreeExpanded"},t("Rp"),function(a){var b=this.Rp;if(b!==a){u&&w.k(a,"boolean",T,"isTreeExpanded");this.Rp=a;var c=this.h;c!==n&&Lh(c);this.j("isTreeExpanded",b,a);b=this.ME;if(b!==n){var d=h;c!==n&&(d=c.Ma,c.Ma=h);b(this);c!==n&&(c.Ma=d)}c!==n&&c.sa.tb||(a?this.pv():this.av())}});w.g(T,"wasTreeExpanded",T.prototype.gw);
w.defineProperty(T,{gw:"wasTreeExpanded"},t("vr"),function(a){var b=this.vr;b!==a&&(u&&w.k(a,"boolean",T,"wasTreeExpanded"),this.vr=a,this.j("wasTreeExpanded",b,a))});w.g(T,"treeExpandedChanged",T.prototype.ME);w.defineProperty(T,{ME:"treeExpandedChanged"},t("qr"),function(a){var b=this.qr;b!==a&&(a!==n&&w.k(a,"function",T,"treeExpandedChanged"),this.qr=a,this.j("treeExpandedChanged",b,a))});w.g(T,"isTreeLeaf",T.prototype.Ej);
w.defineProperty(T,{Ej:"isTreeLeaf"},t("Sp"),function(a){var b=this.Sp;b!==a&&(u&&w.k(a,"boolean",T,"isTreeLeaf"),this.Sp=a,this.j("isTreeLeaf",b,a))});
function U(){S.call(this,Sg);this.Hf=n;this.Yg="";this.zp=n;this.$g=Ib;this.Xg=NaN;this.Wg=Ql;this.Zg=NaN;this.Tf=n;this.sh="";this.pr=n;this.uh=Ib;this.rh=NaN;this.qh=Ql;this.th=NaN;this.Gq=this.Fq=q;this.Po=hj;this.$o=0;this.bp=hj;this.cp=NaN;this.dn=lk;this.cr=0.5;this.kh=this.De=n;this.Uc=(new z(F)).freeze();this.Gg=n;this.pi=q;this.Px=n;this.pn=q;this.hl=this.Rh=this.Ga=n;this.ye=0;this.Lh=new z(G);this.Ku=new F;this.HB=this.FB=n;this.Ow=q}w.P("Link",U);w.Da(U,S);
U.prototype.xb=function(a){S.prototype.xb.call(this,a);a.Yg=this.Yg;a.zp=this.zp;a.$g=this.$g.O();a.Xg=this.Xg;a.Wg=this.Wg;a.Zg=this.Zg;a.sh=this.sh;a.pr=this.pr;a.uh=this.uh.O();a.rh=this.rh;a.qh=this.qh;a.th=this.th;a.Fq=this.Fq;a.Gq=this.Gq;a.Po=this.Po;a.$o=this.$o;a.bp=this.bp;a.cp=this.cp;a.dn=this.dn;a.cr=this.cr};U.prototype.yh=function(a){S.prototype.yh.call(this,a);this.Yg=a.Yg;this.sh=a.sh;a.kh=n;a.Gg=n;a.Tb();a.hl=this.hl;a.ye=this.ye};var lk;U.Normal=lk=w.s(U,"Normal",1);var ek;
U.Orthogonal=ek=w.s(U,"Orthogonal",2);var Tf;U.AvoidsNodes=Tf=w.s(U,"AvoidsNodes",3);var hj;U.None=hj=w.s(U,"None",0);var fk;U.Bezier=fk=w.s(U,"Bezier",9);var gk;U.JumpGap=gk=w.s(U,"JumpGap",10);var hk;U.JumpOver=hk=w.s(U,"JumpOver",11);var ik;U.End=ik=w.s(U,"End",17);var jk;U.Scale=jk=w.s(U,"Scale",18);var kk;U.Stretch=kk=w.s(U,"Stretch",19);var fl;U.OrientAlong=fl=w.s(U,"OrientAlong",21);var Zl;U.OrientPlus90=Zl=w.s(U,"OrientPlus90",22);var $l;U.OrientMinus90=$l=w.s(U,"OrientMinus90",23);var am;
U.OrientOpposite=am=w.s(U,"OrientOpposite",24);var bm;U.OrientUpright=bm=w.s(U,"OrientUpright",25);var cm;U.OrientPlus90Upright=cm=w.s(U,"OrientPlus90Upright",26);var dm;U.OrientMinus90Upright=dm=w.s(U,"OrientMinus90Upright",27);var em;U.OrientUpright45=em=w.s(U,"OrientUpright45",28);U.prototype.Sk=function(){var a=this.ga;if(a!==n&&(a.Jc||a.Xi))return q;a=this.la;return a!==n&&(a.Jc||a.Xi)?q:h};U.prototype.be=ca(q);
function Sk(a,b){var c;switch(a){default:case hj:c=0;break;case fl:c=b;break;case Zl:c=b+90;break;case $l:c=b-90;break;case am:c=b+180;break;case bm:c=dd(b);90<c&&270>c&&(c-=180);break;case cm:c=dd(b+90);90<c&&270>c&&(c-=180);break;case dm:c=dd(b-90);90<c&&270>c&&(c-=180);break;case em:c=dd(b);if(45<c&&135>c||225<c&&315>c)return 0;90<c&&270>c&&(c-=180)}return dd(c)}w.g(U,"fromNode",U.prototype.ga);
w.defineProperty(U,{ga:"fromNode"},t("Hf"),function(a){var b=this.Hf;if(b!==a){u&&a!==n&&w.i(a,T,U,"fromNode");var c=this.Nc;b!==n&&(this.Tf!==b&&Vl(b,this,c),c!==n&&(c.Kd=n),fm(this),b.F(Pi));this.Hf=a;this.Rh=n;this.Tb();var d=this.h;if(d!==n){var e=this.data,g=d.ba;if(e!==n)if(g instanceof O){var i=a!==n?a.data:n;g.Yv(e,g.lb(i))}else g instanceof De&&(i=a!==n?a.data:n,d.jd?g.Cf(e,g.lb(i)):(b!==n&&g.Cf(b.data,f),g.Cf(i,g.lb(this.Tf!==n?this.Tf.data:n))))}e=this.Nc;g=this.cz;g!==n&&(i=h,d!==n&&(i=
d.Ma,d.Ma=h),g(this,c,e),d!==n&&(d.Ma=i));a!==n&&(this.Tf!==a&&Ul(a,this,e),e!==n&&(e.Kd=n),gm(this),a.F(Ki));this.j("fromNode",b,a);Si(this)}});w.g(U,"fromPortId",U.prototype.Ai);
w.defineProperty(U,{Ai:"fromPortId"},t("Yg"),function(a){var b=this.Yg;if(b!==a){u&&w.k(a,"string",U,"fromPortId");var c=this.Nc;c!==n&&(c.Kd=n);fm(this);this.Yg=a;var d=this.Nc;d!==n&&(d.Kd=n);var e=this.h;if(e!==n){var g=this.data,i=e.ba;g!==n&&i instanceof O&&i.Bs(g,a)}c!==d&&(this.Rh=n,this.Tb(),g=this.cz,g!==n&&(i=h,e!==n&&(i=e.Ma,e.Ma=h),g(this,c,d),e!==n&&(e.Ma=i)));gm(this);this.j("fromPortId",b,a)}});w.u(U,{Nc:"fromPort"},function(){var a=this.Hf;return a===n?n:a.Sr(this.Yg)});
w.g(U,"fromPortChanged",U.prototype.cz);w.defineProperty(U,{cz:"fromPortChanged"},t("zp"),function(a){var b=this.zp;b!==a&&(a!==n&&w.k(a,"function",U,"fromPortChanged"),this.zp=a,this.j("fromPortChanged",b,a))});w.g(U,"toNode",U.prototype.la);
w.defineProperty(U,{la:"toNode"},t("Tf"),function(a){var b=this.Tf;if(b!==a){u&&a!==n&&w.i(a,T,U,"toNode");var c=this.Bd;b!==n&&(this.Hf!==b&&Vl(b,this,c),c!==n&&(c.Kd=n),fm(this),b.F(Pi));this.Tf=a;this.Rh=n;this.Tb();var d=this.h;if(d!==n){var e=this.data,g=d.ba;if(e!==n)if(g instanceof O){var i=a!==n?a.data:n;g.Zv(e,g.lb(i))}else g instanceof De&&(i=a!==n?a.data:n,d.jd?(b!==n&&g.Cf(b.data,f),g.Cf(i,g.lb(this.Hf!==n?this.Hf.data:n))):g.Cf(e,g.lb(i)))}e=this.Bd;g=this.$z;g!==n&&(i=h,d!==n&&(i=d.Ma,
d.Ma=h),g(this,c,e),d!==n&&(d.Ma=i));a!==n&&(this.Hf!==a&&Ul(a,this,e),e!==n&&(e.Kd=n),gm(this),a.F(Ki));this.j("toNode",b,a);Si(this)}});w.g(U,"toPortId",U.prototype.Mj);
w.defineProperty(U,{Mj:"toPortId"},t("sh"),function(a){var b=this.sh;if(b!==a){u&&w.k(a,"string",U,"toPortId");var c=this.Bd;c!==n&&(c.Kd=n);fm(this);this.sh=a;var d=this.Bd;d!==n&&(d.Kd=n);var e=this.h;if(e!==n){var g=this.data,i=e.ba;g!==n&&i instanceof O&&i.Cs(g,a)}c!==d&&(this.Rh=n,this.Tb(),g=this.$z,g!==n&&(i=h,e!==n&&(i=e.Ma,e.Ma=h),g(this,c,d),e!==n&&(e.Ma=i)));gm(this);this.j("toPortId",b,a)}});w.u(U,{Bd:"toPort"},function(){var a=this.Tf;return a===n?n:a.Sr(this.sh)});
w.g(U,"toPortChanged",U.prototype.$z);w.defineProperty(U,{$z:"toPortChanged"},t("pr"),function(a){var b=this.pr;b!==a&&(a!==n&&w.k(a,"function",U,"toPortChanged"),this.pr=a,this.j("toPortChanged",b,a))});w.g(U,"fromSpot",U.prototype.kb);w.defineProperty(U,{kb:"fromSpot"},t("$g"),function(a){var b=this.$g;b.I(a)||(u&&w.i(a,H,U,"fromSpot"),this.$g=a=a.O(),this.j("fromSpot",b,a),this.Tb())});w.g(U,"fromEndSegmentLength",U.prototype.Ok);
w.defineProperty(U,{Ok:"fromEndSegmentLength"},t("Xg"),function(a){var b=this.Xg;b!==a&&(u&&w.k(a,"number",U,"fromEndSegmentLength"),0>a&&w.ra(a,">= 0",U,"fromEndSegmentLength"),this.Xg=a,this.j("fromEndSegmentLength",b,a),this.Tb())});w.g(U,"fromEndSegmentDirection",U.prototype.Vr);w.defineProperty(U,{Vr:"fromEndSegmentDirection"},t("Wg"),function(a){var b=this.Wg;b!==a&&(u&&w.jb(a,T,U,"fromEndSegmentDirection"),this.Wg=a,this.j("fromEndSegmentDirection",b,a),this.Tb())});
w.g(U,"fromShortLength",U.prototype.Wr);w.defineProperty(U,{Wr:"fromShortLength"},t("Zg"),function(a){var b=this.Zg;b!==a&&(u&&w.k(a,"number",U,"fromShortLength"),this.Zg=a,this.j("fromShortLength",b,a),this.Tb())});w.g(U,"toSpot",U.prototype.ob);w.defineProperty(U,{ob:"toSpot"},t("uh"),function(a){var b=this.uh;b.I(a)||(u&&w.i(a,H,U,"toSpot"),this.uh=a=a.O(),this.j("toSpot",b,a),this.Tb())});w.g(U,"toEndSegmentLength",U.prototype.al);
w.defineProperty(U,{al:"toEndSegmentLength"},t("rh"),function(a){var b=this.rh;b!==a&&(u&&w.k(a,"number",U,"toEndSegmentLength"),0>a&&w.ra(a,">= 0",U,"toEndSegmentLength"),this.rh=a,this.j("toEndSegmentLength",b,a),this.Tb())});w.g(U,"toEndSegmentDirection",U.prototype.Hs);w.defineProperty(U,{Hs:"toEndSegmentDirection"},t("qh"),function(a){var b=this.qh;b!==a&&(u&&w.jb(a,T,U,"toEndSegmentDirection"),this.qh=a,this.j("toEndSegmentDirection",b,a),this.Tb())});w.g(U,"toShortLength",U.prototype.Is);
w.defineProperty(U,{Is:"toShortLength"},t("th"),function(a){var b=this.th;b!==a&&(u&&w.k(a,"number",U,"toShortLength"),this.th=a,this.j("toShortLength",b,a),this.Tb())});function Si(a){var b=a.ga,c=a.la;b!==n&&c!==n?hm(a,b.uG(c)):hm(a,n)}function hm(a,b){var c=a.dk;if(c!==b){c!==n&&Ll(c,a);a.dk=b;b!==n&&Ml(b,a);var d=a.Ry;if(d!==n){var e=h,g=a.h;g!==n&&(e=g.Ma,g.Ma=h);d(a,c,b);g!==n&&(g.Ma=e)}a.pi&&(a.FB===c||a.HB===c)&&a.Tb()}}
U.prototype.getOtherNode=U.prototype.WC=function(a){u&&w.i(a,T,U,"getOtherNode:node");var b=this.ga;return a===b?this.la:b};U.prototype.getOtherPort=U.prototype.IK=function(a){u&&w.i(a,P,U,"getOtherPort:port");var b=this.Nc;return a===b?this.Bd:b};w.u(U,{fL:"isLabeledLink"},function(){return this.De===n?q:0<this.De.count});w.u(U,{Fj:"labelNodes"},function(){return this.De===n?w.Ff:this.De.l});function Wl(a,b){a.De===n&&(a.De=new ma(T));a.De.add(b);a.R()}
U.prototype.as=function(){S.prototype.as.call(this);im(this)&&Tg(this,this.va);var a=this.Hf,b=this.Tf;if(a!==n){var c=this.Nc;c!==n&&(c.Kd=n);Ul(a,this,c);gm(this)}b!==n&&(c=this.Bd,c!==n&&(c.Kd=n),Ul(b,this,c),gm(this))};U.prototype.bs=function(){S.prototype.bs.call(this);im(this)&&Tg(this,this.va);var a=this.Hf,b=this.Tf;if(a!==n){var c=this.Nc;c!==n&&(c.Kd=n);Vl(a,this,c);fm(this)}b!==n&&(c=this.Bd,c!==n&&(c.Kd=n),Vl(b,this,c),fm(this))};
U.prototype.Rl=function(){if(this.De!==n){var a=this.h;if(a===n)return;for(var b=this.De.copy().l;b.next();)a.remove(b.value)}b=this.data;b!==n&&(a=this.h,a!==n&&(a=a.ba,a instanceof O?a.HH(b):a instanceof De&&a.Cf(b,f)))};U.prototype.move=U.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;S.prototype.move.call(this,a);this.Uk(c,b);for(a=this.Fj;a.next();){var d=a.value,e=d.position;d.move(new F(e.x+c,e.y+b))}};w.g(U,"relinkableFrom",U.prototype.VD);
w.defineProperty(U,{VD:"relinkableFrom"},t("Fq"),function(a){var b=this.Fq;b!==a&&(u&&w.k(a,"boolean",U,"relinkableFrom"),this.Fq=a,this.j("relinkableFrom",b,a))});w.g(U,"relinkableTo",U.prototype.WD);w.defineProperty(U,{WD:"relinkableTo"},t("Gq"),function(a){var b=this.Gq;b!==a&&(u&&w.k(a,"boolean",U,"relinkableTo"),this.Gq=a,this.j("relinkableTo",b,a))});U.prototype.canRelinkFrom=U.prototype.ZI=function(){if(!this.VD)return q;var a=this.Ja;if(a!==n&&!a.rj)return q;a=a.h;return a!==n&&!a.rj?q:h};
U.prototype.canRelinkTo=U.prototype.$I=function(){if(!this.WD)return q;var a=this.Ja;if(a!==n&&!a.rj)return q;a=a.h;return a!==n&&!a.rj?q:h};w.u(U,{path:"path"},function(){var a=this.kh;if(a!==n)return a;a=this.Fa;a=Jj(this,a,a.length);return a instanceof V?this.kh=a:n});U.prototype.Bp=t("path");U.prototype.ix=t("Uc");U.prototype.Th=function(){this.updateRoute();var a=this.oe();return this.Px=a};
U.prototype.oe=function(){var a=Infinity,b=Infinity,c=this.ja,d;if(0===c)return new G(NaN,NaN,0,0);if(1===c)c=this.p(0),a=Math.min(c.x,a),b=Math.min(c.y,b),d=new G(c.x,c.y,0,0);else if(2===c){d=this.p(0);var e=this.p(1),a=Math.min(d.x,e.x),b=Math.min(d.y,e.y);d=new G(d,e)}else if(this.fv()===fk&&3<=c&&!this.fc)if(e=this.p(0),a=e.x,b=e.y,d=new G(a,b,0,0),3===c){var c=this.p(1),a=Math.min(c.x,a),b=Math.min(c.y,b),g=this.p(2),a=Math.min(g.x,a),b=Math.min(g.y,b);wc(e.x,e.y,c.x,c.y,c.x,c.y,g.x,g.y,0.5,
d)}else for(var i,j,k=3;k<c;k+=3)i=this.p(k-2),k+3>=c&&(k=c-1),j=this.p(k-1),g=this.p(k),wc(e.x,e.y,i.x,i.y,j.x,j.y,g.x,g.y,0.5,d),a=Math.min(g.x,a),b=Math.min(g.y,b),e=g;else{d=this.p(0);e=this.p(1);a=Math.min(d.x,e.x);b=Math.min(d.y,e.y);d=new G(d,e);for(k=2;k<c;k++)e=this.p(k),a=Math.min(e.x,a),b=Math.min(e.y,b),d.dw(e)}this.Ku.V(a-d.x,b-d.y);return d};w.u(U,{FD:"midPoint"},function(){this.updateRoute();return jm(this)});
function jm(a){var b=a.ja;if(0===b)return qc;if(1===b)return a.p(0);if(2===b){var c=a.p(0),d=a.p(1);return new F((c.x+d.x)/2,(c.y+d.y)/2)}if(a.fv()===fk&&3<=b&&!a.fc){if(3===b)return a.p(1);var c=(b-1)/3|0,e=3*(c/2|0);if(1===c%2){var c=a.p(e),d=a.p(e+1),g=a.p(e+2),a=a.p(e+3),e=new F,b=d.x,i=d.y,d=g.x,j=g.y,g=(b+d)/2,k=(i+j)/2,i=((c.y+i)/2+k)/2,j=(k+(j+a.y)/2)/2;e.x=(((c.x+b)/2+g)/2+(g+(d+a.x)/2)/2)/2;e.y=(i+j)/2;return e}return a.p(e)}e=0;g=[];for(i=0;i<b-1;i++)c=a.p(i),d=a.p(i+1),Ta(c.x,d.x)?(c=
d.y-c.y,0>c&&(c=-c)):Ta(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Sl(d)),g.push(c),e+=c;for(d=i=c=0;c<e/2&&i<b;){d=g[i];if(c+d>e/2)break;c+=d;i++}b=a.p(i);a=a.p(i+1);if(b.x===a.x)return b.y>a.y?new F(b.x,b.y-(e/2-c)):new F(b.x,b.y+(e/2-c));if(b.y===a.y)return b.x>a.x?new F(b.x-(e/2-c),b.y):new F(b.x+(e/2-c),b.y);c=(e/2-c)/d;return new F(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))}w.u(U,{ED:"midAngle"},function(){this.updateRoute();return km(this)});
function km(a){var b=a.ja;if(2>b)return NaN;if(a.fv()===fk&&4<=b&&!a.fc){var c=(b-1)/3|0,d=3*(c/2|0);if(1===c%2){var d=Math.floor(d),b=a.p(d),e=a.p(d+1),c=a.p(d+2),a=a.p(d+3),d=e.x,e=e.y,g=c.x,c=c.y,i=(d+g)/2,j=(e+c)/2;return ab(((b.x+d)/2+i)/2,((b.y+e)/2+j)/2,(i+(g+a.x)/2)/2,(j+(c+a.y)/2)/2)}if(0<d&&d+1<b)return b=a.p(d-1),e=a.p(d+1),b.vi(e)}c=b/2|0;if(0===b%2)return b=a.p(c-1),e=a.p(c),b.vi(e);b=a.p(c-1);e=a.p(c);c=a.p(c+1);a=b.Sl(e);d=e.Sl(c);return a>d?b.vi(e):e.vi(c)}w.g(U,"points",U.prototype.points);
w.defineProperty(U,{points:"points"},t("Uc"),function(a){u&&w.i(a,z,U,"points");var b=this.Uc;if(b!==a&&a!==n){for(var c=a.l;c.next();){var d=c.value;d.freeze()}a.freeze();this.Uc=a.copy();this.Zf();lm(this);for(var c=a.count,e=new z,g=0;g<c;g++)d=a.n[g],e.add(d.copy());this.j("points",b,e)}});w.u(U,{ja:"pointsCount"},function(){return this.Uc.count});U.prototype.getPoint=U.prototype.p=function(a){return this.Uc.n[a]};
U.prototype.setPoint=U.prototype.J=function(a,b){u&&(w.i(b,F,U,"setPoint"),b.T()||w.m("Link.setPoint called with a Point that does not have real numbers: "+b.toString()));this.Gg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Uc.Xv(a,b)};
U.prototype.insertPoint=U.prototype.A=function(a,b){u&&(w.i(b,F,U,"insertPoint"),b.T()||w.m("Link.insertPoint called with a Point that does not have real numbers: "+b.toString()));this.Gg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Uc.yc(a,b)};
U.prototype.addPoint=U.prototype.ud=function(a){u&&(w.i(a,F,U,"addPoint"),a.T()||w.m("Link.addPoint called with a Point that does not have real numbers: "+a.toString()));this.Gg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Uc.add(a)};U.prototype.removePoint=U.prototype.aE=function(a){this.Gg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Uc.Te(a)};
U.prototype.clearPoints=U.prototype.Mn=function(){this.Gg===n&&w.m("Call Link.startRoute before modifying the points of the route.");this.Uc.clear()};U.prototype.movePoints=U.prototype.Uk=function(a,b){for(var c=new z(F),d=this.Uc.l;d.next();){var e=d.value;c.add(new F(e.x+a,e.y+b))}this.points=c};U.prototype.startRoute=U.prototype.$k=function(){if(this.Gg===n){for(var a=new z(F),b=this.Uc.l;b.next();)a.add(b.value.O());this.Gg=a;this.Uc.Ia()}};
U.prototype.commitRoute=U.prototype.ti=function(){if(this.Gg!==n){for(var a=this.Gg,b=Infinity,c=Infinity,d=a.count,e=0;e<d;e++)var g=a.n[e],b=Math.min(g.x,b),c=Math.min(g.y,c);for(var i=Infinity,j=Infinity,k=this.Uc,l=k.count,e=0;e<l;e++)g=k.n[e],i=Math.min(g.x,i),j=Math.min(g.y,j);if(l===d)for(e=0;e<l;e++)if(g=a.n[e],d=k.n[e],g.x-b!==d.x-i||g.y-c!==d.y-j){this.Zf();break}this.Gg=n;this.Uc.freeze();lm(this);b=new z(F);for(e=0;e<l;e++)g=k.n[e],b.add(g.copy());this.j("points",a,b)}};
U.prototype.rollbackRoute=U.prototype.LH=function(){this.Gg=n};function lm(a){0===a.Uc.count?a.pi=q:(a.pi=h,mm(a,q))}U.prototype.invalidateRoute=U.prototype.Tb=function(){if(!this.pn&&(!this.h||!this.h.sa.tb)&&this.nb()){this.pi=q;this.Zf();var a=this.Bp();a!==n&&a.R()}};U.prototype.updateRoute=U.prototype.cA=function(){if(!this.pi&&!this.Ow){var a=h;try{this.Ow=h,this.$k(),a=this.computePoints()}finally{this.Ow=q,a?this.ti():this.LH()}}};
U.prototype.computePoints=U.prototype.tJ=function(){var a=this.ga,b=n,b=a===n?n:this.Nc;if(b!==n){var c=Xj(b);if(c===a||!a.nb()){var d=Hl(a);d!==n&&d!==a?(a=d,b=d.Sr("")):a=d}else b=c}this.FB=a;if(a===n||b===n||!a.location.T())return q;var e=this.la,g=n,g=e===n?n:this.Bd;if(g!==n){var i=Xj(g);if(i===e||!e.nb()){var j=Hl(e);j!==n&&j!==e?(e=j,g=j.Sr("")):e=j}else g=i}this.HB=e;if(e===n||g===n||!e.location.T())return q;var k=this.ja,l=nm(this,b),m=om(this,g),p=b===g,r=this.fc,s=this.wf===fk;this.Rh=
p&&!r?s=h:q;var v=this.Tu===hj||p;if(!r&&l===Fb&&m===Fb&&!p){var y=q;if(!v&&3<=k)var C=this.getLinkPoint(a,b,Fb,h,q,e,g),E=this.getLinkPoint(e,g,Fb,q,q,a,b),y=pm(this,0,C,k-1,E);if(!y)if(this.Mn(),s){var I=a,D=b,M=e,N=g,Z=this.getLinkPoint(I,D,Fb,h,q,M,N),va=this.getLinkPoint(M,N,Fb,q,q,I,D),ka=va.x-Z.x,ta=va.y-Z.y,Da=this.computeCurviness(),Ha=0,cb=0,rb=Z.x+ka/3,Xa=Z.y+ta/3,Na=rb,gb=Xa;Ua(ta,0)?gb=0<ka?gb-Da:gb+Da:(Ha=-ka/ta,cb=Math.sqrt(Da*Da/(Ha*Ha+1)),0>Da&&(cb=-cb),Na=(0>ta?-1:1)*cb+rb,gb=Ha*
(Na-rb)+Xa);var rb=Z.x+2*ka/3,Xa=Z.y+2*ta/3,Ya=rb,nb=Xa;Ua(ta,0)?nb=0<ka?nb-Da:nb+Da:(Ya=(0>ta?-1:1)*cb+rb,nb=Ha*(Ya-rb)+Xa);this.Mn();this.ud(Z);this.ud(new F(Na,gb));this.ud(new F(Ya,nb));this.ud(va);this.J(0,this.getLinkPoint(I,D,Fb,h,q,M,N));this.J(3,this.getLinkPoint(M,N,Fb,q,q,I,D))}else{var ud=a,me=b,Kd=e,Ub=g,Ec=this.getLinkPoint(ud,me,Fb,h,q,Kd,Ub),Zd=this.getLinkPoint(Kd,Ub,Fb,q,q,ud,me);if(this.hasCurviness()){var oe=Zd.x-Ec.x,Uf=Zd.y-Ec.y,Vc=this.computeCurviness(),wd=Ec.x+oe/2,cc=Ec.y+
Uf/2,Vf=wd,Mc=cc;if(Ua(Uf,0))Mc=0<oe?Mc-Vc:Mc+Vc;else{var Oe=-oe/Uf,pf=Math.sqrt(Vc*Vc/(Oe*Oe+1));0>Vc&&(pf=-pf);Vf=(0>Uf?-1:1)*pf+wd;Mc=Oe*(Vf-wd)+cc}this.ud(Ec);this.ud(new F(Vf,Mc))}else this.ud(Ec);this.ud(Zd)}}else{var qf=this.Dh===Tf;v&&(r&&qf||p)&&this.Mn();var Wc=this.computeCurviness(),Nc=this.getLinkPoint(a,b,l,h,r,e,g),Pe=0,ae=0,Mb=0;if(r||l!==Fb||p){var be=this.getEndSegmentLength(a,b,l,h),Mb=this.getLinkDirection(a,b,Nc,l,h,r,e,g);p&&(Mb-=r?90:30,0>Wc&&(Mb-=180));0>Mb?Mb+=360:360<=Mb&&
(Mb-=360);p&&(be+=Math.abs(Wc));0===Mb?Pe=be:90===Mb?ae=be:180===Mb?Pe=-be:270===Mb?ae=-be:(Pe=be*Math.cos(Mb*Math.PI/180),ae=be*Math.sin(Mb*Math.PI/180));if(yb(l)&&p)var pe=b.Ab(Ob),Nc=this.getLinkPointFromPoint(a,b,pe,new F(pe.x+1E3*Pe,pe.y+1E3*ae),h)}var lc=this.getLinkPoint(e,g,m,q,r,a,b),wb=0,Xc=0,Nb=0;if(r||m!==Fb||p){var Od=this.getEndSegmentLength(e,g,m,q),Nb=this.getLinkDirection(e,g,lc,m,q,r,a,b);p&&(Nb+=r?0:30,0>Wc&&(Nb+=180));0>Nb?Nb+=360:360<=Nb&&(Nb-=360);p&&(Od+=Math.abs(Wc));0===Nb?
wb=Od:90===Nb?Xc=Od:180===Nb?wb=-Od:270===Nb?Xc=-Od:(wb=Od*Math.cos(Nb*Math.PI/180),Xc=Od*Math.sin(Nb*Math.PI/180));yb(m)&&p&&(pe=g.Ab(Ob),lc=this.getLinkPointFromPoint(e,g,pe,new F(pe.x+1E3*wb,pe.y+1E3*Xc),q))}var qe=Nc;if(r||l!==Fb||p)qe=new F(Nc.x+Pe,Nc.y+ae);var Bb=lc;if(r||m!==Fb||p)Bb=new F(lc.x+wb,lc.y+Xc);if(v||r||!yb(l)||!(3<k&&pm(this,0,Nc,k-2,Bb)))if(!v&&!r&&yb(m)&&3<k&&pm(this,1,qe,k-1,lc))this.J(0,Nc);else if(!v&&!r&&4<k&&pm(this,1,qe,k-2,Bb))this.J(0,Nc),this.J(k-1,lc);else if(!v&&r&&
6<=k&&!qf&&pm(this,1,qe,k-2,Bb))this.J(0,Nc),this.J(k-1,lc);else{this.Mn();this.ud(Nc);(r||l!==Fb||p)&&this.ud(qe);if(r){var R=qe,Vb=Mb,Q=Bb,ha=Nb,zb=a,Db=e,Vb=-45<=Vb&&45>Vb?0:45<=Vb&&135>Vb?90:135<=Vb&&225>Vb?180:270,ha=-45<=ha&&45>ha?0:45<=ha&&135>ha?90:135<=ha&&225>ha?180:270,Fa=zb.va.copy(),oa=Db.va.copy();if(Fa.T()&&oa.T()){Fa.Ng(8,8);oa.Ng(8,8);Fa.dw(R);oa.dw(Q);var za,Pa;if(0===Vb)if(Q.x>R.x||270===ha&&Q.y<R.y&&oa.right>R.x||90===ha&&Q.y>R.y&&oa.right>R.x)za=new F(Q.x,R.y),Pa=new F(Q.x,(R.y+
Q.y)/2),180===ha?(za.x=qm(this,R.x,Q.x),Pa.x=za.x,Pa.y=Q.y):270===ha&&Q.y<R.y||90===ha&&Q.y>R.y?(za.x=R.x<oa.left?qm(this,R.x,oa.left):R.x<oa.right&&(270===ha&&R.y<oa.top||90===ha&&R.y>oa.bottom)?qm(this,R.x,Q.x):oa.right,Pa.x=za.x,Pa.y=Q.y):0===ha&&(R.x<oa.left&&R.y>oa.top&&R.y<oa.bottom)&&(za.x=R.x,za.y=R.y<Q.y?Math.min(Q.y,oa.top):Math.max(Q.y,oa.bottom),Pa.y=za.y);else{za=new F(R.x,Q.y);Pa=new F((R.x+Q.x)/2,Q.y);if(180===ha||90===ha&&Q.y<Fa.top||270===ha&&Q.y>Fa.bottom){if(180===ha&&(oa.ua(R)||
Fa.ua(Q)))za.y=qm(this,R.y,Q.y);else if(Q.y<R.y&&(180===ha||90===ha))za.y=qm(this,Fa.top,Math.max(Q.y,oa.bottom));else if(Q.y>R.y&&(180===ha||270===ha))za.y=qm(this,Fa.bottom,Math.min(Q.y,oa.top));Pa.x=Q.x;Pa.y=za.y}if(za.y>Fa.top&&za.y<Fa.bottom)if(Q.x>=Fa.left&&Q.x<=R.x||R.x<=oa.right&&R.x>=Q.x){if(90===ha||270===ha)za=new F(Math.max((R.x+Q.x)/2,R.x),R.y),Pa=new F(za.x,Q.y)}else za.y=270===ha||(0===ha||180===ha)&&Q.y<R.y?Math.min(Q.y,0===ha?Fa.top:Math.min(Fa.top,oa.top)):Math.max(Q.y,0===ha?Fa.bottom:
Math.max(Fa.bottom,oa.bottom)),Pa.x=Q.x,Pa.y=za.y}else if(180===Vb)if(Q.x<R.x||270===ha&&Q.y<R.y&&oa.left<R.x||90===ha&&Q.y>R.y&&oa.left<R.x)za=new F(Q.x,R.y),Pa=new F(Q.x,(R.y+Q.y)/2),0===ha?(za.x=qm(this,R.x,Q.x),Pa.x=za.x,Pa.y=Q.y):270===ha&&Q.y<R.y||90===ha&&Q.y>R.y?(za.x=R.x>oa.right?qm(this,R.x,oa.right):R.x>oa.left&&(270===ha&&R.y<oa.top||90===ha&&R.y>oa.bottom)?qm(this,R.x,Q.x):oa.left,Pa.x=za.x,Pa.y=Q.y):180===ha&&(R.x>oa.right&&R.y>oa.top&&R.y<oa.bottom)&&(za.x=R.x,za.y=R.y<Q.y?Math.min(Q.y,
oa.top):Math.max(Q.y,oa.bottom),Pa.y=za.y);else{za=new F(R.x,Q.y);Pa=new F((R.x+Q.x)/2,Q.y);if(0===ha||90===ha&&Q.y<Fa.top||270===ha&&Q.y>Fa.bottom){if(0===ha&&(oa.ua(R)||Fa.ua(Q)))za.y=qm(this,R.y,Q.y);else if(Q.y<R.y&&(0===ha||90===ha))za.y=qm(this,Fa.top,Math.max(Q.y,oa.bottom));else if(Q.y>R.y&&(0===ha||270===ha))za.y=qm(this,Fa.bottom,Math.min(Q.y,oa.top));Pa.x=Q.x;Pa.y=za.y}if(za.y>Fa.top&&za.y<Fa.bottom)if(Q.x<=Fa.right&&Q.x>=R.x||R.x>=oa.left&&R.x<=Q.x){if(90===ha||270===ha)za=new F(Math.min((R.x+
Q.x)/2,R.x),R.y),Pa=new F(za.x,Q.y)}else za.y=270===ha||(0===ha||180===ha)&&Q.y<R.y?Math.min(Q.y,180===ha?Fa.top:Math.min(Fa.top,oa.top)):Math.max(Q.y,180===ha?Fa.bottom:Math.max(Fa.bottom,oa.bottom)),Pa.x=Q.x,Pa.y=za.y}else if(90===Vb)if(Q.y>R.y||180===ha&&Q.x<R.x&&oa.bottom>R.y||0===ha&&Q.x>R.x&&oa.bottom>R.y)za=new F(R.x,Q.y),Pa=new F((R.x+Q.x)/2,Q.y),270===ha?(za.y=qm(this,R.y,Q.y),Pa.x=Q.x,Pa.y=za.y):180===ha&&Q.x<R.x||0===ha&&Q.x>R.x?(za.y=R.y<oa.top?qm(this,R.y,oa.top):R.y<oa.bottom&&(180===
ha&&R.x<oa.left||0===ha&&R.x>oa.right)?qm(this,R.y,Q.y):oa.bottom,Pa.x=Q.x,Pa.y=za.y):90===ha&&(R.y<oa.top&&R.x>oa.left&&R.x<oa.right)&&(za.x=R.x<Q.x?Math.min(Q.x,oa.left):Math.max(Q.x,oa.right),za.y=R.y,Pa.x=za.x);else{za=new F(Q.x,R.y);Pa=new F(Q.x,(R.y+Q.y)/2);if(270===ha||0===ha&&Q.x<Fa.left||180===ha&&Q.x>Fa.right){if(270===ha&&(oa.ua(R)||Fa.ua(Q)))za.x=qm(this,R.x,Q.x);else if(Q.x<R.x&&(270===ha||0===ha))za.x=qm(this,Fa.left,Math.max(Q.x,oa.right));else if(Q.x>R.x&&(270===ha||180===ha))za.x=
qm(this,Fa.right,Math.min(Q.x,oa.left));Pa.x=za.x;Pa.y=Q.y}if(za.x>Fa.left&&za.x<Fa.right)if(Q.y>=Fa.top&&Q.y<=R.y||R.y<=oa.bottom&&R.y>=Q.y){if(0===ha||180===ha)za=new F(R.x,Math.max((R.y+Q.y)/2,R.y)),Pa=new F(Q.x,za.y)}else za.x=180===ha||(90===ha||270===ha)&&Q.x<R.x?Math.min(Q.x,90===ha?Fa.left:Math.min(Fa.left,oa.left)):Math.max(Q.x,90===ha?Fa.right:Math.max(Fa.right,oa.right)),Pa.x=za.x,Pa.y=Q.y}else if(Q.y<R.y||180===ha&&Q.x<R.x&&oa.top<R.y||0===ha&&Q.x>R.x&&oa.top<R.y)za=new F(R.x,Q.y),Pa=
new F((R.x+Q.x)/2,Q.y),90===ha?(za.y=qm(this,R.y,Q.y),Pa.x=Q.x,Pa.y=za.y):180===ha&&Q.x<R.x||0===ha&&Q.x>=R.x?(za.y=R.y>oa.bottom?qm(this,R.y,oa.bottom):R.y>oa.top&&(180===ha&&R.x<oa.left||0===ha&&R.x>oa.right)?qm(this,R.y,Q.y):oa.top,Pa.x=Q.x,Pa.y=za.y):270===ha&&(R.y>oa.bottom&&R.x>oa.left&&R.x<oa.right)&&(za.x=R.x<Q.x?Math.min(Q.x,oa.left):Math.max(Q.x,oa.right),za.y=R.y,Pa.x=za.x);else{za=new F(Q.x,R.y);Pa=new F(Q.x,(R.y+Q.y)/2);if(90===ha||0===ha&&Q.x<Fa.left||180===ha&&Q.x>Fa.right){if(90===
ha&&(oa.ua(R)||Fa.ua(Q)))za.x=qm(this,R.x,Q.x);else if(Q.x<R.x&&(90===ha||0===ha))za.x=qm(this,Fa.left,Math.max(Q.x,oa.right));else if(Q.x>R.x&&(90===ha||180===ha))za.x=qm(this,Fa.right,Math.min(Q.x,oa.left));Pa.x=za.x;Pa.y=Q.y}if(za.x>Fa.left&&za.x<Fa.right)if(Q.y<=Fa.bottom&&Q.y>=R.y||R.y>=oa.top&&R.y<=Q.y){if(0===ha||180===ha)za=new F(R.x,Math.min((R.y+Q.y)/2,R.y)),Pa=new F(Q.x,za.y)}else za.x=180===ha||(90===ha||270===ha)&&Q.x<R.x?Math.min(Q.x,270===ha?Fa.left:Math.min(Fa.left,oa.left)):Math.max(Q.x,
270===ha?Fa.right:Math.max(Fa.right,oa.right)),Pa.x=za.x,Pa.y=Q.y}var Yc;var xc=Vb,ld=za,xb=Pa,Zc=ha;if(this.Dh!==Tf)Yc=q;else{var Gb=this.h;if(Gb===n||Fa.ua(Q)||oa.ua(R)||zb===Db||this.Ja.zc)Yc=q;else{var eb;Gb.td===n&&(Gb.td=new rm);var yc=this!==n?this.bb:n;if(Gb.td.cs||Gb.td.group!==yc){if(yc===n){var Qe,re;if(Gb.Uh)if(Gb.Ur.T()){var xd=Gb.Ur.copy();xd.zr(Gb.padding);re=xd}else{for(var rf,Wf=h,mg=Gb.hb,se=mg.length,Pd=0;Pd<se;Pd++){var te=mg.n[Pd];if(te.visible&&!te.zc)for(var yd=te.Nb,Re=yd.length,
Wb=0;Wb<Re;Wb++){var Oc=yd.n[Wb];if(Oc.Cv&&Oc.nb()){var ue=Oc.va;ue.T()&&(Wf?(Wf=q,rf=ue.copy()):rf.Ii(ue))}}}Wf&&(rf=new G(0,0,0,0));rf.zr(Gb.padding);re=rf}else re=Gb.wc.copy();Qe=re;Qe.Ng(100,100);Gb.td.initialize(Qe);for(var $c=Gb.Xk;$c.next();){var Se=$c.value,ve=Se.Ja;ve===n||(!ve.visible||ve.zc)||Zi(Gb,Se,n)}}else{var Qd=yc.va.copy();Qd.Ng(20,20);Gb.td.initialize(Qd);for(var Rd=yc.Gc;Rd.next();){var we=Rd.value;we instanceof T&&Zi(Gb,we,n)}}Gb.td.group=yc;Gb.td.cs=q}else sm(Gb.td);eb=Gb.td;
if(tm(eb,Math.min(R.x,ld.x),Math.min(R.y,ld.y),Math.abs(R.x-ld.x),Math.abs(R.y-ld.y))&&tm(eb,Math.min(ld.x,xb.x),Math.min(ld.y,xb.y),Math.abs(ld.x-xb.x),Math.abs(ld.y-xb.y))&&tm(eb,Math.min(xb.x,Q.x),Math.min(xb.y,Q.y),Math.abs(xb.x-Q.x),Math.abs(xb.y-Q.y)))Yc=q;else{var Eb=Fa.copy().Ii(oa);Eb.Ng(2*eb.Ml,2*eb.Ll);um(eb,R,xc,Q,Zc,Eb);var zd=vm(eb,Q.x,Q.y);if(!eb.abort&&zd===wm){sm(eb);var lb=eb.uE;Eb.Ng(eb.Ml*lb,eb.Ll*lb);um(eb,R,xc,Q,Zc,Eb);zd=vm(eb,Q.x,Q.y)}!eb.abort&&zd===wm&&(sm(eb),lb=eb.sD,Eb.Ng(eb.Ml*
lb,eb.Ll*lb),um(eb,R,xc,Q,Zc,Eb),zd=vm(eb,Q.x,Q.y));!eb.abort&&(zd===wm&&eb.SE)&&(sm(eb),um(eb,R,xc,Q,Zc,eb.Fb),zd=vm(eb,Q.x,Q.y));if(!eb.abort&&zd<wm&&0!==vm(eb,Q.x,Q.y)){xm(this,eb,Q.x,Q.y,Zc,h);var Ab=this.p(2);if(4>this.ja)0===xc||180===xc?(Ab.x=R.x,Ab.y=Q.y):(Ab.x=Q.x,Ab.y=R.y),this.J(2,Ab),this.A(3,Ab);else{var zc=this.p(3);if(0===xc||180===xc)if(Ua(Ab.x,zc.x)){var Ba=0===xc?Math.max(Ab.x,R.x):Math.min(Ab.x,R.x);this.J(2,new F(Ba,R.y));this.J(3,new F(Ba,zc.y))}else Ua(Ab.y,zc.y)?(Math.abs(R.y-
Ab.y)<=eb.Ll/2&&(this.J(2,new F(Ab.x,R.y)),this.J(3,new F(zc.x,R.y))),this.A(2,new F(Ab.x,R.y))):this.J(2,new F(R.x,Ab.y));else if(90===xc||270===xc)if(Ua(Ab.y,zc.y)){var ya=90===xc?Math.max(Ab.y,R.y):Math.min(Ab.y,R.y);this.J(2,new F(R.x,ya));this.J(3,new F(zc.x,ya))}else Ua(Ab.x,zc.x)?(Math.abs(R.x-Ab.x)<=eb.Ml/2&&(this.J(2,new F(R.x,Ab.y)),this.J(3,new F(R.x,zc.y))),this.A(2,new F(R.x,Ab.y))):this.J(2,new F(Ab.x,R.y))}Yc=h}else Yc=q}}}Yc||(this.ud(za),this.ud(Pa))}}(r||m!==Fb||p)&&this.ud(Bb);
this.ud(lc)}}return h};function ym(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
U.prototype.getLinkPointFromPoint=U.prototype.HK=function(a,b,c,d){if(a===n||b===n)return c;if(!a.nb()){var e=Hl(a);e!==n&&e!==a&&(b=e.port)}var g,a=n;if(b.fa===n)e=d.x,d=d.y,g=c.x,c=c.y;else{a=b.fa.je;e=1/(a.m11*a.m22-a.m12*a.m21);g=a.m22*e;var i=-a.m12*e,j=-a.m21*e,k=a.m11*e,l=e*(a.m21*a.dy-a.m22*a.dx),m=e*(a.m12*a.dx-a.m11*a.dy),e=d.x*g+d.y*j+l,d=d.x*i+d.y*k+m;g=c.x*g+c.y*j+l;c=c.x*i+c.y*k+m}i=new F;b.Xr(e,d,g,c,i);a&&i.transform(a);return i};
function zm(a,b){var c=a.Kd;c===n&&(c=new Am,c.port=a,c.Tg=a.ca,a.Kd=c);return Bm(c,b)}U.prototype.getLinkPoint=U.prototype.GK=function(a,b,c,d,e,g,i){if(sb(c))return c=b.Ab(c);if(tb(c)&&(c=zm(b,this),c!==n))return c=c.lo;c=b.Ab(Ob);this.ja>(e?6:2)?(i=d?this.p(1):this.p(this.ja-2),e&&(i=ym(c,i.copy()))):(i=i.Ab(Ob),e&&(i=ym(c,i)));return this.getLinkPointFromPoint(a,b,c,i,d)};
U.prototype.getLinkDirection=U.prototype.FK=function(a,b,c,d,e,g,i,j){a:if(sb(d))c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:0.5>d.x?225:0.5<d.x?45:0;else{if(tb(d)&&(d=zm(b,this),d!==n))switch(d.fe){case w.ld:c=270;break a;case w.Qc:c=180;break a;default:case w.Zc:c=0;break a;case w.Yc:c=90;break a}d=b.Ab(Ob);this.ja>(g?6:2)?(j=e?this.p(1):this.p(this.ja-2),j=g?ym(d,j.copy()):c):j=j.Ab(Ob);c=Math.abs(j.x-d.x)>Math.abs(j.y-d.y)?j.x>=d.x?0:180:j.y>=d.y?90:270}g=Ql;
g=e?this.Vr:this.Hs;g===Ql&&(g=e?b.Vr:b.Hs);switch(g){case Rl:a=a.angle;c+=a;360<=c&&(c-=360);break;case Ql:case gj:a=a.angle;if(0===a)break;45<=a&&135>a?c+=90:135<=a&&225>a?c+=180:225<=a&&315>a&&(c+=270);360<=c&&(c-=360)}return c};U.prototype.getEndSegmentLength=U.prototype.EK=function(a,b,c,d){if(tb(c)&&(a=zm(b,this),a!==n))return a.nv;a=NaN;a=d?this.Ok:this.al;isNaN(a)&&(a=d?b.Ok:b.al);isNaN(a)&&(a=10);return a};
U.prototype.computeSpot=U.prototype.mC=function(a){return a?nm(this,this.Nc):om(this,this.Bd)};function nm(a,b){var c=a.kb;Cb(c)&&(b===f&&(b=a.Nc),b!==n&&(c=b.kb));return c===Ib?Fb:c}function om(a,b){var c=a.ob;Cb(c)&&(b===f&&(b=a.Bd),b!==n&&(c=b.ob));return c===Ib?Fb:c}U.prototype.computeShortLength=U.prototype.xJ=function(a){return a?Cm(this):Dm(this)};function Cm(a){var b=a.Wr;isNaN(b)&&(a=a.Nc,a!==n&&(b=a.Wr));return isNaN(b)?0:b}
function Dm(a){var b=a.Is;isNaN(b)&&(a=a.Bd,a!==n&&(b=a.Is));return isNaN(b)?0:b}w.u(U,{fc:"isOrthogonal"},function(){var a=this.dn;return a===ek||a===Tf});U.prototype.computeCurve=U.prototype.fv=function(){if(this.Rh===n){var a=this.fc;this.Rh=this.Nc===this.Bd&&!a}return this.Rh?fk:this.wf};function Em(a){if(a.wf===fk)return 0;a=a.tC;if(isNaN(a)||0>a)a=10;return a}
U.prototype.computeCurviness=U.prototype.nJ=function(){var a=this.Sy;if(isNaN(a)){var b=this.ye;if(0!==b){var c=this.hl,a=c!==n?c.spacing:10,c=Math.abs(b),a=a/2+((c-1)/2|0)*a;0===c%2&&(a=-a);0>b&&(a=-a)}else a=10}return a};U.prototype.hasCurviness=U.prototype.PK=function(){return!isNaN(this.Sy)||0!==this.ye&&!this.fc};
function pm(a,b,c,d,e){var g=a.Tu;if(a.fc){if(g===jk)return q;g===kk&&(g=ik)}switch(g){case jk:var i=a.p(b),j=a.p(d);if(!i.I(c)||!j.I(e)){var g=i.x,i=i.y,k=j.x-g,l=j.y-i,m=Math.sqrt(k*k+l*l);if(!Ua(m,0)){var p;Ua(k,0)?p=0>l?-Math.PI/2:Math.PI/2:(p=Math.atan(l/Math.abs(k)),0>k&&(p=Math.PI-p));var j=c.x,r=c.y,k=e.x-j,s=e.y-r,l=Math.sqrt(k*k+s*s);Ua(k,0)?s=0>s?-Math.PI/2:Math.PI/2:(s=Math.atan(s/Math.abs(k)),0>k&&(s=Math.PI-s));m=l/m;p=s-p;a.J(b,c);for(b+=1;b<d;b++)c=a.p(b),k=c.x-g,l=c.y-i,c=Math.sqrt(k*
k+l*l),Ua(c,0)||(Ua(k,0)?l=0>l?-Math.PI/2:Math.PI/2:(l=Math.atan(l/Math.abs(k)),0>k&&(l=Math.PI-l)),k=l+p,c*=m,a.J(b,new F(j+c*Math.cos(k),r+c*Math.sin(k))));a.J(d,e)}}return h;case kk:i=a.p(b);r=a.p(d);if(!i.I(c)||!r.I(e)){g=i.x;i=i.y;j=r.x;r=r.y;m=(j-g)*(j-g)+(r-i)*(r-i);k=c.x;p=c.y;var l=e.x,s=e.y,v=0,y=1,v=0!==l-k?(s-p)/(l-k):9E9;0!==v&&(y=Math.sqrt(1+1/(v*v)));a.J(b,c);for(b+=1;b<d;b++){var c=a.p(b),C=c.x,E=c.y,I=0.5;0!==m&&(I=((g-C)*(g-j)+(i-E)*(i-r))/m);var D=g+I*(j-g),M=i+I*(r-i),c=Math.sqrt((C-
D)*(C-D)+(E-M)*(E-M));E<v*(C-D)+M&&(c=-c);0<v&&(c=-c);C=k+I*(l-k);I=p+I*(s-p);0!==v?(c=C+c/y,a.J(b,new F(c,I-(c-C)/v))):a.J(b,new F(C,I+c))}a.J(d,e)}return h;case ik:return a.fc&&(g=a.p(b+1),i=a.p(b+2),Ua(g.x,i.x)&&!Ua(g.y,i.y)?a.J(b+1,new F(g.x,c.y)):Ua(g.y,i.y)&&a.J(b+1,new F(c.x,g.y)),g=a.p(d-1),i=a.p(d-2),Ua(g.x,i.x)&&!Ua(g.y,i.y)?a.J(d-1,new F(g.x,e.y)):Ua(g.y,i.y)&&a.J(d-1,new F(e.x,g.y))),a.J(b,c),a.J(d,e),h;default:return q}}
function qm(a,b,c){return a.hasCurviness()?(a=a.computeCurviness(),(b+c)/2+a):(b+c)/2}
function xm(a,b,c,d,e,g){var i=b.Ml,j=b.Ll,k=vm(b,c,d),l=c,m=d;for(0===e?l+=i:90===e?m+=j:180===e?l-=i:m-=j;k>Fm&&vm(b,l,m)===k-Gm;)c=l,d=m,0===e?l+=i:90===e?m+=j:180===e?l-=i:m-=j,k-=Gm;if(g){if(k>Fm)if(180===e||0===e)c=Math.floor(c/i)*i+i/2;else if(90===e||270===e)d=Math.floor(d/j)*j+j/2}else c=Math.floor(c/i)*i+i/2,d=Math.floor(d/j)*j+j/2;k>Fm&&(g=e,l=c,m=d,0===e?(g=90,m+=j):90===e?(g=180,l-=i):180===e?(g=270,m-=j):270===e&&(g=0,l+=i),vm(b,l,m)===k-Gm?xm(a,b,l,m,g,q):(l=c,m=d,0===e?(g=270,m-=j):
90===e?(g=0,l+=i):180===e?(g=90,m+=j):270===e&&(g=180,l-=i),vm(b,l,m)===k-Gm&&xm(a,b,l,m,g,q)));a.ud(new F(c,d))}U.prototype.findClosestSegment=U.prototype.nK=function(a){u&&w.i(a,F,U,"findClosestSegment:p");for(var b=a.x,a=a.y,c=this.p(0),d=this.p(1),e=$a(b,a,c.x,c.y,d.x,d.y),g=0,i=1;i<this.ja-1;i++){var c=this.p(i+1),j=$a(b,a,d.x,d.y,c.x,c.y),d=c;j<e&&(g=i,e=j)}return g};U.prototype.invalidateGeometry=U.prototype.Zf=function(){this.kh=this.Ga=n;this.R()};
w.u(U,{Vc:"geometry"},function(){this.Ga===n&&(this.updateRoute(),this.Ga=Hm(this));return this.Ga});U.prototype.Iv=function(){if(this.Ga===n&&this.pi!==q){this.Ga=Hm(this);var a=this.Bp();if(a!==n){a.Ga=this.Ga;for(var b=this.Fa,c=b.length,d=0;d<c;d++){var e=b.n[d];e!==a&&(e.Gi&&e instanceof V)&&(e.Ga=this.Ga)}}}};
function Hm(a){var b=a.ja;if(2>b){var a=new hd(id),c=new jd(0,0);a.sb.add(c);return a}var d,e=a.p(0).copy(),g=new F(Infinity,Infinity);g.x=Math.min(e.x,g.x);g.y=Math.min(e.y,g.y);var i=a.fv();if(i===fk&&3<=b&&!Ta(a.Es,0))if(3===b){var j=a.p(1),c=Math.min(e.x,j.x);d=Math.min(e.y,j.y);j=a.p(2);c=Math.min(c,j.x);d=Math.min(d,j.y)}else{if(a.fc)for(j=0;j<b;j++)c=a.Uc.n[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);else for(var k,j=3;j<b;j+=3)j+3>=b&&(j=b-1),k=a.p(j),g.x=Math.min(k.x,g.x),g.y=Math.min(k.y,
g.y);c=g.x;d=g.y}else{for(j=0;j<b;j++)c=a.Uc.n[j],g.x=Math.min(c.x,g.x),g.y=Math.min(c.y,g.y);c=g.x;d=g.y}c-=a.Ku.x;d-=a.Ku.y;e.x-=c;e.y-=d;if(2===b){var l=a.p(1).copy();l.x-=c;l.y-=d;0!==Cm(a)&&Im(a,e,h,g);0!==Dm(a)&&Im(a,l,q,g);a=new hd(pd);a.ma=e.x;a.na=e.y;a.C=l.x;a.D=l.y;return a}l=new J;0!==Cm(a)&&Im(a,e,h,g);K(l,e.x,e.y,q,q);if(i===fk&&3<=b&&!Ta(a.Es,0))if(3===b)j=a.p(1),b=j.x-c,e=j.y-d,j=a.p(2).copy(),j.x-=c,j.y-=d,0!==Dm(a)&&Im(a,j,q,g),L(l,b,e,b,e,j.x,j.y);else if(a.fc){e=new F(c,d);i=a.p(1).copy();
k=new F(c,d);for(var b=new F(c,d),g=a.p(0),m=n,p=a.Es/3,j=1;j<a.ja-1;j++){var m=a.p(j),r=g,s=m,v=a.p(Jm(a,m,j,q));if(!Ta(r.x,s.x)||!Ta(s.x,v.x))if(!Ta(r.y,s.y)||!Ta(s.y,v.y)){var y=p,C=k,E=b;isNaN(y)&&(y=a.Es/3);var I=r.x,r=r.y,D=s.x,s=s.y,M=v.x,v=v.y,N=y*Km(I,r,D,s),y=y*Km(D,s,M,v);Ta(r,s)&&Ta(D,M)&&(D>I?v>s?(C.x=D-N,C.y=s-N,E.x=D+y,E.y=s+y):(C.x=D-N,C.y=s+N,E.x=D+y,E.y=s-y):v>s?(C.x=D+N,C.y=s-N,E.x=D-y,E.y=s+y):(C.x=D+N,C.y=s+N,E.x=D-y,E.y=s-y));Ta(I,D)&&Ta(s,v)&&(s>r?(M>D?(C.x=D-N,C.y=s-N,E.x=
D+y):(C.x=D+N,C.y=s-N,E.x=D-y),E.y=s+y):(M>D?(C.x=D-N,C.y=s+N,E.x=D+y):(C.x=D+N,C.y=s+N,E.x=D-y),E.y=s-y));if(Ta(I,D)&&Ta(D,M)||Ta(r,s)&&Ta(s,v))I=0.5*(I+M),r=0.5*(r+v),C.x=I,C.y=r,E.x=I,E.y=r;1===j?(i.x=0.5*(g.x+m.x),i.y=0.5*(g.y+m.y)):2===j&&(Ta(g.x,a.p(0).x)&&Ta(g.y,a.p(0).y))&&(i.x=0.5*(g.x+m.x),i.y=0.5*(g.y+m.y));L(l,i.x-c,i.y-d,k.x-c,k.y-d,m.x-c,m.y-d);e.set(k);i.set(b);g=m}}j=g.x;g=g.y;a=a.p(a.ja-1);j=0.5*(j+a.x);g=0.5*(g+a.y);L(l,b.x-c,b.y-d,j-c,g-d,a.x-c,a.y-d)}else for(j=3;j<b;j+=3)g=a.p(j-
2),j+3>=b&&(j=b-1),e=a.p(j-1),k=a.p(j),j===b-1&&0!==Dm(a)&&(k=k.copy(),Im(a,k,q,jc)),L(l,g.x-c,g.y-d,e.x-c,e.y-d,k.x-c,k.y-d);else{m=a.p(0);for(j=1;j<b;){j=Jm(a,m,j,1<j);p=a.p(j);if(j>=b-1){m!==p&&(0!==Dm(a)&&(p=p.copy(),Im(a,p,q,jc)),Lm(a,l,-c,-d,m,p));break}j=Jm(a,p,j+1,j<b-3);g=a;e=l;i=-c;k=-d;C=a.p(j);Ua(m.y,p.y)&&Ua(p.x,C.x)?(E=Em(g),E=Math.min(E,Math.abs(p.x-m.x)/2),E=I=Math.min(E,Math.abs(C.y-p.y)/2),Ua(E,0)?(Lm(g,e,i,k,m,p),m=p):(r=p.x,y=p.y,D=r,s=y,r=p.x>m.x?p.x-E:p.x+E,s=C.y>p.y?p.y+I:p.y-
I,Lm(g,e,i,k,m,new F(r,y)),Dd(e,p.x+i,p.y+k,D+i,s+k),m=new F(D,s))):Ua(m.x,p.x)&&Ua(p.y,C.y)?(E=Em(g),I=Math.min(E,Math.abs(p.y-m.y)/2),I=E=Math.min(I,Math.abs(C.x-p.x)/2),Ua(E,0)?(Lm(g,e,i,k,m,p),m=p):(r=p.x,s=y=p.y,y=p.y>m.y?p.y-I:p.y+I,D=C.x>p.x?p.x+E:p.x-E,Lm(g,e,i,k,m,new F(r,y)),Dd(e,p.x+i,p.y+k,D+i,s+k),m=new F(D,s))):(Lm(g,e,i,k,m,p),m=p)}}return l.q}
function Km(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return Ta(a,0)?b:Ta(b,0)?a:Math.sqrt(a*a+b*b)}
function Im(a,b,c,d){var e=a.ja;if(!(2>e))if(c){var g=a.p(1),c=g.x-d.x,d=g.y-d.y,g=Km(b.x,b.y,c,d);0!==g&&(e=2===e?0.5*g:g,a=Cm(a),a>e&&(a=e),c=a*(c-b.x)/g,a=a*(d-b.y)/g,b.x+=c,b.y+=a)}else g=a.p(e-2),c=g.x-d.x,d=g.y-d.y,g=Km(b.x,b.y,c,d),0!==g&&(e=2===e?0.5*g:g,a=Dm(a),a>e&&(a=e),c=a*(b.x-c)/g,a=a*(b.y-d)/g,b.x-=c,b.y-=a)}
function Jm(a,b,c,d){for(var e=a.ja,g=b;Ta(b.x,g.x)&&Ta(b.y,g.y);){if(c>=e)return e-1;g=a.p(c++)}if(!Ta(b.x,g.x)&&!Ta(b.y,g.y))return c-1;for(var i=g;Ta(b.x,g.x)&&Ta(g.x,i.x)&&(!d||(b.y>=g.y?g.y>=i.y:g.y<=i.y))||Ta(b.y,g.y)&&Ta(g.y,i.y)&&(!d||(b.x>=g.x?g.x>=i.x:g.x<=i.x));){if(c>=e)return e-1;i=a.p(c++)}return c-2}
function Lm(a,b,c,d,e,g){if(im(a)){var i=new z("number"),j;a:if(j=a.h,j===n)j=0;else{Math.min(e.x,g.x);Math.min(e.y,g.y);Math.max(e.x,g.x);Math.max(e.y,g.y);for(j=j.Gv;j.next();){var k=j.value;if(k!==n&&k.visible)for(k=k.Yk;k.next();){var l=k.value;if(l===a){0<i.length&&i.sort(function(a,b){return a-b});j=i.length;break a}if(l instanceof U&&a.nb()&&l.nb()&&im(l)&&a.Th().Me(l.Th())&&!a.usesSamePort(l)){var m=l.path;if(m!==n&&m.Tk())for(var m=e,p=g,r=i,s=l.ja,v=1;v<s;v++){var y=l.p(v-1),C=l.p(v),E=
new F,I;b:{I=m;var D=p,M=E;if(Ua(I.x,D.x)){if(Ua(y.y,C.y)&&Math.min(I.y,D.y)<=y.y&&Math.max(I.y,D.y)>=y.y&&Math.min(y.x,C.x)<=I.x&&Math.max(y.x,C.x)>=I.x&&!Ua(y.x,C.x)){M.x=I.x;M.y=y.y;I=h;break b}}else if(Ua(y.x,C.x)&&Math.min(I.x,D.x)<=y.x&&Math.max(I.x,D.x)>=y.x&&Math.min(y.y,C.y)<=I.y&&Math.max(y.y,C.y)>=I.y&&!Ua(y.y,C.y)){M.x=y.x;M.y=I.y;I=h;break b}M.x=0;M.y=0;I=q}I&&(Ua(m.y,p.y)?r.add(E.x):r.add(E.y))}}}}0<i.length&&i.sort(function(a,b){return a-b});j=i.length}m=e.x;m=e.y;if(0<j)if(Ua(e.y,
g.y))if(e.x<g.x)for(k=0;k<j;){r=Math.max(e.x,Math.min(i.n[k++]-5,g.x-10));b.lineTo(r+c,g.y+d);m=r+c;for(p=Math.min(r+10,g.x);k<j;)if(l=i.n[k],l<p+10)k++,p=Math.min(l+5,g.x);else break;l=(r+p)/2+c;l=g.y-10+d;r=p+c;p=g.y+d;a.wf===gk?K(b,r,p,q,q):L(b,m,l,r,l,r,p)}else for(k=j-1;0<=k;){r=Math.min(e.x,Math.max(i.n[k--]+5,g.x+10));b.lineTo(r+c,g.y+d);m=r+c;for(p=Math.max(r-10,g.x);0<=k;)if(l=i.n[k],l>p-10)k--,p=Math.max(l-5,g.x);else break;l=g.y-10+d;r=p+c;p=g.y+d;a.wf===gk?K(b,r,p,q,q):L(b,m,l,r,l,r,p)}else if(Ua(e.x,
g.x))if(e.y<g.y)for(k=0;k<j;){r=Math.max(e.y,Math.min(i.n[k++]-5,g.y-10));b.lineTo(g.x+c,r+d);m=r+d;for(p=Math.min(r+10,g.y);k<j;)if(l=i.n[k],l<p+10)k++,p=Math.min(l+5,g.y);else break;l=g.x-10+c;r=g.x+c;p+=d;a.wf===gk?K(b,r,p,q,q):L(b,l,m,l,p,r,p)}else for(k=j-1;0<=k;){r=Math.min(e.y,Math.max(i.n[k--]+5,g.y+10));b.lineTo(g.x+c,r+d);m=r+d;for(p=Math.max(r-10,g.y);0<=k;)if(l=i.n[k],l>p-10)k--,p=Math.max(l-5,g.y);else break;l=g.x-10+c;r=g.x+c;p+=d;a.wf===gk?K(b,r,p,q,q):L(b,l,m,l,p,r,p)}}b.lineTo(g.x+
c,g.y+d)}w.u(U,{vv:"firstPickIndex"},function(){return 2>=this.ja?0:this.fc||nm(this)!==Fb?1:0});w.u(U,{pz:"lastPickIndex"},function(){var a=this.ja;return 0===a?0:2>=a?a-1:this.fc||om(this)!==Fb?a-2:a-1});function im(a){a=a.wf;return a===hk||a===gk}function mm(a,b){if(b||im(a)){var c=a.h;c!==n&&(!c.Ti.contains(a)&&a.Px!==n)&&c.Ti.add(a,a.Px)}}
function Tg(a,b){var c=a.Ja;if(!(c===n||!c.visible||c.zc)){var d=c.h;if(d!==n)for(var e=q,d=d.Gv;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,i=q,g=g.Yk;g.next();){var j=g.value;j instanceof U&&(j===a?i=h:i&&Mm(a,j,b))}else if(e)for(g=g.Yk;g.next();)j=g.value,j instanceof U&&Mm(a,j,b)}}}function Mm(a,b,c){if(b!==n&&im(b)&&b.Ga!==n&&(a.Th().Me(b.Th())||c.Me(b.Th())))a.usesSamePort(b)||b.Zf()}
U.prototype.usesSamePort=U.prototype.tM=function(a){var b=this.ja,c=a.ja;if(0<b&&0<c){if(this.p(0).zi(a.p(0))||this.p(b-1).zi(a.p(c-1)))return h}else if(this.ga===a.ga||this.la===a.la)return h;return q};w.g(U,"adjusting",U.prototype.Tu);w.defineProperty(U,{Tu:"adjusting"},t("Po"),function(a){var b=this.Po;b!==a&&(u&&w.jb(a,U,U,"adjusting"),this.Po=a,this.j("adjusting",b,a))});w.g(U,"corner",U.prototype.tC);
w.defineProperty(U,{tC:"corner"},t("$o"),function(a){var b=this.$o;b!==a&&(u&&w.k(a,"number",U,"corner"),this.$o=a,this.Zf(),this.j("corner",b,a))});w.g(U,"curve",U.prototype.wf);w.defineProperty(U,{wf:"curve"},t("bp"),function(a){var b=this.bp;b!==a&&(u&&w.jb(a,U,U,"curve"),this.bp=a,this.Tb(),mm(this,b===gk||b===hk||a===gk||a===hk),this.j("curve",b,a))});w.g(U,"curviness",U.prototype.Sy);
w.defineProperty(U,{Sy:"curviness"},t("cp"),function(a){var b=this.cp;b!==a&&(u&&w.k(a,"number",U,"curviness"),this.cp=a,this.Tb(),this.j("curviness",b,a))});w.g(U,"routing",U.prototype.Dh);w.defineProperty(U,{Dh:"routing"},t("dn"),function(a){var b=this.dn;b!==a&&(u&&w.jb(a,U,U,"routing"),this.dn=a,this.Rh=n,this.Tb(),mm(this,b===ek||b===Tf||a===ek||a===Tf),this.j("routing",b,a))});w.g(U,"smoothness",U.prototype.Es);
w.defineProperty(U,{Es:"smoothness"},t("cr"),function(a){var b=this.cr;b!==a&&(u&&w.k(a,"number",U,"smoothness"),this.cr=a,this.Zf(),this.j("smoothness",b,a))});
function gm(a){var b=a.Hf;if(b!==n){var c=a.Tf;if(c!==n){var d=a.Yg,a=a.sh,e;a:{if(!(c===n||b.Vg===n))for(e=b.Vg.l;e.next();){var g=e.value;if(g.so===b&&g.qs===c&&g.Mv===d&&g.Nv===a||g.so===c&&g.qs===b&&g.Mv===a&&g.Nv===d){e=g;break a}}e=n}for(var i=g=n,j=b.ad.n,k=j.length,l=0;l<k;l++){var m=j[l];if(m.Hf===b&&m.Yg===d&&m.Tf===c&&m.sh===a||m.Hf===c&&m.Yg===a&&m.Tf===b&&m.sh===d)i===n?i=m:(g===n&&(g=new z(U),g.add(i)),g.add(m))}if(g!==n){e===n&&(e=new Tl,e.so=b,e.Mv=d,e.qs=c,e.Nv=a,Sl(b,e),Sl(c,e));
e.links=g;for(l=0;l<g.count;l++)if(m=g.n[l],0===m.ye){b=1;for(c=0;c<g.count;c++)Math.abs(g.n[c].ye)===b&&(b++,c=-1);m.hl=e;m.ye=m.ga===e.so?b:-b;m.Tb()}}}}}
function fm(a){var b=a.hl;if(b!==n){var c=a.ye;a.hl=n;a.ye=0;a.Tb();b.links.remove(a);if(2>b.links.count)1===b.links.count&&(c=b.links.n[0],c.hl=n,c.ye=0,c.Tb()),c=b.so,b!==n&&c.Vg!==n&&c.Vg.remove(b),c=b.qs,b!==n&&c.Vg!==n&&c.Vg.remove(b);else{c=Math.abs(c);a=0===c%2;for(b=b.links.l;b.next();){var d=b.value,e=Math.abs(d.ye),g=0===e%2;e>c&&a===g&&(d.ye=0<d.ye?d.ye-2:d.ye+2,d.Tb())}}}}function Tl(){w.jc(this);this.links=this.Nv=this.qs=this.Mv=this.so=n;this.spacing=10}
w.Nd(Tl,{so:h,Mv:h,qs:h,Nv:h,links:h,spacing:h});function rm(){w.jc(this);this.group=n;this.cs=h;this.abort=q;this.Lf=this.Kf=1;this.jq=this.iq=-1;this.Dd=this.Cd=8;this.Vb=n;this.SE=q;this.uE=22;this.sD=111}w.Nd(rm,{group:h,cs:h,abort:h,SE:h,uE:h,sD:h});var Fm=1,Gm=1,wm=999999999,Nm=wm;
rm.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.Kf=Math.floor((a.x-this.Cd)/this.Cd)*this.Cd;this.Lf=Math.floor((b-this.Dd)/this.Dd)*this.Dd;this.iq=Math.ceil((c+2*this.Cd)/this.Cd)*this.Cd;this.jq=Math.ceil((d+2*this.Dd)/this.Dd)*this.Dd;a=1+(Math.ceil((this.iq-this.Kf)/this.Cd)|0);b=1+(Math.ceil((this.jq-this.Lf)/this.Dd)|0);if(this.Vb===n||this.tn<a-1||this.un<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],g=0;g<=b;g++)e[g]=0;c[d]=e}this.Vb=
c;this.tn=a-1;this.un=b-1}if(this.Vb!==n)for(a=0;a<=this.tn;a++)for(b=0;b<=this.un;b++)this.Vb[a][b]=Nm}};w.u(rm,{Fb:n},function(){return new G(this.Kf,this.Lf,this.iq-this.Kf,this.jq-this.Lf)});w.g(rm,"cellWidth",rm.prototype.Ml);w.defineProperty(rm,{Ml:n},t("Cd"),function(a){0<a&&a!==this.Cd&&(this.Cd=a,this.initialize(this.Fb))});w.g(rm,"cellHeight",rm.prototype.Ll);w.defineProperty(rm,{Ll:n},t("Dd"),function(a){0<a&&a!==this.Dd&&(this.Dd=a,this.initialize(this.Fb))});
function Om(a,b,c){return a.Kf<=b&&b<=a.iq&&a.Lf<=c&&c<=a.jq}function vm(a,b,c){if(!Om(a,b,c))return 0;b-=a.Kf;b/=a.Cd;c-=a.Lf;c/=a.Dd;return a.Vb[b|0][c|0]}function $i(a,b,c){Om(a,b,c)&&(b-=a.Kf,b/=a.Cd,c-=a.Lf,c/=a.Dd,a.Vb[b|0][c|0]=0)}function sm(a){if(a.Vb!==n)for(var b=0;b<=a.tn;b++)for(var c=0;c<=a.un;c++)a.Vb[b][c]>=Fm&&(a.Vb[b][c]|=wm)}
function tm(a,b,c,d,e){if(b>a.iq||b+d<a.Kf||c>a.jq||c+e<a.Lf)return h;var b=(b-a.Kf)/a.Cd|0,c=(c-a.Lf)/a.Dd|0,d=Math.max(0,d)/a.Cd+1|0,g=Math.max(0,e)/a.Dd+1|0;0>b&&(d+=b,b=0);0>c&&(g+=c,c=0);if(0>d||0>g)return h;e=Math.min(b+d-1,a.tn)|0;for(d=Math.min(c+g-1,a.un)|0;b<=e;b++)for(g=c;g<=d;g++)if(0===a.Vb[b][g])return q;return h}
function Pm(a,b,c,d,e,g,i,j,k){if(!(b<g||b>i||c<j||c>k)){var l,m;l=b|0;m=c|0;var p=a.Vb[l][m];if(p>=Fm&&p<wm){e?m+=d:l+=d;for(p+=Gm;g<=l&&(l<=i&&j<=m&&m<=k)&&!(p>=a.Vb[l][m]);)a.Vb[l][m]=p,p+=Gm,e?m+=d:l+=d}l=e?m:l;if(e)if(0<d)for(c+=d;c<l;c+=d)Pm(a,b,c,1,!e,g,i,j,k),Pm(a,b,c,-1,!e,g,i,j,k);else for(c+=d;c>l;c+=d)Pm(a,b,c,1,!e,g,i,j,k),Pm(a,b,c,-1,!e,g,i,j,k);else if(0<d)for(b+=d;b<l;b+=d)Pm(a,b,c,1,!e,g,i,j,k),Pm(a,b,c,-1,!e,g,i,j,k);else for(b+=d;b>l;b+=d)Pm(a,b,c,1,!e,g,i,j,k),Pm(a,b,c,-1,!e,g,
i,j,k)}}function Qm(a,b,c,d,e,g,i,j,k,l,m){for(var p=b|0,r=c|0,s=a.Vb[p][r];0===s&&p>j&&p<k&&r>l&&r<m;)if(i?r+=g:p+=g,s=a.Vb[p][r],1>=Math.abs(p-d)&&1>=Math.abs(r-e))return a.abort=h,0;p=b|0;r=c|0;s=a.Vb[p][r];b=Fm;for(a.Vb[p][r]=b;0===s&&p>j&&p<k&&r>l&&r<m;)i?r+=g:p+=g,s=a.Vb[p][r],a.Vb[p][r]=b,b+=Gm;return i?r:p}
function um(a,b,c,d,e,g){if(a.Vb!==n){a.abort=q;var i=b.x,j=b.y;if(Om(a,i,j)){var i=i-a.Kf,i=i/a.Cd,j=j-a.Lf,j=j/a.Dd,k=d.x,l=d.y;if(Om(a,k,l))if(k-=a.Kf,k/=a.Cd,l-=a.Lf,l/=a.Dd,1>=Math.abs(i-k)&&1>=Math.abs(j-l))a.abort=h;else{var m=g.x,b=g.y,d=g.x+g.width,p=g.y+g.height,m=m-a.Kf,m=m/a.Cd,b=b-a.Lf,b=b/a.Dd,d=d-a.Kf,d=d/a.Cd,p=p-a.Lf,p=p/a.Dd,g=Math.max(0,Math.min(a.tn,m|0)),d=Math.min(a.tn,Math.max(0,d|0)),b=Math.max(0,Math.min(a.un,b|0)),p=Math.min(a.un,Math.max(0,p|0)),i=i|0,j=j|0,k=k|0,l=l|0,
m=i,r=j,s=0===c||90===c?1:-1;(c=90===c||270===c)?r=Qm(a,i,j,k,l,s,c,g,d,b,p):m=Qm(a,i,j,k,l,s,c,g,d,b,p);if(!a.abort){a:{for(var c=0===e||90===e?1:-1,e=90===e||270===e,s=k|0,v=l|0,y=a.Vb[s][v];0===y&&s>g&&s<d&&v>b&&v<p;)if(e?v+=c:s+=c,y=a.Vb[s][v],1>=Math.abs(s-i)&&1>=Math.abs(v-j)){a.abort=h;break a}s=k|0;v=l|0;y=a.Vb[s][v];for(a.Vb[s][v]=Nm;0===y&&s>g&&s<d&&v>b&&v<p;)e?v+=c:s+=c,y=a.Vb[s][v],a.Vb[s][v]=Nm}a.abort||(Pm(a,m,r,1,q,g,d,b,p),Pm(a,m,r,-1,q,g,d,b,p),Pm(a,m,r,1,h,g,d,b,p),Pm(a,m,r,-1,h,
g,d,b,p))}}}}}function Am(){w.jc(this);this.dg=this.port=this.Tg=n;this.ps=q}w.Nd(Am,{Tg:h,port:h,dg:h,ps:h});Am.prototype.toString=function(){for(var a=this.dg,b=this.Tg.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==n&&(b+="\n  "+d.toString())}return b};
function Rm(a,b,c,d){b=b.offsetY;switch(b){case w.Yc:return 90;case w.Qc:return 180;case w.ld:return 270;case w.Zc:return 0}switch(b){case w.Yc|w.ld:return 180<c?270:90;case w.Qc|w.Zc:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case w.Qc|w.ld:return c>a&&c<=180+a?180:270;case w.ld|w.Zc:return c>180-a&&c<=360-a?270:0;case w.Zc|w.Yc:return c>a&&c<=180+a?90:0;case w.Yc|w.Qc:return c>180-a&&c<=360-a?180:90;case w.Qc|w.ld|w.Zc:return 90<c&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case w.ld|w.Zc|w.Yc:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case w.Zc|w.Yc|w.Qc:return c>a&&c<=180-a?90:c>180-a&&270>=c?180:0;case w.Yc|w.Qc|w.ld:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&b!==(w.Qc|w.ld|w.Zc|w.Yc)&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function Bm(a,b){var c=a.dg;if(c===n){if(!a.ps){c=a.ps;a.ps=h;var d=a.Tg.ue;a.dg=[];for(var e=0,g=new G(a.port.Ab(Jb),a.port.Ab(Rb)),d=d.l;d.next();){var i=d.value;if(i.nb()){var j=Fb,j=i.Nc===a.port?nm(i,a.port):om(i,a.port);if(tb(j)){var k;k=i.Nc===a.port?i.Bd:i.Nc;if(k!==n&&k.ca!==n){var l=k.Ab(Ob);k=k.Kd;k=k!==n?Bm(k,i):n;k!==n&&(l=k.lo);k=g.Yu.vi(l);var j=Rm(g,j,k,i.fc),m;0===j?(m=w.Zc,180<k&&(k-=360)):m=90===j?w.Yc:180===j?w.Qc:w.ld;(j=a.dg[e])?(j.link=i,j.angle=k,j.fe=m):(j=new Sm(i,k,m),a.dg[e]=
j);j.Lv.set(l);e++}}}}a.dg.sort(Am.prototype.nH);g=a.dg.length;d=-1;for(e=i=0;e<g;e++)j=a.dg[e],j!==n&&(j.fe!==d&&(d=j.fe,i=0),j.am=i,i++);d=-1;i=0;for(e=g-1;0<=e;e--)j=a.dg[e],j!==n&&(j.fe!==d&&(d=j.fe,i=j.am+1),j.Jr=i);e=a.dg;for(g=0;g<e.length;g++)if(d=e[g],d!==n){l=d;j=a.port;i=d=f;switch(l.fe){case w.Yc:d=j.Ab(Rb);i=j.Ab(Pb);break;case w.Qc:d=j.Ab(Pb);i=j.Ab(Jb);break;case w.ld:d=j.Ab(Jb);i=j.Ab(Lb);break;default:case w.Zc:d=j.Ab(Lb),i=j.Ab(Rb)}j=i.y-d.y;k=(l.am+1)/(l.Jr+1);l=l.lo;l.x=d.x+(i.x-
d.x)*k;l.y=d.y+j*k}e=a.dg;for(g=0;g<e.length;g++)if(i=e[g],i!==n){d=i;k=i;m=k.link;i=m.getEndSegmentLength(a.Tg,a.port,Fb,m.Nc===a.port);l=k.am;if(!(0>l)&&(j=k.Jr,!(1>=j)&&m.fc)){m=k.Lv;var p=k.lo;if(k.fe===w.Qc||k.fe===w.Yc)l=j-1-l;i=((k=k.fe===w.Qc||k.fe===w.Zc)?m.y<p.y:m.x<p.x)?i+8*l:(k?m.y===p.y:m.x===p.x)?i:i+8*(j-1-l)}d.nv=i}a.ps=c}c=a.dg}for(e=0;e<c.length;e++)if(g=c[e],g!==n&&g.link===b)return g;return n}
Am.prototype.nH=function(a,b){return a===b?0:a===n?-1:b===n?1:a.fe<b.fe?-1:a.fe>b.fe?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};function Sm(a,b,c){this.link=a;this.angle=b;this.fe=c;this.Lv=new F;this.am=this.Jr=this.am=0;this.lo=new F;this.nv=0}w.Nd(Sm,{link:h,angle:h,fe:h,Lv:h,am:h,Jr:h,lo:h,nv:h});
Sm.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.fe.toString()+":"+this.am.toString()+"/"+this.Jr.toString()+" "+this.lo.toString()+" "+this.nv.toString()+" "+this.Lv.toString()};function xf(a){0===arguments.length?T.call(this,hh):T.call(this,a);this.lq=new ma(S);this.Zm=new ma(xf);this.vk=this.mq=this.kq=n;this.sr=q;this.Qp=h;this.ur=q;this.qb=this.ir=n;this.Xo=q;this.qd=new bi;this.qd.group=this}w.P("Group",xf);w.Da(xf,T);da=xf.prototype;
da.xb=function(a){T.prototype.xb.call(this,a);a.kq=this.kq;a.mq=this.mq;a.vk=this.vk;a.sr=this.sr;a.Qp=this.Qp;a.ur=this.ur;a.ir=this.ir;var b=Uk(a,a,function(a){return a instanceof bh});a.qb=b instanceof bh?b:n;a.Xo=this.Xo;this.qd!==n?(a.qd=this.qd.copy(),a instanceof xf&&(a.qd.group=a)):(a.qd!==n&&(a.qd.group=n),a.qd=n)};
da.yh=function(a){T.prototype.yh.call(this,a);for(var b=a.sv(),a=a.Gc;a.next();){var c=a.value;c.R();c.F(Rj);c.wh();c instanceof xf&&(c.fw=c.Ne,Tm(c,b));if(c instanceof T)c.Og(b);else if(c instanceof U)for(c=c.Fj;c.next();)c.value.Og(b)}};
da.fm=function(a,b,c,d,e,g,i){if(a===je&&"elements"===b)if(e instanceof bh)this.qb===n?this.qb=e:this.qb!==e&&w.m("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof x){var j=Uk(e,e,function(a){return a instanceof bh});j instanceof bh&&(this.qb===n?this.qb=j:this.qb!==j&&w.m("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===ke&&"elements"===b&&(d===this.qb?this.qb=n:d instanceof x&&this.qb.Ei(d)&&(this.qb=n));T.prototype.fm.call(this,
a,b,c,d,e,g,i)};da.tj=function(a,b,c,d){this.cj=this.qb;x.prototype.tj.call(this,a,b,c,d);this.qb!==n&&(a=this.qb.en,this.location=new F(a.x,a.y))};da.Sk=function(){if(!T.prototype.Sk.call(this))return q;for(var a=this.Gc;a.next();){var b=a.value;if(b instanceof T){if(b.nb()&&b.Jc)return q}else if(b instanceof U&&b.nb()&&b.Jc&&b.ga!==this&&b.la!==this)return q}return h};w.u(xf,{placeholder:"placeholder"},t("qb"));w.g(xf,"computesBoundsAfterDrag",xf.prototype.Qy);
w.defineProperty(xf,{Qy:"computesBoundsAfterDrag"},t("Xo"),function(a){var b=this.Xo;b!==a&&(w.k(a,"boolean",xf,"computesBoundsAfterDrag"),this.Xo=a,this.j("computesBoundsAfterDrag",b,a))});w.u(xf,{Gc:"memberParts"},function(){return this.lq.l});function Ml(a,b){if(a.lq.add(b)){b instanceof xf&&a.Zm.add(b);var c=a.CD;if(c!==n){var d=h,e=a.h;e!==n&&(d=e.Ma,e.Ma=h);c(a,b);e!==n&&(e.Ma=d)}}c=a.qb;c===n&&(c=a);c.R()}
function Ll(a,b){if(a.lq.remove(b)){b instanceof xf&&a.Zm.remove(b);var c=a.DD;if(c!==n){var d=h,e=a.h;e!==n&&(d=e.Ma,e.Ma=h);c(a,b);e!==n&&(e.Ma=d)}}c=a.qb;c===n&&(c=a);c.R()}xf.prototype.Rl=function(){if(0<this.lq.count){var a=this.h;if(a===n)return;for(var b=this.lq.copy().l;b.next();)a.remove(b.value)}T.prototype.Rl.call(this)};xf.prototype.$v=function(){var a=this.Ja;a!==n&&a.$v(this)};w.g(xf,"layout",xf.prototype.Pb);
w.defineProperty(xf,{Pb:"layout"},t("qd"),function(a){var b=this.qd;b!==a&&(a!==n&&w.i(a,bi,xf,"layout"),b!==n&&(b.h=n,b.group=n),this.qd=a,a!==n&&(a.h=this.h,a.group=this),this.j("layout",b,a))});w.g(xf,"memberAdded",xf.prototype.CD);w.defineProperty(xf,{CD:"memberAdded"},t("kq"),function(a){var b=this.kq;b!==a&&(a!==n&&w.k(a,"function",xf,"memberAdded"),this.kq=a,this.j("memberAdded",b,a))});w.g(xf,"memberRemoved",xf.prototype.DD);
w.defineProperty(xf,{DD:"memberRemoved"},t("mq"),function(a){var b=this.mq;b!==a&&(a!==n&&w.k(a,"function",xf,"memberRemoved"),this.mq=a,this.j("memberRemoved",b,a))});w.g(xf,"memberValidation",xf.prototype.ks);w.defineProperty(xf,{ks:"memberValidation"},t("vk"),function(a){var b=this.vk;b!==a&&(a!==n&&w.k(a,"function",xf,"memberValidation"),this.vk=a,this.j("memberValidation",b,a))});
xf.prototype.canAddMembers=xf.prototype.EI=function(a){var b=this.h;if(b===n)return q;b=b.Xf;for(a=b.findUnnestedNodes(a).l;a.next();)if(!b.VG(this,a.value))return q;return h};xf.prototype.addMembers=xf.prototype.zI=function(a,b){var c=this.h;if(c===n)return q;for(var c=c.Xf,d=h,e=c.findUnnestedNodes(a).l;e.next();){var g=e.value;!b||c.isValidMember(this,g)?g.bb=this:d=q}return d};w.g(xf,"ungroupable",xf.prototype.OE);
w.defineProperty(xf,{OE:"ungroupable"},t("sr"),function(a){var b=this.sr;b!==a&&(w.k(a,"boolean",xf,"ungroupable"),this.sr=a,this.j("ungroupable",b,a))});xf.prototype.canUngroup=xf.prototype.gJ=function(){if(!this.OE)return q;var a=this.Ja;if(a!==n&&!a.Jn)return q;a=a.h;return a!==n&&!a.Jn?q:h};xf.prototype.findSubGraphParts=xf.prototype.sv=function(){var a=new ma(S);nf(a,this,h,q);a.remove(this);return a};
xf.prototype.collapseSubGraph=xf.prototype.$u=function(){var a=this.h;if(a!==n&&!a.$f){a.$f=h;var b=this.sv();Tm(this,b);a.$f=q}};function Tm(a,b){a.Ne=q;for(var c=a.Gc;c.next();){var d=c.value;d.R();d.F(Rj);d.wh();d instanceof xf&&(d.fw=d.Ne,Tm(d,b));if(d instanceof T)d.Og(b);else if(d instanceof U)for(d=d.Fj;d.next();)d.value.Og(b)}}xf.prototype.expandSubGraph=xf.prototype.ov=function(){var a=this.h;if(a!==n&&!a.$f){a.$f=h;var b=this.sv();Um(this,b);a.$f=q}};
function Um(a,b){a.Ne=h;for(var c=a.Gc;c.next();){var d=c.value;d.R();d.F(Qj);d.Ki();d instanceof xf&&d.fw&&Um(d,b);if(d instanceof T)d.Og(b);else if(d instanceof U)for(d=d.Fj;d.next();)d.value.Og(b)}}w.g(xf,"isSubGraphExpanded",xf.prototype.Ne);
w.defineProperty(xf,{Ne:"isSubGraphExpanded"},t("Qp"),function(a){var b=this.Qp;if(b!==a){w.k(a,"boolean",xf,"isSubGraphExpanded");this.Qp=a;var c=this.h;c!==n&&Lh(c);this.j("isSubGraphExpanded",b,a);b=this.BE;if(b!==n){var d=h;c!==n&&(d=c.Ma,c.Ma=h);b(this);c!==n&&(c.Ma=d)}c!==n&&c.sa.tb||(a?this.ov():this.$u())}});w.g(xf,"wasSubGraphExpanded",xf.prototype.fw);
w.defineProperty(xf,{fw:"wasSubGraphExpanded"},t("ur"),function(a){var b=this.ur;b!==a&&(w.k(a,"boolean",xf,"wasSubGraphExpanded"),this.ur=a,this.j("wasSubGraphExpanded",b,a))});w.g(xf,"subGraphExpandedChanged",xf.prototype.BE);w.defineProperty(xf,{BE:"subGraphExpandedChanged"},t("ir"),function(a){var b=this.ir;b!==a&&(a!==n&&w.k(a,"function",xf,"subGraphExpandedChanged"),this.ir=a,this.j("subGraphExpandedChanged",b,a))});
xf.prototype.move=xf.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;T.prototype.move.call(this,a);for(a=this.sv().l;a.next();){var d=a.value,e=d.position;T.prototype.move.call(d,new F(e.x+c,e.y+b))}};function bh(){P.call(this);this.ie=(new hb(0)).freeze();this.en=new G(NaN,NaN,NaN,NaN)}w.P("Placeholder",bh);w.Da(bh,P);bh.prototype.xb=function(a){P.prototype.xb.call(this,a);a.ie=this.ie.O();a.en=this.en.copy()};
bh.prototype.uj=function(a){if(this.background===n&&this.Gk===n)return q;var b=this.Sa;return jb(0,0,b.width,b.height,a.x,a.y)};
bh.prototype.js=function(){var a=this.ca;(a===n||!(a instanceof xf)&&!(a instanceof of))&&w.m("Placeholder is not inside a Group or Adornment.");if(a instanceof xf){var b;a:{b=this.ca;if(b instanceof xf&&b.Qy&&this.en.T()){var c=b.h;if(c!==n&&(c=c.Ha,c instanceof Gf&&!c.np&&c.dc!==n&&!c.dc.contains(b))){b=this.en;break a}}b=this.ca;if(b instanceof xf){for(var d=c=Infinity,e=-Infinity,g=-Infinity,i=b.Gc;i.next();){var j=i.value;if(j.nb()){if(j instanceof U){if(j.ac)continue;if(j.ga===b||j.la===b)continue}j=
j.va;j.left<c&&(c=j.left);j.top<d&&(d=j.top);j.right>e&&(e=j.right);j.bottom>g&&(g=j.bottom)}}!isFinite(c)||!isFinite(d)?(b=b.location,c=this.padding,b=new G(b.x+c.left,b.y+c.top,0,0)):b=new G(c,d,e-c,g-d)}else b=new G;c=this.padding;b=new G(b.x-c.left,b.y-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}this.en=b;c=this.Kc;db(c,b.width||0,b.height||0);lj(this,0,0,c.width,c.height);c=a.Gc;for(d=q;c.next();)if(c.value.nb()){d=h;break}d&&(!isNaN(b.x)&&!isNaN(b.y))&&(a.location=new F(b.x,b.y))}else b=
this.wa,c=this.Kc,a=this.padding,db(c,b.width+(a.left+a.right)||0,b.height+(a.top+a.bottom)||0),lj(this,-a.left,-a.top,c.width,c.height)};bh.prototype.tj=function(a,b,c,d){var e=this.va;e.x=a;e.y=b;e.width=c;e.height=d};w.g(bh,"padding",bh.prototype.padding);w.defineProperty(bh,{padding:"padding"},t("ie"),function(a){"number"===typeof a?a=new hb(a):w.i(a,hb,x,"padding");var b=this.ie;b.I(a)||(this.ie=a=a.O(),this.j("padding",b,a))});
function bi(){w.jc(this);this.mx=this.aa=n;this.Gt=this.Np=h;this.Up=this.Tp=q;this.Ro=(new F(0,0)).freeze();this.tx=h;this.B=n}w.P("Layout",bi);bi.prototype.cloneProtected=bi.prototype.xb=function(a){a.Np=this.Np;a.Gt=this.Gt;a.Up=this.Up;a.Ro=this.Ro.O()};bi.prototype.copy=bi.prototype.copy=function(){var a=new this.constructor;this.xb(a);return a};
bi.prototype.toString=function(){var a=w.Pk(Object.getPrototypeOf(this)),a=a+"(";this.group!==n&&(a+=" in "+this.group);this.h!==n&&(a+=" for "+this.h);return a+")"};w.g(bi,"diagram",bi.prototype.h);w.defineProperty(bi,{h:"diagram"},t("aa"),function(a){this.aa!==a&&(a!==n&&w.i(a,A,bi,"diagram"),this.aa=a)});w.g(bi,"group",bi.prototype.group);w.defineProperty(bi,{group:"group"},t("mx"),function(a){this.mx!==a&&(a!==n&&w.i(a,xf,bi,"group"),this.mx=a)});w.g(bi,"isOngoing",bi.prototype.pD);
w.defineProperty(bi,{pD:"isOngoing"},t("Np"),function(a){this.Np!==a&&(w.k(a,"boolean",bi,"isOngoing"),this.Np=a)});w.g(bi,"isInitial",bi.prototype.oD);w.defineProperty(bi,{oD:"isInitial"},t("Gt"),function(a){w.k(a,"boolean",bi,"isInitial");this.Gt=a;a||(this.Tp=h)});w.g(bi,"isValidLayout",bi.prototype.Pe);w.defineProperty(bi,{Pe:"isValidLayout"},t("Tp"),function(a){this.Tp!==a&&(this.Tp=a,a||(a=this.h,a!==n&&(a.Xs=h)))});
bi.prototype.invalidateLayout=bi.prototype.F=function(){if(this.Tp){var a=this.h;if(a!==n&&!a.sa.tb&&(this.pD&&a.zg||this.oD&&!a.zg))this.Pe=q,a.sn=h,a.yb(h)}};w.g(bi,"isViewportSized",bi.prototype.hs);w.defineProperty(bi,{hs:"isViewportSized"},t("Up"),function(a){this.Up!==a&&(this.Up=a)&&this.F()});w.g(bi,"isRouting",bi.prototype.fs);w.defineProperty(bi,{fs:"isRouting"},t("tx"),function(a){this.tx!==a&&(w.k(a,"boolean",bi,"isRouting"),this.tx=a)});w.g(bi,"network",bi.prototype.Oc);
w.defineProperty(bi,{Oc:"network"},t("B"),function(a){var b=this.B;b!==a&&(a!==n&&w.i(a,Vm,bi,"network"),b!==n&&Wm(b,n),this.B=a,a!==n&&Wm(a,this))});bi.prototype.createNetwork=bi.prototype.iv=function(){var a=new Vm;Wm(a,this);return a};bi.prototype.makeNetwork=bi.prototype.fH=function(a){var b=this.createNetwork();a instanceof A?(b.Br(a.Xk,h),b.Br(a.links,h)):a instanceof xf?b.Br(a.Gc):a.l&&b.Br(a.l);return b};
bi.prototype.updateParts=bi.prototype.rM=function(){var a=this.h;if(a===n&&this.B!==n)for(var b=this.B.ka.l;b.next();){var c=b.value.fb;if(c!==n&&(a=c.h,a!==n))break}this.Pe=h;a!==n&&a.hc("Layout");this.commitLayout();a!==n&&a.ne("Layout")};bi.prototype.commitLayout=bi.prototype.dv=aa();
bi.prototype.doLayout=bi.prototype.Kr=function(a){a===n&&w.m("Layout.doLayout(collection) argument must not be null");var b=new ma(S);a===this.h?(Xm(this,b,a.Xk,h,this.Az,h,q,h),Xm(this,b,a.Yk,h,this.Az,h,q,h)):a===this.group&&Xm(this,b,a.Gc,q,this.Az,h,q,h);var c=b.count;if(0<c){a=this.h;a!==n&&a.hc("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.fd.x,e=d,g=this.fd.y,i=0,j=0,b=b.l;b.next();){var k=b.value;k.yi();var l=k.xa,m=l.width,l=l.height;k.move(new F(e,g));delete k.lB;e+=Math.max(m,50)+
20;j=Math.max(j,Math.max(l,50));i>=c-1?(i=0,e=d,g+=j+20,j=0):i++}a!==n&&a.ne("Layout")}this.Pe=h};bi.prototype.Az=function(a){return!a.location.T()||a instanceof xf&&a.lB?h:q};function Xm(a,b,c,d,e,g,i,j){for(c=c.l;c.next();){var k=c.value;if(!d||k.gs)if(!e||e(k))k.Fr()&&(g&&k instanceof T?k.Fi||(k instanceof xf&&k.Pb===n?Xm(a,b,k.Gc,q,e,g,i,j):b.add(k)):i&&k instanceof U?b.add(k):j&&(k.be()&&!(k instanceof T))&&b.add(k))}}w.g(bi,"arrangementOrigin",bi.prototype.fd);
w.defineProperty(bi,{fd:"arrangementOrigin"},t("Ro"),function(a){this.Ro.I(a)||(u&&w.i(a,F,bi,"arrangementOrigin"),this.Ro.Xa(a),this.F())});function Ym(a,b){var c=a.group;if(c!==n){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;e!==n?(d=e.Ab(Jb),d.x+=e.padding.left,d.y+=e.padding.top):d=c.position.copy();return d}return b}function Vm(){w.jc(this);this.qd=n;this.clear()}w.P("LayoutNetwork",Vm);
Vm.prototype.clear=function(){if(this.tr)for(var a=this.tr.l;a.next();){var b=a.value;b.clear();b.B=n}if(this.pp)for(a=this.pp.l;a.next();)b=a.value,b.clear(),b.B=n;this.tr=new ma(Zm);this.pp=new ma($m);this.Fx=new la(T,Zm);this.yx=new la(U,$m)};Vm.prototype.toString=function(){return"LayoutNetwork"+(this.Pb!==n?"("+this.Pb.toString()+")":"")};w.u(Vm,{Pb:"layout"},t("qd"));function Wm(a,b){u&&b!==n&&w.i(b,bi,Vm,"setLayout");a.qd=b}w.u(Vm,{ka:"vertexes"},t("tr"));w.u(Vm,{mc:"edges"},t("pp"));
Vm.prototype.createVertex=Vm.prototype.wj=function(){return new Zm};Vm.prototype.createEdge=Vm.prototype.Pn=function(){return new $m};
Vm.prototype.addParts=Vm.prototype.Br=function(a,b){if(a!==n){b===f&&(b=q);w.k(b,"boolean",Vm,"addParts:toplevelonly");for(var c=a.l;c.next();){var d=c.value;if(d instanceof T&&(!b||d.gs)&&d.Fr()&&!d.Fi)if(d instanceof xf&&d.Pb===n)this.Br(d.Gc,q);else if(this.Le(d)===n){var e=this.wj();e.Tg=d;this.Dk(e)}}for(c.reset();c.next();)if(d=c.value,d instanceof U&&(!b||d.gs)&&d.Fr()&&this.qv(d)===n){var g=d.ga,e=d.la;g!==e&&(g=this.rv(g),e=this.rv(e),g!==n&&e!==n&&this.cm(g,e,d))}}};
Vm.prototype.findGroupVertex=Vm.prototype.rv=function(a){if(a===n)return n;a=Hl(a);if(a===n)return n;var b=this.Le(a);if(b!==n)return b;a=a.bb;return a!==n&&(b=this.Le(a),b!==n)?b:n};Vm.prototype.addVertex=Vm.prototype.Dk=function(a){if(a!==n){u&&w.i(a,Zm,Vm,"addVertex:vertex");this.tr.add(a);var b=a.fb;b!==n&&this.Fx.add(b,a);a.B=this}};Vm.prototype.addNode=Vm.prototype.An=function(a){if(a===n)return n;u&&w.i(a,T,Vm,"addNode:node");var b=this.Le(a);b===n&&(b=this.wj(),b.Tg=a,this.Dk(b));return b};
Vm.prototype.deleteVertex=Vm.prototype.FC=function(a){if(a!==n&&(u&&w.i(a,Zm,Vm,"deleteVertex:vertex"),an(this,a))){for(var b=a.Rf,c=b.count-1;0<=c;c--){var d=b.oa(c);this.Rn(d)}b=a.$e;for(c=b.count-1;0<=c;c--)d=b.oa(c),this.Rn(d)}};function an(a,b){if(b===n)return q;var c=a.tr.remove(b);c&&(a.Fx.remove(b.fb),b.B=n);return c}Vm.prototype.deleteNode=Vm.prototype.KJ=function(a){a!==n&&(u&&w.i(a,T,Vm,"deleteNode:node"),a=this.Le(a),a!==n&&this.FC(a))};
Vm.prototype.findVertex=Vm.prototype.Le=function(a){if(a===n)return n;u&&w.i(a,T,Vm,"findVertex:node");return this.Fx.qa(a)};Vm.prototype.addEdge=Vm.prototype.zn=function(a){if(a!==n){u&&w.i(a,$m,Vm,"addEdge:edge");this.pp.add(a);var b=a.Ra;b!==n&&this.qv(b)===n&&this.yx.add(b,a);b=a.Q;b!==n&&b.WB(a);b=a.U;b!==n&&b.SB(a);a.B=this}};
Vm.prototype.addLink=Vm.prototype.yI=function(a){if(a===n)return n;u&&w.i(a,U,Vm,"addLink:link");var b=a.ga,c=a.la,d=this.qv(a);d===n?(d=this.Pn(),d.Ra=a,b!==n&&(d.U=this.An(b)),c!==n&&(d.Q=this.An(c)),this.zn(d)):(d.U=b!==n?this.An(b):n,d.Q=c!==n?this.An(c):n);return d};Vm.prototype.deleteEdge=Vm.prototype.Rn=function(a){if(a!==n){u&&w.i(a,$m,Vm,"deleteEdge:edge");var b=a.Q;b!==n&&b.EC(a);b=a.U;b!==n&&b.DC(a);bn(this,a)}};function bn(a,b){b!==n&&a.pp.remove(b)&&(a.yx.remove(b.Ra),b.B=n)}
Vm.prototype.deleteLink=Vm.prototype.JJ=function(a){a!==n&&(u&&w.i(a,U,Vm,"deleteLink:link"),a=this.qv(a),a!==n&&this.Rn(a))};Vm.prototype.findEdge=Vm.prototype.qv=function(a){if(a===n)return n;u&&w.i(a,U,Vm,"findEdge:link");return this.yx.qa(a)};
Vm.prototype.linkVertexes=Vm.prototype.cm=function(a,b,c){if(a===n||b===n)return n;u&&(w.i(a,Zm,Vm,"linkVertexes:fromVertex"),w.i(b,Zm,Vm,"linkVertexes:toVertex"),w.i(c,U,Vm,"linkVertexes:link"));if(a.B===this&&b.B===this){var d=this.Pn();d.Ra=c;d.U=a;d.Q=b;this.zn(d);return d}return n};Vm.prototype.reverseEdge=Vm.prototype.Rv=function(a){if(a!==n){u&&w.i(a,$m,Vm,"reverseEdge:edge");var b=a.U,c=a.Q;b===n||c===n||(b.DC(a),c.EC(a),a.Rv(),b.WB(a),c.SB(a))}};
Vm.prototype.deleteSelfEdges=Vm.prototype.lv=function(){for(var a=[],b=this.mc.l;b.next();){var c=b.value;c.U===c.Q&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.Rn(a[c])};Vm.prototype.deleteArtificialVertexes=Vm.prototype.lG=function(){for(var a=[],b=this.ka.l;b.next();){var c=b.value;c.fb===n&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.FC(a[b]);a=[];for(b=this.mc.l;b.next();)c=b.value,c.Ra===n&&a.push(c);c=a.length;for(b=0;b<c;b++)this.Rn(a[b])};
Vm.prototype.splitIntoSubNetworks=Vm.prototype.WH=function(){this.lG();for(var a=[],b=this.mc.l;b.next();){var c=b.value;(c.U===n||c.Q===n)&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.Rn(a[c]);this.lv();a=new z(Vm);for(c=h;c;)for(var c=q,d=this.ka.l;d.next();)if(b=d.value,0<b.Rf.count||0<b.$e.count){c=this.Pb.createNetwork();a.add(c);cn(this,c,b);c=h;break}a.sort(function(a,b){return a===n||b===n||a===b?0:b.ka.count-a.ka.count});return a};
function cn(a,b,c){if(c!==n&&c.B!==b){an(a,c);b.Dk(c);for(var d=c.Hb;d.next();){var e=d.value;e.B!==b&&(bn(a,e),b.zn(e),cn(a,b,e.U))}for(d=c.Gb;d.next();)e=d.value,e.B!==b&&(bn(a,e),b.zn(e),cn(a,b,e.Q))}}Vm.prototype.getParts=Vm.prototype.findAllParts=Vm.prototype.mK=function(){for(var a=new ma(S),b=this.ka.l;b.next();)a.add(b.value.fb);for(b=this.mc.l;b.next();)a.add(b.value.Ra);return a};
function Zm(){w.jc(this);this.B=n;this.L=(new G(0,0,10,10)).freeze();this.K=(new F(5,5)).freeze();this.clear()}w.P("LayoutVertex",Zm);Zm.prototype.clear=function(){this.fb=n;this.Rf=new z($m);this.$e=new z($m)};Zm.prototype.toString=function(){return"LayoutVertex#"+w.ec(this)+(this.fb!==n?"("+this.fb.toString()+")":"")};w.g(Zm,"network",Zm.prototype.Oc);w.defineProperty(Zm,{Oc:"network"},t("B"),function(a){this.B!==a&&(a!==n&&w.i(a,Vm,Zm,"network"),this.B=a)});w.g(Zm,"node",Zm.prototype.Tg);
w.defineProperty(Zm,{Tg:"node"},t("fb"),function(a){if(this.fb!==a){u&&a!==n&&w.i(a,T,Zm,"node");this.fb=a;a.yi();var b=a.va,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.L.V(c,d,e,b);c=a.Yb;c!==a&&!(a instanceof xf)?(a=c.va,this.K.V(a.x+a.width/2,a.y+a.height/2)):this.K.V(e/2,b/2)}});w.g(Zm,"bounds",Zm.prototype.Fb);w.defineProperty(Zm,{Fb:"bounds"},t("L"),function(a){this.L.I(a)||(u&&w.i(a,G,Zm,"bounds"),this.L.Xa(a))});w.g(Zm,"focus",Zm.prototype.focus);
w.defineProperty(Zm,{focus:"focus"},t("K"),function(a){this.K.I(a)||(u&&w.i(a,F,Zm,"focus"),this.K.Xa(a))});w.g(Zm,"centerX",Zm.prototype.pa);w.defineProperty(Zm,{pa:"centerX"},function(){return this.L.x+this.K.x},function(a){var b=this.L;b.x+this.K.x!==a&&(u&&w.o(a,Zm,"centerX"),b.Ia(),b.x=a-this.K.x,b.freeze())});w.g(Zm,"centerY",Zm.prototype.ta);
w.defineProperty(Zm,{ta:"centerY"},function(){return this.L.y+this.K.y},function(a){var b=this.L;b.y+this.K.y!==a&&(u&&w.o(a,Zm,"centerY"),b.Ia(),b.y=a-this.K.y,b.freeze())});w.g(Zm,"focusX",Zm.prototype.wG);w.defineProperty(Zm,{wG:"focusX"},function(){return this.K.x},function(a){var b=this.K;b.x!==a&&(b.Ia(),b.x=a,b.freeze())});w.g(Zm,"focusY",Zm.prototype.xG);w.defineProperty(Zm,{xG:"focusY"},function(){return this.K.y},function(a){var b=this.K;b.y!==a&&(b.Ia(),b.y=a,b.freeze())});w.g(Zm,"x",Zm.prototype.x);
w.defineProperty(Zm,{x:"x"},function(){return this.L.x},function(a){var b=this.L;b.x!==a&&(b.Ia(),b.x=a,b.freeze())});w.g(Zm,"y",Zm.prototype.y);w.defineProperty(Zm,{y:"y"},function(){return this.L.y},function(a){var b=this.L;b.y!==a&&(b.Ia(),b.y=a,b.freeze())});w.g(Zm,"width",Zm.prototype.width);w.defineProperty(Zm,{width:"width"},function(){return this.L.width},function(a){var b=this.L;b.width!==a&&(b.Ia(),b.width=a,b.freeze())});w.g(Zm,"height",Zm.prototype.height);
w.defineProperty(Zm,{height:"height"},function(){return this.L.height},function(a){var b=this.L;b.height!==a&&(b.Ia(),b.height=a,b.freeze())});Zm.prototype.commit=Zm.prototype.cv=function(){var a=this.fb;a!==n&&a.move(this.Fb.position)};Zm.prototype.addSourceEdge=Zm.prototype.WB=function(a){a!==n&&(u&&w.i(a,$m,Zm,"addSourceEdge:edge"),this.Rf.contains(a)||this.Rf.add(a))};Zm.prototype.deleteSourceEdge=Zm.prototype.EC=function(a){a!==n&&(u&&w.i(a,$m,Zm,"deleteSourceEdge:edge"),this.Rf.remove(a))};
Zm.prototype.addDestinationEdge=Zm.prototype.SB=function(a){a!==n&&(u&&w.i(a,$m,Zm,"addDestinationEdge:edge"),this.$e.contains(a)||this.$e.add(a))};Zm.prototype.deleteDestinationEdge=Zm.prototype.DC=function(a){a!==n&&(u&&w.i(a,$m,Zm,"deleteDestinationEdge:edge"),this.$e.remove(a))};w.u(Zm,{VH:"sourceVertexes"},function(){for(var a=new ma(Zm),b=this.Hb;b.next();){var c=b.value.U;c!==n&&!a.contains(c)&&a.add(c)}return a.l});
w.u(Zm,{nG:"destinationVertexes"},function(){for(var a=new ma(Zm),b=this.Gb;b.next();){var c=b.value.Q;c!==n&&!a.contains(c)&&a.add(c)}return a.l});w.u(Zm,{ka:"vertexes"},function(){for(var a=new ma(Zm),b=this.Hb;b.next();){var c=b.value,c=c.U;c!==n&&!a.contains(c)&&a.add(c)}for(b=this.Gb;b.next();)c=b.value,c=c.Q,c!==n&&!a.contains(c)&&a.add(c);return a.l});w.u(Zm,{Hb:"sourceEdges"},function(){return this.Rf.l});w.u(Zm,{Gb:"destinationEdges"},function(){return this.$e.l});
w.u(Zm,{mc:"edges"},function(){for(var a=new z($m),b=this.Hb;b.next();){var c=b.value;a.add(c)}for(b=this.Gb;b.next();)c=b.value,a.add(c);return a.l});w.u(Zm,{tG:"edgesCount"},function(){return this.Rf.count+this.$e.count});var dn;Zm.standardComparer=dn=function(a,b){u&&w.i(a,Zm,Zm,"standardComparer:m");u&&w.i(b,Zm,Zm,"standardComparer:n");var c=a.fb,d=b.fb;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:d!==n?-1:0};
Zm.smartComparer=function(a,b){u&&w.i(a,Zm,Zm,"smartComparer:m");u&&w.i(b,Zm,Zm,"smartComparer:n");if(a!==n){if(b!==n){var c=a.fb,d=b.fb;if(c!==n){if(d!==n){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(i))return-1;if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return d!==n?-1:0}return 1}return b!==n?-1:0};function $m(){w.jc(this);this.B=n;this.clear()}w.P("LayoutEdge",$m);$m.prototype.clear=function(){this.Q=this.U=this.Ra=n};$m.prototype.toString=function(){return"LayoutEdge#"+w.ec(this)+(this.Ra!==n?"("+this.Ra.toString()+")":"")};w.g($m,"network",$m.prototype.Oc);
w.defineProperty($m,{Oc:"network"},t("B"),function(a){this.B!==a&&(u&&a!==n&&w.i(a,Vm,$m,"network"),this.B=a)});w.g($m,"link",$m.prototype.link);w.defineProperty($m,{link:"link"},t("Ra"),function(a){this.Ra!==a&&(u&&a!==n&&w.i(a,U,$m,"link"),this.Ra=a)});w.g($m,"fromVertex",$m.prototype.dz);w.defineProperty($m,{dz:"fromVertex"},t("U"),function(a){this.U!==a&&(u&&a!==n&&w.i(a,Zm,$m,"fromVertex"),this.U=a)});w.g($m,"toVertex",$m.prototype.aA);
w.defineProperty($m,{aA:"toVertex"},t("Q"),function(a){this.Q!==a&&(u&&a!==n&&w.i(a,Zm,$m,"toVertex"),this.Q=a)});$m.prototype.Rv=function(){var a=this.U;this.U=this.Q;this.Q=a};$m.prototype.commit=$m.prototype.cv=aa();$m.prototype.getOtherVertex=$m.prototype.DG=function(a){u&&w.i(a,Zm,$m,"getOtherVertex:v");return this.Q===a?this.U:this.U===a?this.Q:n};
function cj(){bi.call(this);this.hs=h;this.wr=this.xr=NaN;this.Qi=(new bb(NaN,NaN)).freeze();this.nh=(new bb(10,10)).freeze();this.Aa=sk;this.Rc=qk;this.uc=mk;this.rc=en}w.P("GridLayout",cj);w.Da(cj,bi);cj.prototype.cloneProtected=cj.prototype.xb=function(a){bi.prototype.xb.call(this,a);a.xr=this.xr;a.wr=this.wr;a.Qi=this.Qi.O();a.nh=this.nh.O();a.Aa=this.Aa;a.Rc=this.Rc;a.uc=this.uc;a.rc=this.rc};
cj.prototype.doLayout=cj.prototype.Kr=function(a){var b=this.h;b===n&&w.m("The diagram for this layout is not set.");this.fd=Ym(this,this.fd);var c=new ma(S);a===this.h?(Xm(this,c,a.Xk,h,n,h,q,h),Xm(this,c,a.links,h,n,h,q,h),Xm(this,c,a.Yk,h,n,h,q,h)):a===this.group&&Xm(this,c,a.Gc,q,n,h,q,h);for(a=c.copy().l;a.next();){var d=a.value;if(d instanceof U&&(d.ga!==n||d.la!==n))c.remove(d);else if(d.yi(),d instanceof xf)for(d=d.Gc;d.next();)c.remove(d.value)}c=c.qg();if(0!==c.length){switch(this.lg){case pk:c.reverse();
break;case mk:c.sort(this.xh);break;case nk:c.sort(this.xh),c.reverse()}d=this.TE;isNaN(d)&&(d=0);a=this.fA;a=isNaN(a)?Math.max(this.h.Ua.width-b.padding.left-b.padding.right,0):Math.max(this.fA,0);0>=d&&0>=a&&(d=1);var e=this.spacing.width;isFinite(e)||(e=0);var g=this.spacing.height;isFinite(g)||(g=0);b.hc("Layout");switch(this.Db){case tk:var i=Math.max(this.Kk.width,1);if(!isFinite(i))for(var j=i=0;j<c.length;j++)var k=c[j],l=k.xa,i=Math.max(i,l.width);var i=Math.max(i+e,1),m=Math.max(this.Kk.height,
1);if(!isFinite(m))for(j=m=0;j<c.length;j++)k=c[j],l=k.xa,m=Math.max(m,l.height);for(var m=Math.max(m+g,1),p=this.le,r=this.fd.x,s=r,v=this.fd.y,y=0,C=0,j=0;j<c.length;j++){var k=c[j],l=k.xa,E=Math.ceil((l.width+e)/i)*i,I=Math.ceil((l.height+g)/m)*m,D;switch(p){case rk:D=Math.abs(s-l.width)+r;break;default:D=s+l.width-r}if(0<d&&y>d-1||0<a&&0<y&&D>a)y=0,s=r,v+=C,C=0;C=Math.max(C,I);switch(p){case rk:l=-l.width;break;default:l=0}k.move(new F(s+l,v));switch(p){case rk:s-=E;break;default:s+=E}y++}break;
case sk:i=Math.max(this.Kk.width,1);for(k=j=y=v=0;k<c.length;k++)m=c[k],p=m.xa,r=Il(m,m.Yb,m.ag),v=Math.max(v,r.x),y=Math.max(y,p.width-r.x),j=Math.max(j,r.y);s=this.le;switch(s){case rk:v+=e;break;default:y+=e}var i=isFinite(i)?Math.max(i+e,1):Math.max(v+y,1),M=v=this.fd.x,y=this.fd.y,E=C=0,l=Math.max(this.Kk.height,1),I=j=0;D=h;for(k=0;k<c.length;k++){m=c[k];p=m.xa;r=Il(m,m.Yb,m.ag);if(0<C)switch(s){case rk:M=Math.floor((M-v-(p.width-r.x))/i)*i+v;break;default:M=Math.ceil((M-v+r.x)/i)*i+v}else switch(s){case rk:E=
M+r.x+p.width;break;default:E=M-r.x}var N;switch(s){case rk:N=-(M+r.x)+v+E;break;default:N=M+p.width-r.x-v-E}if(0<d&&C>d-1||0<a&&0<C&&N>a){for(M=0;M<C&&k!==C;M++){N=c[k-C+M];var Z=Il(N,N.Yb,N.ag);N.move(new F(N.position.x,N.position.y+j-Z.y))}I+=g;y=D?y+I:y+(I+j);C=I=j=0;M=v;D=q}j=Math.max(j,r.y);I=Math.max(I,p.height-r.y);isFinite(l)&&(I=Math.max(I,Math.max(p.height,l)-r.y));D?m.move(new F(M-r.x,y-r.y)):m.move(new F(M-r.x,y));switch(s){case rk:M-=r.x+e;break;default:M+=p.width-r.x+e}C++}for(M=0;M<
C&&k!==C;M++)N=c[k-C+M],Z=Il(N,N.Yb,N.ag),N.move(new F(N.position.x,N.position.y+j-Z.y))}b.ne("Layout");this.Pe=h}};w.g(cj,"wrappingWidth",cj.prototype.fA);w.defineProperty(cj,{fA:"wrappingWidth"},t("xr"),function(a){if(this.xr!==a&&(0<a||isNaN(a)))this.xr=a,this.hs=isNaN(a),this.F()});w.g(cj,"wrappingColumn",cj.prototype.TE);w.defineProperty(cj,{TE:"wrappingColumn"},t("wr"),function(a){if(this.wr!==a&&(0<a||isNaN(a)))this.wr=a,this.F()});w.g(cj,"cellSize",cj.prototype.Kk);
w.defineProperty(cj,{Kk:"cellSize"},t("Qi"),function(a){this.Qi.I(a)||(this.Qi.Xa(a),this.F())});w.g(cj,"spacing",cj.prototype.spacing);w.defineProperty(cj,{spacing:"spacing"},t("nh"),function(a){this.nh.I(a)||(this.nh.Xa(a),this.F())});w.g(cj,"alignment",cj.prototype.Db);w.defineProperty(cj,{Db:"alignment"},t("Aa"),function(a){if(this.Aa!==a&&(u&&w.i(a,ja,cj,"alignment"),a===sk||a===tk))this.Aa=a,this.F()});w.g(cj,"arrangement",cj.prototype.le);
w.defineProperty(cj,{le:"arrangement"},t("Rc"),function(a){if(this.Rc!==a&&(u&&w.i(a,ja,cj,"arrangement"),a===qk||a===rk))this.Rc=a,this.F()});w.g(cj,"sorting",cj.prototype.lg);w.defineProperty(cj,{lg:"sorting"},t("uc"),function(a){if(this.uc!==a&&(u&&w.i(a,ja,cj,"sorting"),a===ok||a===pk||a===mk||a===nk))this.uc=a,this.F()});w.g(cj,"comparer",cj.prototype.xh);w.defineProperty(cj,{xh:"comparer"},t("rc"),function(a){this.rc!==a&&(u&&w.k(a,"function",cj,"comparer"),this.rc=a,this.F())});var en;
cj.standardComparer=en=function(a,b){u&&w.i(a,S,cj,"standardComparer:a");u&&w.i(b,S,cj,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
cj.smartComparer=function(a,b){u&&w.i(a,S,cj,"standardComparer:a");u&&w.i(b,S,cj,"standardComparer:b");if(a!==n){if(b!==n){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(""!==d[e]&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(i))return-1;
if(0!==g-i)return g-i}}else if(""!==c[e])return 1;return""!==d[e]&&d[e]!==f?-1:0}return 1}return b!==n?-1:0};var tk;cj.Position=tk=w.s(cj,"Position",0);var sk;cj.Location=sk=w.s(cj,"Location",1);var qk;cj.LeftToRight=qk=w.s(cj,"LeftToRight",2);var rk;cj.RightToLeft=rk=w.s(cj,"RightToLeft",3);var ok;cj.Forward=ok=w.s(cj,"Forward",4);var pk;cj.Reverse=pk=w.s(cj,"Reverse",5);var mk;cj.Ascending=mk=w.s(cj,"Ascending",6);var nk;cj.Descending=nk=w.s(cj,"Descending",7);
function uk(){bi.call(this);this.$w=this.Em=this.$c=0;this.op=360;this.Zw=Gk;this.hk=0;this.OA=Gk;this.ft=this.Vf=this.KB=0;this.Pu=new fn;this.it=this.Cl=0;this.hF=600;this.Dq=NaN;this.To=1;this.Vd=0;this.Wd=360;this.Rc=Gk;this.da=Ck;this.uc=zk;this.rc=dn;this.nh=6;this.xq=Jk}w.P("CircularLayout",uk);w.Da(uk,bi);
uk.prototype.cloneProtected=uk.prototype.xb=function(a){bi.prototype.xb.call(this,a);a.Dq=this.Dq;a.To=this.To;a.Vd=this.Vd;a.Wd=this.Wd;a.Rc=this.Rc;a.da=this.da;a.uc=this.uc;a.rc=this.rc;a.nh=this.nh;a.xq=this.xq};uk.prototype.createNetwork=uk.prototype.iv=function(){var a=new gn;Wm(a,this);return a};
uk.prototype.doLayout=uk.prototype.Kr=function(a){this.Oc===n&&(this.Oc=this.makeNetwork(a));a=this.Oc.ka;if(1>=a.count)1==a.count&&(a=a.zb(),a.pa=0,a.ta=0);else{var b=new z(hn);b.Wf(a.l);var a=new z(hn),c=new z(hn),b=this.sort(b),a=new z(hn),c=new z(hn),d=this.Zw,e=this.OA,g=this.$c,i=this.Em,j=this.$w,k=this.op,l=this.hk,m=this.KB,p=this.Vf,r=this.ft,d=this.le,e=this.rs,g=this.UD;if(!isFinite(g)||0>=g)g=NaN;i=this.cC;if(!isFinite(i)||0>=i)i=1;j=this.mg;isFinite(j)||(j=0);k=this.Hh;if(!isFinite(k)||
360<k||1>k)k=360;l=this.spacing;isFinite(l)||(l=NaN);d===Hk&&e===Ik?d=Gk:d===Hk&&e!==Ik&&(e=Ik,d=this.le);if((this.direction===Ak||this.direction===Bk)&&this.lg!==zk){for(var s=0;!(s>=b.length);s+=2){a.add(b.oa(s));if(s+1>=b.length)break;c.add(b.oa(s+1))}this.direction===Ak?(this.le===Hk&&a.reverse(),b=new z(hn),b.Wf(a),b.Wf(c)):(this.le===Hk&&c.reverse(),b=new z(hn),b.Wf(c),b.Wf(a))}for(var v=b.length,y=m=0,s=0;s<b.length;s++){var p=j+k*y*(this.direction===Ck?1:-1)/v,C=b.oa(s).xf;isNaN(C)&&(C=jn(b.oa(s),
p));if(360>k&&(0===s||s===b.length-1))C/=2;m+=C;y++}if(isNaN(g)||d===Hk){isNaN(l)&&(l=6);if(d!==Gk&&d!==Hk){C=-Infinity;for(s=0;s<v;s++){var r=b.oa(s),E=b.oa(s===v-1?0:s+1);isNaN(r.xf)&&jn(r,0);isNaN(E.xf)&&jn(E,0);C=Math.max(C,(r.xf+E.xf)/2)}r=C+l;d===Ek?(p=2*Math.PI/v,g=(C+l)/p):g=kn(this,r*(360<=k?v:v-1),i,j*Math.PI/180,k*Math.PI/180)}else g=kn(this,m+(360<=k?v:v-1)*(d!==Hk?l:1.6*l),i,j*Math.PI/180,k*Math.PI/180);p=g*i}else if(p=g*i,y=ln(this,g,p,j*Math.PI/180,k*Math.PI/180),isNaN(l)){if(d===Gk||
d===Hk)l=(y-m)/(360<=k?v:v-1)}else if(d===Gk||d===Hk)s=(y-m)/(360<=k?v:v-1),s<l?(g=kn(this,m+l*(360<=k?v:v-1),i,j*Math.PI/180,k*Math.PI/180),p=g*i):l=s;else{C=-Infinity;for(s=0;s<v;s++)r=b.oa(s),E=b.oa(s===v-1?0:s+1),isNaN(r.xf)&&jn(r,0),isNaN(E.xf)&&jn(E,0),C=Math.max(C,(r.xf+E.xf)/2);r=C+l;s=kn(this,r*(360<=k?v:v-1),i,j*Math.PI/180,k*Math.PI/180);s>g?(g=s,p=g*i):r=y/(360<=k?v:v-1)}this.Zw=d;this.OA=e;this.$c=g;this.Em=i;this.$w=j;this.op=k;this.hk=l;this.KB=m;this.Vf=p;this.ft=r;c=[b,a,c];b=c[0];
a=c[1];c=c[2];d=this.Zw;e=this.$c;i=this.$w;j=this.op;k=this.hk;l=this.Vf;m=this.ft;if((this.direction===Ak||this.direction===Bk)&&d===Hk)mn(this,b,j,i-j/2,Ck);else if(this.direction===Ak||this.direction===Bk){g=0;switch(d){case Fk:g=180*nn(this,e,l,i,m)/Math.PI;break;case Gk:m=b=0;g=a.zb();g!==n&&(b=jn(g,Math.PI/2));g=c.zb();g!==n&&(m=jn(g,Math.PI/2));g=180*nn(this,e,l,i,k+(b+m)/2)/Math.PI;break;case Ek:g=j/b.length}if(this.direction===Ak){switch(d){case Fk:on(this,a,i,Dk);break;case Gk:pn(this,
a,i,Dk);break;case Ek:qn(this,a,j/2,i,Dk)}switch(d){case Fk:on(this,c,i+g,Ck);break;case Gk:pn(this,c,i+g,Ck);break;case Ek:qn(this,c,j/2,i+g,Ck)}}else{switch(d){case Fk:on(this,c,i,Dk);break;case Gk:pn(this,c,i,Dk);break;case Ek:qn(this,c,j/2,i,Dk)}switch(d){case Fk:on(this,a,i+g,Ck);break;case Gk:pn(this,a,i+g,Ck);break;case Ek:qn(this,a,j/2,i+g,Ck)}}}else switch(d){case Fk:on(this,b,i,this.direction);break;case Gk:pn(this,b,i,this.direction);break;case Ek:qn(this,b,j,i,this.direction);break;case Hk:mn(this,
b,j,i,this.direction)}}this.updateParts();this.Oc=n;this.Pe=h};function qn(a,b,c,d,e){for(var g=a.op,i=a.$c,a=a.Vf,d=d*Math.PI/180,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=d+(e===Ck?k*c/(360<=g?j:j-1):-(k*c)/j),m=b.oa(k),p=i*Math.tan(l)/a,p=Math.sqrt((i*i+a*a*p*p)/(1+p*p));m.pa=p*Math.cos(l);m.ta=p*Math.sin(l);m.Su=180*l/Math.PI}}
function pn(a,b,c,d){for(var e=a.$c,g=a.Vf,i=a.hk,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.oa(k),m=b.oa(k===j-1?0:k+1),p=g*Math.sin(c);l.pa=e*Math.cos(c);l.ta=p;l.Su=180*c/Math.PI;isNaN(l.xf)&&jn(l,0);isNaN(m.xf)&&jn(m,0);l=nn(a,e,g,d===Ck?c:-c,(l.xf+m.xf)/2+i);c+=d===Ck?l:-l}}function on(a,b,c,d){for(var e=a.$c,g=a.Vf,i=a.ft,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.oa(k);l.pa=e*Math.cos(c);l.ta=g*Math.sin(c);l.Su=180*c/Math.PI;l=nn(a,e,g,d===Ck?c:-c,i);c+=d===Ck?l:-l}}
function mn(a,b,c,d,e){var g=a.it,g=a.op;a.Cl=0;a.Pu=new fn;if(360>c){for(g=d+(e===Ck?g:-g);0>g;)g+=360;g%=360;180<g&&(g-=360);g*=Math.PI/180;a.it=g;rn(a,b,c,d,e)}else sn(a,b,c,d,e);a.Pu.cv(b)}
function sn(a,b,c,d,e){var g=a.$c,i=a.Vf,j=a.hk,k=a.Em,l=g*Math.cos(d*Math.PI/180),m=i*Math.sin(d*Math.PI/180),p=b.qg();if(3===p.length)p[0].pa=g*Math.cos(0),p[0].ta=i*Math.sin(0),p[1].pa=p[0].pa-p[0].width/2-p[1].width/2-j,p[1].y=p[0].y,p[2].pa=(p[0].pa+p[1].pa)/2,p[2].y=p[0].y-p[2].height-j;else if(4===p.length)p[0].pa=g*Math.cos(0),p[0].ta=i*Math.sin(0),p[2].pa=-p[0].pa,p[2].ta=p[0].ta,p[1].pa=0,p[1].y=Math.min(p[0].y,p[2].y)-p[1].height-j,p[3].pa=0,p[3].y=Math.max(p[0].y+p[0].height+j,p[2].y+
p[2].height+j);else{for(g=0;g<p.length;g++){p[g].pa=l;p[g].ta=m;if(g>=p.length-1)break;i=tn(a,l,m,p,g,e);i[0]||(i=un(a,l,m,p,g,e));l=i[1];m=i[2]}a.Cl++;if(!(23<a.Cl)){var l=p[0].pa,m=p[0].ta,g=p[p.length-1].pa,i=p[p.length-1].ta,r=Math.abs(l-g)-((p[0].width+p[p.length-1].width)/2+j),s=Math.abs(m-i)-((p[0].height+p[p.length-1].height)/2+j),j=0;1>Math.abs(s)?Math.abs(l-g)<(p[0].width+p[p.length-1].width)/2&&(j=0):j=0<s?s:1>Math.abs(r)?0:r;r=q;r=Math.abs(g)>Math.abs(i)?0<g!==m>i:0<i!==l<g;if(r=e===Ck?
r:!r)j=-Math.abs(j),j=Math.min(j,-p[p.length-1].width),j=Math.min(j,-p[p.length-1].height);l=a.Pu;if(0<j&&0>l.Im||Math.abs(j)<Math.abs(l.Im)&&!(0>j&&0<l.Im)){l.Im=j;l.Jl=[];l.xn=[];for(m=0;m<p.length;m++)l.Jl[m]=p[m].Fb.x,l.xn[m]=p[m].Fb.y}1<Math.abs(j)&&(a.$c=8>a.Cl?a.$c-j/(2*Math.PI):5>p.length&&10<j?a.$c/2:a.$c-(0<j?1.7:-2.3),a.Vf=a.$c*k,sn(a,b,c,d,e))}}}
function rn(a,b,c,d,e){for(var g=a.$c,i=a.Vf,j=a.Em,k=g*Math.cos(d*Math.PI/180),l=i*Math.sin(d*Math.PI/180),m=b.qg(),p=0;p<m.length;p++){m[p].pa=k;m[p].ta=l;if(p>=m.length-1)break;var r=tn(a,k,l,m,p,e);r[0]||(r=un(a,k,l,m,p,e));k=r[1];l=r[2]}a.Cl++;if(!(23<a.Cl)){b.oa(b.length-1);k=Math.atan2(l,k);k=e===Ck?a.it-k:k-a.it;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;g=k*(g+i)/2;i=a.Pu;if(Math.abs(g)<Math.abs(i.Im)){i.Im=g;i.Jl=[];i.xn=[];for(k=0;k<m.length;k++)i.Jl[k]=m[k].Fb.x,i.xn[k]=m[k].Fb.y}1<
Math.abs(g)&&(a.$c=8>a.Cl?a.$c-g/(2*Math.PI):a.$c-(0<g?1.7:-2.3),a.Vf=a.$c*j,rn(a,b,c,d,e))}}function tn(a,b,c,d,e,g){var i=a.$c,j=a.Vf,k=0,l=0,a=(d[e].width+d[e+1].width)/2+a.hk,m=q;if(0<=c!==(g===Ck)){if(k=b+a,k>i){k=b-a;if(k<-i)return[q,k,l];m=h}}else if(k=b-a,k<-i){k=b+a;if(k>i)return[q,k,l];m=h}l=Math.sqrt(1-Math.min(1,k*k/(i*i)))*j;0>c!==m&&(l=-l);return Math.abs(c-l)>(d[e].height+d[e+1].height)/2?[q,k,l]:[h,k,l]}
function un(a,b,c,d,e,g){var i=a.$c,j=a.Vf,k=0,l=0,a=(d[e].height+d[e+1].height)/2+a.hk,m=q;if(0<=b!==(g===Ck)){if(l=c-a,l<-j){l=c+a;if(l>j)return[q,k,l];m=h}}else if(l=c+a,l>j){l=c-a;if(l<-j)return[q,k,l];m=h}k=Math.sqrt(1-Math.min(1,l*l/(j*j)))*i;0>b!==m&&(k=-k);return Math.abs(b-k)>(d[e].width+d[e+1].width)/2?[q,k,l]:[h,k,l]}function fn(){this.Im=-Infinity;this.xn=this.Jl=n}
fn.prototype.cv=function(a){if(!(this.Jl===n||this.xn===n))for(var b=0;b<this.Jl.length;b++){var c=a.oa(b);c.x=this.Jl[b];c.y=this.xn[b]}};uk.prototype.commitLayout=uk.prototype.dv=function(){this.commitNodes();this.fs&&this.commitLinks()};uk.prototype.commitNodes=uk.prototype.Py=function(){for(var a=this.wF,b=this.B.ka.l,c;b.next();)c=b.value,c.x+=a.x,c.y+=a.y,c.commit()};uk.prototype.commitLinks=uk.prototype.Oy=function(){for(var a=this.B.mc.l;a.next();)a.value.commit()};
function ln(a,b,c,d,e){var g=a.hF;if(0.0010>Math.abs(a.Em-1))return d!==f&&e!==f?e*b:2*Math.PI*b;var a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,j;j=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var k=0;k<=g;k++)var l=Math.sin(d!==f&&e!==f?d+k*e/g:k*Math.PI/(2*g)),i=i+Math.sqrt(1-a*a*l*l)*j;return d!==f&&e!==f?(b>c?b:c)*i:4*(b>c?b:c)*i}function kn(a,b,c,d,e){return b/(d!==f&&e!==f?ln(a,1,c,d,e):ln(a,1,c))}
function nn(a,b,c,d,e){if(0.0010>Math.abs(a.Em-1))return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,a=2*Math.PI/(700*a.B.ka.count);b>c&&(d+=Math.PI/2);for(var j=0;;j++){var k=Math.sin(d+j*a),i=i+(b>c?b:c)*Math.sqrt(1-g*g*k*k)*a;if(i>=e)return j*a}return 0}
uk.prototype.sort=function(a){switch(this.lg){case xk:break;case yk:a.reverse();break;case vk:a.sort(this.xh);break;case wk:a.sort(this.xh);a.reverse();break;case zk:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new z(hn),c=0;c<a.length;c++){var e=-1,g=-1;if(0===c)for(var i=0;i<a.length;i++){var j=a.oa(i).tG;j>e&&(e=j,g=i)}else for(i=0;i<a.length;i++)j=b[i],j>e&&(e=j,g=i);d.add(a.oa(g));b[g]=-1;g=a.oa(g);e=g.Hb;for(g=g.Gb;e.next();)i=e.value,i=i.dz,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++;for(;g.next();)i=
g.value,i=i.aA,i=a.indexOf(i),0>i||0<=b[i]&&b[i]++}a=[];for(b=0;b<d.length;b++){j=d.oa(b);a[b]=[];for(var c=j.Gb,e=j.Hb,k,l;c.next();)k=c.value,l=d.indexOf(k.aA),l!==b&&0>a[b].indexOf(l)&&a[b].push(l);for(;e.next();)k=e.value,l=d.indexOf(k.dz),l!==b&&0>a[b].indexOf(l)&&a[b].push(l)}j=[];for(b=0;b<a.length;b++)j[b]=0;for(var c=[],m=[],p=[],e=[],g=new z(hn),i=b=0;b<a.length;b++){var r=a[b].length;if(1===r)e.push(b);else if(0===r)g.add(d.oa(b));else{if(0===i)c.push(b);else{for(var s=Infinity,v=Infinity,
y=-1,C=[],r=0;r<c.length;r++)if(0>a[c[r]].indexOf(c[r===c.length-1?0:r+1]))C.push(r===c.length-1?0:r+1);if(0===C.length)for(r=0;r<c.length;r++)C.push(r);for(r=0;r<C.length;r++){var E=C[r],I;l=a[b];k=m;I=p;for(var D=j,M=E,N=c,Z=0,va=0;va<k.length;va++){var ka=D[k[va]],ta=D[I[va]],Da=0,Ha=0;ka<ta?(Da=ka,Ha=ta):(Da=ta,Ha=ka);if(Da<M&&M<=Ha)for(ka=0;ka<l.length;ka++)ta=l[ka],0>N.indexOf(ta)||Da<D[ta]&&D[ta]<Ha||(Da===D[ta]||Ha===D[ta])||Z++;else for(ka=0;ka<l.length;ka++)ta=l[ka],0>N.indexOf(ta)||Da<
D[ta]&&D[ta]<Ha&&!(Da===D[ta]||Ha===D[ta])&&Z++}I=Z;for(k=D=0;k<a[b].length;k++)l=c.indexOf(a[b][k]),0<=l&&(l=Math.abs(E-(l>=E?l+1:l)),D+=l<c.length+1-l?l:c.length+1-l);for(k=0;k<m.length;k++)l=j[m[k]],M=j[p[k]],l>=E&&l++,M>=E&&M++,l>M&&(N=M,M=l,l=N),M-l<(c.length+2)/2===(l<E&&E<=M)&&D++;if(I<s||I===s&&D<v)s=I,v=D,y=E}c.splice(y,0,b);for(r=0;r<c.length;r++)j[c[r]]=r;for(r=0;r<a[b].length;r++)s=a[b][r],0<=c.indexOf(s)&&(m.push(b),p.push(s))}i++}}m=q;for(p=c.length;;){m=h;for(j=0;j<e.length;j++)if(b=
e[j],r=a[b][0],l=c.indexOf(r),0<=l){for(i=v=0;i<a[r].length;i++)s=a[r][i],s=c.indexOf(s),0>s||s===l||(y=s>l?s-l:l-s,v+=s<l!==y>p-y?1:-1);c.splice(0>v?l:l+1,0,b);e.splice(j,1);j--}else m=q;if(m)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)l=c[b],g.add(d.oa(l));return g;default:w.m("Invalid sorting type.")}return a};w.g(uk,"radius",uk.prototype.UD);w.defineProperty(uk,{UD:"radius"},t("Dq"),function(a){if(this.Dq!==a&&(0<a||isNaN(a)))this.Dq=a,this.F()});w.g(uk,"aspectRatio",uk.prototype.cC);
w.defineProperty(uk,{cC:"aspectRatio"},t("To"),function(a){this.To!==a&&0<a&&(this.To=a,this.F())});w.g(uk,"startAngle",uk.prototype.mg);w.defineProperty(uk,{mg:"startAngle"},t("Vd"),function(a){this.Vd!==a&&(this.Vd=a,this.F())});w.g(uk,"sweepAngle",uk.prototype.Hh);w.defineProperty(uk,{Hh:"sweepAngle"},t("Wd"),function(a){this.Wd!==a&&(this.Wd=0<a&&360>=a?a:360,this.F())});w.g(uk,"arrangement",uk.prototype.le);
w.defineProperty(uk,{le:"arrangement"},t("Rc"),function(a){if(this.Rc!==a&&(u&&w.i(a,ja,uk,"arrangement"),a===Hk||a===Gk||a===Fk||a===Ek))this.Rc=a,this.F()});w.g(uk,"direction",uk.prototype.direction);w.defineProperty(uk,{direction:"direction"},t("da"),function(a){if(this.da!==a&&(u&&w.i(a,ja,uk,"direction"),a===Ck||a===Dk||a===Ak||a===Bk))this.da=a,this.F()});w.g(uk,"sorting",uk.prototype.lg);
w.defineProperty(uk,{lg:"sorting"},t("uc"),function(a){if(this.uc!==a&&(u&&w.i(a,ja,uk,"sorting"),a===xk||a===yk||a===vk||wk||a===zk))this.uc=a,this.F()});w.g(uk,"comparer",uk.prototype.xh);w.defineProperty(uk,{xh:"comparer"},t("rc"),function(a){this.rc!==a&&(u&&w.k(a,"function",uk,"comparer"),this.rc=a,this.F())});w.g(uk,"spacing",uk.prototype.spacing);w.defineProperty(uk,{spacing:"spacing"},t("nh"),function(a){this.nh!==a&&(this.nh=a,this.F())});w.g(uk,"nodeDiameterFormula",uk.prototype.rs);
w.defineProperty(uk,{rs:"nodeDiameterFormula"},t("xq"),function(a){if(this.xq!==a&&(u&&w.i(a,ja,uk,"nodeDiameterFormula"),a===Jk||a===Ik))this.xq=a,this.F()});w.u(uk,{xF:"actualXRadius"},t("$c"));w.u(uk,{yF:"actualYRadius"},t("Vf"));w.u(uk,{vI:"actualSpacing"},t("hk"));w.u(uk,{wF:"actualCenter"},function(){return isNaN(this.fd.x)||isNaN(this.fd.y)?new F(0,0):new F(this.fd.x+this.xF,this.fd.y+this.yF)});var Gk;uk.ConstantSpacing=Gk=w.s(uk,"ConstantSpacing",0);var Fk;
uk.ConstantDistance=Fk=w.s(uk,"ConstantDistance",1);var Ek;uk.ConstantAngle=Ek=w.s(uk,"ConstantAngle",2);var Hk;uk.Packed=Hk=w.s(uk,"Packed",3);var Ck;uk.Clockwise=Ck=w.s(uk,"Clockwise",4);var Dk;uk.Counterclockwise=Dk=w.s(uk,"Counterclockwise",5);var Ak;uk.BidirectionalLeft=Ak=w.s(uk,"BidirectionalLeft",6);var Bk;uk.BidirectionalRight=Bk=w.s(uk,"BidirectionalRight",7);var xk;uk.Forwards=xk=w.s(uk,"Forwards",8);var yk;uk.Reverse=yk=w.s(uk,"Reverse",9);var vk;uk.Ascending=vk=w.s(uk,"Ascending",10);
var wk;uk.Descending=wk=w.s(uk,"Descending",11);var zk;uk.Optimized=zk=w.s(uk,"Optimized",12);var Jk;uk.Pythagorean=Jk=w.s(uk,"Pythagorean",13);var Ik;uk.Circular=Ik=w.s(uk,"Circular",14);function gn(){Vm.call(this)}w.P("CircularNetwork",gn);w.Da(gn,Vm);gn.prototype.createVertex=gn.prototype.wj=function(){return new hn};gn.prototype.createEdge=gn.prototype.Pn=function(){return new vn};function hn(){Zm.call(this);this.oA=this.Dm=NaN}w.P("CircularVertex",hn);w.Da(hn,Zm);
function jn(a,b){var c=a.B;if(c===n)return NaN;c=c.Pb;if(c===n)return NaN;if(c.le===Hk)if(c.rs===Ik)a.Dm=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.Dm=Math.min(a.height/c,a.width/d)}else a.Dm=c.rs===Ik?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.Dm}w.g(hn,"diameter",hn.prototype.xf);w.defineProperty(hn,{xf:"diameter"},t("Dm"),ba("Dm"));w.g(hn,"actualAngle",hn.prototype.Su);
w.defineProperty(hn,{Su:"actualAngle"},t("oA"),ba("oA"));function vn(){$m.call(this)}w.P("CircularEdge",vn);w.Da(vn,$m);function wn(){bi.call(this);this.Uf=n;this.Vp=0;this.Gf=(new bb(100,100)).freeze();this.So=q;this.Fd=this.mh=h;this.Ym=100;this.rp=1;this.Fp=1E3;this.kp=0.05;this.jp=50;this.hp=150;this.ip=0;this.fp=20;this.ep=25}w.P("ForceDirectedLayout",wn);w.Da(wn,bi);
wn.prototype.cloneProtected=wn.prototype.xb=function(a){bi.prototype.xb.call(this,a);a.Gf=this.Gf.O();a.So=this.So;a.mh=this.mh;a.Fd=this.Fd;a.Ym=this.Ym;a.rp=this.rp;a.Fp=this.Fp;a.kp=this.kp;a.jp=this.jp;a.hp=this.hp;a.ip=this.ip;a.fp=this.fp;a.ep=this.ep};wn.prototype.createNetwork=wn.prototype.iv=function(){var a=new xn;Wm(a,this);return a};
wn.prototype.doLayout=wn.prototype.Kr=function(a){this.Oc===n&&(this.Oc=this.makeNetwork(a));a=this.Jv;if(0<this.B.ka.count){this.B.lv();for(var b=this.B.ka.l;b.next();){var c=b.value;c.Si=this.electricalCharge(c);c.Xm=this.gravitationalMass(c)}for(b=this.B.mc.l;b.next();)c=b.value,c.fr=this.springStiffness(c),c.Zh=this.springLength(c);this.Vp=0;a:{if(!(3>this.B.ka.count)){var d=b=0,c=this.B.ka.l;c.next();for(var e=c.value.L;c.next();){if(c.value.L.Me(e)&&(b++,1<b)){b=h;break a}if(10<d)break;d++}}b=
q}if(b){b=this.B;for(d=b.WH().l;d.next();){this.Oc=e=d.value;for(c=this.B.ka.l;c.next();){for(var e=c.value,g=0,i=e.ka;i.next();)g++;e.ff=g;e.ij=1;e.jl=n;e.Hg=n}yn(this,0,a)}this.Oc=b;d.reset();u&&w.i(b,xn,wn,"arrangeConnectedGraphs:singletons");for(var c=this.Wu,j=d.count,e=h,i=g=0,k=[],l=0;l<j+b.ka.count+2;l++)k[l]=n;j=0;for(d.reset();d.next();){var m=d.value,l=this.oe(m);if(e)e=q,g=l.x+l.width/2,i=l.y+l.height/2,k[0]=new F(l.right+c.width,l.top),k[1]=new F(l.left,l.bottom+c.height),j=2;else{var p=
zn(k,j,new F(g,i),new bb(l.width,l.height),c),r=k[p],s=new F(r.x+l.width+c.width,r.y),v=new F(r.x,r.y+l.height+c.height);p+1<j&&k.splice(p+1,0,n);k[p]=s;k[p+1]=v;j++;p=r.x-l.x;l=r.y-l.y;for(m=m.ka.l;m.next();){var y=m.value;y.pa+=p;y.ta+=l}}}for(m=b.ka.l;m.next();)y=m.value,l=y.L,2>j?(g=l.x+l.width/2,i=l.y+l.height/2,k[0]=new F(l.right+c.width,l.top),k[1]=new F(l.left,l.bottom+c.height),j=2):(p=zn(k,j,new F(g,i),new bb(l.width,l.height),c),r=k[p],s=new F(r.x+l.width+c.width,r.y),v=new F(r.x,r.y+l.height+
c.height),p+1<j&&k.splice(p+1,0,n),k[p]=s,k[p+1]=v,j++,y.pa=r.x+y.width/2,y.ta=r.y+y.height/2);for(d.reset();d.next();){e=d.value;for(g=e.ka.l;g.next();)c=g.value,b.Dk(c);for(e=e.mc.l;e.next();)c=e.value,b.zn(c)}}An(this,a);this.updateParts()}this.Ym=a;this.Oc=n;this.Pe=h};wn.prototype.oe=function(a){u&&w.i(a,xn,wn,"computeBounds:net");for(var b=new G,c=h,a=a.ka.l;a.next();){var d=a.value;c?(c=q,b.set(d.L)):b.Ii(d.L)}return b};
function Bn(a,b,c){u&&(w.o(b,wn,"computeClusterLayoutIterations:level"),w.o(c,wn,"computeClusterLayoutIterations:maxiter"));return Math.max(Math.min(a.B.ka.count,c*(b+1)/11),10)}
function yn(a,b,c){u&&(w.o(b,wn,"layoutClusters:level"),w.o(c,wn,"layoutClusters:maxiter"));var d;u&&w.o(b,wn,"hasClusters:level");if(10<b||3>a.B.ka.count)d=q;else{a.Uf===n?a.Uf=new z(Cn):a.Uf.clear();a.Uf.Wf(a.B.ka);d=a.Uf;d.sort(function(a,b){return a===n||b===n||a===b?0:b.ff-a.ff});for(var e=d.count-1;0<=e&&1>=d.n[e].ff;)e--;d=1<d.count-e}if(d){d=a.bm;a.bm*=1+1/(b+1);u&&w.o(b,wn,"pushSubNetwork:level");for(var e=a.B,g=new xn,i=a.Uf.l;i.next();){var j=i.value;if(1<j.ff){g.Dk(j);var k={iA:j.ff,jA:j.width,
hA:j.height,VE:j.K.x,WE:j.K.y};j.Hg===n&&(j.Hg=new z);j.Hg.add(k);j.Sx=j.Hg.count-1}else break}for(var l=e.mc.l;l.next();){var m=l.value;if(m.U.B===g&&m.Q.B===g)g.zn(m);else if(m.U.B===g){var p=m.U.jl;p===n&&(p=new z(Cn),m.U.jl=p);p.add(m.Q);m.U.ff--;m.U.ij+=m.Q.ij}else m.Q.B===g&&(p=m.Q.jl,p===n&&(p=new z(Cn),m.Q.jl=p),p.add(m.U),m.Q.ff--,m.Q.ij+=m.U.ij)}for(l=g.mc.l;l.next();)m=l.value,m.Zh*=Math.max(1,sc((m.U.ij+m.Q.ij)/(4*b+1)));for(i=g.ka.l;i.next();)if(j=i.value,p=j.jl,p!==n&&0<p.count&&(k=
j.Hg.n[j.Hg.count-1],k=k.iA-j.ff,!(0>=k))){for(var r=0,s=0,v=p.count-k;v<p.count;v++){for(var y=p.n[v],m=n,l=y.mc.l;l.next();){var C=l.value;if(C.DG(y)===j){m=C;break}}m!==n&&(s+=m.Zh,r+=y.width*y.height)}p=j.pa;l=j.ta;m=j.width;v=j.height;y=j.K;C=m*v;1>C&&(C=1);r=sc((r+C+4*s*s/(k*k))/C);k=(r-1)*m/2;r=(r-1)*v/2;j.Fb=new G(p-y.x-k,l-y.y-r,m+2*k,v+2*r);j.focus=new F(y.x+k,y.y+r)}a.Oc=g;g=Math.max(0,Bn(a,b,c));a.Jv+=g;yn(a,b+1,c);An(a,g);u&&(w.i(e,xn,wn,"popNetwork:oldnet"),w.o(b,wn,"popNetwork:level"));
for(c=a.B.ka.l;c.next();)g=c.value,g.B=e,g.Hg!==n&&(i=g.Hg.n[g.Sx],g.ff=i.iA,j=i.VE,k=i.WE,g.Fb=new G(g.pa-j,g.ta-k,i.jA,i.hA),g.focus=new F(j,k),g.Sx--);for(c=a.B.mc.l;c.next();)c.value.B=e;a.Oc=e;c=a.Uf;c===n?c=new z(Cn):c.clear();c.Wf(e.ka);c.sort(function(a,b){return a===n||b===n||a===b?0:b.ff-a.ff});for(e=c.l;e.next();)Dn(a,e.value,b);a.bm=d}}
function Dn(a,b,c){u&&(w.i(b,Cn,wn,"surroundNode:oldnet"),w.o(c,wn,"surroundNode:level"));var d=b.jl;if(!(d===n||0===d.count)){var c=b.pa,e=b.ta,g=b.width,i=b.height;b.Hg!==n&&0<b.Hg.count&&(i=b.Hg.n[0],g=i.jA,i=i.hA);for(var g=sc(g*g+i*i)/2,j=q,k=i=0,l=0,m=b.ka.l;m.next();){var p=m.value;1>=p.ff?k++:(j=h,l++,i+=Math.atan2(b.ta-p.ta,b.pa-p.pa))}if(0!==k){0<l&&(i/=l);l=b=0;b=j?2*Math.PI/(k+1):2*Math.PI/k;0===k%2&&(l=b/2);1<d.count&&d.sort(function(a,b){return a===n||b===n||a===b?0:b.width*b.height-
a.width*a.height});j=0===k%2?0:1;for(m=d.l;m.next();)if(p=m.value,!(1<p.ff)&&!a.isFixed(p)){d=n;for(k=p.mc.l;k.next();){d=k.value;break}var k=p.width,r=p.height,k=sc(k*k+r*r)/2,d=g+d.Zh+k,k=i+(b*(j/2>>1)+l)*(0==j%2?1:-1);p.pa=c+d*Math.cos(k);p.ta=e+d*Math.sin(k);j++}}}}
function zn(a,b,c,d,e){var g=9E19,i=-1,j=0;a:for(;j<b;j++){var k=a[j],l=k.x-c.x,m=k.y-c.y,l=l*l+m*m;if(l<g){for(m=j-1;0<=m;m--)if(a[m].y>k.y&&a[m].x-k.x<d.width+e.width)continue a;for(m=j+1;m<b;m++)if(a[m].x>k.x&&a[m].y-k.y<d.height+e.height)continue a;i=j;g=l}}return i}wn.prototype.zF=function(a){var b=a.fb;if(b!==n)for(b=b.JC();b.next();){var c=b.value;if("Comment"===c.vd){var d=this.B.Le(c);d===n&&(d=this.B.An(c),d.Si=this.vC,c=this.B.cm(a,d,n),c!==n&&(c.Zh=this.wC))}}};
function En(a,b){u&&(w.i(a,Cn,wn,"getNodeDistance:vertexA"),w.i(b,Cn,wn,"getNodeDistance:vertexB"));var c=a.L,d=c.x,e=c.y,g=c.width,c=c.height,i=b.L,j=i.x,k=i.y,l=i.width,i=i.height;return d+g<j?e>k+i?(d=d+g-j,e=e-k-i,sc(d*d+e*e)):e+c<k?(d=d+g-j,e=e+c-k,sc(d*d+e*e)):j-(d+g):d>j+l?e>k+i?(d=d-j-l,e=e-k-i,sc(d*d+e*e)):e+c<k?(d=d-j-l,e=e+c-k,sc(d*d+e*e)):d-(j+l):e>k+i?e-(k+i):e+c<k?k-(e+c):0.1}
function An(a,b){u&&w.o(b,wn,"performIterations:num");a.Uf=n;for(var c=a.Vp+b;a.Vp<c&&!(a.Vp++,!Fn(a)););a.Uf=n}
function Fn(a){a.Uf===n&&(a.Uf=new z(Cn),a.Uf.Wf(a.B.ka));var b=a.Uf;if(0>=b.count)return q;var c=b.n[0];c.Qd=0;c.Rd=0;for(var d=c.pa,e=d,g=c.ta,i=g,c=1;c<b.count;c++){var j=b.n[c];j.Qd=0;j.Rd=0;var k=j.pa,j=j.ta,d=Math.min(d,k),e=Math.max(e,k),g=Math.min(g,j),i=Math.max(i,j)}(i=e-d>i-g)?b.sort(function(a,b){return a===n||b===n||a===b?0:a.pa-b.pa}):b.sort(function(a,b){return a===n||b===n||a===b?0:a.ta-b.ta});for(var l=0,m=k=0,c=0;c<b.count;c++){j=b.n[c];d=j.pa;e=j.ta;k=j.Si*a.electricalFieldX(d,
e);m=j.Si*a.electricalFieldY(d,e);j.Qd+=k;j.Rd+=m;k=j.Xm*a.gravitationalFieldX(d,e);m=j.Xm*a.gravitationalFieldY(d,e);j.Qd+=k;j.Rd+=m;for(var p=a.bm,r=c+1;r<b.count;r++)if(g=b.n[r],g!==j){var m=g.pa,s=g.ta;if(Math.abs(d-m)>p){if(i)break}else if(Math.abs(e-s)>p){if(!i)break}else{var v=En(j,g);1>v?(d>m?(k=Math.abs(g.L.right-j.L.left),k=Gn(1+k)):d<m?(k=Math.abs(g.L.left-j.L.right),k=-Gn(1+k)):(k=Math.max(g.width,j.width),k=Gn(1+k)-k/2),e>s?(m=Math.abs(g.L.bottom-j.L.top),m=Gn(1+m)):d<m?(m=Math.abs(g.L.top-
j.L.bottom),m=-Gn(1+m)):(m=Math.max(g.height,j.height),m=Gn(1+m)-m/2)):(l=-(j.Si*g.Si)/(v*v),k=l*((m-d)/v),m=l*((s-e)/v));j.Qd+=k;j.Rd+=m;g.Qd-=k;g.Rd-=m}}}for(c=a.B.mc.l;c.next();)i=c.value,j=i.U,g=i.Q,d=j.pa,e=j.ta,m=g.pa,s=g.ta,v=En(j,g),1>v?(k=(d>m?1:-1)*Gn(1+Math.max(g.width,j.width)),m=(e>s?1:-1)*Gn(1+Math.max(g.height,j.height))):(l=i.fr*(v-i.Zh),k=l*((m-d)/v),m=l*((s-e)/v)),j.Qd+=k,j.Rd+=m,g.Qd-=k,g.Rd-=m;c=0;d=Math.max(a.bm/20,50);for(e=0;e<b.count;e++)j=b.n[e],a.isFixed(j)||(g=j.Qd,i=j.Rd,
g<-d?g=-d:g>d&&(g=d),i<-d?i=-d:i>d&&(i=d),j.pa+=g,j.ta+=i,c=Math.max(c,g*g+i*i));return c>a.$y*a.$y}function Gn(a){return Math.floor(a*Math.random())}wn.prototype.commitLayout=wn.prototype.dv=function(){this.Tz();this.commitNodes();this.fs&&this.commitLinks()};wn.prototype.Tz=function(){if(this.jm)for(var a=this.B.mc.l;a.next();){var b=a.value.Ra;b!==n&&(b.kb=Ib,b.ob=Ib)}};
wn.prototype.commitNodes=wn.prototype.Py=function(){var a=0,b=0;if(this.aC)var b=this.oe(this.B),c=this.fd,a=c.x-b.x,b=c.y-b.y;for(var c=new G,d=this.B.ka.l;d.next();){var e=d.value;if(0!==a||0!==b)c.set(e.L),c.x+=a,c.y+=b,e.Fb=c;e.commit()}};wn.prototype.commitLinks=wn.prototype.Oy=function(){for(var a=this.B.mc.l;a.next();)a.value.commit()};wn.prototype.springStiffness=wn.prototype.eM=function(a){a=a.fr;return!isNaN(a)?a:this.AC};
wn.prototype.springLength=wn.prototype.dM=function(a){a=a.Zh;return!isNaN(a)?a:this.zC};wn.prototype.electricalCharge=wn.prototype.jK=function(a){a=a.Si;return!isNaN(a)?a:this.xC};wn.prototype.electricalFieldX=wn.prototype.kK=ca(0);wn.prototype.electricalFieldY=wn.prototype.lK=ca(0);wn.prototype.gravitationalMass=wn.prototype.MK=function(a){a=a.Xm;return!isNaN(a)?a:this.yC};wn.prototype.gravitationalFieldX=wn.prototype.KK=ca(0);wn.prototype.gravitationalFieldY=wn.prototype.LK=ca(0);
wn.prototype.isFixed=wn.prototype.mD=function(a){return a.qx};w.u(wn,{EJ:"currentIteration"},t("Vp"));w.g(wn,"arrangementSpacing",wn.prototype.Wu);w.defineProperty(wn,{Wu:"arrangementSpacing"},t("Gf"),function(a){this.Gf.I(a)||(this.Gf.Xa(a),this.F())});w.g(wn,"arrangesToOrigin",wn.prototype.aC);w.defineProperty(wn,{aC:"arrangesToOrigin"},t("So"),function(a){this.So!==a&&(this.So=a,this.F())});w.g(wn,"setsPortSpots",wn.prototype.jm);
w.defineProperty(wn,{jm:"setsPortSpots"},t("mh"),function(a){this.mh!==a&&(this.mh=a,this.F())});w.g(wn,"comments",wn.prototype.Ny);w.defineProperty(wn,{Ny:"comments"},t("Fd"),function(a){this.Fd!==a&&(this.Fd=a,this.F())});w.g(wn,"maxIterations",wn.prototype.Jv);w.defineProperty(wn,{Jv:"maxIterations"},t("Ym"),function(a){this.Ym!==a&&0<=a&&(this.Ym=a,this.F())});w.g(wn,"epsilonDistance",wn.prototype.$y);
w.defineProperty(wn,{$y:"epsilonDistance"},t("rp"),function(a){this.rp!==a&&0<a&&(this.rp=a,this.F())});w.g(wn,"infinityDistance",wn.prototype.bm);w.defineProperty(wn,{bm:"infinityDistance"},t("Fp"),function(a){this.Fp!==a&&1<a&&(this.Fp=a,this.F())});w.g(wn,"defaultSpringStiffness",wn.prototype.AC);w.defineProperty(wn,{AC:"defaultSpringStiffness"},t("kp"),function(a){this.kp!==a&&(this.kp=a,this.F())});w.g(wn,"defaultSpringLength",wn.prototype.zC);
w.defineProperty(wn,{zC:"defaultSpringLength"},t("jp"),function(a){this.jp!==a&&(this.jp=a,this.F())});w.g(wn,"defaultElectricalCharge",wn.prototype.xC);w.defineProperty(wn,{xC:"defaultElectricalCharge"},t("hp"),function(a){this.hp!==a&&(this.hp=a,this.F())});w.g(wn,"defaultGravitationalMass",wn.prototype.yC);w.defineProperty(wn,{yC:"defaultGravitationalMass"},t("ip"),function(a){this.ip!==a&&(this.ip=a,this.F())});w.g(wn,"defaultCommentSpringLength",wn.prototype.wC);
w.defineProperty(wn,{wC:"defaultCommentSpringLength"},t("fp"),function(a){this.fp!==a&&(this.fp=a,this.F())});w.g(wn,"defaultCommentElectricalCharge",wn.prototype.vC);w.defineProperty(wn,{vC:"defaultCommentElectricalCharge"},t("ep"),function(a){this.ep!==a&&(this.ep=a,this.F())});function xn(){Vm.call(this)}w.P("ForceDirectedNetwork",xn);w.Da(xn,Vm);xn.prototype.createVertex=xn.prototype.wj=function(){return new Cn};xn.prototype.createEdge=xn.prototype.Pn=function(){return new Hn};
function Cn(){Zm.call(this);this.qx=q;this.Xm=this.Si=NaN;this.ij=this.ff=this.Rd=this.Qd=0;this.Hg=this.jl=n;this.Sx=0}w.P("ForceDirectedVertex",Cn);w.Da(Cn,Zm);w.g(Cn,"isFixed",Cn.prototype.mD);w.defineProperty(Cn,{mD:"isFixed"},t("qx"),ba("qx"));w.g(Cn,"charge",Cn.prototype.ZF);w.defineProperty(Cn,{ZF:"charge"},t("Si"),ba("Si"));w.g(Cn,"mass",Cn.prototype.hH);w.defineProperty(Cn,{hH:"mass"},t("Xm"),ba("Xm"));w.g(Cn,"forceX",Cn.prototype.yG);w.defineProperty(Cn,{yG:"forceX"},t("Qd"),ba("Qd"));
w.g(Cn,"forceY",Cn.prototype.zG);w.defineProperty(Cn,{zG:"forceY"},t("Rd"),ba("Rd"));function Hn(){$m.call(this);this.Zh=this.fr=NaN}w.P("ForceDirectedEdge",Hn);w.Da(Hn,$m);w.g(Hn,"stiffness",Hn.prototype.YH);w.defineProperty(Hn,{YH:"stiffness"},t("fr"),ba("fr"));w.g(Hn,"length",Hn.prototype.length);w.defineProperty(Hn,{length:"length"},t("Zh"),ba("Zh"));
function X(){bi.call(this);this.md=this.Hd=25;this.da=0;this.zm=In;this.Um=Jn;this.Om=Kn;this.ul=4;this.rm=Ln;this.hi=Mn;this.mh=h;this.pb=this.St=this.ab=-1;this.df=this.nq=0;this.pd=this.bf=this.Bg=this.hh=this.od=n;this.uq=0;this.au=this.Al=n;this.Mf=0;this.vq=n;this.Dg=[];this.Dg.length=100}w.P("LayeredDigraphLayout",X);w.Da(X,bi);
X.prototype.cloneProtected=X.prototype.xb=function(a){bi.prototype.xb.call(this,a);a.Hd=this.Hd;a.md=this.md;a.da=this.da;a.zm=this.zm;a.Um=this.Um;a.Om=this.Om;a.ul=this.ul;a.rm=this.rm;a.hi=this.hi;a.mh=this.mh};X.prototype.createNetwork=X.prototype.iv=function(){var a=new Nn;Wm(a,this);return a};
X.prototype.doLayout=X.prototype.Kr=function(a){this.Oc===n&&(this.Oc=this.makeNetwork(a));this.fd=Ym(this,this.fd);this.St=-1;this.df=this.nq=0;this.vq=this.au=this.Al=n;for(a=0;a<this.Dg.length;a++)this.Dg[a]=n;if(0<this.B.ka.count){this.B.lv();for(a=this.B.mc.l;a.next();)a.value.wb=q;switch(this.zm){default:case On:var b=0,c=this.B.ka.count-1,a=[];a.length=c+1;for(var d=this.B.ka.l;d.next();)d.value.Ca=h;for(;Pn(this.B)!==n;){for(d=Qn(this.B);d!==n;)a[c]=d,c--,d.Ca=q,d=Qn(this.B);for(d=Rn(this.B);d!==
n;)a[b]=d,b++,d.Ca=q,d=Rn(this.B);u&&w.i(this.B,Vm,X,"greedyCycleRemovalFindNodeMaxDegDiff:network");for(var d=n,e=0,g=this.B.ka.l;g.next();){var i=g.value;if(i.Ca){for(var j=0,k=i.Gb;k.next();)k.value.Q.Ca&&j++;for(var k=0,l=i.Hb;l.next();)l.value.U.Ca&&k++;if(d===n||e<j-k)d=i,e=j-k}}d!==n&&(a[b]=d,b++,d.Ca=q)}for(b=0;b<this.B.ka.count;b++)a[b].ea=b;for(a=this.B.mc.l;a.next();)b=a.value,b.U.ea>b.Q.ea&&(this.B.Rv(b),b.wb=h);break;case In:for(b=this.B.ka.l;b.next();)b.value.gk=-1,b.value.Gm=-1;for(a=
this.B.mc.l;a.next();)a.value.up=q;this.uq=0;for(b.reset();b.next();)0===b.value.Hb.count&&Sn(this,b.value);for(b.reset();b.next();)-1===b.value.gk&&Sn(this,b.value);for(a.reset();a.next();)b=a.value,b.up||(c=b.U,d=c.Gm,e=b.Q,g=e.Gm,e.gk<c.gk&&d<g&&(this.B.Rv(b),b.wb=h))}for(a=this.B.ka.l;a.next();)b=a.value,b.G=-1;this.ab=-1;this.assignLayers();for(a.reset();a.next();)this.ab=Math.max(this.ab,a.value.G);c=this.B.mc.l;for(b=[];c.next();)a=c.value,a.Ca=q,b.push(a);for(c=0;c<b.length;c++)if(a=b[c],
!a.Ca&&!((a.U.fb===n||a.Q.fb===n)&&a.U.G===a.Q.G)){g=j=i=k=0;e=a.U;d=a.Q;if(a.Ra!==n){j=a.Ra;if(j===n)continue;var m=e.fb,g=d.fb;if(m===n||g===n)continue;var p=j.ga,i=j.la,r=j.Nc,k=j.Bd;a.wb&&(j=p,l=r,p=i,r=k,i=j,k=l);var l=e.K.copy(),j=a.Q.K.copy(),s=a.wb?d.L.copy():e.L.copy(),r=isNaN(s.x)?l.copy():Il(p,r,Ob);m!==p&&(!isNaN(s.x)&&p.nb())&&(m=e.L.copy(),isNaN(m.x)||(r.x+=s.x-m.x,r.y+=s.y-m.y));m=a.wb?e.L.copy():d.L.copy();k=isNaN(m.x)?j.copy():Il(i,k,Ob);g!==i&&(!isNaN(m.x)&&i.nb())&&(g=d.L,isNaN(g.x)||
(k.x+=m.x-g.x,k.y+=m.y-g.y));90===this.da||270===this.da?(g=Math.round((r.x-l.x)/this.md),i=r.x,j=Math.round((k.x-j.x)/this.md),k=k.x):(g=Math.round((r.y-l.y)/this.md),i=r.y,j=Math.round((k.y-j.y)/this.md),k=k.y);a.jf=g;a.kf=i;a.Ee=j;a.mf=k}else a.jf=0,a.kf=0,a.Ee=0,a.mf=0;l=e.G;r=d.G;m=a;u&&w.i(m,Tn,X,"_goesAround:edge");p=0;s=m.Ra;if(s!==n){if(s.Nc!==n){var v=s.ga;nm(s)===Un(this,m,h)?p+=1:this.jm&&v!==n&&1===v.ports.count&&m.wb&&(p+=1)}s.Bd!==n&&(v=s.la,om(s)===Un(this,m,q)?p+=2:this.jm&&v!==n&&
1===v.ports.count&&m.wb&&(p+=2))}m=1===p||3===p?h:q;if(p=2===p||3===p?h:q)s=this.B.wj(),s.fb=n,s.el=1,s.G=l,s.ej=e,this.B.Dk(s),e=this.B.cm(e,s,a.Ra),e.Ca=q,e.wb=a.wb,e.jf=g,e.Ee=0,e.kf=i,e.mf=0,e=s;v=1;m&&v--;if(l-r>v&&0<l){a.Ca=q;s=this.B.wj();s.fb=n;s.el=2;s.G=l-1;this.B.Dk(s);e=this.B.cm(e,s,a.Ra);e.Ca=h;e.wb=a.wb;e.jf=p?0:g;e.Ee=0;e.kf=p?0:i;e.mf=0;e=s;for(l--;l-r>v&&0<l;)s=this.B.wj(),s.fb=n,s.el=3,s.G=l-1,this.B.Dk(s),e=this.B.cm(e,s,a.Ra),e.Ca=h,e.wb=a.wb,e.jf=0,e.Ee=0,e.kf=0,e.mf=0,e=s,l--;
e=this.B.cm(s,d,a.Ra);e.Ca=!m;m&&(s.ej=d);e.wb=a.wb;e.jf=0;e.Ee=j;e.kf=0;e.mf=k}else a.Ca=h}b=this.od=[];for(c=0;c<=this.ab;c++)b[c]=0;for(a=this.B.ka.l;a.next();)a.value.ea=-1;this.initializeIndices();this.St=-1;for(c=this.df=this.nq=0;c<=this.ab;c++)b[c]>b[this.df]&&(this.St=b[c]-1,this.df=c),b[c]<b[this.nq]&&(this.nq=c);this.vq=[];for(c=0;c<b.length;c++)this.vq[c]=[];for(a.reset();a.next();)c=a.value,b=c.G,this.vq[b][c.ea]=c;this.pb=-1;for(a=0;a<=this.ab;a++){b=Vn(this,a);c=0;d=this.od[a];for(e=
0;e<d;e++)g=b[e],c+=Wn(this,g,h),g.Y=c,c+=1,c+=Wn(this,g,q);this.pb=Math.max(this.pb,c-1);Xn(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.Oc=n;this.Pe=h};function Yn(a){u&&w.i(a,$m,X,"linkMinLength:edge");for(var b=a.Q,c=0,a=a.U.Gb;a.next();)a.value.Q===b&&c++;return 1<c?2:1}function Zn(a){u&&w.i(a,$m,X,"linkLengthWeight:edge");return 1}function $n(a){u&&w.i(a,$m,X,"linkStraightenWeight:edge");var b=a.U.fb,a=a.Q.fb;return b===n&&a===n?8:b===n||a===n?4:1}
function ao(a,b,c){u&&(w.i(b,bo,X,"nodeMinLayerSpace:v"),w.k(c,"boolean",X,"nodeMinLayerSpace:topleft"));return b.fb===n?0:90===a.da||270===a.da?c?b.K.y+10:b.L.height-b.K.y+10:c?b.K.x+10:b.L.width-b.K.x+10}
function Wn(a,b,c){u&&(w.i(b,bo,X,"nodeMinColumnSpace:v"),w.k(c,"boolean",X,"nodeMinColumnSpace:topleft"));if(b.fb===n)return 0;var d=c?b.Ex:b.Dx;if(d!==f)return d;d=a.da;return 90===d||270===d?c?b.Ex=b.K.x/a.md+1|0:b.Dx=(b.L.width-b.K.x)/a.md+1|0:c?b.Ex=b.K.y/a.md+1|0:b.Dx=(b.L.height-b.K.y)/a.md+1|0}function co(a){a.Al===n&&(a.Al=[]);for(var b=0,c=a.B.ka.l,d;c.next();)d=c.value,a.Al[b]=d.G,b++,a.Al[b]=d.Y,b++,a.Al[b]=d.ea,b++;return a.Al}
function eo(a,b){u&&w.i(b,Array,X,"restoreLayout:layout");for(var c=0,d=a.B.ka.l,e;d.next();)e=d.value,e.G=b[c],c++,e.Y=b[c],c++,e.ea=b[c],c++}
function fo(a,b,c){u&&(w.o(b,X,"crossingMatrix:unfixedLayer"),w.o(c,X,"crossingMatrix:direction"));var d=Vn(a,b),e=a.od[b];a.au||(a.au=[]);for(var g=a.au,i,j=0;j<e;j++){i=0;var k=d[j],l=k.ej,m,p;if(l!==n&&l.G===k.G)if(k=l.ea,k>j)for(p=j+1;p<k;p++)m=d[p],(m.ej!==l||m.el!==l.el)&&i++;else for(p=j-1;p>k;p--)m=d[p],(m.ej!==l||m.el!==l.el)&&i++;var r,s,v,y,C,E;if(0<=c){k=d[j].Rf;for(l=0;l<k.count;l++)if(r=k.n[l],r.Ca&&r.U.G!==b){m=r.U.ea;p=r.mf;r=r.kf;for(s=l+1;s<k.count;s++)v=k.n[s],v.Ca&&v.U.G!==b&&
(y=v.U.ea,C=v.mf,v=v.kf,p<C&&(m>y||m===y&&r>v)&&i++,C<p&&(y>m||y===m&&v>r)&&i++)}}if(0>=c){k=d[j].$e;for(l=0;l<k.count;l++)if(r=k.n[l],r.Ca&&r.Q.G!==b){m=r.Q.ea;p=r.mf;r=r.kf;for(s=l+1;s<k.count;s++)v=k.n[s],v.Ca&&v.Q.G!==b&&(y=v.Q.ea,C=v.mf,v=v.kf,r<v&&(m>y||m===y&&p>C)&&i++,v<r&&(y>m||y===m&&C>p)&&i++)}}g[j*e+j]=i;for(k=j+1;k<e;k++){var I=0,D=0;if(0<=c){i=d[j].Rf;E=d[k].Rf;for(l=0;l<i.count;l++)if(r=i.n[l],r.Ca&&r.U.G!==b){m=r.U.ea;r=r.kf;for(s=0;s<E.count;s++)v=E.n[s],v.Ca&&v.U.G!==b&&(y=v.U.ea,
v=v.kf,(m<y||m===y&&r<v)&&D++,(y<m||y===m&&v<r)&&I++)}}if(0>=c){i=d[j].$e;E=d[k].$e;for(l=0;l<i.count;l++)if(r=i.n[l],r.Ca&&r.Q.G!==b){m=r.Q.ea;p=r.mf;for(s=0;s<E.count;s++)v=E.n[s],v.Ca&&v.Q.G!==b&&(y=v.Q.ea,C=v.mf,(m<y||m===y&&p<C)&&D++,(y<m||y===m&&C<p)&&I++)}}g[j*e+k]=I;g[k*e+j]=D}}Xn(a,b,d);return g}X.prototype.countCrossings=X.prototype.DJ=function(){var a,b=0,c,d;for(a=0;a<=this.ab;a++){c=fo(this,a,1);d=this.od[a];for(var e=0;e<d;e++)for(var g=e;g<d;g++)b+=c[e*d+g]}return b};
function ho(a){u&&w.k(h,"boolean",X,"countBends:weighted");for(var b=0,c=0;c<=a.ab;c++){var d=a,e=c;u&&(w.o(e,X,"bends:unfixedLayer"),w.o(1,X,"bends:direction"),w.k(h,"boolean",X,"bends:weighted"));for(var g=Vn(d,e),i=d.od[e],j=0,k=f,k=0;k<i;k++){var l=g[k].$e,m,p,r;if("undefined"!==typeof l)for(var s=0;s<l.count;s++)m=l.n[s],m.Ca&&m.Q.G!==e&&(p=m.U.Y+m.jf,r=m.Q.Y+m.Ee,j+=(Math.abs(p-r)+1)*$n(m))}Xn(d,e,g);b+=j}return b}
X.prototype.normalize=function(){var a=Infinity;this.pb=-1;for(var b=this.B.ka.l,c;b.next();)c=b.value,a=Math.min(a,c.Y-Wn(this,c,h)),this.pb=Math.max(this.pb,c.Y+Wn(this,c,q));for(b.reset();b.next();)b.value.Y-=a;this.pb-=a};
function qo(a,b,c){u&&(w.o(b,X,"barycenters:unfixedLayer"),w.o(c,X,"barycenters:direction"));var d=Vn(a,b),e=a.od[b],g=[],i;for(i=0;i<e;i++){var j=d[i],k=n;0>=c&&(k=j.Rf);var l=n;0<=c&&(l=j.$e);var m=0,p=0,r=j.ej;r!==n&&r.G===j.G&&(m+=r.Y-1,p++);if(k!==n)for(r=0;r<k.count;r++){var j=k.n[r],s=j.U;j.Ca&&(!j.wb&&s.G!==b)&&(m+=s.Y+j.jf,p++)}if(l!==n)for(k=0;k<l.count;k++)j=l.n[k],r=j.Q,j.Ca&&(!j.wb&&r.G!==b)&&(m+=r.Y+j.Ee,p++);g[i]=0===p?-1:m/p}Xn(a,b,d);return g}
function xo(a,b,c){u&&(w.o(b,X,"medians:unfixedLayer"),w.o(c,X,"medians:direction"));for(var d=Vn(a,b),e=a.od[b],g=[],i=0;i<e;i++){var j=d[i],k=n;0>=c&&(k=j.Rf);var l=n;0<=c&&(l=j.$e);var m=0,p=[],r=j.ej;r!==n&&r.G===j.G&&(p[m]=r.Y-1,m++);if(k!==n)for(r=0;r<k.count;r++){var j=k.n[r],s=j.U;j.Ca&&(!j.wb&&s.G!==b)&&(p[m]=s.Y+j.jf,m++)}if(l!==n)for(k=0;k<l.count;k++)j=l.n[k],r=j.Q,j.Ca&&(!j.wb&&r.G!==b)&&(p[m]=r.Y+j.Ee,m++);0===m?g[i]=-1:(p.sort(function(a,b){return a-b}),l=m>>1,g[i]=m&1?p[l]:p[l-1]+
p[l]>>1)}Xn(a,b,d);return g}function yo(a,b,c,d,e,g){u&&(w.i(b,bo,X,"tightComponentUnset:v"),w.o(c,X,"tightComponentUnset:component"),w.o(d,X,"tightComponentUnset:unset"),w.k(e,"boolean",X,"tightComponentUnset:forward"),w.k(g,"boolean",X,"tightComponentUnset:backward"));if(b.Kb===d){b.Kb=c;var i,j;if(e)for(var k=b.Gb;k.next();){var l=k.value.Q;i=b.G-l.G;j=Yn(k.value);i===j&&yo(a,l,c,d,e,g)}if(g)for(k=b.Hb;k.next();)l=k.value.U,i=l.G-b.G,j=Yn(k.value),i===j&&yo(a,l,c,d,e,g)}}
function zo(a,b,c,d,e,g){u&&(w.i(b,bo,X,"componentUnset:v"),w.o(c,X,"componentUnset:component"),w.o(d,X,"componentUnset:unset"),w.k(e,"boolean",X,"componentUnset:forward"),w.k(g,"boolean",X,"componentUnset:backward"));if(b.Kb===d){b.Kb=c;if(e)for(var i=b.Gb,j;i.next();)j=i.value.Q,zo(a,j,c,d,e,g);if(g)for(b=b.Hb;b.next();)i=b.value.U,zo(a,i,c,d,e,g)}}function Pn(a){u&&w.i(a,Vm,X,"greedyCycleRemovalFindNode:network");for(a=a.ka.l;a.next();){var b=a.value;if(b.Ca)return b}return n}
function Qn(a){u&&w.i(a,Vm,X,"greedyCycleRemovalFindSink:network");for(a=a.ka.l;a.next();){var b=a.value;if(b.Ca){for(var c=h,d=b.Gb;d.next();)if(d.value.Q.Ca){c=q;break}if(c)return b}}return n}function Rn(a){u&&w.i(a,Vm,X,"greedyCycleRemovalFindSource:network");for(a=a.ka.l;a.next();){var b=a.value;if(b.Ca){for(var c=h,d=b.Hb;d.next();)if(d.value.U.Ca){c=q;break}if(c)return b}}return n}
function Sn(a,b){u&&w.i(b,bo,X,"depthFirstSearchCycleRemovalVisit:v");b.gk=a.uq;a.uq++;for(var c=b.Gb;c.next();){var d=c.value,e=d.Q;-1===e.gk&&(d.up=h,Sn(a,e))}b.Gm=a.uq;a.uq++}
X.prototype.assignLayers=X.prototype.CI=function(){switch(this.Um){case Ao:Bo(this);break;case Co:for(var a,b=this.B.ka.l;b.next();)a=Do(this,b.value),this.ab=Math.max(a,this.ab);for(b.reset();b.next();)a=b.value,a.G=this.ab-a.G;break;default:case Jn:Bo(this);for(b=this.B.ka.l;b.next();)b.value.Ca=q;for(b.reset();b.next();)0===b.value.Hb.count&&Eo(this,b.value);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.G);this.ab=-1;for(b.reset();b.next();)b.value.G-=a,this.ab=Math.max(this.ab,b.value.G)}};
function Bo(a){for(var b=a.B.ka.l;b.next();){var c=Fo(a,b.value);a.ab=Math.max(c,a.ab)}}function Fo(a,b){u&&w.i(b,bo,X,"longestPathSinkLayeringLength:v");var c=0;if(-1===b.G){for(var d=b.Gb;d.next();)var e=d.value,g=Yn(e),c=Math.max(c,Fo(a,e.Q)+g);b.G=c}else c=b.G;return c}function Do(a,b){u&&w.i(b,bo,X,"longestPathSourceLayeringLength:v");var c=0;if(-1===b.G){for(var d,e,g=b.Hb;g.next();)e=g.value,d=Yn(e),c=Math.max(c,Do(a,e.U)+d);b.G=c}else c=b.G;return c}
function Eo(a,b){u&&w.i(b,bo,X,"optimalLinkLengthLayeringDepthFirstSearch:v");if(!b.Ca){b.Ca=h;for(var c=b.Gb;c.next();)Eo(a,c.value.Q);u&&w.i(b,bo,X,"optimalLinkLengthLayeringPull:v");for(c=a.B.ka.l;c.next();)c.value.Kb=-1;for(var d=b.Hb;d.next();){var e=d.value,g=Yn(e);e.U.G-e.Q.G>g&&yo(a,e.U,0,-1,h,q)}for(yo(a,b,1,-1,h,h);0!==b.Kb;){for(var g=0,d=Infinity,i=0,j=n,k=a.B.ka.l;k.next();){var l=k.value;if(1===l.Kb){for(var m=0,p=q,r=l.Hb;r.next();){var e=r.value,s=e.U,m=m+Zn(e);1!==s.Kb&&(g+=Zn(e),
s=s.G-l.G,e=Yn(e),d=Math.min(d,s-e))}for(e=l.Gb;e.next();)r=e.value,s=r.Q,m-=Zn(r),1!==s.Kb?g-=Zn(r):p=h;if((j===n||m<i)&&!p)j=l,i=m}}if(0<g){for(c.reset();c.next();)g=c.value,1===g.Kb&&(g.G+=d);b.Kb=0}else j.Kb=0}u&&w.i(b,bo,X,"optimalLinkLengthLayeringPush:v");for(c=a.B.ka.l;c.next();)c.value.Kb=-1;for(yo(a,b,1,-1,h,q);0!==b.Kb;){g=0;d=Infinity;i=0;j=n;for(k=a.B.ka.l;k.next();)if(l=k.value,1===l.Kb){m=0;p=q;for(e=l.Hb;e.next();)r=e.value.U,m+=Zn(e.value),1!==r.Kb?g+=Zn(e.value):p=h;for(e=k.value.Gb;e.next();)r=
e.value,s=r.Q,m-=Zn(r),1!==s.Kb&&(g-=Zn(r),s=l.G-s.G,r=Yn(r),d=Math.min(d,s-r));if((j===n||m>i)&&!p)j=l,i=m}if(0>g){for(c.reset();c.next();)g=c.value,1===g.Kb&&(g.G-=d);b.Kb=0}else j.Kb=0}}}function Un(a,b,c){u&&(w.i(b,Tn,X,"_oppositeSpotDir:edge"),w.k(c,"boolean",X,"_oppositeSpotDir:from"));return 90===a.da?c&&!b.wb||!c&&b.wb?Kb:Qb:180===a.da?c&&!b.wb||!c&&b.wb?Zb:Tb:270===a.da?c&&!b.wb||!c&&b.wb?Qb:Kb:c&&!b.wb||!c&&b.wb?Tb:Zb}
X.prototype.initializeIndices=X.prototype.WK=function(){switch(this.Om){default:case Go:for(var a,b=this.B.ka.l;b.next();){var c=b.value;a=c.G;c.ea=this.od[a];this.od[a]++}break;case Kn:b=this.B.ka.l;for(a=this.ab;0<=a;a--){for(;b.next();)b.value.G===a&&-1===b.value.ea&&Ho(this,b.value);b.reset()}break;case Io:b=this.B.ka.l;for(a=0;a<=this.ab;a++){for(;b.next();)b.value.G===a&&-1===b.value.ea&&Jo(this,b.value);b.reset()}}};
function Ho(a,b){u&&w.i(b,bo,X,"depthFirstOutInitializeIndicesVisit:v");var c=b.G;b.ea=a.od[c];a.od[c]++;for(var c=b.$e.qg(),d=h,e;d;){d=q;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.jf>i.jf&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.Ca&&(d=d.Q,-1===d.ea&&Ho(a,d))}
function Jo(a,b){u&&w.i(b,bo,X,"depthFirstInInitializeIndicesVisit:v");var c=b.G;b.ea=a.od[c];a.od[c]++;for(var c=b.Rf.qg(),d=h,e;d;){d=q;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];g.Ee>i.Ee&&(d=h,c[e]=i,c[e+1]=g)}}for(e=0;e<c.length;e++)d=c[e],d.Ca&&(d=d.U,-1===d.ea&&Jo(a,d))}
X.prototype.reduceCrossings=X.prototype.NL=function(){var a=this.countCrossings(),b=co(this),c,d,e;for(c=0;c<this.ul;c++){for(d=0;d<=this.ab;d++)Ko(this,d,1),Lo(this,d,1,1);e=this.countCrossings();e<a&&(a=e,b=co(this));for(d=this.ab;0<=d;d--)Ko(this,d,-1),Lo(this,d,-1,-1);e=this.countCrossings();e<a&&(a=e,b=co(this))}eo(this,b);for(c=0;c<this.ul;c++){for(d=0;d<=this.ab;d++)Ko(this,d,0),Lo(this,d,0,0);e=this.countCrossings();e<a&&(a=e,b=co(this));for(d=this.ab;0<=d;d--)Ko(this,d,0),Lo(this,d,0,0);
e=this.countCrossings();e<a&&(a=e,b=co(this))}eo(this,b);var g,i,j;switch(this.rm){case Mo:break;case No:for(j=a+1;(d=this.countCrossings())<j;){j=d;for(c=this.ab;0<=c;c--)for(i=0;i<=c;i++){for(g=h;g;){g=q;for(d=c;d>=i;d--)g=Lo(this,d,-1,-1)||g}e=this.countCrossings();e>=a?eo(this,b):(a=e,b=co(this));for(g=h;g;){g=q;for(d=c;d>=i;d--)g=Lo(this,d,1,1)||g}e=this.countCrossings();e>=a?eo(this,b):(a=e,b=co(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=Lo(this,d,1,1)||g}e>=a?eo(this,b):(a=e,b=co(this));for(g=
h;g;){g=q;for(d=i;d<=c;d++)g=Lo(this,d,-1,-1)||g}e>=a?eo(this,b):(a=e,b=co(this));for(g=h;g;){g=q;for(d=c;d>=i;d--)g=Lo(this,d,0,0)||g}e>=a?eo(this,b):(a=e,b=co(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=Lo(this,d,0,0)||g}e>=a?eo(this,b):(a=e,b=co(this))}}break;default:case Ln:c=this.ab;i=0;for(j=a+1;(d=this.countCrossings())<j;){j=d;for(g=h;g;){g=q;for(d=c;d>=i;d--)g=Lo(this,d,-1,-1)||g}e=this.countCrossings();e>=a?eo(this,b):(a=e,b=co(this));for(g=h;g;){g=q;for(d=c;d>=i;d--)g=Lo(this,d,1,1)||g}e=
this.countCrossings();e>=a?eo(this,b):(a=e,b=co(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=Lo(this,d,1,1)||g}e>=a?eo(this,b):(a=e,b=co(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=Lo(this,d,-1,-1)||g}e>=a?eo(this,b):(a=e,b=co(this));for(g=h;g;){g=q;for(d=c;d>=i;d--)g=Lo(this,d,0,0)||g}e>=a?eo(this,b):(a=e,b=co(this));for(g=h;g;){g=q;for(d=i;d<=c;d++)g=Lo(this,d,0,0)||g}e>=a?eo(this,b):(a=e,b=co(this))}}eo(this,b)};
function Ko(a,b,c){u&&(w.o(b,X,"medianBarycenterCrossingReduction:unfixedLayer"),w.o(c,X,"medianBarycenterCrossingReduction:direction"));for(var d=Vn(a,b),e=a.od[b],g=xo(a,b,c),i=qo(a,b,c),c=0;c<e;c++)-1===i[c]&&(i[c]=d[c].Y),-1===g[c]&&(g[c]=d[c].Y);for(var j=h,k;j;){j=q;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&i[c+1]<i[c])j=h,k=g[c],g[c]=g[c+1],g[c+1]=k,k=i[c],i[c]=i[c+1],i[c+1]=k,k=d[c],d[c]=d[c+1],d[c+1]=k}for(c=g=0;c<e;c++)k=d[c],k.ea=c,g+=Wn(a,k,h),k.Y=g,g+=1,g+=Wn(a,k,q);Xn(a,b,d)}
function Lo(a,b,c,d){u&&(w.o(b,X,"adjacentExchangeCrossingReductionBendStraighten:unfixedLayer"),w.o(c,X,"adjacentExchangeCrossingReductionBendStraighten:directionCR"),w.k(q,"boolean",X,"adjacentExchangeCrossingReductionBendStraighten:straighten"),w.o(d,X,"adjacentExchangeCrossingReductionBendStraighten:directionBS"));var d=Vn(a,b),e=a.od[b],c=fo(a,b,c),g,i;i=[];for(g=0;g<e;g++)i[g]=-1;var j;j=[];for(g=0;g<e;g++)j[g]=-1;for(var k=q,l=h;l;){l=q;for(g=0;g<e-1;g++){var m=c[d[g].ea*e+d[g+1].ea],p=c[d[g+
1].ea*e+d[g].ea],r=0,s=0,v=d[g].Y,y=d[g+1].Y,C=Wn(a,d[g],h),E=Wn(a,d[g],q),I=Wn(a,d[g+1],h),D=Wn(a,d[g+1],q),C=v-C+I,E=y-E+D,M=d[g].Hb.l;for(M.reset();M.next();)if(D=M.value,D.Ca&&D.U.G===b){D=D.U;for(I=0;d[I]!==D;)I++;I<g&&(r+=2*(g-I),s+=2*(g+1-I));I===g+1&&(r+=1);I>g+1&&(r+=4*(I-g),s+=4*(I-(g+1)))}M=d[g].Gb.l;for(M.reset();M.next();)if(D=M.value,D.Ca&&D.Q.G===b){D=D.Q;for(I=0;d[I]!==D;)I++;I===g+1&&(s+=1)}M=d[g+1].Hb.l;for(M.reset();M.next();)if(D=M.value,D.Ca&&D.U.G===b){D=D.U;for(I=0;d[I]!==D;)I++;
I<g&&(r+=2*(g+1-I),s+=2*(g-I));I===g&&(s+=1);I>g+1&&(r+=4*(I-(g+1)),s+=4*(I-g))}M=d[g+1].Gb.l;for(M.reset();M.next();)if(D=M.value,D.Ca&&D.Q.G===b){D=D.Q;for(I=0;d[I]!==D;)I++;I===g&&(r+=1)}var I=D=0,M=i[d[g].ea],N=j[d[g].ea],Z=i[d[g+1].ea],va=j[d[g+1].ea];-1!==M&&(D+=Math.abs(M-v),I+=Math.abs(M-E));-1!==N&&(D+=Math.abs(N-v),I+=Math.abs(N-E));-1!==Z&&(D+=Math.abs(Z-y),I+=Math.abs(Z-C));-1!==va&&(D+=Math.abs(va-y),I+=Math.abs(va-C));if(s<r-0.5||s===r&&p<m-0.5||s===r&&p===m&&I<D-0.5)l=k=h,d[g].Y=E,
d[g+1].Y=C,m=d[g],d[g]=d[g+1],d[g+1]=m}}for(g=0;g<e;g++)d[g].ea=g;Xn(a,b,d);return k}
X.prototype.straightenAndPack=X.prototype.lM=function(){var a,b,c=0!==(this.hi&Oo);a=this.hi===Mn;1E3<this.B.mc.count&&!a&&(c=q);if(c){b=[];for(a=0;a<=this.ab;a++)b[a]=0;for(var d=this.B.ka.l,e,g;d.next();)e=d.value,a=e.G,g=e.Y,e=Wn(this,e,q),b[a]=Math.max(b[a],g+e);for(d.reset();d.next();)e=d.value,a=e.G,g=e.Y,e.Y=(8*(this.pb-b[a])>>1)+8*g;this.pb*=8}if(0!==(this.hi&Po))for(b=h;b;){b=q;for(a=this.df+1;a<=this.ab;a++)b=Qo(this,a,1)||b;for(a=this.df-1;0<=a;a--)b=Qo(this,a,-1)||b;b=Qo(this,this.df,
0)||b}if(0!==(this.hi&Ro)){for(a=this.df+1;a<=this.ab;a++)So(this,a,1);for(a=this.df-1;0<=a;a--)So(this,a,-1);So(this,this.df,0)}c&&(To(this,-1),To(this,1));if(0!==(this.hi&Po))for(b=h;b;){b=q;b=Qo(this,this.df,0)||b;for(a=this.df+1;a<=this.ab;a++)b=Qo(this,a,0)||b;for(a=this.df-1;0<=a;a--)b=Qo(this,a,0)||b}};function Qo(a,b,c){u&&(w.o(b,X,"bendStraighten:unfixedLayer"),w.o(c,X,"bendStraighten:direction"));for(var d=q;Uo(a,b,c);)d=h;return d}
function Uo(a,b,c){u&&(w.o(b,X,"shiftbendStraighten:unfixedLayer"),w.o(c,X,"shiftbendStraighten:direction"));var d,e=Vn(a,b),g=a.od[b],i=qo(a,b,-1);if(0<c)for(d=0;d<g;d++)i[d]=-1;var j=qo(a,b,1);if(0>c)for(d=0;d<g;d++)j[d]=-1;for(var k=q,l=h;l;){l=q;for(d=0;d<g;d++){var m=e[d].Y,p=Wn(a,e[d],h),r=Wn(a,e[d],q),p=0>d-1||m-e[d-1].Y-1>p+Wn(a,e[d-1],q)?m-1:m,r=d+1>=g||e[d+1].Y-m-1>r+Wn(a,e[d+1],h)?m+1:m,s=0,v=0,y=0,C,E,I,D;if(0>=c)for(var M=e[d].Hb.l;M.next();)C=M.value,C.Ca&&C.U.G!==b&&(E=$n(C),I=C.jf,
D=C.Ee,C=C.U.Y,s+=(Math.abs(m+D-(C+I))+1)*E,v+=(Math.abs(p+D-(C+I))+1)*E,y+=(Math.abs(r+D-(C+I))+1)*E);if(0<=c)for(M=e[d].Gb.l;M.next();)C=M.value,C.Ca&&C.Q.G!==b&&(E=$n(C),I=C.jf,D=C.Ee,C=C.Q.Y,s+=(Math.abs(m+I-(C+D))+1)*E,v+=(Math.abs(p+I-(C+D))+1)*E,y+=(Math.abs(r+I-(C+D))+1)*E);D=I=E=0;C=i[e[d].ea];M=j[e[d].ea];-1!==C&&(E+=Math.abs(C-m),I+=Math.abs(C-p),D+=Math.abs(C-r));-1!==M&&(E+=Math.abs(M-m),I+=Math.abs(M-p),D+=Math.abs(M-r));if(v<s||v===s&&I<E)l=k=h,e[d].Y=p;if(y<s||y===s&&D<E)l=k=h,e[d].Y=
r}}Xn(a,b,e);a.normalize();return k}
function So(a,b,c){u&&(w.o(b,X,"medianStraighten:unfixedLayer"),w.o(c,X,"medianStraighten:direction"));for(var d=Vn(a,b),e=a.od[b],g=xo(a,b,c),i=[],c=0;c<e;c++)i[c]=g[c];for(g=h;g;){g=q;for(c=0;c<e;c++){var j=d[c].Y,k=Wn(a,d[c],h),l=Wn(a,d[c],q),m=0,p;-1===i[c]?0===c&&c===e-1?m=j:0===c?(p=d[c+1].Y,m=p-j===l+Wn(a,d[c+1],h)?j-1:j):c===e-1?(p=d[c-1].Y,m=j-p===k+Wn(a,d[c-1],q)?j+1:j):(p=d[c-1].Y,k=p+Wn(a,d[c-1],q)+k+1,p=d[c+1].Y,l=p-Wn(a,d[c+1],h)-l-1,m=(k+l)/2|0):0===c&&c===e-1?m=i[c]:0===c?(p=d[c+1].Y,
l=p-Wn(a,d[c+1],h)-l-1,m=Math.min(i[c],l)):c===e-1?(p=d[c-1].Y,k=p+Wn(a,d[c-1],q)+k+1,m=Math.max(i[c],k)):(p=d[c-1].Y,k=p+Wn(a,d[c-1],q)+k+1,p=d[c+1].Y,l=p-Wn(a,d[c+1],h)-l-1,k<i[c]&&i[c]<l?m=i[c]:k>=i[c]?m=k:l<=i[c]&&(m=l));m!==j&&(g=h,d[c].Y=m)}}Xn(a,b,d);a.normalize()}
function Vo(a,b){u&&(w.o(b,X,"packAux:column"),w.o(1,X,"packAux:direction"));for(var c=h,d=a.B.ka.l,e;d.next();){e=d.value;var g=Wn(a,e,h),i=Wn(a,e,q);if(e.Y-g<=b&&e.Y+i>=b){c=q;break}}g=q;if(c)for(d.reset();d.next();)e=d.value,e.Y>b&&(e.Y-=1,g=h);return g}
function Wo(a,b){u&&(w.o(b,X,"tightPackAux:column"),w.o(1,X,"tightPackAux:direction"));var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.ab;d++)e[d]=q,g[d]=q;for(var i=a.B.ka.l;i.next();){d=i.value;var j=d.Y-Wn(a,d,h),k=d.Y+Wn(a,d,q);j<=b&&k>=b&&(e[d.G]=h);j<=c&&k>=c&&(g[d.G]=h)}j=h;c=q;for(d=0;d<=a.ab;d++)j=j&&!(e[d]&&g[d]);if(j)for(i.reset();i.next();)d=i.value,d.Y>b&&(d.Y-=1,c=h);return c}
function To(a,b){u&&w.o(b,X,"componentPack:direction");for(var c=0;c<=a.pb;c++)for(;Vo(a,c););a.normalize();for(c=0;c<a.pb;c++)for(;Wo(a,c););a.normalize();var d,e,g,i;if(0<b)for(c=0;c<=a.pb;c++){d=co(a);e=ho(a);for(g=e+1;e<g;)g=e,Xo(a,c,1),i=ho(a),i>e?eo(a,d):i<e&&(e=i,d=co(a))}if(0>b)for(c=a.pb;0<=c;c--){d=co(a);e=ho(a);for(g=e+1;e<g;)g=e,Xo(a,c,-1),i=ho(a),i>e?eo(a,d):i<e&&(e=i,d=co(a))}a.normalize()}
function Xo(a,b,c){u&&(w.o(b,X,"componentPackAux:column"),w.o(c,X,"componentPackAux:direction"));a.Mf=0;for(var d=a.B.ka.l,e;d.next();)d.value.Kb=-1;if(0<c)for(d.reset();d.next();)e=d.value,e.Y-Wn(a,e,h)<=b&&(e.Kb=a.Mf);if(0>c)for(d.reset();d.next();)e=d.value,e.Y+Wn(a,e,q)>=b&&(e.Kb=a.Mf);a.Mf++;for(d.reset();d.next();)e=d.value,-1===e.Kb&&(zo(a,e,a.Mf,-1,h,h),a.Mf++);b=[];for(e=0;e<a.Mf*a.Mf;e++)b[e]=q;var g=[];for(e=0;e<(a.ab+1)*(a.pb+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var i=
e.G,j=Math.max(0,e.Y-Wn(a,e,h)),k=Math.min(a.pb,e.Y+Wn(a,e,q));j<=k;j++)g[i*(a.pb+1)+j]=e.Kb}for(e=0;e<=a.ab;e++){if(0<c)for(j=0;j<a.pb;j++)-1!==g[e*(a.pb+1)+j]&&(-1!==g[e*(a.pb+1)+j+1]&&g[e*(a.pb+1)+j]!==g[e*(a.pb+1)+j+1])&&(b[g[e*(a.pb+1)+j]*a.Mf+g[e*(a.pb+1)+j+1]]=h);if(0>c)for(j=a.pb;0<j;j--)-1!==g[e*(a.pb+1)+j]&&(-1!==g[e*(a.pb+1)+j-1]&&g[e*(a.pb+1)+j]!==g[e*(a.pb+1)+j-1])&&(b[g[e*(a.pb+1)+j]*a.Mf+g[e*(a.pb+1)+j-1]]=h)}g=[];for(e=0;e<a.Mf;e++)g[e]=h;i=new z("number");for(i.add(0);0!==i.count;)if(k=
i.n[i.count-1],i.Te(i.count-1),g[k]){g[k]=q;for(e=0;e<a.Mf;e++)b[k*a.Mf+e]&&i.yc(0,e)}if(0<c)for(d.reset();d.next();)e=d.value,g[e.Kb]&&(e.Y-=1);if(0>c)for(d.reset();d.next();)e=d.value,g[e.Kb]&&(e.Y+=1)}X.prototype.commitLayout=X.prototype.dv=function(){if(this.jm){var a,b;270===this.da?(a=Sb,b=$b):90===this.da?(a=$b,b=Sb):180===this.da?(a=Tb,b=Zb):(a=Zb,b=Tb);for(var c=this.B.mc.l,d;c.next();)d=c.value.Ra,d!==n&&(d.kb=a,d.ob=b)}this.commitNodes();this.fs&&this.commitLinks()};
X.prototype.commitNodes=X.prototype.Py=function(){this.hh=[];this.Bg=[];this.bf=[];this.pd=[];for(var a=0;a<=this.ab;a++)this.hh[a]=0,this.Bg[a]=0,this.bf[a]=0,this.pd[a]=0;for(var a=this.B.ka.l,b,c;a.next();)b=a.value,c=b.G,this.hh[c]=Math.max(this.hh[c],ao(this,b,h)),this.Bg[c]=Math.max(this.Bg[c],ao(this,b,q));b=0;for(var d=this.Hd,e=0;e<=this.ab;e++)c=d,0>=this.hh[e]+this.Bg[e]&&(c=0),0<e&&(b+=c/2),90===this.da||0===this.da?(b+=this.Bg[e],this.bf[e]=b,b+=this.hh[e]):(b+=this.hh[e],this.bf[e]=
b,b+=this.Bg[e]),e<this.ab&&(b+=c/2),this.pd[e]=b;d=this.fd.copy();for(e=0;e<=this.ab;e++)270===this.da?(this.bf[e]=d.y+this.bf[e],this.pd[e]=d.y+this.pd[e]):90===this.da?(this.bf[e]=d.y+b-this.bf[e],this.pd[e]=d.y+b-this.pd[e]):180===this.da?(this.bf[e]=d.x+this.bf[e],this.pd[e]=d.x+this.pd[e]):(this.bf[e]=d.x+b-this.bf[e],this.pd[e]=d.x+b-this.pd[e]);for(a.reset();a.next();){b=a.value;c=b.G;var g=b.Y|0;270===this.da||90===this.da?(e=d.x+this.md*g,c=this.bf[c]):(e=this.bf[c],c=d.y+this.md*g);b.pa=
e;b.ta=c;b.commit()}};
X.prototype.commitLinks=X.prototype.Oy=function(){for(var a=this.B.mc.l,b,c;a.next();)c=a.value.Ra,"undefined"!==typeof c&&c!==n&&(c.$k(),c.Mn(),c.ti());for(a.reset();a.next();)c=a.value.Ra,"undefined"!==typeof c&&c!==n&&c.cA();for(a.reset();a.next();)if(b=a.value,c=b.Ra){c.$k();var d=c,e=d.ga,g=d.la,i=d.Nc,j=d.Bd;if(b.Ca){if(c.wf===fk&&4===c.ja){b.wb&&(d=e,e=g,g=d,d=i,i=j,j=d);var k,l,m,p;if(b.U.Y===b.Q.Y)k=c.getLinkPoint(e,i,nm(c),h,q,g,j).copy(),l=c.getLinkPoint(g,j,om(c),q,q,e,i).copy(),m=new F((2*
k.x+l.x)/3,(2*k.y+l.y)/3),p=new F((k.x+2*l.x)/3,(k.y+2*l.y)/3),c.Mn(),c.ud(k),c.ud(m),c.ud(p),c.ud(l);else{d=b=q;i!==n&&nm(c)===Fb&&(b=h);j!==n&&om(c)===Fb&&(d=h);if(b||d)k=c.p(0).copy(),m=c.p(1).copy(),p=c.p(2).copy(),l=c.p(3).copy();b&&(90===this.da||270===this.da?(m.x=k.x,m.y=(k.y+l.y)/2):(m.x=(k.x+l.x)/2,m.y=k.y),c.J(1,m),c.J(0,c.getLinkPoint(e,i,nm(c),h,q,g,j).copy()));d&&(90===this.da||270===this.da?(p.x=l.x,p.y=(k.y+l.y)/2):(p.x=(k.x+l.x)/2,p.y=l.y),c.J(2,p),c.J(3,c.getLinkPoint(g,j,om(c),
q,q,e,i).copy()))}}c.ti()}else if(b.U.G===b.Q.G)c.ti();else{var r=q,s=q,v,y=c.vv+1;if(c.fc)s=h,v=c.ja,4<v&&c.points.removeRange(2,v-3);else if(c.wf===fk)r=h,v=c.ja,4<v&&c.points.removeRange(2,v-3),y=2;else{v=c.ja;var C=nm(c)===Fb,E=om(c)===Fb;2<v&&C&&E?c.points.removeRange(1,v-2):3<v&&C&&!E?c.points.removeRange(1,v-3):3<v&&!C&&E?c.points.removeRange(2,v-2):4<v&&(!C&&!E)&&c.points.removeRange(2,v-3)}v=b.U;var E=b.Q,I;if(b.wb){for(;E!==n&&v!==E;){I=C=n;for(var D=E.Hb.l;D.next()&&!(M=D.value,M.Ra===
b.Ra&&(C=M.U,I=M.Q,C.fb===n)););C!==v&&(M=c.p(y-1).copy(),D=new F(C.pa,C.ta),s?180===this.da||0===this.da?2===y?(c.A(y++,new F(M.x,M.y)),c.A(y++,new F(M.x,D.y))):(I=I!==n?new F(I.pa,I.ta):M.copy(),I.y!==D.y&&(I=this.pd[C.G-1],c.A(y++,new F(I,M.y)),c.A(y++,new F(I,D.y)))):2===y?(c.A(y++,new F(M.x,M.y)),c.A(y++,new F(D.x,M.y))):(I=I!==n?new F(I.pa,I.ta):M.copy(),I.x!==D.x&&(I=this.pd[C.G-1],c.A(y++,new F(M.x,I)),c.A(y++,new F(D.x,I)))):2===y?r?(I=Math.max(10,this.hh[E.G]),N=Math.max(10,this.Bg[E.G]),
180===this.da?(E=E.L.x,c.A(y++,new F(E-I,D.y)),c.A(y++,new F(E,D.y)),c.A(y++,new F(E+N,D.y))):90===this.da?(E=E.L.y+E.L.height,c.A(y++,new F(D.x,E+N)),c.A(y++,new F(D.x,E)),c.A(y++,new F(D.x,E-I))):270===this.da?(E=E.L.y,c.A(y++,new F(D.x,E-I)),c.A(y++,new F(D.x,E)),c.A(y++,new F(D.x,E+N))):(E=E.L.x+E.L.width,c.A(y++,new F(E+N,D.y)),c.A(y++,new F(E,D.y)),c.A(y++,new F(E-I,D.y)))):(c.A(y++,M),180===this.da||0===this.da?c.A(y++,new F(M.x,D.y)):c.A(y++,new F(D.x,M.y)),c.A(y++,new F(D.x,D.y))):(I=Math.max(10,
this.hh[C.G]),N=Math.max(10,this.Bg[C.G]),180===this.da?(r&&c.A(y++,new F(D.x-I,D.y)),c.A(y++,D),r&&c.A(y++,new F(D.x+N,D.y))):90===this.da?(r&&c.A(y++,new F(D.x,D.y+N)),c.A(y++,D),r&&c.A(y++,new F(D.x,D.y-I))):270===this.da?(r&&c.A(y++,new F(D.x,D.y-I)),c.A(y++,D),r&&c.A(y++,new F(D.x,D.y+N))):(r&&c.A(y++,new F(D.x+N,D.y)),c.A(y++,D),r&&c.A(y++,new F(D.x-I,D.y)))));E=C}if(j===n||!om(c).I(Fb))M=c.p(y-1).copy(),D=c.p(y).copy(),s?(C=this.Bg[v.G],180===this.da||0===this.da?(s=M.y,s>=v.L.y&&s<=v.L.bottom&&
(E=v.pa+C,s=s<v.L.y+v.L.height/2?v.L.y-this.md/2:v.L.bottom+this.md/2,c.A(y++,new F(E,M.y)),c.A(y++,new F(E,s))),c.A(y++,new F(D.x,s))):(s=M.x,s>=v.L.x&&s<=v.L.right&&(E=v.ta+C,s=s<v.L.x+v.L.width/2?v.L.x-this.md/2:v.L.right+this.md/2,c.A(y++,new F(M.x,E)),c.A(y++,new F(s,E))),c.A(y++,new F(s,D.y))),c.A(y++,D)):r?(I=Math.max(10,this.hh[v.G]),N=Math.max(10,this.Bg[v.G]),180===this.da?(E=v.L.x+v.L.width,c.J(y-2,new F(E,M.y)),c.J(y-1,new F(E+N,M.y))):90===this.da?(E=v.L.y,c.J(y-2,new F(M.x,E)),c.J(y-
1,new F(M.x,E-I))):270===this.da?(E=v.L.y+v.L.height,c.J(y-2,new F(M.x,E)),c.J(y-1,new F(M.x,E+N))):(E=v.L.x,c.J(y-2,new F(E,M.y)),c.J(y-1,new F(E-I,M.y)))):(180===this.da||0===this.da?c.A(y++,new F(D.x,M.y)):c.A(y++,new F(M.x,D.y)),c.A(y++,D))}else{for(;v!==n&&v!==E;){I=C=n;v=v.Gb.l;for(var M;v.next()&&!(M=v.value,M.Ra===b.Ra&&(C=M.Q,I=M.U,I.fb!==n&&(I=n),C.fb===n)););var N;C!==E&&(M=c.p(y-1).copy(),D=new F(C.pa,C.ta),s?180===this.da||0===this.da?(I=I!==n?new F(I.pa,I.ta):M.copy(),I.y!==D.y&&(I=
this.pd[C.G],2===y&&(I=0===this.da?Math.max(I,M.x):Math.min(I,M.x)),c.A(y++,new F(I,M.y)),c.A(y++,new F(I,D.y)))):(I=I!==n?new F(I.pa,I.ta):M.copy(),I.x!==D.x&&(I=this.pd[C.G],2===y&&(I=90===this.da?Math.max(I,M.y):Math.min(I,M.y)),c.A(y++,new F(M.x,I)),c.A(y++,new F(D.x,I)))):(I=Math.max(10,this.hh[C.G]),N=Math.max(10,this.Bg[C.G]),180===this.da?(c.A(y++,new F(D.x+N,D.y)),r&&c.A(y++,D),c.A(y++,new F(D.x-I,D.y))):90===this.da?(c.A(y++,new F(D.x,D.y-I)),r&&c.A(y++,D),c.A(y++,new F(D.x,D.y+N))):270===
this.da?(c.A(y++,new F(D.x,D.y+N)),r&&c.A(y++,D),c.A(y++,new F(D.x,D.y-I))):(c.A(y++,new F(D.x-I,D.y)),r&&c.A(y++,D),c.A(y++,new F(D.x+N,D.y)))));v=C}s&&(M=c.p(y-1).copy(),D=c.p(y).copy(),180===this.da||0===this.da?M.y!==D.y&&(I=0===this.da?Math.min(Math.max((D.x+M.x)/2,this.pd[E.G]),D.x):Math.max(Math.min((D.x+M.x)/2,this.pd[E.G]),D.x),c.A(y++,new F(I,M.y)),c.A(y++,new F(I,D.y))):M.x!==D.x&&(I=90===this.da?Math.min(Math.max((D.y+M.y)/2,this.pd[E.G]),D.y):Math.max(Math.min((D.y+M.y)/2,this.pd[E.G]),
D.y),c.A(y++,new F(M.x,I)),c.A(y++,new F(D.x,I))))}d!==n&&r&&(i!==n&&(yb(nm(c))&&(d=c.p(0).copy(),r=c.p(2).copy(),d.I(r)||c.J(1,new F((d.x+r.x)/2,(d.y+r.y)/2))),c.J(0,c.getLinkPoint(e,i,Fb,h,q,g,j))),j!==n&&(yb(om(c))&&(d=c.p(c.ja-1),r=c.p(c.ja-3),d.I(r)||c.J(c.ja-2,new F((d.x+r.x)/2,(d.y+r.y)/2))),c.J(c.ja-1,c.getLinkPoint(g,j,Fb,q,q,e,i))));c.ti();b.commit()}}e=new z(U);for(a=this.B.mc.l;a.next();)c=a.value.Ra,c!==n&&(c.fc&&!e.contains(c))&&e.add(c);if(0<e.count)if(90===this.da||270===this.da){u&&
w.i(e,z,X,"adjustOverlapsH:routables");a=0;c=new z(Yo);for(k=e.l;k.next();)if(g=k.value,g!==n&&g.fc)for(e=2;e<g.ja-3;e++)i=g.p(e).copy(),j=g.p(e+1).copy(),Zo(i.y,j.y)&&!Zo(i.x,j.x)&&(l=new Yo,l.G=Math.floor(i.y/2),m=g.p(0).copy(),p=g.p(g.ja-1).copy(),l.zb=m.x*m.x+m.y,l.zd=p.x*p.x+p.y,l.Yd=Math.min(i.x,j.x),l.wd=Math.max(i.x,j.x),l.ea=e,l.Ra=g,e+2<g.ja&&(m=g.p(e-1).copy(),p=g.p(e+2).copy(),b=0,m.y<i.y?b=p.y<i.y?3:i.x<j.x?2:1:m.y>i.y&&(b=p.y>i.y?0:j.x<i.x?2:1),l.Jh=b),c.add(l));if(1<c.count){c.sort(this.nE);
for(k=0;k<c.count;){e=c.n[k].G;for(l=k+1;l<c.count&&c.n[l].G===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.n[g].wd;for(m=k+1;m<l&&c.n[m].Yd<e;)e=Math.max(e,c.n[m].wd),m++;i=m-g;if(1<i){c.Do(this.Uv,g,g+i);j=1;p=c.n[g].zd;for(e=g;e<m;e++)b=c.n[e],b.zd!==p&&(j++,p=b.zd);c.Do(this.mE,g,g+i);r=1;p=c.n[g].zb;for(e=g;e<m;e++)b=c.n[e],b.zb!==p&&(r++,p=b.zb);j<r?(d=q,r=j,p=c.n[g].zd,c.Do(this.Uv,g,g+i)):(d=h,p=c.n[g].zb);y=0;for(e=g;e<m;e++){b=c.n[e];if((d?b.zb:b.zd)!==p)y++,p=d?b.zb:b.zd;g=b.Ra;i=g.p(b.ea).copy();
j=g.p(b.ea+1).copy();s=4*(y-(r-1)/2);if(g.Dh!==Tf||$o(i.x,i.y+s,j.x,j.y+s))a++,g.$k(),g.J(b.ea,new F(i.x,i.y+s)),g.J(b.ea+1,new F(j.x,j.y+s)),g.ti()}}g=m}k=l}}}else{u&&w.i(e,z,X,"adjustOverlapsV:routables");a=0;c=new z(Yo);for(k=e.l;k.next();)if(g=k.value,g!==n&&g.fc)for(e=2;e<g.ja-3;e++)i=g.p(e).copy(),j=g.p(e+1).copy(),Zo(i.x,j.x)&&!Zo(i.y,j.y)&&(l=new Yo,l.G=Math.floor(i.x/2),m=g.p(0).copy(),p=g.p(g.ja-1).copy(),l.zb=m.x+m.y*m.y,l.zd=p.x+p.y*p.y,l.Yd=Math.min(i.y,j.y),l.wd=Math.max(i.y,j.y),l.ea=
e,l.Ra=g,e+2<g.ja&&(m=g.p(e-1).copy(),p=g.p(e+2).copy(),b=0,m.x<i.x?b=p.x<i.x?3:i.y<j.y?2:1:m.x>i.x&&(b=p.x>i.x?0:j.y<i.y?2:1),l.Jh=b),c.add(l));if(1<c.count){c.sort(this.nE);for(k=0;k<c.count;){e=c.n[k].G;for(l=k+1;l<c.count&&c.n[l].G===e;)l++;if(1<l-k)for(g=k;g<l;){e=c.n[g].wd;for(m=k+1;m<l&&c.n[m].Yd<e;)e=Math.max(e,c.n[m].wd),m++;i=m-g;if(1<i){c.Do(this.Uv,g,g+i);j=1;p=c.n[g].zd;for(e=g;e<m;e++)b=c.n[e],b.zd!==p&&(j++,p=b.zd);c.Do(this.mE,g,g+i);r=1;p=c.n[g].zb;for(e=g;e<m;e++)b=c.n[e],b.zb!==
p&&(r++,p=b.zb);j<r?(d=q,r=j,p=c.n[g].zd,c.Do(this.Uv,g,g+i)):(d=h,p=c.n[g].zb);y=0;for(e=g;e<m;e++){b=c.n[e];if((d?b.zb:b.zd)!==p)y++,p=d?b.zb:b.zd;g=b.Ra;i=g.p(b.ea).copy();j=g.p(b.ea+1).copy();s=4*(y-(r-1)/2);if(g.Dh!==Tf||$o(i.x+s,i.y,j.x+s,j.y))a++,g.$k(),g.J(b.ea,new F(i.x+s,i.y)),g.J(b.ea+1,new F(j.x+s,j.y)),g.ti()}}g=m}k=l}}}};function Yo(){this.ea=this.wd=this.Yd=this.zd=this.zb=this.G=0;this.Ra=n;this.Jh=0}w.Nd(Yo,{Ja:h,zb:h,zd:h,Yd:h,wd:h,index:h,link:h,Jh:h});
X.prototype.nE=function(a,b){return!(a instanceof Yo)||!(b instanceof Yo)||a===b?0:a.G<b.G?-1:a.G>b.G?1:a.Yd<b.Yd?-1:a.Yd>b.Yd?1:a.wd<b.wd?-1:a.wd>b.wd?1:0};X.prototype.mE=function(a,b){return!(a instanceof Yo)||!(b instanceof Yo)||a===b?0:a.zb<b.zb?-1:a.zb>b.zb||a.Jh<b.Jh?1:a.Jh>b.Jh||a.Yd<b.Yd?-1:a.Yd>b.Yd?1:a.wd<b.wd?-1:a.wd>b.wd?1:0};
X.prototype.Uv=function(a,b){return!(a instanceof Yo)||!(b instanceof Yo)||a===b?0:a.zd<b.zd?-1:a.zd>b.zd||a.Jh<b.Jh?1:a.Jh>b.Jh||a.Yd<b.Yd?-1:a.Yd>b.Yd?1:a.wd<b.wd?-1:a.wd>b.wd?1:0};function Zo(a,b){u&&(w.o(a,X,"isApprox:a"),w.o(b,X,"isApprox:b"));var c=a-b;return-1<c&&1>c}function $o(a,b,c,d){u&&(w.o(a,X,"isUnoccupied2:px"),w.o(b,X,"isUnoccupied2:py"),w.o(c,X,"isUnoccupied2:qx"),w.o(d,X,"isUnoccupied2:qy"));return h}
function Vn(a,b){var c,d=a.od[b];if(d>=a.Dg.length){c=[];var e;for(e=0;e<a.Dg.length;e++)c[e]=a.Dg[e];a.Dg=c}"undefined"===typeof a.Dg[d]||a.Dg[d]===n?c=[]:(c=a.Dg[d],a.Dg[d]=n);var d=a.vq[b],g;for(e=0;e<d.length;e++)g=d[e],g instanceof bo&&(c[g.ea]=g);return c}function Xn(a,b,c){a.Dg[a.od[b]]=c}w.g(X,"layerSpacing",X.prototype.is);w.defineProperty(X,{is:"layerSpacing"},t("Hd"),function(a){this.Hd!==a&&("number"===typeof a&&0<=a)&&(this.Hd=a,this.F())});w.g(X,"columnSpacing",X.prototype.cG);
w.defineProperty(X,{cG:"columnSpacing"},t("md"),function(a){this.md!==a&&("number"===typeof a&&0<=a)&&(this.md=a,this.F())});w.g(X,"direction",X.prototype.direction);w.defineProperty(X,{direction:"direction"},t("da"),function(a){this.da!==a&&"number"===typeof a&&(this.da=a,this.F())});w.g(X,"cycleRemoveOption",X.prototype.uC);w.defineProperty(X,{uC:"cycleRemoveOption"},t("zm"),function(a){if(this.zm!==a&&(u&&w.i(a,ja,Nn,"cycleRemoveOption"),a===On||a===In))this.zm=a,this.F()});
w.g(X,"layeringOption",X.prototype.tD);w.defineProperty(X,{tD:"layeringOption"},t("Um"),function(a){if(this.Um!==a&&(u&&w.i(a,ja,Nn,"layeringOption"),a===Jn||a===Ao||a===Co))this.Um=a,this.F()});w.g(X,"initializeOption",X.prototype.jD);w.defineProperty(X,{jD:"initializeOption"},t("Om"),function(a){if(this.Om!==a&&(u&&w.i(a,ja,Nn,"initializeOption"),a===Kn||a===Io||a===Go))this.Om=a,this.F()});w.g(X,"iterations",X.prototype.YG);
w.defineProperty(X,{YG:"iterations"},t("ul"),function(a){u&&w.o(a,Nn,"iterations");this.ul!==a&&("number"===typeof a&&0<=a)&&(this.ul=a,this.F())});w.g(X,"aggressiveOption",X.prototype.XB);w.defineProperty(X,{XB:"aggressiveOption"},t("rm"),function(a){if(this.rm!==a&&(u&&w.i(a,ja,Nn,"cycleRemoveOption"),a===Mo||a===Ln||a===No))this.rm=a,this.F()});w.g(X,"packOption",X.prototype.xH);w.defineProperty(X,{xH:"packOption"},t("hi"),function(a){this.hi!==a&&("number"===typeof a&&0<=a&&8>a)&&(this.hi=a,this.F())});
w.g(X,"setsPortSpots",X.prototype.jm);w.defineProperty(X,{jm:"setsPortSpots"},t("mh"),function(a){this.mh!==a&&"boolean"===typeof a&&(this.mh=a,this.F())});w.u(X,{uL:"maxLayer"},t("ab"));w.u(X,{sL:"maxIndex"},t("St"));w.u(X,{rL:"maxColumn"},t("pb"));w.u(X,{AL:"minIndexLayer"},t("nq"));w.u(X,{tL:"maxIndexLayer"},t("df"));var In;X.CycleDepthFirst=In=w.s(X,"CycleDepthFirst",0);var On;X.CycleGreedy=On=w.s(X,"CycleGreedy",1);var Jn;X.LayerOptimalLinkLength=Jn=w.s(X,"LayerOptimalLinkLength",0);var Ao;
X.LayerLongestPathSink=Ao=w.s(X,"LayerLongestPathSink",1);var Co;X.LayerLongestPathSource=Co=w.s(X,"LayerLongestPathSource",2);var Kn;X.InitDepthFirstOut=Kn=w.s(X,"InitDepthFirstOut",0);var Io;X.InitDepthFirstIn=Io=w.s(X,"InitDepthFirstIn",1);var Go;X.InitNaive=Go=w.s(X,"InitNaive",2);var Mo;X.AggressiveNone=Mo=w.s(X,"AggressiveNone",0);var Ln;X.AggressiveLess=Ln=w.s(X,"AggressiveLess",1);var No;X.AggressiveMore=No=w.s(X,"AggressiveMore",2);X.PackNone=0;var Oo;X.PackExpand=Oo=1;var Po;
X.PackStraighten=Po=2;var Ro;X.PackMedian=Ro=4;var Mn;X.PackAll=Mn=7;function Nn(){Vm.call(this)}w.P("LayeredDigraphNetwork",Nn);w.Da(Nn,Vm);Nn.prototype.createVertex=Nn.prototype.wj=function(){return new bo};Nn.prototype.createEdge=Nn.prototype.Pn=function(){return new Tn};function bo(){Zm.call(this);this.ea=this.Y=this.G=-1;this.Ca=q;this.Kb=this.Gm=this.gk=NaN;this.ej=n;this.el=0;this.Dx=this.Ex=f}w.P("LayeredDigraphVertex",bo);w.Da(bo,Zm);w.g(bo,"layer",bo.prototype.Ja);
w.defineProperty(bo,{Ja:"layer"},t("G"),ba("G"));w.g(bo,"column",bo.prototype.Ec);w.defineProperty(bo,{Ec:"column"},t("Y"),ba("Y"));w.g(bo,"index",bo.prototype.index);w.defineProperty(bo,{index:"index"},t("ea"),ba("ea"));w.g(bo,"valid",bo.prototype.valid);w.defineProperty(bo,{valid:"valid"},t("Ca"),ba("Ca"));w.g(bo,"discover",bo.prototype.oG);w.defineProperty(bo,{oG:"discover"},t("gk"),ba("gk"));w.g(bo,"finish",bo.prototype.finish);w.defineProperty(bo,{finish:"finish"},t("Gm"),ba("Gm"));
w.g(bo,"component",bo.prototype.dG);w.defineProperty(bo,{dG:"component"},t("Kb"),ba("Kb"));w.g(bo,"near",bo.prototype.oH);w.defineProperty(bo,{oH:"near"},t("ej"),function(a){a!==n&&w.i(a,bo,bo,"layeredDigraphVertex");this.ej=a});function Tn(){$m.call(this);this.up=this.wb=this.Ca=q;this.mf=this.kf=NaN;this.Ee=this.sI=0}w.P("LayeredDigraphEdge",Tn);w.Da(Tn,$m);w.g(Tn,"valid",Tn.prototype.valid);w.defineProperty(Tn,{valid:"valid"},t("Ca"),ba("Ca"));w.g(Tn,"rev",Tn.prototype.rev);
w.defineProperty(Tn,{rev:"rev"},t("wb"),ba("wb"));w.g(Tn,"forest",Tn.prototype.AG);w.defineProperty(Tn,{AG:"forest"},t("up"),ba("up"));w.g(Tn,"portFromPos",Tn.prototype.AH);w.defineProperty(Tn,{AH:"portFromPos"},t("kf"),ba("kf"));w.g(Tn,"portToPos",Tn.prototype.CH);w.defineProperty(Tn,{CH:"portToPos"},t("mf"),ba("mf"));w.g(Tn,"portFromColOffset",Tn.prototype.zH);w.defineProperty(Tn,{zH:"portFromColOffset"},t("jf"),ba("jf"));w.g(Tn,"portToColOffset",Tn.prototype.BH);
w.defineProperty(Tn,{BH:"portToColOffset"},t("Ee"),ba("Ee"));function W(){bi.call(this);this.cd=new ma(T);this.kh=ap;this.af=bp;this.hr=cp;this.Rc=dp;this.Gf=new bb(10,10);this.ia=new Y;this.ha=new Y}w.P("TreeLayout",W);w.Da(W,bi);W.prototype.cloneProtected=W.prototype.xb=function(a){bi.prototype.xb.call(this,a);a.kh=this.kh;a.hr=this.hr;a.Rc=this.Rc;a.Gf=this.Gf.copy();ep(a.ia,this.ia);ep(a.ha,this.ha)};W.prototype.createNetwork=W.prototype.iv=function(){var a=new fp;Wm(a,this);return a};
W.prototype.makeNetwork=W.prototype.fH=function(a){var b=this.createNetwork();a instanceof A?(gp(this,b,a.Xk,h),gp(this,b,a.links,h)):a instanceof xf?gp(this,b,a.Gc,q):a.l&&gp(this,b,a.l,q);return b};
function gp(a,b,c,d){for(c=c.l;c.next();){var e=c.value;if(e instanceof T&&e.Fr()&&"Comment"!==e.vd&&(!d||e.gs))e.Fi||(e instanceof xf&&e.Pb===n?gp(a,b,e.Gc,q):b.An(e))}for(c.reset();c.next();)if(e=c.value,e instanceof U&&e.Fr()&&"Comment"!==e.vd&&(!d||e.gs)){var g=e.ga,a=e.la;if(!(g===n||a===n||g===a)&&"Comment"!==g.vd&&"Comment"!==a.vd)g=b.rv(g),a=b.rv(a),g!==n&&a!==n&&b.cm(g,a,e)}}
W.prototype.doLayout=W.prototype.Kr=function(a){this.Oc===n&&(this.Oc=this.makeNetwork(a));this.le!==hp&&(this.fd=Ym(this,this.fd));var b=this.h;b===n&&a instanceof A&&(b=a);this.af=this.path===ap&&b!==n?b.jd?bp:ip:this.path===ap?bp:this.path;if(0<this.B.ka.count){this.B.lv();for(b=this.B.ka.l;b.next();)a=b.value,a.ok=q,a.vl=0,a.ib=n,a.Zb=[];for(b=this.cd.l;b.next();){var c=b.value,a=this.B.Le(c);a===n&&this.cd.remove(c)}if(0===this.cd.count){for(a=this.B.ka.l;a.next();)switch(b=a.value,this.af){case bp:0===
b.Hb.count&&this.cd.add(b.fb);break;case ip:0===b.Gb.count&&this.cd.add(b.fb);break;default:w.m("Unhandled path value "+this.af.toString())}if(0===this.cd.count){a=999999;b=n;for(c=this.B.ka.l;c.next();){var d=c.value;switch(this.af){case bp:d.Hb.count<a&&(a=d.Hb.count,b=d);break;case ip:d.Gb.count<a&&(a=d.Gb.count,b=d);break;default:w.m("Unhandled path value "+this.af.toString())}}b!==n&&this.cd.add(b.fb)}}for(b=this.cd.l;b.next();)c=b.value,a=this.B.Le(c),a!==n&&!a.ok&&(a.ok=h,jp(this,a));for(a=
this.cd.l;a.next();)b=this.B.Le(a.value),kp(this,b);for(a=this.cd.l;a.next();)b=this.B.Le(a.value),lp(this,b);for(a=this.cd.l;a.next();)mp(this,this.B.Le(a.value));for(a=this.B.ka.l;a.next();)this.addComments(a.value);for(a=this.cd.l;a.next();)np(this,this.B.Le(a.value));if(this.Rc===hp)for(a=this.cd.l;a.next();)d=a.value,b=this.B.Le(d),d=d.position,c=d.x,d=d.y,isFinite(c)||(c=0),isFinite(d)||(d=0),op(this,b,c,d);else for(var a=this.fd,c=a.x,e=a.y,a=this.cd.l;a.next();)if(d=a.value,b=this.B.Le(d),
b!==n)switch(op(this,b,c+b.Ba.x,e+b.Ba.y),this.Rc){case dp:e+=b.Pa.height+this.Gf.height;break;case pp:c+=b.Pa.width+this.Gf.width;break;default:w.m("Unhandled arrangement value "+this.Rc.toString())}this.updateParts()}this.Oc=n;this.cd=new ma(T);this.Pe=h};
function jp(a,b){u&&w.i(b,Y,W,"walkTree:v");if(b!==n){switch(a.af){case bp:if(0<b.Gb.count){for(var c=new z(Y),d=b.nG;d.next();){var e=d.value;qp(a,b,e)&&c.add(e)}0<c.count&&(b.Zb=c.qg())}break;case ip:if(0<b.Hb.count){c=new z(Y);for(d=b.VH;d.next();)e=d.value,qp(a,b,e)&&c.add(e);0<c.count&&(b.Zb=c.qg())}break;default:w.m("Unhandled path value"+a.af.toString())}for(var c=b.Zb,d=c.length,g=0;g<d;g++)e=c[g],e.ok=h,e.vl=b.vl+1,e.ib=b,a.cd.remove(e.fb);for(g=0;g<d;g++)e=c[g],jp(a,e)}}
function qp(a,b,c){u&&w.i(b,Y,W,"walkOK:v");u&&w.i(c,Y,W,"walkOK:c");if(c.ok){var d;u&&w.i(c,Y,W,"isAncestor:a");u&&w.i(b,Y,W,"isAncestor:b");if(b===n)d=q;else{for(d=b.ib;d!==n&&d!==c;)d=d.ib;d=d===c}if(d||c.vl>b.vl)return q;a.removeChild(c.ib,c)}return h}
W.prototype.removeChild=function(a,b){u&&w.i(a,Y,W,"removeChild:p");u&&w.i(b,Y,W,"removeChild:c");if(a!==n&&b!==n){for(var c=a.Zb,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),g=0,e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.Zb=d}}};
function kp(a,b){u&&w.i(b,Y,W,"initializeTree:v");if(b!==n){u&&w.i(b,Y,W,"initializeTreeVertexValues:v");var c=rp(a,b);ep(b,c);if(b.ib!==n&&b.ib.Aa===sp){for(var c=b.angle,d=b.ib.Zb,e=0;e<d.length&&b!==d[e];)e++;0===e%2?e!==d.length-1&&(c=90===c?180:180===c?270:270===c?180:270):c=90===c?0:180===c?90:270===c?0:90;b.angle=c}b.ok=h;b.Aa===sp&&a.xE(b);for(var c=0,d=b.Nl,e=0,g=b.Zb,i=g.length,j=0;j<i;j++){var k=g[j];kp(a,k);c+=k.nt+1;d=Math.max(d,k.Rt);e=Math.max(e,k.$h)}b.nt=c;b.Rt=d;b.$h=0<d?e+1:0}}
function rp(a,b){u&&w.i(b,Y,W,"mom:v");switch(a.hr){default:case cp:return b.ib!==n?b.ib:a.ia;case tp:return b.ib===n?a.ia:b.ib.ib===n?a.ha:b.ib;case up:if(b.ib!==n)return b.ib.ib!==n?b.ib.ib:a.ha;case vp:var c=h;if(0===b.Nl)c=q;else for(var d=b.Zb,e=d.length,g=0;g<e;g++)if(0<d[g].Nl){c=q;break}return c&&b.ib!==n?a.ha:b.ib!==n?b.ib:a.ia}}function lp(a,b){u&&w.i(b,Y,W,"assignTree:v");if(b!==n){a.assignTreeVertexValues(b);for(var c=b.Zb,d=c.length,e=0;e<d;e++)lp(a,c[e])}}
W.prototype.assignTreeVertexValues=W.prototype.DI=aa();function mp(a,b){u&&w.i(b,Y,W,"sortTree:v");if(b!==n){b.Aa!==sp&&a.xE(b);for(var c=b.Zb,d=c.length,e=0;e<d;e++)mp(a,c[e])}}W.prototype.sortTreeVertexChildren=W.prototype.xE=function(a){u&&w.i(a,Y,W,"sortTreeVertexChildren:v");switch(a.uc){case wp:break;case xp:a.Zb.reverse();break;case yp:a.Zb.sort(a.rc);break;case zp:a.Zb.sort(a.rc);a.Zb.reverse();break;default:w.m("Unhandled sorting value "+a.uc.toString())}};
W.prototype.addComments=W.prototype.zF=function(a){u&&w.i(a,Y,W,"addComments:v");var b=a.oc,c=a.ib,d=0,e=Ap,e=q;c!==n&&(d=c.oc,e=c.Aa,e=Bp(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.Nl,g=new G,i=g.width,g=g.height,j=0,k=a.Ed;if(a.fb!==n)for(var l=a.fb.JC();l.next();){var m=l.value;"Comment"===m.vd&&m.nb()&&(a.Fd===n&&(a.Fd=[]),a.Fd.push(m),m.yi(),m=m.xa,b&&!c||!e&&!d&&c||e&&d&&c?(i=Math.max(i,m.width),g+=m.height+Math.abs(j)):(i+=m.width+Math.abs(j),g=Math.max(g,m.height)),j=k)}a.Fd!==n&&
(b&&!c||!e&&!d&&c||e&&d&&c?(i+=Math.abs(a.qc),g=Math.max(0,g-a.height)):(g+=Math.abs(a.qc),i=Math.max(0,i-a.width)),a.Fb=new G(0,0,a.L.width+i,a.L.height+g))};function Bp(a){return a===Cp||a===sp||a===Dp||a===Ep}function Fp(a){return a===Cp||a===sp}function Gp(a){u&&w.i(a,Y,W,"isLeftSideBus:v");var b=a.ib;if(b!==n){var c=b.Db;if(Bp(c)){if(Fp(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===Dp)return h}}return q}
W.prototype.layoutComments=W.prototype.mL=function(a){u&&w.i(a,Y,W,"layoutComments:v");if(a.Fd!==n){var b=a.Tg.xa,c=a.ib,d=a.oc,e=0,g=Ap,g=q;c!==n&&(e=c.oc,g=c.Aa,g=Bp(g));for(var d=90===d||270===d,i=90===e||270===e,j=0===a.Nl,k=Gp(a),l=0,m=a.Fd,p=m.length,r=0;r<p;r++){var c=m[r],s=c.xa;if(d&&!j||!g&&!i&&j||g&&i&&j){if(135<e&&!g||i&&k)if(0<=a.qc){c.location=new F(a.L.x-a.qc-s.width,a.L.y+l);for(var v=c.zf();v.next();)c=v.value,c.kb=Tb,c.ob=Zb}else{c.location=new F(a.L.x+2*a.K.x-a.qc,a.L.y+l);for(v=
c.zf();v.next();)c=v.value,c.kb=Zb,c.ob=Tb}else if(0<=a.qc){c.location=new F(a.L.x+2*a.K.x+a.qc,a.L.y+l);for(v=c.zf();v.next();)c=v.value,c.kb=Zb,c.ob=Tb}else{c.location=new F(a.L.x+a.qc-s.width,a.L.y+l);for(v=c.zf();v.next();)c=v.value,c.kb=Tb,c.ob=Zb}l=0<=a.Ed?l+(s.height+a.Ed):l+(a.Ed-s.height)}else{if(135<e&&!g||!i&&k)if(0<=a.qc){c.location=new F(a.L.x+l,a.L.y-a.qc-s.height);for(v=c.zf();v.next();)c=v.value,c.kb=Sb,c.ob=$b}else{c.location=new F(a.L.x+l,a.L.y+2*a.K.y-a.qc);for(v=c.zf();v.next();)c=
v.value,c.kb=$b,c.ob=Sb}else if(0<=a.qc){c.location=new F(a.L.x+l,a.L.y+2*a.K.y+a.qc);for(v=c.zf();v.next();)c=v.value,c.kb=$b,c.ob=Sb}else{c.location=new F(a.L.x+l,a.L.y+a.qc-s.height);for(v=c.zf();v.next();)c=v.value,c.kb=Sb,c.ob=$b}l=0<=a.Ed?l+(s.width+a.Ed):l+(a.Ed-s.width)}}b=l-a.Ed-(d?b.height:b.width);if(this.af===bp)for(a=a.Gb;a.next();){if(e=a.value,(c=e.link)&&c.Dh!==Tf)c.Ok=0<b?b:NaN}else for(a=a.Hb;a.next();)if(e=a.value,(c=e.link)&&c.Dh!==Tf)c.al=0<b?b:NaN}};
function np(a,b){u&&w.i(b,Y,W,"layoutTree:v");if(b!==n){for(var c=b.Zb,d=c.length,e=0;e<d;e++)np(a,c[e]);switch(b.ug){case Hp:Ip(a,b);break;case Jp:if(b.Aa===sp)Ip(a,b);else if(u&&w.i(b,Y,W,"layoutTreeBlock:v"),0===b.Nl){var e=b.ib,c=q,d=0,g=Ap;e!==n&&(d=e.oc,g=e.Aa,c=Bp(g));e=Gp(b);b.Z.V(0,0);b.Pa.V(b.width,b.height);b.ib!==n&&b.Fd!==n&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Ba.V(b.width-2*b.K.x,0):b.Ba.V(0,b.height-2*b.K.y):b.Ba.V(0,0);b.Yp=n;b.Mq=n}else{for(var i=Kp(b),
c=90===i||270===i,j=0,k=b.Zb,l=k.length,m=0;m<l;m++)var p=k[m],j=Math.max(j,c?p.Pa.width:p.Pa.height);var r=b.Aa,e=r===Lp,s=r===Mp,v=Bp(r),y=Math.max(0,b.rg),d=Np(b),C=b.sd,E=Op(b),I=b.Fe,D=0;if(e||s||b.yk||b.zk&&1===b.$h)D=Math.max(0,b.dd);var e=b.width,g=b.height,M=0,N=0,Z=0,va=n,ka=n,ta=0,Da=0,Ha=0,cb=0,rb=0,Xa=0,Na=0,gb=0,p=0;v&&!Fp(r)&&135<i&&k.reverse();if(Fp(r))if(1<l)for(m=0;m<l;m++)0===m%2&&m!==l-1?gb=Math.max(gb,c?k[m].Pa.width:k[m].Pa.height):0!==m%2&&(p=Math.max(p,c?k[m].Pa.width:k[m].Pa.height));
else 1===l&&(gb=c?k[0].Pa.width:k[0].Pa.height);if(v){switch(r){case Cp:Da=135>i?Pp(b,k,gb,M,N):Qp(b,k,gb,M,N);gb=Da[0];M=Da[1];N=Da[2];break;case Dp:for(m=0;m<l;m++){var p=k[m],Ya=p.Pa,va=0===Xa?0:I;c?(p.Z.V(j-Ya.width,cb+va),M=Math.max(M,Ya.width),N=Math.max(N,cb+va+Ya.height),cb+=va+Ya.height):(p.Z.V(Ha+va,j-Ya.height),M=Math.max(M,Ha+va+Ya.width),N=Math.max(N,Ya.height),Ha+=va+Ya.width);Xa++}break;case Ep:for(m=0;m<l;m++)p=k[m],Ya=p.Pa,va=0===Xa?0:I,c?(p.Z.V(C/2+b.K.x,cb+va),M=Math.max(M,Ya.width),
N=Math.max(N,cb+va+Ya.height),cb+=va+Ya.height):(p.Z.V(Ha+va,C/2+b.K.y),M=Math.max(M,Ha+va+Ya.width),N=Math.max(N,Ya.height),Ha+=va+Ya.width),Xa++}va=[];ka=[];c?(va[0]=new F(0,0),va[1]=new F(0,N),ka[0]=new F(M,0)):(va[0]=new F(0,0),va[1]=new F(M,0),ka[0]=new F(0,N));ka[1]=new F(M,N)}else for(m=0;m<l;m++){p=k[m];Ya=p.Pa;if(c){0<y&&(0<Xa&&Ha+C+Ya.width>y)&&(Ha<j&&Rp(b,r,j-Ha,0,Na,m-1),rb++,Xa=0,Na=m,Z=N,Ha=0,cb=135<i?-N-I:N+I);Sp(a,p,0,cb);var nb=0;if(0===Xa){if(va=p.Yp,ka=p.Mq,ta=Ya.width,Da=Ya.height,
va===n||ka===n||i!==Kp(p))va=[],ka=[],va[0]=new F(0,0),va[1]=new F(0,Da),ka[0]=new F(ta,0),ka[1]=new F(ta,Da)}else Da=Tp(b,p,va,ka,ta,Da),nb=Da[0],va=Da[1],ka=Da[2],ta=Da[3],Da=Da[4],Ha<Ya.width&&0>nb&&(Up(b,-nb,0,Na,m-1),Vp(va,-nb,0),Vp(ka,-nb,0),nb=0);p.Z.V(nb,cb);M=Math.max(M,ta);N=Math.max(N,Z+(0===rb?0:I)+Ya.height);Ha=ta}else{0<y&&(0<Xa&&cb+C+Ya.height>y)&&(cb<j&&Rp(b,r,0,j-cb,Na,m-1),rb++,Xa=0,Na=m,Z=M,cb=0,Ha=135<i?-M-I:M+I);Sp(a,p,Ha,0);nb=0;if(0===Xa){if(va=p.Yp,ka=p.Mq,ta=Ya.width,Da=Ya.height,
va===n||ka===n||i!==Kp(p))va=[],ka=[],va[0]=new F(0,0),va[1]=new F(ta,0),ka[0]=new F(0,Da),ka[1]=new F(ta,Da)}else Da=Tp(b,p,va,ka,ta,Da),nb=Da[0],va=Da[1],ka=Da[2],ta=Da[3],Da=Da[4],cb<Ya.height&&0>nb&&(Up(b,0,-nb,Na,m-1),Vp(va,0,-nb),Vp(ka,0,-nb),nb=0);p.Z.V(Ha,nb);N=Math.max(N,Da);M=Math.max(M,Z+(0===rb?0:I)+Ya.width);cb=Da}Xa++}0<rb&&(c?(N+=Math.max(0,d),Ha<M&&Rp(b,r,M-Ha,0,Na,l-1),0<D&&(s||Up(b,D,0,0,l-1),M+=D)):(M+=Math.max(0,d),cb<N&&Rp(b,r,0,N-cb,Na,l-1),0<D&&(s||Up(b,0,D,0,l-1),N+=D)));s=
j=0;switch(r){case Wp:c?j+=M/2-b.K.x-E/2:s+=N/2-b.K.y-E/2;break;case Ap:0<rb?c?j+=M/2-b.K.x-E/2:s+=N/2-b.K.y-E/2:c?(m=k[0].Z.x+k[0].Ba.x,gb=k[l-1].Z.x+k[l-1].Ba.x+2*k[l-1].K.x,j+=m+(gb-m)/2-b.K.x-E/2):(m=k[0].Z.y+k[0].Ba.y,gb=k[l-1].Z.y+k[l-1].Ba.y+2*k[l-1].K.y,s+=m+(gb-m)/2-b.K.y-E/2);break;case Lp:c?(j-=E,M+=E):(s-=E,N+=E);break;case Mp:c?(j+=M-b.width+E,M+=E):(s+=N-b.height+E,N+=E);break;case Cp:c?j=1<l?j+(gb+C/2-b.K.x):j+(k[0].K.x-b.K.x+k[0].Ba.x):s=1<l?s+(gb+C/2-b.K.y):s+(k[0].K.y-b.K.y+k[0].Ba.y);
break;case Dp:c?j+=M+C/2-b.K.x:s+=N+C/2-b.K.y;break;case Ep:break;default:w.m("Unhandled alignment value "+r.toString())}for(m=0;m<l;m++)p=k[m],c?p.Z.V(p.Z.x+p.Ba.x-j,p.Z.y+(135<i?(v?-N:-p.Pa.height)+p.Ba.y-d:g+d+p.Ba.y)):p.Z.V(p.Z.x+(135<i?(v?-M:-p.Pa.width)+p.Ba.x-d:e+d+p.Ba.x),p.Z.y+p.Ba.y-s);l=k=0;v?c?(M=Xp(b,M,j),0>j&&(j=0),135<i&&(s+=N+d),N+=g+d,r===Ep&&(k+=C/2+b.K.x),l+=g+d):(135<i&&(j+=M+d),M+=e+d,N=Yp(b,N,s),0>s&&(s=0),r===Ep&&(l+=C/2+b.K.y),k+=e+d):c?(b.Fd===n?e>M&&(r=Zp(r,e-M,0),k=r[0],
l=r[1],M=e,j=0):M=Xp(b,M,j),0>j&&(k-=j,j=0),135<i&&(s+=N+d),N=Math.max(Math.max(N,g),N+g+d),l+=g+d):(135<i&&(j+=M+d),M=Math.max(Math.max(M,e),M+e+d),b.Fd===n?g>N&&(r=Zp(r,0,g-N),k=r[0],l=r[1],N=g,s=0):N=Yp(b,N,s),0>s&&(l-=s,s=0),k+=e+d);if(0<rb)i=[],r=[],c?(i[2]=new F(0,g+d),i[3]=new F(i[2].x,N),r[2]=new F(M,i[2].y),r[3]=new F(r[2].x,i[3].y)):(i[2]=new F(e+d,0),i[3]=new F(M,i[2].y),r[2]=new F(i[2].x,N),r[3]=new F(i[3].x,r[2].y));else{i=[];r=[];for(m=0;m<va.length;m++)v=va[m],i[m+2]=new F(v.x+k,v.y+
l);for(m=0;m<ka.length;m++)v=ka[m],r[m+2]=new F(v.x+k,v.y+l)}c?(i[0]=new F(j,0),i[1]=new F(i[0].x,g),i[2].y<i[1].y&&(i[2].x>i[0].x?i[2]=i[1].copy():i[1].Xa(i[2])),i[3].y<i[2].y&&(i[3].x>i[0].x?i[3]=i[2].copy():i[2]=i[3].copy()),r[0]=new F(j+e,0),r[1]=new F(r[0].x,g),r[2].y<r[1].y&&(r[2].x<r[0].x?r[2]=r[1].copy():r[1].Xa(r[2])),r[3].y<r[2].y&&(r[3].x<r[0].x?r[3]=r[2].copy():r[2]=r[3].copy()),i[2].y-=d/2,r[2].y-=d/2):(i[0]=new F(0,s),i[1]=new F(e,i[0].y),i[2].x<i[1].x&&(i[2].y>i[0].y?i[2]=i[1].copy():
i[1].Xa(i[2])),i[3].x<i[2].x&&(i[3].y>i[0].y?i[3]=i[2].copy():i[2]=i[3].copy()),r[0]=new F(0,s+g),r[1]=new F(e,r[0].y),r[2].x<r[1].x&&(r[2].y<r[0].y?r[2]=r[1].copy():r[1].Xa(r[2])),r[3].x<r[2].x&&(r[3].y<r[0].y?r[3]=r[2].copy():r[2]=r[3].copy()),i[2].x-=d/2,r[2].x-=d/2);b.Yp=i;b.Mq=r;b.Ba.V(j,s);b.Pa.V(M,N)}break;default:w.m("Unhandled compaction value "+b.ug.toString())}}}
function Ip(a,b){u&&w.i(b,Y,W,"layoutTreeNone:v");if(0===b.Nl){var c=q,d=0,e=Ap;b.ib!==n&&(d=b.ib.oc,e=b.ib.Aa,c=Bp(e));e=Gp(b);b.Z.V(0,0);b.Pa.V(b.width,b.height);b.ib!==n&&b.Fd!==n&&((180===d||270===d)&&!c||e)?180===d&&!c||(90===d||270===d)&&e?b.Ba.V(b.width-2*b.K.x,0):b.Ba.V(0,b.height-2*b.K.y):b.Ba.V(0,0)}else{for(var c=Kp(b),d=90===c||270===c,g=0,e=b.Zb,i=e.length,j=0;j<i;j++)var k=e[j],g=Math.max(g,d?k.Pa.width:k.Pa.height);var l=b.Aa,m=l===Lp,p=l===Mp,r=Bp(l),s=Math.max(0,b.rg),v=Np(b),y=b.sd,
C=Op(b),E=m||p?0:C/2,I=b.Fe,D=0;if(m||p||b.yk||b.zk&&1===b.$h)D=Math.max(0,b.dd);var m=b.width,M=b.height,N=0,Z=0,va=0,ka=0,ta=0,Da=0,Ha=0,cb=0,rb=0,Xa=0;r&&!Fp(l)&&135<c&&e.reverse();if(Fp(l))if(1<i)for(j=0;j<i;j++){var k=e[j],Na=k.Pa;0===j%2&&j!==i-1?rb=Math.max(rb,(d?Na.width:Na.height)+$p(k)-y):0!==j%2&&(Xa=Math.max(Xa,(d?Na.width:Na.height)+$p(k)-y))}else 1===i&&(rb=d?e[0].Pa.width:e[0].Pa.height);if(r)switch(l){case Cp:case sp:Z=135>c?Pp(b,e,rb,N,Z):Qp(b,e,rb,N,Z);rb=Z[0];N=Z[1];Z=Z[2];break;
case Dp:for(j=0;j<i;j++)k=e[j],Na=k.Pa,s=0===Ha?0:I,d?(k.Z.V(g-Na.width,ta+s),N=Math.max(N,Na.width),Z=Math.max(Z,ta+s+Na.height),ta+=s+Na.height):(k.Z.V(ka+s,g-Na.height),N=Math.max(N,ka+s+Na.width),Z=Math.max(Z,Na.height),ka+=s+Na.width),Ha++;break;case Ep:for(g=0;g<i;g++)k=e[g],Na=k.Pa,s=0===Ha?0:I,d?(k.Z.V(y/2+b.K.x,ta+s),N=Math.max(N,Na.width),Z=Math.max(Z,ta+s+Na.height),ta+=s+Na.height):(k.Z.V(ka+s,y/2+b.K.y),N=Math.max(N,ka+s+Na.width),Z=Math.max(Z,Na.height),ka+=s+Na.width),Ha++}else for(j=
0;j<i;j++)k=e[j],Na=k.Pa,d?(0<s&&(0<Ha&&ka+y+Na.width>s)&&(ka<g&&Rp(b,l,g-ka,0,cb,j-1),Da++,Ha=0,cb=j,va=Z,ka=0,ta=135<c?-Z-I:Z+I),Xa=0===Ha?E:y,Sp(a,k,0,ta),k.Z.V(ka+Xa,ta),N=Math.max(N,ka+Xa+Na.width),Z=Math.max(Z,va+(0===Da?0:I)+Na.height),ka+=Xa+Na.width):(0<s&&(0<Ha&&ta+y+Na.height>s)&&(ta<g&&Rp(b,l,0,g-ta,cb,j-1),Da++,Ha=0,cb=j,va=N,ta=0,ka=135<c?-N-I:N+I),Xa=0===Ha?E:y,Sp(a,k,ka,0),k.Z.V(ka,ta+Xa),Z=Math.max(Z,ta+Xa+Na.height),N=Math.max(N,va+(0===Da?0:I)+Na.width),ta+=Xa+Na.height),Ha++;0<
Da&&(d?(Z+=Math.max(0,v),ka<N&&Rp(b,l,N-ka,0,cb,i-1),0<D&&(p||Up(b,D,0,0,i-1),N+=D)):(N+=Math.max(0,v),ta<Z&&Rp(b,l,0,Z-ta,cb,i-1),0<D&&(p||Up(b,0,D,0,i-1),Z+=D)));D=p=0;switch(l){case Wp:d?p+=N/2-b.K.x-C/2:D+=Z/2-b.K.y-C/2;break;case Ap:0<Da?d?p+=N/2-b.K.x-C/2:D+=Z/2-b.K.y-C/2:d?(l=e[0].Z.x+e[0].Ba.x,y=e[i-1].Z.x+e[i-1].Ba.x+2*e[i-1].K.x,p+=l+(y-l)/2-b.K.x-C/2):(l=e[0].Z.y+e[0].Ba.y,y=e[i-1].Z.y+e[i-1].Ba.y+2*e[i-1].K.y,D+=l+(y-l)/2-b.K.y-C/2);break;case Lp:d?(p-=C,N+=C):(D-=C,Z+=C);break;case Mp:d?
(p+=N-b.width+C,N+=C):(D+=Z-b.height+C,Z+=C);break;case Cp:case sp:d?p=1<i?p+(rb+y/2-b.K.x):p+(e[0].K.x-b.K.x+e[0].Ba.x):D=1<i?D+(rb+y/2-b.K.y):D+(e[0].K.y-b.K.y+e[0].Ba.y);break;case Dp:d?p+=N+y/2-b.K.x:D+=Z+y/2-b.K.y;break;case Ep:break;default:w.m("Unhandled alignment value "+l.toString())}for(j=0;j<i;j++)k=e[j],d?k.Z.V(k.Z.x+k.Ba.x-p,k.Z.y+(135<c?(r?-Z:-k.Pa.height)+k.Ba.y-v:M+v+k.Ba.y)):k.Z.V(k.Z.x+(135<c?(r?-N:-k.Pa.width)+k.Ba.x-v:m+v+k.Ba.x),k.Z.y+k.Ba.y-D);d?(N=Xp(b,N,p),0>p&&(p=0),135<c&&
(D+=Z+v),Z+=M+v):(135<c&&(p+=N+v),N+=m+v,Z=Yp(b,Z,D),0>D&&(D=0));b.Ba.V(p,D);b.Pa.V(N,Z)}}
function Pp(a,b,c,d,e){u&&w.i(a,Y,W,"layoutBusChildrenPosDir:v");var g=b.length;if(0===g)return[c,d,e];if(1===g){var i=b[0],d=i.Pa.width,e=i.Pa.height;return[c,d,e]}for(var j=a.sd,k=a.Fe,l=90===Kp(a),m=0,p=0,r=0,s=0;s<g;s++)if(!(0!==s%2||1<g&&s===g-1)){var i=b[s],v=i.Pa,y=0===m?0:k;if(l){var C=$p(i)-j;i.Z.V(c-(v.width+C),r+y);d=Math.max(d,v.width+C);e=Math.max(e,r+y+v.height);r+=y+v.height}else C=$p(i)-j,i.Z.V(p+y,c-(v.height+C)),e=Math.max(e,v.height+C),d=Math.max(d,p+y+v.width),p+=y+v.width;m++}var m=
0,E=p,I=r;l?(p=c+j,r=0):(p=0,r=c+j);for(s=0;s<g;s++)0!==s%2&&(i=b[s],v=i.Pa,y=0===m?0:k,l?(C=$p(i)-j,i.Z.V(p+C,r+y),d=Math.max(d,p+v.width+C),e=Math.max(e,r+y+v.height),r+=y+v.height):(C=$p(i)-j,i.Z.V(p+y,r+C),d=Math.max(d,p+y+v.width),e=Math.max(e,r+v.height+C),p+=y+v.width),m++);1<g&&1===g%2&&(i=b[g-1],v=i.Pa,b=aq(i,l?Math.max(Math.abs(I),Math.abs(r)):Math.max(Math.abs(E),Math.abs(p))),l?(i.Z.V(c+j/2-i.K.x-i.Ba.x,e+b),l=c+j/2-i.K.x-i.Ba.x,d=Math.max(d,l+v.width),0>l&&(d-=l),e=Math.max(e,Math.max(I,
r)+b+v.height),0>i.Z.x&&(c=bq(a,i.Z.x,q,c,j))):(i.Z.V(d+b,c+j/2-i.K.y-i.Ba.y),d=Math.max(d,Math.max(E,p)+b+v.width),l=c+j/2-i.K.y-i.Ba.y,e=Math.max(e,l+v.height),0>l&&(e-=l),0>i.Z.y&&(c=bq(a,i.Z.y,h,c,j))));return[c,d,e]}
function Qp(a,b,c,d,e){u&&w.i(a,Y,W,"layoutBusChildrenNegDir:v");var g=b.length;if(0===g)return[c,d,e];if(1===g){var i=b[0],d=i.Pa.width,e=i.Pa.height;return[c,d,e]}for(var j=a.sd,k=a.Fe,l=270===Kp(a),m=0,p=0,r=0,s=0;s<g;s++)if(!(0!==s%2||1<g&&s===g-1)){var i=b[s],v=i.Pa,y=0===m?0:k;if(l){var C=$p(i)-j,r=r-(y+v.height);i.Z.V(c-(v.width+C),r);d=Math.max(d,v.width+C);e=Math.max(e,Math.abs(r))}else C=$p(i)-j,p-=y+v.width,i.Z.V(p,c-(v.height+C)),e=Math.max(e,v.height+C),d=Math.max(d,Math.abs(p));m++}var m=
0,E=p,I=r;l?(p=c+j,r=0):(p=0,r=c+j);for(s=0;s<g;s++)0!==s%2&&(i=b[s],v=i.Pa,y=0===m?0:k,l?(C=$p(i)-j,r-=y+v.height,i.Z.V(p+C,r),d=Math.max(d,p+v.width+C),e=Math.max(e,Math.abs(r))):(C=$p(i)-j,p-=y+v.width,i.Z.V(p,r+C),e=Math.max(e,r+v.height+C),d=Math.max(d,Math.abs(p))),m++);1<g&&1===g%2&&(i=b[g-1],v=i.Pa,k=aq(i,l?Math.max(Math.abs(I),Math.abs(r)):Math.max(Math.abs(E),Math.abs(p))),l?(i.Z.V(c+j/2-i.K.x-i.Ba.x,-e-v.height-k),p=c+j/2-i.K.x-i.Ba.x,d=Math.max(d,p+v.width),0>p&&(d-=p),e=Math.max(e,Math.abs(Math.min(I,
r))+k+v.height),0>i.Z.x&&(c=bq(a,i.Z.x,q,c,j))):(i.Z.V(-d-v.width-k,c+j/2-i.K.y-i.Ba.y),d=Math.max(d,Math.abs(Math.min(E,p))+k+v.width),p=c+j/2-i.K.y-i.Ba.y,e=Math.max(e,p+v.height),0>p&&(e-=p),0>i.Z.y&&(c=bq(a,i.Z.y,h,c,j))));for(s=0;s<g;s++)i=b[s],l?i.Z.V(i.Z.x,i.Z.y+e):i.Z.V(i.Z.x+d,i.Z.y);return[c,d,e]}function $p(a){u&&w.i(a,Y,W,"fixRelativePostions:child");return a.parent===n?0:a.parent.Kv}function aq(a){u&&w.i(a,Y,W,"fixRelativePostions:lastchild");return a.parent===n?0:a.parent.Tv}
function bq(a,b,c,d,e){u&&w.i(a,Y,W,"fixRelativePostions:v");for(var a=a.Zb,g=a.length,i=0;i<g;i++)c?a[i].Z.V(a[i].Z.x,a[i].Z.y-b):a[i].Z.V(a[i].Z.x-b,a[i].Z.y);b=a[g-1];return Math.max(d,c?b.Ba.y+b.K.y-e/2:b.Ba.x+b.K.x-e/2)}
function Xp(a,b,c){u&&w.i(a,Y,W,"calculateSubwidth:v");switch(a.Aa){case Ap:case Wp:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Lp:return a.width>b?a.width:b;case Mp:return 2*a.K.x>b?a.width:b+a.width-2*a.K.x;case Cp:case sp:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case Dp:return a.width-a.K.x+a.sd/2+b;case Ep:return Math.max(a.width,a.K.x+a.sd/2+b);default:return b}}
function Yp(a,b,c){u&&w.i(a,Y,W,"calculateSubheight:v");switch(a.Aa){case Ap:case Wp:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Lp:return a.height>b?a.height:b;case Mp:return 2*a.K.y>b?a.height:b+a.height-2*a.K.y;case Cp:case sp:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case Dp:return a.height-a.K.y+a.sd/2+b;case Ep:return Math.max(a.height,a.K.y+a.sd/2+b);default:return b}}
function Zp(a,b,c){u&&w.i(a,ja,W,"alignOffset:align");switch(a){case Wp:b/=2;c/=2;break;case Ap:b/=2;c/=2;break;case Lp:c=b=0;break;case Mp:break;default:w.m("Unhandled alignment value "+a.toString())}return[b,c]}function Rp(a,b,c,d,e,g){u&&w.i(a,Y,W,"shiftRelPosAlign:v");u&&w.i(b,ja,W,"shiftRelPosAlign:align");b=Zp(b,c,d);Up(a,b[0],b[1],e,g)}function Up(a,b,c,d,e){u&&w.i(a,Y,W,"shiftRelPos:v");if(!(0===b&&0===c))for(a=a.Zb;d<=e;d++){var g=a[d].Z;g.x+=b;g.y+=c}}
function Sp(a,b,c,d){u&&(w.i(b,Y,W,"recordMidPoints:v"),w.k(c,"number",W,"recordMidPoints:x"),w.k(d,"number",W,"recordMidPoints:y"));var e=b.ib;switch(a.af){case bp:for(a=b.Hb;a.next();)b=a.value,b.U===e&&b.Eq.V(c,d);break;case ip:for(a=b.Gb;a.next();)b=a.value,b.Q===e&&b.Eq.V(c,d);break;default:w.m("Unhandled path value "+a.af.toString())}}function Vp(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function Tp(a,b,c,d,e,g){u&&w.i(a,Y,W,"mergeFringes:parent");u&&w.i(b,Y,W,"mergeFringes:child");var i=Kp(a),j=90===i||270===i,k=a.sd,l=e,m=g,p=b.Yp,e=b.Mq,g=b.Pa,a=j?Math.max(m,g.height):Math.max(l,g.width);if(p===n||i!==Kp(b))p=[],e=[],j?(p[0]=new F(0,0),p[1]=new F(0,g.height),e[0]=new F(g.width,0),e[1]=new F(e[0].x,p[1].y)):(p[0]=new F(0,0),p[1]=new F(g.width,0),e[0]=new F(0,g.height),e[1]=new F(p[1].x,e[0].y));if(j){b=j=l;i=p;l=9999999;if(!(d===n||2>d.length||i===n||2>i.length))for(var r=m=0;m<
d.length&&r<i.length;){var s=d[m],v=i[r].copy();v.x+=j;var y=s;m+1<d.length&&(y=d[m+1]);var C=v;r+1<i.length&&(C=i[r+1].copy(),C.x+=j);var E=l;s.y===v.y?E=v.x-s.x:s.y>v.y&&s.y<C.y?E=v.x+(s.y-v.y)/(C.y-v.y)*(C.x-v.x)-s.x:v.y>s.y&&v.y<y.y&&(E=v.x-(s.x+(v.y-s.y)/(y.y-s.y)*(y.x-s.x)));E<l&&(l=E);y.y<=s.y?m++:C.y<=v.y?r++:(y.y<=C.y&&m++,C.y<=y.y&&r++)}b-=l;b+=k;k=p;p=b;if(c===n||2>c.length||k===n||2>k.length)c=n;else{i=[];for(l=j=r=0;j<k.length&&k[j].y<c[0].y;)m=k[j++].copy(),m.x+=p,i[l++]=m;for(;r<c.length;)m=
c[r++].copy(),i[l++]=m;for(c=c[c.length-1].y;j<k.length&&k[j].y<=c;)j++;for(;j<k.length&&k[j].y>c;)m=k[j++].copy(),m.x+=p,i[l++]=m;c=i}j=e;l=b;if(d===n||2>d.length||j===n||2>j.length)d=n;else{e=[];for(p=m=k=0;k<d.length&&d[k].y<j[0].y;)i=d[k++].copy(),e[p++]=i;for(;m<j.length;)i=j[m++].copy(),i.x+=l,e[p++]=i;for(j=j[j.length-1].y;k<d.length&&d[k].y<=j;)k++;for(;k<d.length&&d[k].y>j;)i=d[k++].copy(),e[p++]=i;d=e}e=Math.max(0,b)+g.width;g=a}else{b=j=m;i=p;l=9999999;if(!(d===n||2>d.length||i===n||2>
i.length))for(r=m=0;m<d.length&&r<i.length;)s=d[m],v=i[r].copy(),v.y+=j,y=s,m+1<d.length&&(y=d[m+1]),C=v,r+1<i.length&&(C=i[r+1].copy(),C.y+=j),E=l,s.x===v.x?E=v.y-s.y:s.x>v.x&&s.x<C.x?E=v.y+(s.x-v.x)/(C.x-v.x)*(C.y-v.y)-s.y:v.x>s.x&&v.x<y.x&&(E=v.y-(s.y+(v.x-s.x)/(y.x-s.x)*(y.y-s.y))),E<l&&(l=E),y.x<=s.x?m++:C.x<=v.x?r++:(y.x<=C.x&&m++,C.x<=y.x&&r++);b-=l;b+=k;k=p;p=b;if(c===n||2>c.length||k===n||2>k.length)c=n;else{i=[];for(l=j=r=0;j<k.length&&k[j].x<c[0].x;)m=k[j++].copy(),m.y+=p,i[l++]=m;for(;r<
c.length;)m=c[r++].copy(),i[l++]=m;for(c=c[c.length-1].x;j<k.length&&k[j].x<=c;)j++;for(;j<k.length&&k[j].x>c;)m=k[j++].copy(),m.y+=p,i[l++]=m;c=i}j=e;l=b;if(d===n||2>d.length||j===n||2>j.length)d=n;else{e=[];for(p=m=k=0;k<d.length&&d[k].x<j[0].x;)i=d[k++].copy(),e[p++]=i;for(;m<j.length;)i=j[m++].copy(),i.y+=l,e[p++]=i;for(j=j[j.length-1].x;k<d.length&&d[k].x<=j;)k++;for(;k<d.length&&d[k].x>j;)i=d[k++].copy(),e[p++]=i;d=e}e=a;g=Math.max(0,b)+g.height}return[b,c,d,e,g]}
function op(a,b,c,d){if(b!==n){u&&w.i(b,Y,W,"assignAbsolutePositions:v");b.x=c;b.y=d;for(var b=b.Zb,e=b.length,g=0;g<e;g++){var i=b[g];op(a,i,c+i.Z.x,d+i.Z.y)}}}W.prototype.commitLayout=W.prototype.dv=function(){this.Tz();this.commitNodes();this.fs&&this.commitLinks()};W.prototype.commitNodes=W.prototype.Py=function(){for(var a=this.B.ka.l,b;a.next();)b=a.value,b.commit();for(a.reset();a.next();)b=a.value,this.layoutComments(b)};W.prototype.commitLinks=W.prototype.Oy=function(){for(var a=this.B.mc.l;a.next();)a.value.commit()};
W.prototype.Tz=function(){for(var a=this.cd.l;a.next();){var b=this.B.Le(a.value);hq(this,b)}};
function hq(a,b){if(b!==n){u&&w.i(b,Y,W,"setPortSpotsTree:v");u&&w.i(b,Y,W,"setPortSpots:v");var c=b.Aa;if(Bp(c)){u&&w.i(b,Y,W,"setPortSpotsBus:v");u&&w.i(c,ja,W,"setPortSpots:align");var d=a.af===bp,e=Kp(b),g;switch(e){case 0:g=Zb;break;case 90:g=$b;break;case 180:g=Tb;break;default:g=Sb}var i=b.Zb,j=i.length;switch(c){case Cp:case sp:for(c=0;c<j;c++){var k=i[c],k=d?k.Hb:k.Gb;if(k.next()){var l=k.value,l=l.Ra;if(l!==n){var m=90===e||270===e?Tb:Sb;if(1===j||c===j-1&&1===j%2)switch(e){case 0:m=Tb;
break;case 90:m=Sb;break;case 180:m=Zb;break;default:m=$b}else 0===c%2&&(m=90===e||270===e?Zb:$b);d?(b.Jj&&(l.kb=g),b.Ij&&(l.ob=m)):(b.Jj&&(l.kb=m),b.Ij&&(l.ob=g))}}}break;case Dp:m=90===e||270===e?Zb:$b;for(k=d?b.Gb:b.Hb;k.next();)l=k.value,l=l.Ra,l!==n&&(d?(b.Jj&&(l.kb=g),b.Ij&&(l.ob=m)):(b.Jj&&(l.kb=m),b.Ij&&(l.ob=g)));break;case Ep:m=90===e||270===e?Tb:Sb;for(k=d?b.Gb:b.Hb;k.next();)l=k.value,l=l.Ra,l!==n&&(d?(b.Jj&&(l.kb=g),b.Ij&&(l.ob=m)):(b.Jj&&(l.kb=m),b.Ij&&(l.ob=g)))}}else if(d=Kp(b),a.af===
bp)for(e=b.Gb;e.next();){if(g=e.value,g=g.Ra,g!==n){if(b.Jg)if(Cb(b.lf))switch(d){case 0:g.kb=Zb;break;case 90:g.kb=$b;break;case 180:g.kb=Tb;break;default:g.kb=Sb}else g.kb=b.lf;if(b.Ig)if(Cb(b.Ye))switch(d){case 0:g.ob=Tb;break;case 90:g.ob=Sb;break;case 180:g.ob=Zb;break;default:g.ob=$b}else g.ob=b.Ye}}else for(e=b.Hb;e.next();)if(g=e.value,g=g.Ra,g!==n){if(b.Jg)if(Cb(b.lf))switch(d){case 0:g.ob=Zb;break;case 90:g.ob=$b;break;case 180:g.ob=Tb;break;default:g.ob=Sb}else g.ob=b.lf;if(b.Ig)if(Cb(b.Ye))switch(d){case 0:g.kb=
Tb;break;case 90:g.kb=Sb;break;case 180:g.kb=Zb;break;default:g.kb=$b}else g.kb=b.Ye}d=b.Zb;e=d.length;for(g=0;g<e;g++)hq(a,d[g])}}function Kp(a){a=a.oc;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}function Np(a){u&&w.i(a,Y,W,"computeLayerSpacing:v");var b=Kp(a),b=90===b||270===b,c=a.Hd;if(0<a.Cg)var d=Math.min(1,a.Cg),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}
function Op(a){u&&w.i(a,Y,W,"computeNodeIndent:v");var b=Kp(a),b=90===b||270===b,c=a.jh;if(0<a.Fg)var d=Math.min(1,a.Fg),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}w.g(W,"roots",W.prototype.NH);w.defineProperty(W,{NH:"roots"},t("cd"),function(a){this.cd!==a&&(this.cd=a,this.F())});w.g(W,"path",W.prototype.path);w.defineProperty(W,{path:"path"},t("kh"),function(a){this.kh!==a&&(w.i(a,ja,W,"path"),this.kh=a,this.F())});w.g(W,"treeStyle",W.prototype.NE);
w.defineProperty(W,{NE:"treeStyle"},t("hr"),function(a){if(this.Rc!==a&&(u&&w.i(a,ja,W,"treeStyle"),a===cp||a===up||a===vp||a===tp))this.hr=a,this.F()});w.g(W,"arrangement",W.prototype.le);w.defineProperty(W,{le:"arrangement"},t("Rc"),function(a){if(this.Rc!==a&&(u&&w.i(a,ja,W,"arrangement"),a===dp||a===pp||a===hp))this.Rc=a,this.F()});w.g(W,"arrangementSpacing",W.prototype.Wu);w.defineProperty(W,{Wu:"arrangementSpacing"},t("Gf"),function(a){this.Gf.I(a)||(this.Gf.Xa(a),this.F())});
w.g(W,"rootDefaults",W.prototype.MH);w.defineProperty(W,{MH:"rootDefaults"},t("ia"),function(a){this.ia!==a&&(u&&w.i(a,Y,W,"rootDefaults"),this.ia=a,this.F())});w.g(W,"alternateDefaults",W.prototype.MF);w.defineProperty(W,{MF:"alternateDefaults"},t("ha"),function(a){this.ha!==a&&(u&&w.i(a,Y,W,"alternateDefaults"),this.ha=a,this.F())});w.g(W,"sorting",W.prototype.lg);
w.defineProperty(W,{lg:"sorting"},function(){return this.ia.uc},function(a){if(this.ia.uc!==a&&(u&&w.i(a,ja,W,"sorting"),a===wp||a===xp||a===yp||zp))this.ia.uc=a,this.F()});w.g(W,"comparer",W.prototype.xh);w.defineProperty(W,{xh:"comparer"},function(){return this.ia.rc},function(a){this.ia.rc!==a&&(u&&w.k(a,"function",W,"comparer"),this.ia.rc=a,this.F())});w.g(W,"angle",W.prototype.angle);
w.defineProperty(W,{angle:"angle"},function(){return this.ia.oc},function(a){if(this.ia.oc!==a&&(0===a||90===a||180===a||270===a))this.ia.oc=a,this.F()});w.g(W,"alignment",W.prototype.Db);w.defineProperty(W,{Db:"alignment"},function(){return this.ia.Aa},function(a){this.ia.Aa!==a&&(u&&w.jb(a,W,W,"alignment"),this.ia.Aa=a,this.F())});w.g(W,"nodeIndent",W.prototype.Bz);w.defineProperty(W,{Bz:"nodeIndent"},function(){return this.ia.jh},function(a){this.ia.jh!==a&&0<=a&&(this.ia.jh=a,this.F())});
w.g(W,"nodeIndentPastParent",W.prototype.Cz);w.defineProperty(W,{Cz:"nodeIndentPastParent"},function(){return this.ia.Fg},function(a){this.ia.Fg!==a&&(0<=a&&1>=a)&&(this.ia.Fg=a,this.F())});w.g(W,"nodeSpacing",W.prototype.Kv);w.defineProperty(W,{Kv:"nodeSpacing"},function(){return this.ia.sd},function(a){this.ia.sd!==a&&(this.ia.sd=a,this.F())});w.g(W,"layerSpacing",W.prototype.is);w.defineProperty(W,{is:"layerSpacing"},function(){return this.ia.Hd},function(a){this.ia.Hd!==a&&(this.ia.Hd=a,this.F())});
w.g(W,"layerSpacingParentOverlap",W.prototype.qz);w.defineProperty(W,{qz:"layerSpacingParentOverlap"},function(){return this.ia.Cg},function(a){this.ia.Cg!==a&&(0<=a&&1>=a)&&(this.ia.Cg=a,this.F())});w.g(W,"compaction",W.prototype.ev);w.defineProperty(W,{ev:"compaction"},function(){return this.ia.ug},function(a){if(this.ia.ug!==a&&(u&&w.i(a,ja,W,"compaction"),a===Hp||a===Jp))this.ia.ug=a,this.F()});w.g(W,"breadthLimit",W.prototype.Gy);
w.defineProperty(W,{Gy:"breadthLimit"},function(){return this.ia.rg},function(a){this.ia.rg!==a&&0<=a&&(this.ia.rg=a,this.F())});w.g(W,"rowSpacing",W.prototype.Tv);w.defineProperty(W,{Tv:"rowSpacing"},function(){return this.ia.Fe},function(a){this.ia.Fe!==a&&(this.ia.Fe=a,this.F())});w.g(W,"rowIndent",W.prototype.Mz);w.defineProperty(W,{Mz:"rowIndent"},function(){return this.ia.dd},function(a){this.ia.dd!==a&&0<=a&&(this.ia.dd=a,this.F())});w.g(W,"commentSpacing",W.prototype.My);
w.defineProperty(W,{My:"commentSpacing"},function(){return this.ia.Ed},function(a){this.ia.Ed!==a&&(this.ia.Ed=a,this.F())});w.g(W,"commentMargin",W.prototype.Ly);w.defineProperty(W,{Ly:"commentMargin"},function(){return this.ia.qc},function(a){this.ia.qc!==a&&(this.ia.qc=a,this.F())});w.g(W,"setsPortSpot",W.prototype.Jj);w.defineProperty(W,{Jj:"setsPortSpot"},function(){return this.ia.Jg},function(a){this.ia.Jg!==a&&(this.ia.Jg=a,this.F())});w.g(W,"portSpot",W.prototype.Fz);
w.defineProperty(W,{Fz:"portSpot"},function(){return this.ia.lf},function(a){this.ia.lf.I(a)||(this.ia.lf=a,this.F())});w.g(W,"setsChildPortSpot",W.prototype.Ij);w.defineProperty(W,{Ij:"setsChildPortSpot"},function(){return this.ia.Ig},function(a){this.ia.Ig!==a&&(this.ia.Ig=a,this.F())});w.g(W,"childPortSpot",W.prototype.Jy);w.defineProperty(W,{Jy:"childPortSpot"},function(){return this.ia.Ye},function(a){this.ia.Ye.I(a)||(this.ia.Ye=a,this.F())});w.g(W,"alternateSorting",W.prototype.XF);
w.defineProperty(W,{XF:"alternateSorting"},function(){return this.ha.uc},function(a){if(this.ha.uc!==a&&(u&&w.i(a,ja,W,"alternateSorting"),a===wp||a===xp||a===yp||zp))this.ha.uc=a,this.F()});w.g(W,"alternateComparer",W.prototype.KF);w.defineProperty(W,{KF:"alternateComparer"},function(){return this.ha.rc},function(a){this.ha.rc!==a&&(u&&w.k(a,"function",W,"alternateComparer"),this.ha.rc=a,this.F())});w.g(W,"alternateAngle",W.prototype.EF);
w.defineProperty(W,{EF:"alternateAngle"},function(){return this.ha.oc},function(a){if(this.ha.oc!==a&&(0===a||90===a||180===a||270===a))this.ha.oc=a,this.F()});w.g(W,"alternateAlignment",W.prototype.DF);w.defineProperty(W,{DF:"alternateAlignment"},function(){return this.ha.Aa},function(a){this.ha.Aa!==a&&(u&&w.jb(a,W,W,"alternateAlignment"),this.ha.Aa=a,this.F())});w.g(W,"alternateNodeIndent",W.prototype.PF);
w.defineProperty(W,{PF:"alternateNodeIndent"},function(){return this.ha.jh},function(a){this.ha.jh!==a&&0<=a&&(this.ha.jh=a,this.F())});w.g(W,"alternateNodeIndentPastParent",W.prototype.QF);w.defineProperty(W,{QF:"alternateNodeIndentPastParent"},function(){return this.ha.Fg},function(a){this.ha.Fg!==a&&(0<=a&&1>=a)&&(this.ha.Fg=a,this.F())});w.g(W,"alternateNodeSpacing",W.prototype.RF);
w.defineProperty(W,{RF:"alternateNodeSpacing"},function(){return this.ha.sd},function(a){this.ha.sd!==a&&(this.ha.sd=a,this.F())});w.g(W,"alternateLayerSpacing",W.prototype.NF);w.defineProperty(W,{NF:"alternateLayerSpacing"},function(){return this.ha.Hd},function(a){this.ha.Hd!==a&&(this.ha.Hd=a,this.F())});w.g(W,"alternateLayerSpacingParentOverlap",W.prototype.OF);
w.defineProperty(W,{OF:"alternateLayerSpacingParentOverlap"},function(){return this.ha.Cg},function(a){this.ha.Cg!==a&&(0<=a&&1>=a)&&(this.ha.Cg=a,this.F())});w.g(W,"alternateCompaction",W.prototype.JF);w.defineProperty(W,{JF:"alternateCompaction"},function(){return this.ha.ug},function(a){if(this.ha.ug!==a&&(u&&w.i(a,ja,W,"alternateCompaction"),a===Hp||a===Jp))this.ha.ug=a,this.F()});w.g(W,"alternateBreadthLimit",W.prototype.FF);
w.defineProperty(W,{FF:"alternateBreadthLimit"},function(){return this.ha.rg},function(a){this.ha.rg!==a&&0<=a&&(this.ha.rg=a,this.F())});w.g(W,"alternateRowSpacing",W.prototype.UF);w.defineProperty(W,{UF:"alternateRowSpacing"},function(){return this.ha.Fe},function(a){this.ha.Fe!==a&&(this.ha.Fe=a,this.F())});w.g(W,"alternateRowIndent",W.prototype.TF);w.defineProperty(W,{TF:"alternateRowIndent"},function(){return this.ha.dd},function(a){this.ha.dd!==a&&0<=a&&(this.ha.dd=a,this.F())});
w.g(W,"alternateCommentSpacing",W.prototype.IF);w.defineProperty(W,{IF:"alternateCommentSpacing"},function(){return this.ha.Ed},function(a){this.ha.Ed!==a&&(this.ha.Ed=a,this.F())});w.g(W,"alternateCommentMargin",W.prototype.HF);w.defineProperty(W,{HF:"alternateCommentMargin"},function(){return this.ha.qc},function(a){this.ha.qc!==a&&(this.ha.qc=a,this.F())});w.g(W,"alternateSetsPortSpot",W.prototype.WF);
w.defineProperty(W,{WF:"alternateSetsPortSpot"},function(){return this.ha.Jg},function(a){this.ha.Jg!==a&&(this.ha.Jg=a,this.F())});w.g(W,"alternatePortSpot",W.prototype.SF);w.defineProperty(W,{SF:"alternatePortSpot"},function(){return this.ha.lf},function(a){this.ha.lf.I(a)||(this.ha.lf=a,this.F())});w.g(W,"alternateSetsChildPortSpot",W.prototype.VF);w.defineProperty(W,{VF:"alternateSetsChildPortSpot"},function(){return this.ha.Ig},function(a){this.ha.Ig!==a&&(this.ha.Ig=a,this.F())});
w.g(W,"alternateChildPortSpot",W.prototype.GF);w.defineProperty(W,{GF:"alternateChildPortSpot"},function(){return this.ha.Ye},function(a){this.ha.Ye.I(a)||(this.ha.Ye=a,this.F())});var ap;W.PathDefault=ap=w.s(W,"PathDefault",-1);var bp;W.PathDestination=bp=w.s(W,"PathDestination",0);var ip;W.PathSource=ip=w.s(W,"PathSource",1);var wp;W.SortingForwards=wp=w.s(W,"SortingForwards",10);var xp;W.SortingReverse=xp=w.s(W,"SortingReverse",11);var yp;W.SortingAscending=yp=w.s(W,"SortingAscending",12);var zp;
W.SortingDescending=zp=w.s(W,"SortingDescending",13);var Wp;W.AlignmentCenterSubtrees=Wp=w.s(W,"AlignmentCenterSubtrees",20);var Ap;W.AlignmentCenterChildren=Ap=w.s(W,"AlignmentCenterChildren",21);var Lp;W.AlignmentStart=Lp=w.s(W,"AlignmentStart",22);var Mp;W.AlignmentEnd=Mp=w.s(W,"AlignmentEnd",23);var Cp;W.AlignmentBus=Cp=w.s(W,"AlignmentBus",24);var sp;W.AlignmentBusBranching=sp=w.s(W,"AlignmentBusBranching",25);var Dp;W.AlignmentTopLeftBus=Dp=w.s(W,"AlignmentTopLeftBus",26);var Ep;
W.AlignmentBottomRightBus=Ep=w.s(W,"AlignmentBottomRightBus",27);var Hp;W.CompactionNone=Hp=w.s(W,"CompactionNone",30);var Jp;W.CompactionBlock=Jp=w.s(W,"CompactionBlock",31);var cp;W.StyleLayered=cp=w.s(W,"StyleLayered",40);var vp;W.StyleLastParents=vp=w.s(W,"StyleLastParents",41);var up;W.StyleAlternating=up=w.s(W,"StyleAlternating",42);var tp;W.StyleRootOnly=tp=w.s(W,"StyleRootOnly",43);var dp;W.ArrangementVertical=dp=w.s(W,"ArrangementVertical",50);var pp;
W.ArrangementHorizontal=pp=w.s(W,"ArrangementHorizontal",51);var hp;W.ArrangementFixedRoots=hp=w.s(W,"ArrangementFixedRoots",52);function fp(){Vm.call(this)}w.P("TreeNetwork",fp);w.Da(fp,Vm);fp.prototype.createVertex=fp.prototype.wj=function(){return new Y};fp.prototype.createEdge=fp.prototype.Pn=function(){return new iq};
function Y(){Zm.call(this);this.ok=q;this.ib=n;this.Zb=[];this.$h=this.Rt=this.nt=this.vl=this.nI=0;this.Z=new F(0,0);this.Pa=new bb(0,0);this.Ba=new F(0,0);this.Mq=this.Yp=this.Fd=n;this.zk=this.yk=this.Rx=q;this.uc=wp;this.rc=dn;this.oc=0;this.Aa=Ap;this.Fg=this.jh=0;this.sd=20;this.Hd=50;this.Cg=0;this.ug=Jp;this.rg=0;this.Fe=25;this.Ed=this.dd=10;this.qc=20;this.Jg=h;this.lf=Ib;this.Ig=h;this.Ye=Ib}w.P("TreeVertex",Y);w.Da(Y,Zm);
function ep(a,b){b!==n&&(a.uc=b.uc,a.rc=b.rc,a.oc=b.oc,a.Aa=b.Aa,a.jh=b.jh,a.Fg=b.Fg,a.sd=b.sd,a.Hd=b.Hd,a.Cg=b.Cg,a.ug=b.ug,a.rg=b.rg,a.Fe=b.Fe,a.dd=b.dd,a.Ed=b.Ed,a.qc=b.qc,a.Jg=b.Jg,a.lf=b.lf,a.Ig=b.Ig,a.Ye=b.Ye)}w.g(Y,"initialized",Y.prototype.NG);w.defineProperty(Y,{NG:"initialized"},t("ok"),ba("ok"));w.g(Y,"parent",Y.prototype.parent);w.defineProperty(Y,{parent:"parent"},t("ib"),ba("ib"));w.g(Y,"children",Y.prototype.children);w.defineProperty(Y,{children:"children"},t("Zb"),ba("Zb"));
w.u(Y,{Nl:"childrenCount"},function(){return this.Zb.length});w.g(Y,"level",Y.prototype.bH);w.defineProperty(Y,{bH:"level"},t("vl"),ba("vl"));w.g(Y,"descendantCount",Y.prototype.mG);w.defineProperty(Y,{mG:"descendantCount"},t("nt"),ba("nt"));w.g(Y,"maxChildrenCount",Y.prototype.iH);w.defineProperty(Y,{iH:"maxChildrenCount"},t("Rt"),ba("Rt"));w.g(Y,"maxGenerationCount",Y.prototype.jH);w.defineProperty(Y,{jH:"maxGenerationCount"},t("$h"),ba("$h"));w.g(Y,"relativePosition",Y.prototype.FH);
w.defineProperty(Y,{FH:"relativePosition"},t("Z"),function(a){w.i(a,F,Y,"relativePosition");this.Z.set(a)});w.g(Y,"subtreeSize",Y.prototype.dI);w.defineProperty(Y,{dI:"subtreeSize"},t("Pa"),function(a){w.i(a,bb,Y,"subtreeSize");this.Pa.set(a)});w.g(Y,"subtreeOffset",Y.prototype.cI);w.defineProperty(Y,{cI:"subtreeOffset"},t("Ba"),function(a){w.i(a,F,Y,"subtreeOffset");this.Ba.set(a)});w.g(Y,"comments",Y.prototype.Ny);w.defineProperty(Y,{Ny:"comments"},t("Fd"),ba("Fd"));w.g(Y,"sorting",Y.prototype.lg);
w.defineProperty(Y,{lg:"sorting"},t("uc"),ba("uc"));w.g(Y,"comparer",Y.prototype.xh);w.defineProperty(Y,{xh:"comparer"},t("rc"),ba("rc"));w.g(Y,"angle",Y.prototype.angle);w.defineProperty(Y,{angle:"angle"},t("oc"),ba("oc"));w.g(Y,"alignment",Y.prototype.Db);w.defineProperty(Y,{Db:"alignment"},t("Aa"),ba("Aa"));w.g(Y,"nodeIndent",Y.prototype.Bz);w.defineProperty(Y,{Bz:"nodeIndent"},t("jh"),ba("jh"));w.g(Y,"nodeIndentPastParent",Y.prototype.Cz);
w.defineProperty(Y,{Cz:"nodeIndentPastParent"},t("Fg"),ba("Fg"));w.g(Y,"nodeSpacing",Y.prototype.Kv);w.defineProperty(Y,{Kv:"nodeSpacing"},t("sd"),ba("sd"));w.g(Y,"layerSpacing",Y.prototype.is);w.defineProperty(Y,{is:"layerSpacing"},t("Hd"),ba("Hd"));w.g(Y,"layerSpacingParentOverlap",Y.prototype.qz);w.defineProperty(Y,{qz:"layerSpacingParentOverlap"},t("Cg"),ba("Cg"));w.g(Y,"compaction",Y.prototype.ev);w.defineProperty(Y,{ev:"compaction"},t("ug"),ba("ug"));w.g(Y,"breadthLimit",Y.prototype.Gy);
w.defineProperty(Y,{Gy:"breadthLimit"},t("rg"),ba("rg"));w.g(Y,"rowSpacing",Y.prototype.Tv);w.defineProperty(Y,{Tv:"rowSpacing"},t("Fe"),ba("Fe"));w.g(Y,"rowIndent",Y.prototype.Mz);w.defineProperty(Y,{Mz:"rowIndent"},t("dd"),ba("dd"));w.g(Y,"commentSpacing",Y.prototype.My);w.defineProperty(Y,{My:"commentSpacing"},t("Ed"),ba("Ed"));w.g(Y,"commentMargin",Y.prototype.Ly);w.defineProperty(Y,{Ly:"commentMargin"},t("qc"),ba("qc"));w.g(Y,"setsPortSpot",Y.prototype.Jj);
w.defineProperty(Y,{Jj:"setsPortSpot"},t("Jg"),ba("Jg"));w.g(Y,"portSpot",Y.prototype.Fz);w.defineProperty(Y,{Fz:"portSpot"},t("lf"),ba("lf"));w.g(Y,"setsChildPortSpot",Y.prototype.Ij);w.defineProperty(Y,{Ij:"setsChildPortSpot"},t("Ig"),ba("Ig"));w.g(Y,"childPortSpot",Y.prototype.Jy);w.defineProperty(Y,{Jy:"childPortSpot"},t("Ye"),ba("Ye"));w.g(Y,"routeFirstRow",Y.prototype.RH);w.defineProperty(Y,{RH:"routeFirstRow"},t("Rx"),ba("Rx"));w.g(Y,"routeAroundCentered",Y.prototype.PH);
w.defineProperty(Y,{PH:"routeAroundCentered"},t("yk"),ba("yk"));w.g(Y,"routeAroundLastParent",Y.prototype.QH);w.defineProperty(Y,{QH:"routeAroundLastParent"},t("zk"),ba("zk"));function iq(){$m.call(this);this.Eq=new F(0,0)}w.P("TreeEdge",iq);w.Da(iq,$m);
iq.prototype.commit=iq.prototype.cv=function(){var a=this.Ra;if(a!==n&&a.Dh!==Tf){var b=this.B.Pb,c=n,d=n;switch(b.af){case bp:c=this.U;d=this.Q;break;case ip:c=this.Q;d=this.U;break;default:w.m("Unhandled path value "+b.af.toString())}if(!(c===n||d===n))if(b=this.Eq,0===b.x&&0===b.y&&!c.Rx){var e=c,g=d;u&&w.i(e,Y,iq,"adjustRouteForAngleChange:parent");u&&w.i(g,Y,iq,"adjustRouteForAngleChange:child");a=this.Ra;c=Kp(e);if(c!==Kp(g)&&(b=Np(e),d=e.Fb,e=g.Fb,!(0===c&&e.left-d.right<b+1||90===c&&e.top-
d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1))){a.cA();var e=a.wf===fk,g=a.fc,i=Bp(this.U.Aa);a.$k();0===c?(c=d.right+b/2,e?4===a.ja&&(b=a.p(3).y,a.J(1,new F(c-20,a.p(1).y)),a.A(2,new F(c-20,b)),a.A(3,new F(c,b)),a.A(4,new F(c+20,b)),a.J(5,new F(a.p(5).x,b))):g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ja&&(a.J(2,new F(c,a.p(2).y)),a.J(3,new F(c,a.p(3).y))):4===a.ja?a.A(2,new F(c,a.p(2).y)):3===a.ja?a.J(1,new F(c,a.p(2).y)):2===a.ja&&a.A(1,new F(c,a.p(1).y))):90===c?(b=d.bottom+
b/2,e?4===a.ja&&(c=a.p(3).x,a.J(1,new F(a.p(1).x,b-20)),a.A(2,new F(c,b-20)),a.A(3,new F(c,b)),a.A(4,new F(c,b+20)),a.J(5,new F(c,a.p(5).y))):g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ja&&(a.J(2,new F(a.p(2).x,b)),a.J(3,new F(a.p(3).x,b))):4===a.ja?a.A(2,new F(a.p(2).x,b)):3===a.ja?a.J(1,new F(a.p(2).x,b)):2===a.ja&&a.A(1,new F(a.p(1).x,b))):180===c?(c=d.left-b/2,e?4===a.ja&&(b=a.p(3).y,a.J(1,new F(c+20,a.p(1).y)),a.A(2,new F(c+20,b)),a.A(3,new F(c,b)),a.A(4,new F(c-20,b)),a.J(5,new F(a.p(5).x,b))):
g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ja&&(a.J(2,new F(c,a.p(2).y)),a.J(3,new F(c,a.p(3).y))):4===a.ja?a.A(2,new F(c,a.p(2).y)):3===a.ja?a.J(1,new F(c,a.p(2).y)):2===a.ja&&a.A(1,new F(c,a.p(1).y))):270===c&&(b=d.top-b/2,e?4===a.ja&&(c=a.p(3).x,a.J(1,new F(a.p(1).x,b+20)),a.A(2,new F(c,b+20)),a.A(3,new F(c,b)),a.A(4,new F(c,b-20)),a.J(5,new F(c,a.p(5).y))):g?i?a.J(3,new F(a.p(2).x,a.p(4).y)):6===a.ja&&(a.J(2,new F(a.p(2).x,b)),a.J(3,new F(a.p(3).x,b))):4===a.ja?a.A(2,new F(a.p(2).x,b)):3===a.ja?
a.J(1,new F(a.p(2).x,b)):2===a.ja&&a.A(1,new F(a.p(1).x,b)));a.ti()}}else{var d=c.Fb,j=Kp(c),e=Np(c),g=c.Fe;a.cA();var i=a.wf===fk,k=a.fc,l,m,p,r;a.$k();if(k||i){for(l=2;4<a.ja;)a.aE(2);m=a.p(1);p=a.p(2)}else{for(l=1;3<a.ja;)a.aE(1);m=a.p(0);p=a.p(a.ja-1)}r=a.p(a.ja-1);0===j?(c.Aa===Mp?(j=d.bottom+b.y,0===b.y&&m.y>r.y+c.dd&&(j=Math.min(j,Math.max(m.y,j-Op(c))))):c.Aa===Lp?(j=d.top+b.y,0===b.y&&m.y<r.y-c.dd&&(j=Math.max(j,Math.min(m.y,j+Op(c))))):j=c.yk||c.zk&&1===c.$h?d.top-c.Ba.y+b.y:d.y+d.height/
2+b.y,i?(a.A(l,new F(m.x,j)),l++,a.A(l,new F(d.right+e,j)),l++,a.A(l,new F(d.right+e+(b.x-g)/3,j)),l++,a.A(l,new F(d.right+e+2*(b.x-g)/3,j)),l++,a.A(l,new F(d.right+e+(b.x-g),j)),l++,a.A(l,new F(p.x,j))):(k&&(a.A(l,new F(d.right+e/2,m.y)),l++),a.A(l,new F(d.right+e/2,j)),l++,a.A(l,new F(d.right+e+b.x-(k?g/2:g),j)),l++,k&&a.A(l,new F(a.p(l-1).x,p.y)))):90===j?(c.Aa===Mp?(j=d.right+b.x,0===b.x&&m.x>r.x+c.dd&&(j=Math.min(j,Math.max(m.x,j-Op(c))))):c.Aa===Lp?(j=d.left+b.x,0===b.x&&m.x<r.x-c.dd&&(j=Math.max(j,
Math.min(m.x,j+Op(c))))):j=c.yk||c.zk&&1===c.$h?d.left-c.Ba.x+b.x:d.x+d.width/2+b.x,i?(a.A(l,new F(j,m.y)),l++,a.A(l,new F(j,d.bottom+e)),l++,a.A(l,new F(j,d.bottom+e+(b.y-g)/3)),l++,a.A(l,new F(j,d.bottom+e+2*(b.y-g)/3)),l++,a.A(l,new F(j,d.bottom+e+(b.y-g))),l++,a.A(l,new F(j,p.y))):(k&&(a.A(l,new F(m.x,d.bottom+e/2)),l++),a.A(l,new F(j,d.bottom+e/2)),l++,a.A(l,new F(j,d.bottom+e+b.y-(k?g/2:g))),l++,k&&a.A(l,new F(p.x,a.p(l-1).y)))):180===j?(c.Aa===Mp?(j=d.bottom+b.y,0===b.y&&m.y>r.y+c.dd&&(j=Math.min(j,
Math.max(m.y,j-Op(c))))):c.Aa===Lp?(j=d.top+b.y,0===b.y&&m.y<r.y-c.dd&&(j=Math.max(j,Math.min(m.y,j+Op(c))))):j=c.yk||c.zk&&1===c.$h?d.top-c.Ba.y+b.y:d.y+d.height/2+b.y,i?(a.A(l,new F(m.x,j)),l++,a.A(l,new F(d.left-e,j)),l++,a.A(l,new F(d.left-e+(b.x+g)/3,j)),l++,a.A(l,new F(d.left-e+2*(b.x+g)/3,j)),l++,a.A(l,new F(d.left-e+(b.x+g),j)),l++,a.A(l,new F(p.x,j))):(k&&(a.A(l,new F(d.left-e/2,m.y)),l++),a.A(l,new F(d.left-e/2,j)),l++,a.A(l,new F(d.left-e+b.x+(k?g/2:g),j)),l++,k&&a.A(l,new F(a.p(l-1).x,
p.y)))):270===j?(c.Aa===Mp?(j=d.right+b.x,0===b.x&&m.x>r.x+c.dd&&(j=Math.min(j,Math.max(m.x,j-Op(c))))):c.Aa===Lp?(j=d.left+b.x,0===b.x&&m.x<r.x-c.dd&&(j=Math.max(j,Math.min(m.x,j+Op(c))))):j=c.yk||c.zk&&1===c.$h?d.left-c.Ba.x+b.x:d.x+d.width/2+b.x,i?(a.A(l,new F(j,m.y)),l++,a.A(l,new F(j,d.top-e)),l++,a.A(l,new F(j,d.top-e+(b.y+g)/3)),l++,a.A(l,new F(j,d.top-e+2*(b.y+g)/3)),l++,a.A(l,new F(j,d.top-e+(b.y+g))),l++,a.A(l,new F(j,p.y))):(k&&(a.A(l,new F(m.x,d.top-e/2)),l++),a.A(l,new F(j,d.top-e/2)),
l++,a.A(l,new F(j,d.top-e+b.y+(k?g/2:g))),l++,k&&a.A(l,new F(p.x,a.p(l-1).y)))):w.m("Invalid angle "+j);a.ti()}}};w.g(iq,"relativePoint",iq.prototype.EH);w.defineProperty(iq,{EH:"relativePoint"},t("Eq"),function(a){this.Eq.set(a)});function jq(){this.Jm=[]}
function $j(a){var b=new jq,c;if("string"===typeof a)c=(new DOMParser).parseFromString(a,"text/xml");else if(a instanceof Document)c=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",n),c.appendChild(c.importNode(a.documentElement,h));else return n;a=c.getElementsByTagName("svg");if(0===a.length)return n;for(var d=a[0],e=c.getElementsByTagName("linearGradient"),g=c.getElementsByTagName("radialGradient"),a=0;a<e.length;a++){for(var i=e[a],j=ak(Fe,Ie,{start:ac,end:bc}),k=i.childNodes,
l=0;l<k.length;l++)if("stop"===k[l].tagName){var m=k[l].getAttribute("stop-color"),p=k[l].getAttribute("offset");-1!==p.indexOf("%")?j.addColorStop(0.01*parseFloat(p),m):j.addColorStop(parseFloat(p),m)}i=i.getAttribute("id");"string"===typeof i&&(b["_brush"+i]=j)}for(a=0;a<g.length;a++){i=g[a];j=ak(Fe,Je,{start:Ob,end:Ob});k=i.childNodes;for(l=0;l<k.length;l++)"stop"===k[l].tagName&&(m=k[l].getAttribute("stop-color"),p=k[l].getAttribute("offset"),-1!==p.indexOf("%")?j.addColorStop(0.01*parseFloat(p),
m):j.addColorStop(parseFloat(p),m));i=i.getAttribute("id");"string"===typeof i&&(b["_brush"+i]=j)}for(e=h;e;){e=q;g=c.getElementsByTagName("use");for(a=0;a<g.length;a++)j=g[a],0===j.childNodes.length&&(i=j.href,i!==f&&(i=c.getElementById(i.baseVal.substring(1)),i!==n&&(i=i.cloneNode(h),i.removeAttribute("id"),k=parseFloat(j.getAttribute("x")),l=parseFloat(j.getAttribute("y")),isNaN(k)&&(k=0),isNaN(l)&&(l=0),m=j.getAttribute("transform"),m===n&&(m=""),j.setAttribute("transform",m+" translate("+k+","+
l+")"),j.appendChild(i),"use"===i.tagName&&(e=h))))}kq(b,d,n);if(0===b.Jm.length)return n;if(1===b.Jm.length)return b.Jm[0];c=new x;for(a=0;a<b.Jm.length;a++)c.add(b.Jm[a]);return c}
function kq(a,b,c){var d=b.tagName;if(!("g"!==d&&"svg"!==d&&"use"!==d&&"symbol"!==d))for(var d=b.childNodes,e=0;e<d.length;e++){var g=d[e],i=n;if(g.getAttribute!==f){var j=g.getAttribute("transform");switch(g.tagName){case "g":j===n?kq(a,g,n):(i=new x,kq(a,g,i));break;case "use":j===n?kq(a,g,n):(i=new x,kq(a,g,i));break;case "symbol":if("use"!==b.tagName)break;i=new x;kq(a,g,i);var k=i,l=g;l.getAttribute("preserveAspectRatio");l.getAttribute("viewBox");k.scale=1;break;case "path":k=g;i=new V;k=k.getAttribute("d");
"string"===typeof k&&(i.RC=Bd(k));break;case "line":var m=g,i=new V,k=parseFloat(m.getAttribute("x1")),l=parseFloat(m.getAttribute("y1")),p=parseFloat(m.getAttribute("x2")),m=parseFloat(m.getAttribute("y2"));isNaN(k)&&(k=0);isNaN(l)&&(l=0);isNaN(p)&&(p=0);isNaN(m)&&(m=0);var r=new hd(pd);i.position=new F(Math.min(k,p),Math.min(l,m));0<(p-k)/(m-l)?(r.ma=0,r.na=0,r.C=Math.abs(p-k),r.D=Math.abs(m-l)):(r.ma=0,r.na=Math.abs(m-l),r.C=Math.abs(p-k),r.D=0);i.Vc=r;break;case "circle":p=g;i=new V;k=parseFloat(p.getAttribute("r"));
l=parseFloat(p.getAttribute("cx"));p=parseFloat(p.getAttribute("cy"));isNaN(k)?i=n:(isNaN(l)&&(l=0),isNaN(p)&&(p=0),m=new hd(rd),m.ma=0,m.na=0,m.C=2*k,m.D=2*k,i.position=new F(l-k,p-k),i.Vc=m);break;case "ellipse":m=g;i=new V;k=parseFloat(m.getAttribute("rx"));l=parseFloat(m.getAttribute("ry"));p=parseFloat(m.getAttribute("cx"));m=parseFloat(m.getAttribute("cy"));isNaN(p)&&(p=0);isNaN(m)&&(m=0);isNaN(k)||isNaN(l)?i=n:(r=new hd(rd),r.ma=0,r.na=0,r.C=2*k,r.D=2*l,i.position=new F(p-k,m-l),i.Vc=r);break;
case "rect":m=g;i=new V;k=parseFloat(m.getAttribute("height"));l=parseFloat(m.getAttribute("width"));p=parseFloat(m.getAttribute("x"));m=parseFloat(m.getAttribute("y"));isNaN(k)||isNaN(l)?i=n:(isNaN(p)&&(p=0),isNaN(m)&&(m=0),r=new hd(qd),r.ma=0,r.na=0,r.C=l,r.D=k,i.position=new F(p,m),i.Vc=r);break;case "polygon":i=lq(g);break;case "polyline":i=lq(g)}if(i!==n){i instanceof V&&(k=parseFloat(mq(a,g,"stroke-width")),isNaN(k)||(i.eb=k),k=mq(a,g,"stroke-linecap"),k!==n&&(i.zE=k),k=mq(a,g,"fill"),k!==n&&
-1!==k.indexOf("url")?(k=k.substring(k.indexOf("#")+1,k.length-1),k=a["_brush"+k],i.fill=k instanceof Fe?k:"black"):i.fill=k===n?"black":"none"===k?n:k,g=mq(a,g,"stroke"),g!==n&&-1!==g.indexOf("url")?(k=g.substring(g.indexOf("#")+1,g.length-1),k=a["_brush"+k],i.stroke=k instanceof Fe?k:"black"):i.stroke="none"===g?n:g,i.jz=h);if(j!==n){j=j.split(")");k=h;for(g=0;g<j.length;g++)/\(.*[^0-9\.,\s-]/.test(j[g])&&(k=q),/\(.*[0-9]-[0-9]/.test(j[g])&&(k=q);if(k)for(g=j.length-1;0<=g;g--)if(l=j[g],""!==l)switch(p=
l.indexOf("("),k=l.substring(0,p).replace(/\s*/,""),p=l.substring(p+1).split(/\s*[\s,]\s*/),k){case "rotate":nq(a,i,p);break;case "translate":k=i;l=parseFloat(p[0]);p=parseFloat(p[1]);if(!isNaN(l)||!isNaN(p))m=k.position.copy(),isNaN(m.x)&&(m.x=0),isNaN(m.y)&&(m.y=0),k.position=new F(l+m.x,p+m.y);break;case "scale":oq(a,i,p);break;case "skewX":pq(a,i,parseFloat(p[0])*Math.PI/180);break;case "skewY":qq(a,i,parseFloat(p[0])*Math.PI/180);break;case "matrix":rq(a,i,p)}}if(i instanceof x){j=i.elements.l;
k=g=0;l=i.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);for(;j.next();)p=j.value.position.copy(),isNaN(p.x)&&(p.x=0),isNaN(p.y)&&(p.y=0),p.x<g&&(g=p.x),p.y<k&&(k=p.y);l.x+=g;l.y+=k;i.position=l}c===n?a.Jm.push(i):c.add(i)}}}}
function rq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]),i=parseFloat(c[3]),j=parseFloat(c[4]),k=parseFloat(c[5]);if(!isNaN(d+e+g+i+j+k)){var l=b.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);if(b instanceof V){c=b.Vc.copy();if(c.type===qd)c=a.rr(c);else if(c.type===rd)c=sq(c);else if(c.type===pd){c.type=id;var a=new jd(c.ma,c.na),m=new Ed(td,c.C,c.D);a.za.add(m);c.sb.add(a)}c.offset(l.x,l.y);c.transform(d,e,g,i,j-l.x,k-l.y);a=c.normalize();b.Vc=c;l.x-=a.x;l.y-=a.y;
b.position=l}else{for(b=b.elements.l;b.next();)d=b.value.position.copy(),d.x+=l.x,d.y+=l.y,b.value.position=d;for(b.reset();b.next();)rq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=l.x,d.y-=l.y,b.value.position=d}}}
function nq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),g=parseFloat(c[2]);isNaN(e)&&(e=0);isNaN(g)&&(g=0);if(!isNaN(d)){var i=d*Math.PI/180,j=b.position.copy();isNaN(j.x)&&(j.x=0);isNaN(j.y)&&(j.y=0);if(b instanceof V){c=b.Vc.copy();c.type===rd?c=sq(c):c.type===qd&&(c=a.rr(c));if(c.type===id)c.rotate(d,e-j.x,g-j.y),g=c.normalize(),b.Vc=c,j.x-=g.x,j.y-=g.y,b.position=j;else{var d=c.ma-e+j.x,k=c.na-g+j.y,l=c.C-e+j.x,m=c.D-g+j.y,a=d*Math.cos(i)-k*Math.sin(i)+e-j.x,d=k*Math.cos(i)+d*Math.sin(i)+
g-j.y,e=l*Math.cos(i)-m*Math.sin(i)+e-j.x,g=m*Math.cos(i)+l*Math.sin(i)+g-j.y,l=Math.min(a,e),m=Math.min(d,g);c.ma=a-l;c.na=d-m;c.C=e-l;c.D=g-m;j.x+=l;j.y+=m;b.position=j;b.Vc=c}b.fill instanceof Fe&&(j=b.fill.copy(),c=Math.atan((0.5-j.start.y)/(0.5-j.start.x)),c+=i,j.start=new H((1-Math.cos(c))/2,(1-Math.sin(c))/2),j.end=new H((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.fill=j);b.stroke instanceof Fe&&(j=b.stroke.copy(),c=Math.atan((0.5-j.start.y)/(0.5-j.start.x)),c+=i,j.start=new H((1-Math.cos(c))/2,
(1-Math.sin(c))/2),j.end=new H((1+Math.cos(c))/2,(1+Math.sin(c))/2),b.stroke=j)}else{for(b=b.elements.l;b.next();)i=b.value.position.copy(),i.x+=j.x,i.y+=j.y,b.value.position=i;for(b.reset();b.next();)nq(a,b.value,c);for(b.reset();b.next();)i=b.value.position.copy(),i.x-=j.x,i.y-=j.y,b.value.position=i}}}
function oq(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]);if(!isNaN(d)){isNaN(e)&&(e=d);var g=b.position.copy();isNaN(g.x)&&(g.x=0);isNaN(g.y)&&(g.y=0);if(b instanceof V)a=b.Vc.copy(),g.x*=d,g.y*=e,b.position=g,a.scale(d,e),b.Vc=a;else{for(b=b.elements.l;b.next();)d=b.value.position.copy(),d.x+=g.x,d.y+=g.y,b.value.position=d;for(b.reset();b.next();)oq(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=g.x,d.y-=g.y,b.value.position=d}}}
function pq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Vc.copy();if(e.type===qd)e=a.rr(e);else if(e.type===rd)e=sq(e);else if(e.type===pd){e.type=id;var a=new jd(e.ma,e.na),g=new Ed(td,e.C,e.D);a.za.add(g);e.sb.add(a)}e.offset(d.x,d.y);e.transform(1,0,Math.tan(c),1,-d.x,-d.y);c=e.normalize();b.Vc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.l;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)pq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function qq(a,b,c){if(!isNaN(c)){var d=b.position.copy();isNaN(d.x)&&(d.x=0);isNaN(d.y)&&(d.y=0);if(b instanceof V){var e=b.Vc.copy();if(e.type===qd)e=a.rr(e);else if(e.type===rd)e=sq(e);else if(e.type===pd){e.type=id;var a=new jd(e.ma,e.na),g=new Ed(td,e.C,e.D);a.za.add(g);e.sb.add(a)}e.offset(d.x,d.y);e.transform(1,Math.tan(c),0,1,-d.x,-d.y);c=e.normalize();b.Vc=e;d.x-=c.x;d.y-=c.y;b.position=d}else{for(b=b.elements.l;b.next();)e=b.value.position.copy(),e.x+=d.x,e.y+=d.y,b.value.position=e;for(b.reset();b.next();)qq(a,
b.value,c);for(b.reset();b.next();)e=b.value.position.copy(),e.x-=d.x,e.y-=d.y,b.value.position=e}}}
function lq(a){var b=q;if("polygon"===a.tagName)b=h;else if("polyline"!==a.tagName)return n;var c=new V,d=a.getAttribute("points"),a=new hd,e=new z(jd),g=d.split(/\s*[\s,]\s*/);if(4>g.length)return n;for(var i,d=new z(Ed),j,k,l=1;l<g.length;l+=2){j=eval(g[l-1]);k=eval(g[l]);if("number"!==typeof j||isNaN(j)||"number"!==typeof k||isNaN(k))return n;1===l?i=new jd(j,k):d.add(new Ed(td,j,k))}b&&(b=new Ed(td,i.ma,i.na),b.close(),d.add(b));i.za=d;e.add(i);a.sb=e;i=a.normalize();c.position=new F(-i.x,-i.y);
c.Vc=a;return c}function mq(a,b,c){var d=b.getAttribute(c);"string"!==typeof d&&(d=b.style[c]);return"string"!==typeof d||""===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?mq(a,b,c):n):d}
function sq(a){var b=a.ma,c=a.na,d=a.C,e=a.D,g=Math.abs(d-b)/2,i=Math.abs(e-c)/2,b=Math.min(b,d)+g,c=Math.min(c,e)+i;new F;e=new jd(b,c-i);d=new Ed(Ld);d.Ub=b+ic*g;d.Ac=c-i;d.jg=b+g;d.kg=c-ic*i;d.C=b+g;d.D=c;e.za.add(d);d=new Ed(Ld);d.Ub=b+g;d.Ac=c+ic*i;d.jg=b+ic*g;d.kg=c+i;d.C=b;d.D=c+i;e.za.add(d);d=new Ed(Ld);d.Ub=b-ic*g;d.Ac=c+i;d.jg=b-g;d.kg=c+ic*i;d.C=b-g;d.D=c;e.za.add(d);d=new Ed(Ld);d.Ub=b-g;d.Ac=c-ic*i;d.jg=b-ic*g;d.kg=c-i;d.C=b;d.D=c-i;e.za.add(d);a.type=id;a.sb.add(e);return a}
jq.prototype.rr=function(a){var b=a.ma,c=a.na,d=a.C,e=a.D,g=Math.min(b,d),i=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new jd(g,i);e.za.add(new Ed(td,g+b,i));e.za.add(new Ed(td,g+b,i+c));e.za.add((new Ed(td,g,i+c)).close());a.type=id;a.sb.add(e);return a};window.go=ea;ea.version="1.1.3"; })(window);