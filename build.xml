<?xml version="1.0" encoding="UTF-8"?>

<project name="pinpoint-bootstrap-build" basedir="." default="deploy">
    <property environment="env"/>

    <property name="pinpoint.version" value="1.0.0-SNAPSHOT"/>

    <property name="pinpoint.bootstrap.dependency.jar" value="pinpoint-bootstrap-${pinpoint.version}-jar-with-dependencies.jar"/>
    <property name="pinpoint.bootstrap.jar" value="pinpoint-bootstrap-${pinpoint.version}.jar"/>


    <property name="maven.dir" value="${env.M2_HOME}"/>
    <property name="agent.dir" value="${basedir}/../deploy/pinpoint-agent/"/>
    <property name="target.dir" value="${basedir}/target/"/>


    <target name="deploy" depends="mvn.build.install, copy.agent">
    </target>

    <target name="copy.agent">
        <copy file="${target.dir}/${pinpoint.bootstrap.dependency.jar}" tofile="${agent.dir}/${pinpoint.bootstrap.jar}" overwrite="true">
        </copy>
    </target>

    <target name="mvn.build.install">
        <exec executable="${maven.dir}/bin/mvn.bat ">
            <arg value="-Dmaven.test.skip=true"/>
            <arg value="clean"/>
            <arg value="install"/>
            <!--<arg value="compile"/>-->
            <!--<arg value="jar:jar"/>-->
        </exec>
    </target>

    <target name="mvn.build.package">
        <exec executable="${maven.dir}/bin/mvn.bat ">
            <arg value="-Dmaven.test.skip=true"/>
            <arg value="package"/>
            <!--<arg value="compile"/>-->
            <!--<arg value="jar:jar"/>-->
        </exec>
    </target>


    <!--<target name="clean" >-->
    <!--<delete dir="${class.dir}/class/*"/>-->
    <!--<delete dir="${jar.dir}/jar/*"/>-->
    <!--<delete dir="${javadoc.dir}/doc/*"/>-->
    <!--</target>-->

</project>