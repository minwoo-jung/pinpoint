<?xml version="1.0" encoding="UTF-8"?>

<project name="pinpoint_profiler_build" basedir=".">
    <!-- 버전은 맨날 변경해야 됨 -->
    <property name="project.jar" value="pinpoint-profiler-0.0.3-SNAPSHOT.jar"/>
    <property name="maven.dir" value="C:\Develop\apache-maven-2.2.1"/>
    <property name="agent.dir" value="${basedir}/../deploy/agent/agentlib/lib"/>
    <property name="target.dir" value="${basedir}/target/"/>

    <target name="deploy" depends="mvn.build.install, copy.agent">
    </target>

    <target name="mvn.build.install">
        <exec executable="${maven.dir}/bin/mvn.bat">
            <arg value="-Dmaven.test.skip=true"/>
            <arg value="clean"/>
            <arg value="install"/>
        </exec>
    </target>

    <target name="copy.agent">
        <copy file="${target.dir}/${project.jar}"  todir="${agent.dir}" overwrite="true">
        </copy>
    </target>

    <target name="mvn.build.jar">
        <exec executable="${maven.dir}/bin/mvn.bat">
            <arg value="compile"/>
            <arg value="jar:jar"/>
        </exec>
    </target>


</project>